# Pallet Bazi Chart (å…«å­—æ’ç›˜ Pallet)

å®Œæ•´çš„ä¸­å›½ä¼ ç»Ÿå‘½ç†å…«å­—æ’ç›˜åŒºå—é“¾æ¨¡å—ï¼ŒåŸºäº Substrate FRAME æ¡†æ¶å¼€å‘ã€‚

[![License: MIT-0](https://img.shields.io/badge/License-MIT--0-blue.svg)](https://opensource.org/licenses/MIT-0)
[![Rust](https://img.shields.io/badge/rust-1.70%2B-orange.svg)](https://www.rust-lang.org/)
[![Substrate](https://img.shields.io/badge/substrate-polkadot--sdk-blue)](https://github.com/paritytech/polkadot-sdk)

## ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [API æ¥å£](#api-æ¥å£)
- [ç®—æ³•æ¨¡å—](#ç®—æ³•æ¨¡å—)
- [é…ç½®å‚æ•°](#é…ç½®å‚æ•°)
- [æµ‹è¯•](#æµ‹è¯•)
- [è®¾è®¡æ–‡æ¡£](#è®¾è®¡æ–‡æ¡£)
- [å¼€å‘è®¡åˆ’](#å¼€å‘è®¡åˆ’)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## é¡¹ç›®æ¦‚è¿°

æœ¬ Pallet å®ç°äº†ä¼ ç»Ÿå‘½ç†å…«å­—æ’ç›˜çš„å®Œæ•´åŠŸèƒ½ï¼ŒåŒ…æ‹¬å››æŸ±è®¡ç®—ã€å¤§è¿æ¨ç®—ã€äº”è¡Œåˆ†æã€ç¥ç…åˆ¤æ–­ç­‰ï¼Œæ”¯æŒé“¾ä¸Šå­˜å‚¨å’Œé“¾ä¸‹å…è´¹è®¡ç®—ä¸¤ç§æ¨¡å¼ã€‚

### âœ¨ æ ¸å¿ƒç‰¹ç‚¹

- **âœ… ç®—æ³•æƒå¨**: ä½¿ç”¨ä¸»æµæ´¾ç³»è¾°è—å¹²"æˆŠä¹™ç™¸"ï¼ˆ87.5% é¡¹ç›®æ”¯æŒï¼‰
- **âœ… ç²¾ç¡®è®¡ç®—**: å¯¿æ˜Ÿå¤©æ–‡å†ç®—æ³•ï¼ŒèŠ‚æ°”ç²¾åº¦è¾¾åˆ°ç§’çº§
- **âœ… çœŸå¤ªé˜³æ—¶ä¿®æ­£**: æ”¯æŒç»åº¦ä¿®æ­£ï¼ˆå¯¹è¥¿éƒ¨åœ°åŒºç‰¹åˆ«é‡è¦ï¼‰
- **âœ… å­æ—¶åŒæ¨¡å¼**: æ”¯æŒä¼ ç»Ÿæ´¾ï¼ˆ23:00 å±æ¬¡æ—¥ï¼‰å’Œç°ä»£æ´¾ï¼ˆ23:00 å±å½“æ—¥ï¼‰
- **âœ… éšç§ä¿æŠ¤**: åŠ å¯†å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œæ”¯æŒå››æŸ±ç´¢å¼•è®¡ç®—
- **âœ… å…è´¹è§£ç›˜**: Runtime API å®æ—¶è®¡ç®—ï¼Œæ—  Gas è´¹ç”¨
- **âœ… å¤šè¾“å…¥æ¨¡å¼**: æ”¯æŒå…¬å†ã€å†œå†ã€å››æŸ±ç›´æ¥è¾“å…¥

### ğŸ“Š åŠŸèƒ½å®Œæˆåº¦

- **åŸºç¡€æ¶æ„**: âœ… 100% (æ•°æ®ç±»å‹ã€å¸¸é‡è¡¨)
- **å››æŸ±è®¡ç®—**: âœ… 100% (å¹´/æœˆ/æ—¥/æ—¶æŸ±)
- **å¤§è¿è®¡ç®—**: âœ… 100% (èµ·è¿å¹´é¾„ã€å¤§è¿åºåˆ—)
- **äº”è¡Œåˆ†æ**: âœ… 100% (å¼ºåº¦è®¡ç®—ã€å–œç”¨ç¥)
- **ç©ºäº¡è®¡ç®—**: âœ… 100% (æ—¬ç©ºåˆ¤æ–­)
- **ç¥ç…è®¡ç®—**: âœ… 100% (32 ç§ç¥ç…)
- **æ˜Ÿè¿è®¡ç®—**: âœ… 100% (åäºŒé•¿ç”Ÿ)
- **åˆ‘å†²åˆ†æ**: âœ… 100% (åœ°æ”¯å…³ç³»)
- **è§£ç›˜ç³»ç»Ÿ**: âœ… 100% (æ ¼å±€ã€ç”¨ç¥ã€æ€§æ ¼)
- **åŠ å¯†å­˜å‚¨**: âœ… 100% (éšç§ä¿æŠ¤)
- **Runtime API**: âœ… 100% (å…è´¹è®¡ç®—)

**æ€»ä½“è¿›åº¦**: âœ… 100% (ç”Ÿäº§å°±ç»ª)

---

## æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ å››æŸ±è®¡ç®— (å¹´æœˆæ—¥æ—¶)

å®Œæ•´å®ç°ä¼ ç»Ÿå››æŸ±è®¡ç®—ï¼Œæ”¯æŒå…¬å†ã€å†œå†å’Œç›´æ¥è¾“å…¥ä¸‰ç§æ¨¡å¼ï¼š

- **æ—¥æŸ±è®¡ç®—**: åŸºäºå…¬å†æ—¥æœŸï¼Œä½¿ç”¨è”¡å‹’å…¬å¼
- **å¹´æŸ±è®¡ç®—**: åŸºäºç«‹æ˜¥èŠ‚æ°”äº¤æ¥
- **æœˆæŸ±è®¡ç®—**: åŸºäºèŠ‚æ°”ï¼ˆäº”è™éæœˆï¼‰
- **æ—¶æŸ±è®¡ç®—**: åŸºäºæ—¶è¾°ï¼ˆäº”é¼ éæ—¶ï¼‰ï¼Œæ”¯æŒå­æ—¶åŒæ¨¡å¼

### 2ï¸âƒ£ å¤§è¿æ¨ç®—

- **èµ·è¿å¹´é¾„**: æ ¹æ®é˜´é˜³å¹´ã€æ€§åˆ«å’ŒèŠ‚æ°”è·ç¦»è®¡ç®—
- **é¡ºé€†æ’åˆ—**: ç”·å¥³é˜´é˜³å¹´ä¸åŒï¼Œé¡ºé€†æœ‰åˆ«
- **å¤§è¿åºåˆ—**: è‡ªåŠ¨ç”Ÿæˆ 12 æ­¥å¤§è¿ï¼ˆ120 å¹´ï¼‰
- **åç¥å…³ç³»**: è®¡ç®—å¤§è¿ä¸æ—¥ä¸»çš„åç¥å…³ç³»

### 3ï¸âƒ£ äº”è¡Œå¼ºåº¦åˆ†æ

- **å¤©å¹²äº”è¡Œ**: è®¡ç®—å››æŸ±å¤©å¹²äº”è¡Œå¼ºåº¦
- **åœ°æ”¯è—å¹²**: æ ¹æ®è—å¹²æƒé‡è®¡ç®—äº”è¡Œ
- **æœˆä»¤æƒé‡**: æœˆä»¤äº”è¡Œé¢å¤–åŠ æˆ
- **å–œç”¨ç¥åˆ¤æ–­**: æ ¹æ®äº”è¡Œå¼ºå¼±è‡ªåŠ¨æ¨å¯¼

### 4ï¸âƒ£ ç¥ç…è®¡ç®—

æ”¯æŒ 32 ç§å¸¸è§ç¥ç…ï¼ŒåŒ…æ‹¬ï¼š

- **å‰ç¥**: å¤©ä¹™è´µäººã€å¤©å¾·è´µäººã€æœˆå¾·è´µäººã€æ–‡æ˜Œè´µäººç­‰
- **å‡¶ç¥**: ç¾Šåˆƒã€åŠ«ç…ã€äº¡ç¥ã€å­¤è¾°å¯¡å®¿ç­‰
- **æ¡ƒèŠ±**: å’¸æ± æ¡ƒèŠ±ã€çº¢é¸¾ç­‰

### 5ï¸âƒ£ ç©ºäº¡åˆ¤æ–­

- **æ—¬ç©ºè®¡ç®—**: æ ¹æ®æ—¥æŸ±æŸ¥è¯¢å…­åç”²å­æ—¬ç©º
- **è½ç©ºåˆ¤æ–­**: åˆ¤æ–­å››æŸ±åœ°æ”¯æ˜¯å¦è½ç©ºäº¡
- **å½±å“åˆ†æ**: ç©ºäº¡å¯¹å‘½å±€çš„å½±å“

### 6ï¸âƒ£ æ˜Ÿè¿ï¼ˆåäºŒé•¿ç”Ÿï¼‰

- **æ—¥ä¸»çŠ¶æ€**: è®¡ç®—æ—¥ä¸»åœ¨å››æŸ±å„æ”¯çš„åäºŒé•¿ç”ŸçŠ¶æ€
- **æ—ºè¡°åˆ¤æ–­**: é•¿ç”Ÿã€å¸æ—ºä¸ºæ—ºï¼Œæ­»ã€ç»ä¸ºè¡°
- **å‘½ç†æ„ä¹‰**: è¾…åŠ©åˆ†æå‘½ä¸»çš„è¿åŠ¿èµ·ä¼

### 7ï¸âƒ£ åˆ‘å†²åˆä¼š

- **åœ°æ”¯å…³ç³»**: ä¸‰åˆã€å…­åˆã€ä¸‰ä¼šã€å…­å†²ã€å…­å®³ã€ä¸‰åˆ‘
- **å¤©å¹²å…³ç³»**: å¤©å¹²äº”åˆã€ç›¸å†²ã€ç›¸å…‹
- **å½±å“åˆ†æ**: åˆ‘å†²åˆä¼šå¯¹å‘½å±€çš„ä½œç”¨

### 8ï¸âƒ£ è§£ç›˜ç³»ç»Ÿ (V3)

è½»é‡åŒ–è§£ç›˜ï¼Œæ”¯æŒé“¾ä¸Šç¼“å­˜å’Œé“¾ä¸‹å®æ—¶è®¡ç®—ï¼š

- **æ ¸å¿ƒæŒ‡æ ‡** (13 bytes): æ ¼å±€ã€å¼ºå¼±ã€ç”¨ç¥ã€å–œç¥ã€å¿Œç¥ã€è¯„åˆ†ã€å¯ä¿¡åº¦
- **æ€§æ ¼åˆ†æ**: ä¸»è¦ç‰¹ç‚¹ã€ä¼˜ç‚¹ã€ç¼ºç‚¹ã€é€‚åˆèŒä¸š
- **æ‰©å±•å¿Œç¥**: æ¬¡å¿Œç¥åˆ—è¡¨

### 9ï¸âƒ£ åŠ å¯†å­˜å‚¨

éšç§ä¿æŠ¤ç‰ˆæœ¬ï¼Œæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼š

- **å››æŸ±ç´¢å¼•**: 8 bytes æ˜æ–‡ï¼ˆç”¨äºè®¡ç®—ï¼‰
- **åŠ å¯†æ•°æ®**: æœ€å¤§ 256 bytesï¼ˆå‡ºç”Ÿæ—¶é—´ç­‰ï¼‰
- **å¯†é’¥ç®¡ç†**: ç”¨æˆ·é’±åŒ…ç­¾åæ´¾ç”Ÿå¯†é’¥
- **è§£ç›˜æ”¯æŒ**: åŸºäºç´¢å¼•å…è´¹è®¡ç®—è§£ç›˜

### ğŸ”Ÿ çœŸå¤ªé˜³æ—¶ä¿®æ­£

æ ¹æ®å‡ºç”Ÿåœ°ç»åº¦è‡ªåŠ¨ä¿®æ­£æ—¶å·®ï¼š

- **å…¬å¼**: çœŸå¤ªé˜³æ—¶ = åŒ—äº¬æ—¶é—´ + (ç»åº¦ - 120Â°) Ã— 4 åˆ†é’Ÿ/åº¦
- **åº”ç”¨åœºæ™¯**: è¥¿éƒ¨åœ°åŒºç”¨æˆ·ï¼ˆæ–°ç–†ã€è¥¿è—ç­‰ï¼‰
- **ä¿®æ­£èŒƒå›´**: Â±2 å°æ—¶ï¼ˆè¦†ç›–ä¸­å›½å…¨å¢ƒï¼‰

---

## æŠ€æœ¯æ¶æ„

### ğŸ“¦ æ¨¡å—ç»“æ„

```
pallet-bazi-chart/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs                    # Pallet ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ types.rs                  # æ•°æ®ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ constants.rs              # å¸¸é‡è¡¨ï¼ˆè—å¹²ã€çº³éŸ³ã€åç¥ï¼‰
â”‚   â”œâ”€â”€ runtime_api.rs            # Runtime API å®šä¹‰
â”‚   â”œâ”€â”€ interpretation.rs         # è§£ç›˜ç®—æ³• V3
â”‚   â”œâ”€â”€ calculations/             # æ ¸å¿ƒè®¡ç®—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs                # æ¨¡å—ç´¢å¼•
â”‚   â”‚   â”œâ”€â”€ ganzhi.rs             # å¹²æ”¯è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ sizhu.rs              # å››æŸ±è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ dayun.rs              # å¤§è¿è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ wuxing.rs             # äº”è¡Œå¼ºåº¦
â”‚   â”‚   â”œâ”€â”€ kongwang.rs           # ç©ºäº¡è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ xingyun.rs            # æ˜Ÿè¿ï¼ˆåäºŒé•¿ç”Ÿï¼‰
â”‚   â”‚   â”œâ”€â”€ shensha.rs            # ç¥ç…è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ xingchong.rs          # åˆ‘å†²åˆä¼š
â”‚   â”‚   â””â”€â”€ jieqi.rs              # èŠ‚æ°”è®¡ç®—
â”‚   â”œâ”€â”€ mock.rs                   # æµ‹è¯•ç¯å¢ƒ
â”‚   â””â”€â”€ tests.rs                  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ docs/                         # è¯¦ç»†è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ API_DESIGN.md             # API è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md # å®ç°æ€»ç»“
â”‚   â”œâ”€â”€ ZI_ZUO_GUIDE.md          # è‡ªååŠŸèƒ½æŒ‡å—
â”‚   â”œâ”€â”€ FRONTEND_DEBUG_GUIDE.md   # å‰ç«¯è°ƒè¯•æŒ‡å—
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Cargo.toml                    # ä¾èµ–é…ç½®
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

### ğŸ”‘ å…³é”®æ•°æ®ç±»å‹

#### åŸºç¡€ç±»å‹

- `TianGan` (å¤©å¹²): ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸
- `DiZhi` (åœ°æ”¯): å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥
- `GanZhi` (å¹²æ”¯): å…­åç”²å­
- `WuXing` (äº”è¡Œ): é‡‘æœ¨æ°´ç«åœŸ
- `ShiShen` (åç¥): æ¯”è‚©ã€åŠ«è´¢ã€é£Ÿç¥ã€ä¼¤å®˜ç­‰

#### å¤åˆç±»å‹

- `Zhu<T>`: å•ä¸ªæŸ±ï¼ˆå¹²æ”¯ + è—å¹² + çº³éŸ³ï¼‰
- `SiZhu<T>`: å››æŸ±ï¼ˆå¹´/æœˆ/æ—¥/æ—¶ + æ—¥ä¸»ï¼‰
- `DaYunInfo<T>`: å¤§è¿ä¿¡æ¯ï¼ˆèµ·è¿å¹´é¾„ + å¤§è¿åºåˆ—ï¼‰
- `BaziChart<T>`: å®Œæ•´å…«å­—ä¿¡æ¯

#### Runtime API ç±»å‹ï¼ˆæ— æ³›å‹ï¼‰

- `FullBaziChartForApi`: å®Œæ•´å…«å­—å‘½ç›˜ï¼ˆåŒ…å«ä¸»æ˜Ÿã€è—å¹²ã€å‰¯æ˜Ÿã€æ˜Ÿè¿ç­‰ï¼‰
- `EnhancedSiZhuForApi`: å¢å¼ºå››æŸ±ï¼ˆåŒ…å«æ‰€æœ‰è®¡ç®—å­—æ®µï¼‰
- `ZiZuoInfo`: è‡ªåä¿¡æ¯ï¼ˆæ—¥ä¸»åä¸‹åœ°æ”¯çš„åç¥å…³ç³»ï¼‰

### ğŸ”’ éšç§ä¿æŠ¤æœºåˆ¶

#### åŠ å¯†å­˜å‚¨æ¨¡å‹

```rust
pub struct EncryptedBaziChart<T> {
    pub owner: T::AccountId,
    pub sizhu_index: SiZhuIndex,     // 8 bytes æ˜æ–‡
    pub gender: Gender,               // 1 byte æ˜æ–‡
    pub encrypted_data: BoundedVec<u8, ConstU32<256>>, // åŠ å¯†
    pub encrypted_name: Option<BoundedVec<u8, ConstU32<128>>>, // å¯é€‰
    pub data_hash: [u8; 32],         // å“ˆå¸ŒéªŒè¯
    pub created_at: u32,
}
```

#### åŠ å¯†æµç¨‹

1. **å‰ç«¯åŠ å¯†**: ç”¨æˆ·å‡ºç”Ÿæ—¶é—´ä½¿ç”¨ AES-256-GCM åŠ å¯†
2. **å¯†é’¥æ´¾ç”Ÿ**: é’±åŒ…ç­¾åæ´¾ç”Ÿå¯¹ç§°å¯†é’¥ï¼ˆæ— éœ€è®°å¿†å¯†ç ï¼‰
3. **é“¾ä¸Šå­˜å‚¨**: ä»…å­˜å‚¨å››æŸ±ç´¢å¼•ï¼ˆæ˜æ–‡ï¼‰å’ŒåŠ å¯†æ•°æ®
4. **è§£ç›˜è®¡ç®—**: Runtime API åŸºäºå››æŸ±ç´¢å¼•å…è´¹è®¡ç®—
5. **å‰ç«¯è§£å¯†**: ç”¨æˆ·æŸ¥çœ‹è¯¦æƒ…æ—¶è‡ªåŠ¨è§£å¯†

---

## å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

- Rust 1.70+
- Substrate Polkadot SDK
- pallet-almanac (å†œå†è½¬æ¢ä¾èµ–)

### ğŸ”§ å®‰è£…

åœ¨ `runtime/Cargo.toml` ä¸­æ·»åŠ ä¾èµ–ï¼š

```toml
[dependencies]
pallet-bazi-chart = { path = "../pallets/divination/bazi", default-features = false }
pallet-almanac = { path = "../pallets/divination/almanac", default-features = false }
```

åœ¨ `runtime/src/lib.rs` ä¸­é…ç½® Palletï¼š

```rust
impl pallet_bazi_chart::Config for Runtime {
    type WeightInfo = ();
    type MaxChartsPerAccount = ConstU32<10>;
    type MaxDaYunSteps = ConstU32<12>;
    type MaxCangGan = ConstU32<3>;
}

construct_runtime! {
    pub enum Runtime {
        // ...
        BaziChart: pallet_bazi_chart,
    }
}
```

---

## ä½¿ç”¨æŒ‡å—

### ğŸ“ åˆ›å»ºå…«å­—ï¼ˆå…¬å†æ—¥æœŸï¼‰

```rust
use pallet_bazi_chart::{Gender, ZiShiMode};

// åˆ›å»ºå…«å­— (1998å¹´7æœˆ31æ—¥14:10, ç”·æ€§, ç°ä»£æ´¾å­æ—¶)
BaziChart::create_bazi_chart(
    origin,
    1998,              // å¹´ä»½
    7,                 // æœˆä»½
    31,                // æ—¥æœŸ
    14,                // å°æ—¶
    10,                // åˆ†é’Ÿ
    Gender::Male,      // æ€§åˆ«
    ZiShiMode::Modern, // å­æ—¶æ¨¡å¼
    Some(11640000),    // ç»åº¦ (åŒ—äº¬ä¸œç»116.40Â°)
    Some(3990000),     // çº¬åº¦ (åŒ—äº¬åŒ—çº¬39.90Â°)
)?;
```

### ğŸŒ™ åˆ›å»ºå…«å­—ï¼ˆå†œå†æ—¥æœŸï¼‰

```rust
// åˆ›å»ºå…«å­— (å†œå†2024å¹´æ­£æœˆåˆä¸€ 12:30)
BaziChart::create_bazi_chart_from_lunar(
    origin,
    2024,              // å†œå†å¹´ä»½
    1,                 // å†œå†æœˆä»½
    1,                 // å†œå†æ—¥æœŸ
    false,             // æ˜¯å¦é—°æœˆ
    12,                // å°æ—¶
    30,                // åˆ†é’Ÿ
    Gender::Male,
    ZiShiMode::Modern,
    None,              // ç»åº¦ï¼ˆå¯é€‰ï¼‰
    None,              // çº¬åº¦ï¼ˆå¯é€‰ï¼‰
)?;
```

### ğŸ¯ åˆ›å»ºå…«å­—ï¼ˆå››æŸ±ç›´æ¥è¾“å…¥ï¼‰

```rust
use pallet_bazi_chart::types::SiZhuDirectInput;

// åˆ›å»ºå…«å­— (ç”²å­å¹´ ä¸™å¯…æœˆ æˆŠè¾°æ—¥ ç™¸äº¥æ—¶)
let sizhu = SiZhuDirectInput::new(
    0,  // ç”²å­å¹´ (ç´¢å¼•0)
    2,  // ä¸™å¯…æœˆ (ç´¢å¼•2)
    4,  // æˆŠè¾°æ—¥ (ç´¢å¼•4)
    59, // ç™¸äº¥æ—¶ (ç´¢å¼•59)
);

BaziChart::create_bazi_chart_from_sizhu(
    origin,
    sizhu,
    Gender::Male,
    1984, // å‡ºç”Ÿå¹´ä»½ï¼ˆç”¨äºå¤§è¿è®¡ç®—ï¼‰
)?;
```

### ğŸ” åˆ›å»ºåŠ å¯†å…«å­—

```rust
use pallet_bazi_chart::types::SiZhuIndex;

// 1. å‰ç«¯è®¡ç®—å››æŸ±ç´¢å¼•
let sizhu_index = SiZhuIndex {
    year_gan: 0, year_zhi: 0,   // ç”²å­å¹´
    month_gan: 2, month_zhi: 2, // ä¸™å¯…æœˆ
    day_gan: 4, day_zhi: 4,     // æˆŠè¾°æ—¥
    hour_gan: 9, hour_zhi: 11,  // ç™¸äº¥æ—¶
};

// 2. å‰ç«¯åŠ å¯†æ•æ„Ÿæ•°æ® (AES-256-GCM)
let encrypted_data = encrypt_birth_data(
    birth_time,
    user_key, // ä»é’±åŒ…ç­¾åæ´¾ç”Ÿ
);

// 3. åˆ›å»ºåŠ å¯†å…«å­—
BaziChart::create_encrypted_chart(
    origin,
    sizhu_index,
    Gender::Male,
    encrypted_data,
    Some(encrypted_name), // å¯é€‰
    data_hash,
)?;
```

### ğŸ“Š æŸ¥è¯¢å®Œæ•´å‘½ç›˜ï¼ˆRuntime APIï¼‰

```rust
// å…è´¹æŸ¥è¯¢ï¼Œæ—  Gas è´¹ç”¨
let chart = BaziChart::get_full_bazi_chart_for_api(chart_id);

if let Some(chart) = chart {
    println!("å››æŸ±:");
    println!("  å¹´æŸ±: {}{}",
        chart.sizhu.year_zhu.ganzhi.gan.name(),
        chart.sizhu.year_zhu.ganzhi.zhi.name()
    );
    println!("  æœˆæŸ±: {}{}",
        chart.sizhu.month_zhu.ganzhi.gan.name(),
        chart.sizhu.month_zhu.ganzhi.zhi.name()
    );
    println!("  æ—¥æŸ±: {}{} (æ—¥ä¸»: {})",
        chart.sizhu.day_zhu.ganzhi.gan.name(),
        chart.sizhu.day_zhu.ganzhi.zhi.name(),
        chart.sizhu.rizhu.name()
    );
    println!("  æ—¶æŸ±: {}{}",
        chart.sizhu.hour_zhu.ganzhi.gan.name(),
        chart.sizhu.hour_zhu.ganzhi.zhi.name()
    );

    println!("\nè‡ªå: {} ({})",
        chart.zi_zuo.dizhi.name(),
        chart.zi_zuo.benqi_shishen.name()
    );

    println!("\nç©ºäº¡: {} {}",
        chart.kongwang.day_kongwang.0.name(),
        chart.kongwang.day_kongwang.1.name()
    );
}
```

### ğŸ¨ æŸ¥è¯¢è§£ç›˜ç»“æœï¼ˆRuntime APIï¼‰

```rust
// å…è´¹å®æ—¶è®¡ç®—ï¼Œæ—  Gas è´¹ç”¨
let interpretation = BaziChart::get_full_interpretation(chart_id);

if let Some(interp) = interpretation {
    println!("æ ¼å±€: {:?}", interp.core.ge_ju);
    println!("å¼ºå¼±: {:?}", interp.core.qiang_ruo);
    println!("ç”¨ç¥: {}", interp.core.yong_shen.name());
    println!("å–œç¥: {}", interp.core.xi_shen.name());
    println!("å¿Œç¥: {}", interp.core.ji_shen.name());
    println!("ç»¼åˆè¯„åˆ†: {}/100", interp.core.score);
    println!("å¯ä¿¡åº¦: {}%", interp.core.confidence);

    if let Some(xing_ge) = interp.xing_ge {
        println!("\næ€§æ ¼ç‰¹ç‚¹:");
        for trait in xing_ge.zhu_yao_te_dian.iter() {
            println!("  - {:?}", trait);
        }
    }
}
```

### âš¡ ä¸´æ—¶æ’ç›˜ï¼ˆä¸å­˜å‚¨ï¼‰

```rust
// å®Œå…¨å…è´¹ï¼Œæ—  Gas è´¹ç”¨ï¼Œä¸å­˜å‚¨
let chart = BaziChart::calculate_bazi_temp(
    1998, 7, 31,       // æ—¥æœŸ
    14, 10,            // æ—¶é—´
    Gender::Male,
    ZiShiMode::Modern,
    Some(11640000),    // ç»åº¦ï¼ˆå¯é€‰ï¼‰
);

if let Some(chart) = chart {
    // ä½¿ç”¨å‘½ç›˜æ•°æ®ï¼ˆä¸å­˜å‚¨ç‰ˆæœ¬å®Œå…¨ç›¸åŒï¼‰
    println!("ä¸´æ—¶æ’ç›˜æˆåŠŸ: chart_id = 0");
}
```

---

## API æ¥å£

### ğŸ“ å¯è°ƒç”¨å‡½æ•° (Extrinsics)

#### 1. `create_bazi_chart`

åˆ›å»ºå…«å­—ï¼ˆå…¬å†æ—¥æœŸï¼‰

**å‚æ•°**:
- `year: u16` - å…¬å†å¹´ä»½ (1900-2100)
- `month: u8` - å…¬å†æœˆä»½ (1-12)
- `day: u8` - å…¬å†æ—¥æœŸ (1-31)
- `hour: u8` - å°æ—¶ (0-23)
- `minute: u8` - åˆ†é’Ÿ (0-59)
- `gender: Gender` - æ€§åˆ«
- `zishi_mode: ZiShiMode` - å­æ—¶æ¨¡å¼
- `longitude: Option<i32>` - ç»åº¦ï¼ˆå•ä½ï¼š1/100000 åº¦ï¼‰
- `latitude: Option<i32>` - çº¬åº¦ï¼ˆå•ä½ï¼š1/100000 åº¦ï¼‰

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `BaziChartCreated { owner, chart_id, birth_time }`

---

#### 2. `create_bazi_chart_from_lunar`

åˆ›å»ºå…«å­—ï¼ˆå†œå†æ—¥æœŸï¼‰

**å‚æ•°**:
- `lunar_year: u16` - å†œå†å¹´ä»½ (1901-2100)
- `lunar_month: u8` - å†œå†æœˆä»½ (1-12)
- `lunar_day: u8` - å†œå†æ—¥æœŸ (1-30)
- `is_leap_month: bool` - æ˜¯å¦é—°æœˆ
- `hour: u8` - å°æ—¶ (0-23)
- `minute: u8` - åˆ†é’Ÿ (0-59)
- `gender: Gender` - æ€§åˆ«
- `zishi_mode: ZiShiMode` - å­æ—¶æ¨¡å¼
- `longitude: Option<i32>` - ç»åº¦
- `latitude: Option<i32>` - çº¬åº¦

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `BaziChartCreated { owner, chart_id, birth_time }`

---

#### 3. `create_bazi_chart_from_sizhu`

åˆ›å»ºå…«å­—ï¼ˆå››æŸ±ç›´æ¥è¾“å…¥ï¼‰

**å‚æ•°**:
- `sizhu_input: SiZhuDirectInput` - å››æŸ±å¹²æ”¯ç´¢å¼•
- `gender: Gender` - æ€§åˆ«
- `birth_year: u16` - å‡ºç”Ÿå¹´ä»½ï¼ˆç”¨äºå¤§è¿ï¼‰

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `BaziChartCreated { owner, chart_id, birth_time }`

---

#### 4. `create_encrypted_chart`

åˆ›å»ºåŠ å¯†å…«å­—

**å‚æ•°**:
- `sizhu_index: SiZhuIndex` - å››æŸ±ç´¢å¼•ï¼ˆ8 bytesï¼‰
- `gender: Gender` - æ€§åˆ«
- `encrypted_data: BoundedVec<u8, ConstU32<256>>` - åŠ å¯†æ•°æ®
- `encrypted_name: Option<BoundedVec<u8, ConstU32<128>>>` - åŠ å¯†å§“å
- `data_hash: [u8; 32]` - æ•°æ®å“ˆå¸Œ

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `EncryptedBaziChartCreated { owner, chart_id }`

---

#### 5. `delete_bazi_chart`

åˆ é™¤å…«å­—

**å‚æ•°**:
- `chart_id: u64` - å…«å­— ID

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `BaziChartDeleted { owner, chart_id }`

---

#### 6. `cache_interpretation`

ç¼“å­˜è§£ç›˜ç»“æœï¼ˆå¯é€‰ï¼‰

**å‚æ•°**:
- `chart_id: u64` - å…«å­— ID

**è¿”å›**: `DispatchResult`

**äº‹ä»¶**: `BaziInterpretationCached { chart_id, owner }`

---

### ğŸ” Runtime APIï¼ˆå…è´¹æŸ¥è¯¢ï¼‰

#### 1. `get_full_bazi_chart_for_api`

è·å–å®Œæ•´å…«å­—å‘½ç›˜

**å‚æ•°**:
- `chart_id: u64` - å…«å­— ID

**è¿”å›**: `Option<FullBaziChartForApi>`

**ç‰¹ç‚¹**:
- âœ… å®Œå…¨å…è´¹ï¼ˆæ—  Gas è´¹ç”¨ï¼‰
- âœ… åŒ…å«æ‰€æœ‰è®¡ç®—å­—æ®µï¼ˆä¸»æ˜Ÿã€è—å¹²ã€å‰¯æ˜Ÿã€æ˜Ÿè¿ã€ç©ºäº¡ã€ç¥ç…ï¼‰
- âœ… å“åº”é€Ÿåº¦ < 100ms

---

#### 2. `get_full_interpretation`

å®æ—¶è®¡ç®—è§£ç›˜ç»“æœ

**å‚æ•°**:
- `chart_id: u64` - å…«å­— ID

**è¿”å›**: `Option<FullInterpretation>`

**ç‰¹ç‚¹**:
- âœ… å®Œå…¨å…è´¹
- âœ… ç®—æ³•è‡ªåŠ¨æ›´æ–°ï¼ˆæ— éœ€æ•°æ®è¿ç§»ï¼‰
- âœ… åŒ…å«æ ¼å±€ã€ç”¨ç¥ã€æ€§æ ¼åˆ†æ

---

#### 3. `get_encrypted_chart_interpretation`

åŸºäºåŠ å¯†å‘½ç›˜è®¡ç®—è§£ç›˜

**å‚æ•°**:
- `chart_id: u64` - åŠ å¯†å…«å­— ID

**è¿”å›**: `Option<FullInterpretation>`

**ç‰¹ç‚¹**:
- âœ… åŸºäºå››æŸ±ç´¢å¼•è®¡ç®—ï¼Œæ— éœ€è§£å¯†
- âœ… ä¿æŠ¤ç”¨æˆ·éšç§

---

#### 4. `calculate_bazi_temp`

ä¸´æ—¶æ’ç›˜ï¼ˆä¸å­˜å‚¨ï¼‰

**å‚æ•°**:
- `year: u16, month: u8, day: u8` - æ—¥æœŸ
- `hour: u8, minute: u8` - æ—¶é—´
- `gender: Gender` - æ€§åˆ«
- `zishi_mode: ZiShiMode` - å­æ—¶æ¨¡å¼
- `longitude: Option<i32>` - ç»åº¦

**è¿”å›**: `Option<FullBaziChartForApi>`

**ç‰¹ç‚¹**:
- âœ… å®Œå…¨å…è´¹
- âŒ ä¸å­˜å‚¨ï¼ˆå…³é—­é¡µé¢åæ•°æ®ä¸¢å¤±ï¼‰
- âœ… é€‚åˆå¿«é€Ÿæµ‹è¯•

---

## ç®—æ³•æ¨¡å—

### ğŸ“ ganzhi.rs - å¹²æ”¯è®¡ç®—

- **åŠŸèƒ½**: å¹²æ”¯ç´¢å¼•è½¬æ¢ã€åºåˆ—è®¡ç®—
- **æ ¸å¿ƒå‡½æ•°**:
  - `GanZhi::from_index(index: u8) -> Option<GanZhi>`
  - `GanZhi::to_index(&self) -> u8`
  - `GanZhi::next(&self) -> GanZhi`
  - `GanZhi::prev(&self) -> GanZhi`

### ğŸ—“ï¸ sizhu.rs - å››æŸ±è®¡ç®—

- **åŠŸèƒ½**: å¹´æœˆæ—¥æ—¶æŸ±å®Œæ•´è®¡ç®—
- **æ ¸å¿ƒå‡½æ•°**:
  - `calculate_day_ganzhi(year, month, day) -> Option<GanZhi>`
  - `calculate_year_ganzhi(year, month, day) -> Option<GanZhi>`
  - `calculate_month_ganzhi(year, month, day, year_gan) -> Option<GanZhi>`
  - `calculate_hour_ganzhi(hour, day_gan, zishi_mode) -> Option<(GanZhi, bool)>`

**ç®—æ³•è¯´æ˜**:
- æ—¥æŸ±: è”¡å‹’å…¬å¼
- å¹´æŸ±: ç«‹æ˜¥äº¤æ¥
- æœˆæŸ±: äº”è™éï¼ˆç”²å·±èµ·ä¸™å¯…ï¼‰
- æ—¶æŸ±: äº”é¼ éï¼ˆç”²å·±èµ·ç”²å­ï¼‰

### ğŸŒŠ dayun.rs - å¤§è¿è®¡ç®—

- **åŠŸèƒ½**: èµ·è¿å¹´é¾„ã€å¤§è¿åºåˆ—
- **æ ¸å¿ƒå‡½æ•°**:
  - `calculate_qiyun_age(year_gan, gender, days_to_jieqi) -> (u8, bool)`
  - `calculate_dayun_list(month_ganzhi, birth_year, qiyun_age, is_shun, steps) -> Vec<(GanZhi, u8, u16)>`

**èµ·è¿è§„åˆ™**:
- é˜³å¹´ç”·ã€é˜´å¹´å¥³: é¡ºæ’
- é˜´å¹´ç”·ã€é˜³å¹´å¥³: é€†æ’
- èµ·è¿å¹´é¾„ = è·ç¦»èŠ‚æ°”å¤©æ•° / 3

### âš–ï¸ wuxing.rs - äº”è¡Œå¼ºåº¦

- **åŠŸèƒ½**: äº”è¡Œå¼ºåº¦è®¡ç®—ã€å–œç”¨ç¥åˆ¤æ–­
- **æ ¸å¿ƒå‡½æ•°**:
  - `calculate_wuxing_strength(year, month, day, hour) -> WuXingStrength`
  - `determine_xiyong_shen(wuxing_strength, rizhu) -> Option<WuXing>`

**è®¡ç®—æ–¹æ³•**:
- å¤©å¹²: æ¯ä¸ª 100 åˆ†
- åœ°æ”¯æœ¬æ°”: æ¯ä¸ª 100 åˆ†
- åœ°æ”¯è—å¹²: æ ¹æ®æƒé‡è¡¨åŠ åˆ†
- æœˆä»¤åŠ æˆ: é¢å¤– 100 åˆ†

### ğŸŒŒ kongwang.rs - ç©ºäº¡è®¡ç®—

- **åŠŸèƒ½**: æ—¬ç©ºåˆ¤æ–­ã€è½ç©ºåˆ†æ
- **æ ¸å¿ƒå‡½æ•°**:
  - `calculate_kongwang(ganzhi: GanZhi) -> (DiZhi, DiZhi)`
  - `calculate_all_kongwang(sizhu: &SiZhu<T>) -> KongWangInfo`

**å…­åç”²å­æ—¬ç©ºè¡¨**:
- ç”²å­æ—¬: æˆŒäº¥ç©º
- ç”²æˆŒæ—¬: ç”³é…‰ç©º
- ç”²ç”³æ—¬: åˆæœªç©º
- ç”²åˆæ—¬: è¾°å·³ç©º
- ç”²è¾°æ—¬: å¯…å¯ç©º
- ç”²å¯…æ—¬: å­ä¸‘ç©º

### â­ xingyun.rs - åäºŒé•¿ç”Ÿ

- **åŠŸèƒ½**: æ—¥ä¸»åœ¨å››æŸ±åœ°æ”¯çš„åäºŒé•¿ç”ŸçŠ¶æ€
- **æ ¸å¿ƒå‡½æ•°**:
  - `get_changsheng(rizhu: TianGan, dizhi: DiZhi) -> ShiErChangSheng`
  - `calculate_xingyun(sizhu: &SiZhu<T>) -> XingYunInfo`

**åäºŒé•¿ç”Ÿåºåˆ—**:
é•¿ç”Ÿ â†’ æ²æµ´ â†’ å† å¸¦ â†’ ä¸´å®˜ â†’ å¸æ—º â†’ è¡° â†’ ç—… â†’ æ­» â†’ å¢“ â†’ ç» â†’ èƒ â†’ å…»

### ğŸ­ shensha.rs - ç¥ç…è®¡ç®—

- **åŠŸèƒ½**: 32 ç§ç¥ç…åˆ¤æ–­
- **æ ¸å¿ƒå‡½æ•°**:
  - `calculate_shensha_list(sizhu: &SiZhu<T>) -> Vec<ShenShaEntry>`

**ç¥ç…åˆ—è¡¨**:
- **å‰ç¥**: å¤©ä¹™è´µäººã€å¤©å¾·ã€æœˆå¾·ã€æ–‡æ˜Œã€å°†æ˜Ÿç­‰
- **å‡¶ç¥**: ç¾Šåˆƒã€åŠ«ç…ã€äº¡ç¥ã€å­¤è¾°ã€å¯¡å®¿ç­‰
- **æ¡ƒèŠ±**: å’¸æ± ã€çº¢é¸¾ã€å¤©å–œç­‰

### ğŸ”„ xingchong.rs - åˆ‘å†²åˆä¼š

- **åŠŸèƒ½**: åœ°æ”¯å’Œå¤©å¹²å…³ç³»åˆ†æ
- **æ ¸å¿ƒå‡½æ•°**:
  - `analyze_sizhu_guanxi(sizhu: &SiZhu<T>) -> SiZhuGuanXi`

**å…³ç³»ç±»å‹**:
- **åœ°æ”¯**: ä¸‰åˆã€å…­åˆã€ä¸‰ä¼šã€å…­å†²ã€å…­å®³ã€ä¸‰åˆ‘
- **å¤©å¹²**: äº”åˆã€ç›¸å†²ã€ç›¸å…‹

### ğŸŒ¸ jieqi.rs - èŠ‚æ°”è®¡ç®—

- **åŠŸèƒ½**: ç²¾ç¡®èŠ‚æ°”æ—¶é—´ï¼ˆå¯¿æ˜Ÿå¤©æ–‡å†ç®—æ³•ï¼‰
- **æ ¸å¿ƒå‡½æ•°**:
  - `get_jieqi_time(year: u16, jieqi: JieQi) -> Option<JieQiTime>`
  - `calculate_year_jieqi(year: u16) -> [JieQiTime; 24]`

**ç²¾åº¦**: ç§’çº§ï¼ˆè¯¯å·® < 1 åˆ†é’Ÿï¼‰

---

## é…ç½®å‚æ•°

### âš™ï¸ Config Trait

```rust
pub trait Config: frame_system::Config {
    /// æƒé‡ä¿¡æ¯
    type WeightInfo: WeightInfo;

    /// æ¯ä¸ªè´¦æˆ·æœ€å¤šåˆ›å»ºçš„å…«å­—æ•°é‡
    #[pallet::constant]
    type MaxChartsPerAccount: Get<u32>;

    /// å¤§è¿æœ€å¤§æ­¥æ•°ï¼ˆé»˜è®¤12æ­¥ï¼Œ120å¹´ï¼‰
    #[pallet::constant]
    type MaxDaYunSteps: Get<u32>;

    /// æ¯ä¸ªåœ°æ”¯æœ€å¤šè—å¹²æ•°é‡ï¼ˆæœ€å¤š3ä¸ªï¼‰
    #[pallet::constant]
    type MaxCangGan: Get<u32>;
}
```

### ğŸ“Š æ¨èé…ç½®

```rust
parameter_types! {
    pub const MaxChartsPerAccount: u32 = 10;   // æ¯è´¦æˆ·æœ€å¤š10ä¸ªå…«å­—
    pub const MaxDaYunSteps: u32 = 12;         // å¤§è¿12æ­¥ï¼ˆ120å¹´ï¼‰
    pub const MaxCangGan: u32 = 3;             // æ¯åœ°æ”¯æœ€å¤š3ä¸ªè—å¹²
}
```

---

## æµ‹è¯•

### ğŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test -p pallet-bazi-chart

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test -p pallet-bazi-chart test_create_bazi_chart

# è¯¦ç»†è¾“å‡º
cargo test -p pallet-bazi-chart -- --nocapture
```

### âœ… å…³é”®æµ‹è¯•ç”¨ä¾‹

#### 1. è¾°è—å¹²æµ‹è¯•

```rust
#[test]
fn test_chen_hidden_stems() {
    // âš ï¸ å…³é”®æµ‹è¯•ï¼šç¡®ä¿è¾°è—å¹²ä¸º"ç™¸æ°´"ï¼ˆä¸»æµæ´¾ï¼‰
    let chen = DiZhi(4);
    let stems = get_hidden_stems(chen);
    assert_eq!(stems[2].0 .0, 9); // ç™¸ (ä¸æ˜¯å£¬!)
}
```

#### 2. çº³éŸ³æµ‹è¯•

```rust
#[test]
fn test_nayin_calculation() {
    // ç”²å­ä¹™ä¸‘ - æµ·ä¸­é‡‘
    let jiazi = GanZhi::from_index(0).unwrap();
    let nayin = calculate_nayin(&jiazi);
    assert_eq!(nayin, NaYin::HaiZhongJin);
}
```

#### 3. åç¥æµ‹è¯•

```rust
#[test]
fn test_shishen_calculation() {
    // ç”²æœ¨æ—¥ä¸»è§ä¸™ç« - é£Ÿç¥
    let rizhu = TianGan(0); // ç”²
    let tiangan = TianGan(2); // ä¸™
    let shishen = calculate_shishen(rizhu, tiangan);
    assert_eq!(shishen, ShiShen::ShiShen);
}
```

#### 4. çœŸå¤ªé˜³æ—¶ä¿®æ­£æµ‹è¯•

```rust
#[test]
fn test_longitude_correction() {
    // ä¹Œé²æœ¨é½ï¼ˆä¸œç»87.6Â°ï¼‰
    let bp = BirthPlace::with_longitude(87.6);
    let correction = bp.longitude_time_correction_minutes();
    assert_eq!(correction, -130); // -2å°æ—¶10åˆ†é’Ÿ
}
```

---

## è®¾è®¡æ–‡æ¡£

è¯¦ç»†æŠ€æœ¯æ–‡æ¡£ä½äº `docs/` ç›®å½•ï¼š

### ğŸ“š æ–‡æ¡£ç´¢å¼•

1. **[API_DESIGN.md](docs/API_DESIGN.md)** - API è®¾è®¡æ–‡æ¡£
   - Runtime API è¯¦ç»†è¯´æ˜
   - å‰ç«¯è°ƒç”¨ç¤ºä¾‹
   - æ€§èƒ½ä¼˜åŒ–å»ºè®®

2. **[IMPLEMENTATION_SUMMARY.md](docs/IMPLEMENTATION_SUMMARY.md)** - å®ç°æ€»ç»“
   - æ¶æ„è®¾è®¡
   - æ ¸å¿ƒç®—æ³•
   - æŠ€æœ¯å†³ç­–

3. **[ZI_ZUO_GUIDE.md](docs/ZI_ZUO_GUIDE.md)** - è‡ªååŠŸèƒ½æŒ‡å—
   - è‡ªåå«ä¹‰
   - å‘½ç†æ„ä¹‰
   - å‰ç«¯ä½¿ç”¨

4. **[FRONTEND_DEBUG_GUIDE.md](docs/FRONTEND_DEBUG_GUIDE.md)** - å‰ç«¯è°ƒè¯•æŒ‡å—
   - JSON åºåˆ—åŒ–æ–¹æ¡ˆ
   - æšä¸¾æ˜ å°„è¡¨
   - è°ƒè¯•æŠ€å·§

5. **[CHANGSHENG_CALIBRATION.md](docs/CHANGSHENG_CALIBRATION.md)** - åäºŒé•¿ç”Ÿæ ¡å‡†æŠ¥å‘Š
   - ç®—æ³•éªŒè¯
   - æµ‹è¯•ç”¨ä¾‹
   - æ ¡å‡†ç»“æœ

6. **[ä¸´æ—¶æ’ç›˜æ¥å£è®¾è®¡.md](docs/ä¸´æ—¶æ’ç›˜æ¥å£è®¾è®¡.md)** - ä¸´æ—¶æ’ç›˜æ¥å£
   - å…è´¹æ’ç›˜æ–¹æ¡ˆ
   - ä½¿ç”¨åœºæ™¯
   - å®ç°ç»†èŠ‚

---

## å¼€å‘è®¡åˆ’

### âœ… å·²å®Œæˆ (v1.0.0)

- [x] åŸºç¡€æ•°æ®ç±»å‹å®šä¹‰
- [x] å¸¸é‡è¡¨ï¼ˆè—å¹²ã€çº³éŸ³ã€åç¥ï¼‰
- [x] å››æŸ±è®¡ç®—ï¼ˆå¹´æœˆæ—¥æ—¶ï¼‰
- [x] å¤§è¿è®¡ç®—
- [x] äº”è¡Œå¼ºåº¦åˆ†æ
- [x] å–œç”¨ç¥åˆ¤æ–­
- [x] ç©ºäº¡è®¡ç®—
- [x] ç¥ç…è®¡ç®—ï¼ˆ32 ç§ï¼‰
- [x] æ˜Ÿè¿ï¼ˆåäºŒé•¿ç”Ÿï¼‰
- [x] åˆ‘å†²åˆä¼šåˆ†æ
- [x] è§£ç›˜ç³»ç»Ÿ V3
- [x] åŠ å¯†å­˜å‚¨
- [x] Runtime API
- [x] çœŸå¤ªé˜³æ—¶ä¿®æ­£
- [x] å†œå†æ”¯æŒ
- [x] å­æ—¶åŒæ¨¡å¼
- [x] ä¸´æ—¶æ’ç›˜
- [x] å®Œæ•´æµ‹è¯•è¦†ç›–

### ğŸ”® æœªæ¥è®¡åˆ’ (v2.0.0+)

- [ ] æµå¹´è®¡ç®—
- [ ] å°è¿è®¡ç®—
- [ ] ç¥ç…è¯¦ç»†è§£é‡Š
- [ ] æ ¼å±€è¯¦ç»†åˆ†æ
- [ ] å¤§è¿æµå¹´è¯¦æ‰¹
- [ ] NFT é“¸é€ é›†æˆ
- [ ] AI è§£ç›˜é›†æˆï¼ˆpallet-divination-aiï¼‰
- [ ] å‰ç«¯ç»„ä»¶åº“
- [ ] æ‰¹é‡æ’ç›˜ä¼˜åŒ–
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

---

## æŠ€æœ¯è§„æ ¼

### ğŸ”‘ å…³é”®æŠ€æœ¯ç¡®è®¤

| æŠ€æœ¯ç‚¹ | æ–¹æ¡ˆ | çŠ¶æ€ |
|--------|------|------|
| **è¾°è—å¹²** | æˆŠä¹™ç™¸ï¼ˆä¸»æµæ´¾ï¼Œ87.5% æ”¯æŒï¼‰ | âœ… å·²ç¡®è®¤ |
| **å­æ—¶å½’å±** | åŒæ¨¡å¼ï¼ˆä¼ ç»Ÿæ´¾ + ç°ä»£æ´¾ï¼‰ | âœ… å·²å®ç° |
| **èŠ‚æ°”ç²¾åº¦** | å¯¿æ˜Ÿå¤©æ–‡å†ç®—æ³•ï¼ˆç§’çº§ï¼‰ | âœ… å·²å®ç° |
| **äº”è¡Œå¼ºåº¦** | æœˆä»¤æƒé‡çŸ©é˜µ | âœ… å·²å®ç° |
| **çœŸå¤ªé˜³æ—¶** | ç»åº¦ä¿®æ­£ï¼ˆÂ±2 å°æ—¶ï¼‰ | âœ… å·²å®ç° |
| **éšç§ä¿æŠ¤** | AES-256-GCM åŠ å¯† | âœ… å·²å®ç° |
| **å…è´¹è®¡ç®—** | Runtime API | âœ… å·²å®ç° |

### ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | å¤æ‚åº¦ | ä¼°è®¡æ—¶é—´ | Gas è´¹ç”¨ |
|------|--------|----------|----------|
| åˆ›å»ºå…«å­— | O(1) | ~50ms | ~1M weight |
| åˆ é™¤å…«å­— | O(1) | ~10ms | ~0.5M weight |
| Runtime API æŸ¥è¯¢ | O(1) | <100ms | **å…è´¹** |
| ä¸´æ—¶æ’ç›˜ | O(1) | <100ms | **å…è´¹** |

### ğŸ’¾ å­˜å‚¨å ç”¨

| æ•°æ®ç±»å‹ | å¤§å° | è¯´æ˜ |
|----------|------|------|
| `BaziChart<T>` | ~500 bytes | å®Œæ•´å…«å­—ï¼ˆå«å¤§è¿ï¼‰ |
| `EncryptedBaziChart<T>` | ~350 bytes | åŠ å¯†ç‰ˆæœ¬ï¼ˆæ›´å°ï¼‰ |
| `CoreInterpretation` | **13 bytes** | æ ¸å¿ƒè§£ç›˜ï¼ˆè¶…è½»é‡ï¼‰ |
| `SiZhuIndex` | **8 bytes** | å››æŸ±ç´¢å¼•ï¼ˆæœ€å°ï¼‰ |

---

## å‚è€ƒé¡¹ç›®

æœ¬é¡¹ç›®å‚è€ƒäº†å¤šä¸ªå¼€æºå…«å­—é¡¹ç›®ï¼Œç»¼åˆä¸»æµç®—æ³•ï¼š

1. **BaziGo** (95/100)
   - äº”è¡Œå¼ºåº¦ç®—æ³•
   - è—å¹²æƒé‡è¡¨

2. **lunar-java** (93/100)
   - èŠ‚æ°”ç®—æ³•
   - æ•°æ®ç»“æ„è®¾è®¡

3. **bazi-mcp** (92/100)
   - å­æ—¶åŒæ¨¡å¼
   - API è®¾è®¡

4. **å¯¿æ˜Ÿå¤©æ–‡å†**
   - èŠ‚æ°”è®¡ç®—ç®—æ³•ï¼ˆç§’çº§ç²¾åº¦ï¼‰

---

## å¸¸è§é—®é¢˜ (FAQ)

### Q1: ä¸ºä»€ä¹ˆéœ€è¦çœŸå¤ªé˜³æ—¶ä¿®æ­£ï¼Ÿ

**A**: ä¸­å›½æ¨ªè·¨å¤šä¸ªæ—¶åŒºï¼ˆä¸œ5åŒºåˆ°ä¸œ9åŒºï¼‰ï¼Œä½†ä½¿ç”¨ç»Ÿä¸€çš„åŒ—äº¬æ—¶é—´ï¼ˆä¸œ8åŒºï¼‰ã€‚å¯¹äºè¥¿éƒ¨åœ°åŒºï¼ˆå¦‚æ–°ç–†ã€è¥¿è—ï¼‰ï¼Œæ—¶å·®å¯è¾¾ 2 å°æ—¶ä»¥ä¸Šï¼Œä¸ä¿®æ­£ä¼šå¯¼è‡´æ—¶æŸ±é”™è¯¯ã€‚

### Q2: ä¼ ç»Ÿæ´¾å’Œç°ä»£æ´¾å­æ—¶æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**A**:
- **ä¼ ç»Ÿæ´¾**: 23:00-23:59 å±äºæ¬¡æ—¥ï¼ˆæ—©å­æ—¶ï¼‰
- **ç°ä»£æ´¾**: 23:00-23:59 å±äºå½“æ—¥ï¼ˆæ™šå­æ—¶ï¼‰

é€‰æ‹©ä¾æ®ä¸ªäººæµæ´¾ï¼Œå¤§å¤šæ•°ç°ä»£å‘½ç†å¸ˆä½¿ç”¨ç°ä»£æ´¾ã€‚

### Q3: Runtime API ä¸ºä»€ä¹ˆå…è´¹ï¼Ÿ

**A**: Runtime API æ˜¯é“¾ä¸‹æŸ¥è¯¢æ¥å£ï¼Œä¸æ¶ˆè€—é“¾ä¸Šèµ„æºï¼Œå› æ­¤æ— éœ€ Gas è´¹ç”¨ã€‚ä½†ä»èƒ½è®¿é—®é“¾ä¸Šæ•°æ®å¹¶è¿›è¡Œå®æ—¶è®¡ç®—ã€‚

### Q4: åŠ å¯†å…«å­—å¦‚ä½•ä¿æŠ¤éšç§ï¼Ÿ

**A**:
- æ•æ„Ÿæ•°æ®ï¼ˆå‡ºç”Ÿæ—¶é—´ï¼‰åœ¨å‰ç«¯ AES-256-GCM åŠ å¯†
- å¯†é’¥ä»é’±åŒ…ç­¾åæ´¾ç”Ÿï¼Œæ— éœ€è®°å¿†å¯†ç 
- é“¾ä¸Šä»…å­˜å‚¨å››æŸ±ç´¢å¼•ï¼ˆ8 bytesï¼‰å’ŒåŠ å¯†æ•°æ®
- Runtime API åŸºäºç´¢å¼•è®¡ç®—è§£ç›˜ï¼Œæ— éœ€è§£å¯†

### Q5: ä¸´æ—¶æ’ç›˜å’Œæ­£å¼æ’ç›˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**A**:

| ç‰¹æ€§ | ä¸´æ—¶æ’ç›˜ | æ­£å¼æ’ç›˜ |
|------|----------|----------|
| Gas è´¹ç”¨ | å…è´¹ | éœ€è¦ |
| æ•°æ®æŒä¹…åŒ– | å¦ | æ˜¯ |
| åŠŸèƒ½å®Œæ•´æ€§ | 100% ç›¸åŒ | 100% ç›¸åŒ |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿæµ‹è¯•ã€æ‰¹é‡è®¡ç®— | ä¸ªäººå‘½ç›˜ä¿å­˜ |

---

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç å’Œæ”¹è¿›å»ºè®®ï¼

### ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ğŸ“ ä»£ç è§„èŒƒ

- éµå¾ª Rust å®˜æ–¹ä»£ç é£æ ¼
- æ·»åŠ è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
- æ›´æ–°ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–° README å’Œç›¸å…³æ–‡æ¡£

---

## è®¸å¯è¯

MIT-0 License

æœ¬é¡¹ç›®é‡‡ç”¨ MIT-0 è®¸å¯è¯ï¼Œå…è®¸ä»»æ„ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ï¼Œæ— éœ€å½’å±å£°æ˜ã€‚

---

## è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: [Stardust GitHub](https://github.com/stardust/stardust)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/stardust/stardust/issues)
- **æŠ€æœ¯è®¨è®º**: [GitHub Discussions](https://github.com/stardust/stardust/discussions)

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œç¤¾åŒºçš„è´¡çŒ®ï¼š

- [Polkadot SDK](https://github.com/paritytech/polkadot-sdk) - Substrate æ¡†æ¶
- [BaziGo](https://github.com/6tail/lunar-go) - äº”è¡Œç®—æ³•å‚è€ƒ
- [lunar-java](https://github.com/6tail/lunar-java) - èŠ‚æ°”ç®—æ³•å‚è€ƒ
- [å¯¿æ˜Ÿå¤©æ–‡å†](http://www.nongli.net/sxwnl/) - èŠ‚æ°”ç²¾åº¦ç®—æ³•

---

**åˆ›å»ºæ—¥æœŸ**: 2025-11-25
**å½“å‰ç‰ˆæœ¬**: v1.0.0
**ç»´æŠ¤å›¢é˜Ÿ**: Stardust å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-12-21
