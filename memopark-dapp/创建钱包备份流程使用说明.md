# 创建钱包备份流程 - 使用说明

## 快速开始

### 访问应用

前端服务已运行在: **http://localhost:5173**

打开浏览器访问，开始创建您的第一个钱包！

## 完整流程演示

### 步骤 1: 欢迎页面

首次访问会看到欢迎页面：

```
┌─────────────────────────────────────┐
│     丰富的链上支持                     │
│  Memopark 支持 Substrate 及主流区块链 │
│                                     │
│    [浮动代币图标动画展示]              │
│                                     │
│    🔵 创建钱包                        │
│    🔄 恢复钱包                        │
└─────────────────────────────────────┘
```

**操作**: 点击 **"创建钱包"** 按钮

---

### 步骤 2: 设置密码

进入创建钱包页面：

```
┌─────────────────────────────────────┐
│  创建新钱包                           │
│                                     │
│  密码: [________]                   │
│  (至少 8 位，用于本地加密)            │
│                                     │
│  ☑ 使用面容/指纹登录                 │
│                                     │
│  ☑ 我同意 条款和条件                 │
│                                     │
│  [     创建钱包     ]                │
│                                     │
│  已有钱包？去登录                     │
└─────────────────────────────────────┘
```

**操作步骤**:
1. 输入至少 8 位密码（例如：`MyPassword123`）
2. （可选）开启面容/指纹登录开关
3. 勾选 ✅ 同意条款和条件
4. 点击 **"创建钱包"** 按钮

**注意**: 
- 密码少于 8 位时按钮不可点击
- 未勾选条款时按钮不可点击
- 密码将用于本地加密存储助记词

---

### 步骤 3: 备份助记词页面 ⭐

这是最重要的步骤！系统会自动生成助记词并显示：

```
┌─────────────────────────────────────┐
│  < 创建钱包                          │
│                                     │
│       创建成功                        │
│  请备份钱包助记词，在任何情况下...      │
│                                     │
│         [👌图标]                    │
│                                     │
│  钱包地址:                           │
│  5GrwvaEF5zXb26Fz9rc...            │
│  [复制]                             │
│                                     │
│  ⚠️ 安全提示                        │
│  • 助记词是恢复钱包的唯一凭证          │
│  • 请抄写在纸上，妥善保管              │
│  • 不要截图、拍照或发送给他人          │
│  • 谨防诈骗，官方不会索要助记词        │
│                                     │
│  助记词                [复制]         │
│  ╔═══════════════════════════╗      │
│  ║ 1️⃣ abandon  5️⃣ enemy   9️⃣  own  ║
│  ║ 2️⃣ ability  6️⃣ engage  🔟 palace║
│  ║ 3️⃣ able     7️⃣ enhance 1️⃣1️⃣ panel ║
│  ║ 4️⃣ about    8️⃣ enjoy   1️⃣2️⃣ panic ║
│  ╚═══════════════════════════╝      │
│                                     │
│  ☑ 我已安全备份助记词，了解丢失...     │
│                                     │
│  [     备份钱包     ]                │
│                                     │
│  备份完成后，请前往登录页面            │
└─────────────────────────────────────┘
```

**操作步骤**:

1. **查看助记词** 📝
   - 助记词显示为 12 个单词
   - 每个单词有序号（1-12）
   - 3 列网格布局，清晰易读

2. **备份助记词** 💾
   - **推荐方式**: 抄写在纸上，妥善保管
     ```
     1. abandon    5. enemy      9. own
     2. ability    6. engage    10. palace
     3. able       7. enhance   11. panel
     4. about      8. enjoy     12. panic
     ```
   - **备选方式**: 点击"复制"按钮，粘贴到安全的密码管理器
   - **禁止方式**: ❌ 截图、❌ 拍照、❌ 发送给他人

3. **阅读安全提示** ⚠️
   - 助记词是恢复钱包的**唯一凭证**
   - 丢失助记词 = 丢失资产
   - 官方**永远不会**索要您的助记词
   - 谨防钓鱼网站和诈骗

4. **确认备份** ✅
   - 勾选 "我已安全备份助记词，了解丢失助记词将无法恢复资产"
   - 按钮变为蓝色可点击状态

5. **完成备份**
   - 点击 **"备份钱包"** 按钮
   - 系统保存加密的钱包数据

**返回修改**:
- 如果需要修改密码，点击左上角 "< 创建钱包" 返回

---

### 步骤 4: 登录钱包

备份完成后自动跳转到登录页面：

```
┌─────────────────────────────────────┐
│  登录钱包                             │
│                                     │
│  本地账户                             │
│  当前账户: 5Grwva... 余额: 0 MEMO    │
│                                     │
│  钱包密码: [________]                │
│                                     │
│  [      登录      ]                  │
└─────────────────────────────────────┘
```

**操作步骤**:
1. 输入刚才设置的密码
2. 点击 **"登录"** 按钮
3. 成功后进入主页

---

### 步骤 5: 开始使用 🎉

登录成功！现在可以：
- 查看账户余额
- 创建墓地
- 进行转账
- 管理资产
- ...更多功能

## 助记词复制功能

### 使用复制按钮

点击助记词区域右上角的 **"复制"** 按钮：

1. **复制前**: 显示 📋 复制
2. **复制中**: 系统复制助记词到剪贴板
3. **复制后**: 按钮变绿 ✅ 显示 "已复制"（3 秒后恢复）
4. **提示消息**: 屏幕顶部显示 "助记词已复制到剪贴板"

### 复制后的安全使用

```bash
# ✅ 正确使用方式
1. 粘贴到 1Password、LastPass 等加密密码管理器
2. 粘贴到加密的本地文档（记得加密）
3. 打印后安全保管

# ❌ 错误使用方式
1. 粘贴到微信、QQ 等聊天软件
2. 粘贴到云笔记（有泄露风险）
3. 发送邮件给自己
4. 保存在截图中
```

## 安全建议 🔒

### 助记词保管最佳实践

1. **物理备份**（推荐）
   ```
   材料: 纸 + 笔
   方法: 手写助记词，标注序号
   存放: 防火防水保险箱
   备份: 至少 2-3 份，分开存放
   ```

2. **数字备份**（谨慎）
   ```
   工具: 专业密码管理器
   加密: AES-256 加密
   离线: 尽量使用离线设备
   备份: 定期备份密码数据库
   ```

3. **避免的方式**
   - ❌ 云存储（Dropbox、Google Drive 等）
   - ❌ 聊天软件（微信、Telegram 等）
   - ❌ 电子邮件
   - ❌ 截图保存
   - ❌ 拍照保存

### 密码安全

**强密码示例**:
```
✅ MySecure@Wallet2024
✅ BlockChain#Pass123
✅ Crypto$Money999

❌ 12345678 (太简单)
❌ password (常见密码)
❌ birthday (生日)
```

**密码管理**:
- 不要使用生日、电话等易猜密码
- 不要重复使用其他网站的密码
- 建议使用密码管理器生成强密码
- 定期更换密码

## 常见问题 FAQ

### Q1: 忘记密码怎么办？

**A**: 如果忘记密码，需要使用助记词恢复钱包：

1. 在登录页面滚动到 "使用助记词 + 口令登录" 区域
2. 输入您的 12 个单词助记词
3. 设置新的加密口令
4. 点击 "用助记词登录"

**这就是为什么备份助记词如此重要！**

### Q2: 丢失助记词怎么办？

**A**: 非常抱歉，**丢失助记词 = 永久丢失钱包资产**

- 助记词是恢复钱包的**唯一方式**
- 没有客服可以帮您找回
- 没有"重置密码"功能
- 区块链钱包是去中心化的，您是唯一的控制者

**预防措施**: 创建钱包时务必认真备份！

### Q3: 助记词被别人看到了怎么办？

**A**: 立即转移资产！

```
紧急步骤:
1. 立即登录钱包
2. 将所有资产转移到新钱包
3. 废弃旧钱包
4. 创建新钱包并妥善保管
```

### Q4: 可以修改助记词吗？

**A**: 不可以。

- 助记词是随机生成的
- 与钱包地址一一对应
- 无法修改
- 如果不喜欢，可以创建新钱包

### Q5: 一个助记词可以在多个设备使用吗？

**A**: 可以。

- 助记词可以在任何设备恢复钱包
- 手机、电脑、平板都可以
- 但要注意安全：不要在公共设备上使用
- 每个设备可以设置不同的密码

### Q6: 什么是"使用面容/指纹登录"？

**A**: 这是一个占位功能，将来会支持：

- 使用手机的面容识别登录
- 使用指纹解锁钱包
- 基于 WebAuthn 技术
- 目前暂未实现

### Q7: 如何查看已保存的助记词？

**A**: 出于安全考虑，助记词加密存储，无法直接查看。

**备份方案**:
1. 在创建时就抄写备份（最佳）
2. 使用"导出 JSON"功能导出加密文件
3. JSON 文件包含加密的助记词

### Q8: 12 个单词够安全吗？

**A**: 非常安全！

- 12 个单词 = 128 位熵
- 可能性: 2^128 ≈ 3.4 × 10^38
- 比地球上所有沙粒的数量还多
- 暴力破解几乎不可能

## 故障排查

### 问题 1: 点击"创建钱包"没反应

**检查**:
- ✅ 密码是否至少 8 位？
- ✅ 是否勾选了条款和条件？
- ✅ 按钮是否显示灰色（禁用状态）？

### 问题 2: 复制按钮不工作

**解决**:
1. 检查浏览器权限（允许访问剪贴板）
2. 尝试手动选择助记词文本复制
3. 使用截图 + OCR 识别（临时方案）

### 问题 3: 备份页面显示异常

**解决**:
```bash
# 清除浏览器缓存
Ctrl + Shift + Delete (Windows/Linux)
Cmd + Shift + Delete (Mac)

# 或者硬刷新
Ctrl + F5 (Windows/Linux)
Cmd + Shift + R (Mac)
```

### 问题 4: 登录后看不到账户

**检查**:
1. 打开浏览器控制台（F12）
2. 查看是否有错误信息
3. 检查 localStorage 是否有数据：
   ```javascript
   console.log(localStorage.getItem('mp.keystore'))
   ```

## 开发者信息

### 相关文件

**源代码**:
- `src/features/auth/WalletWelcomePage.tsx` - 欢迎页面
- `src/features/auth/CreateWalletPage.tsx` - 创建钱包页面
- `src/features/auth/BackupMnemonicPage.tsx` - 备份助记词页面
- `src/features/auth/LoginPage.tsx` - 登录页面
- `src/features/auth/AuthEntryPage.tsx` - 认证入口

**工具库**:
- `src/lib/keystore.ts` - 钱包存储和加密
- `src/lib/sessionManager.ts` - 会话管理

### 技术栈

- **React 18** - UI 框架
- **TypeScript** - 类型安全
- **Ant Design 5** - UI 组件库
- **@polkadot/util-crypto** - 加密工具
- **Web Crypto API** - 浏览器加密 API

### 数据存储

```javascript
// localStorage 存储结构
{
  "mp.keystores": [
    {
      "address": "5Grwva...",
      "ciphertext": "encrypted_data",
      "salt": "random_salt",
      "iv": "initialization_vector",
      "createdAt": 1696500000000
    }
  ],
  "mp.current": "5Grwva...",
  "mp.session": "{ ... }"
}
```

## 总结

创建钱包和备份助记词的完整流程已全部实现：

- ✅ 美观的欢迎页面
- ✅ 简单的密码设置
- ✅ 专业的备份页面
- ✅ 完善的安全提示
- ✅ 便捷的复制功能
- ✅ 友好的用户体验

**核心理念**: 
- 安全第一
- 用户体验优先
- 流程清晰简单
- 视觉美观现代

现在就开始创建您的第一个 Memopark 钱包吧！🚀

