# 🚀 目录重命名 - 简易执行指南

**📅 日期**: 2025-10-29  
**⏱️ 预计时间**: 10-15分钟  
**🎯 目标**: 将 memopark-* 目录重命名为 stardust-*

---

## 🎯 重命名清单

```
当前名称              →  新名称
────────────────────────────────────────────
memopark-dapp        →  stardust-dapp
memopark-governance  →  stardust-governance
memopark-gov         →  stardust-gov
memopark-squid       →  stardust-squid
memopark-gov-scripts →  stardust-gov-scripts
```

---

## 🚀 一键执行（推荐）

### 方法1: 使用自动化脚本 ⭐⭐⭐⭐⭐

```bash
cd /home/xiaodong/文档/stardust

# 给脚本添加执行权限
chmod +x 重命名目录-一键执行.sh

# 执行脚本
./重命名目录-一键执行.sh
```

**脚本会自动完成**：
- ✅ 停止所有服务
- ✅ 创建Git备份（自动打标签）
- ✅ 重命名5个目录
- ✅ 更新所有脚本路径引用
- ✅ 更新文档路径引用
- ✅ 提交到Git并打标签

**执行时间**: 2-3分钟（主要是等待确认）

---

## 🛠️ 手动执行（备选）

如果你想手动一步步执行，可以按以下步骤：

### 步骤1: 备份（1分钟）

```bash
cd /home/xiaodong/文档/stardust

# 创建Git备份
git add .
git commit -m "保存当前状态 - 目录重命名前" || true
git tag -a before-dir-rename-manual -m "手动重命名前备份"
```

### 步骤2: 停止服务（1分钟）

```bash
# 停止所有运行中的服务
./停止所有服务.sh || true

# 或手动停止
pkill -f "vite" || true
pkill -f "stardust-node" || true
```

### 步骤3: 重命名目录（1分钟）

```bash
cd /home/xiaodong/文档/stardust

# 逐个重命名
mv memopark-dapp stardust-dapp
mv memopark-governance stardust-governance
mv memopark-gov stardust-gov
mv memopark-squid stardust-squid
mv memopark-gov-scripts stardust-gov-scripts

# 验证
ls -d stardust-* | grep -E "dapp|governance|gov|squid"
```

### 步骤4: 更新脚本（3分钟）

```bash
# 更新启动脚本
sed -i 's/memopark-dapp/stardust-dapp/g' 启动所有服务.sh
sed -i 's/memopark-governance/stardust-governance/g' 启动所有服务.sh
sed -i 's/memopark-gov/stardust-gov/g' 启动所有服务.sh

# 更新停止脚本
sed -i 's/memopark-dapp/stardust-dapp/g' 停止所有服务.sh
sed -i 's/memopark-governance/stardust-governance/g' 停止所有服务.sh

# 更新其他脚本
sed -i 's/memopark-dapp/stardust-dapp/g' stardust-dapp/EXECUTE_FIX.sh 2>/dev/null || true
sed -i 's/memopark-gov/stardust-gov/g' stardust-gov/INSTALL.sh 2>/dev/null || true
sed -i 's/memopark-governance/stardust-governance/g' stardust-governance/INSTALL.sh 2>/dev/null || true
sed -i 's/memopark-dapp/stardust-dapp/g' tests/integration/run-all.sh 2>/dev/null || true
```

### 步骤5: 更新文档（2分钟）

```bash
# 更新README
sed -i 's/memopark-dapp/stardust-dapp/g' README.md
sed -i 's/memopark-governance/stardust-governance/g' README.md

# 更新docs文档
find docs -type f -name "*.md" \
    -not -name "*RENAME*.md" \
    -not -name "*重命名*.md" \
    -exec sed -i \
        -e 's/memopark-dapp/stardust-dapp/g' \
        -e 's/memopark-governance/stardust-governance/g' \
        {} +
```

### 步骤6: 提交（2分钟）

```bash
# 暂存所有更改
git add -A

# 查看更改
git status

# 提交
git commit -m "重构: 目录重命名 memopark → stardust

- 重命名 memopark-dapp → stardust-dapp
- 重命名 memopark-governance → stardust-governance
- 重命名 memopark-gov → stardust-gov
- 重命名 memopark-squid → stardust-squid
- 重命名 memopark-gov-scripts → stardust-gov-scripts
- 更新所有脚本和文档路径引用"

# 创建标签
git tag -a after-dir-rename-manual -m "手动重命名后"
```

---

## ✅ 验证测试

### 测试1: 检查目录是否存在

```bash
cd /home/xiaodong/文档/stardust

# 应该看到5个新目录
ls -d stardust-dapp stardust-governance stardust-gov stardust-squid stardust-gov-scripts
```

### 测试2: 检查脚本更新

```bash
# 检查启动脚本
grep "stardust-dapp" 启动所有服务.sh
grep "stardust-governance" 启动所有服务.sh

# 不应该看到memopark
grep "memopark-dapp" 启动所有服务.sh && echo "还有残留!" || echo "✓ 已更新"
```

### 测试3: 测试服务启动

```bash
# 测试启动脚本
./启动所有服务.sh

# 等待30秒后检查
sleep 30
ps aux | grep -E "vite|stardust-node"

# 如果看到进程运行，说明成功
```

### 测试4: 测试前端访问

1. 浏览器访问: http://127.0.0.1:5173
2. 检查页面是否正常加载
3. 检查控制台是否有路径错误

---

## 🚨 故障排除

### 问题1: 目录已存在

**错误**:
```
mv: cannot move 'memopark-dapp' to 'stardust-dapp': Directory not empty
```

**解决**:
```bash
# 检查是否已经重命名过
ls -d stardust-* 

# 如果stardust-*目录已存在且memopark-*也存在
# 需要手动检查并决定如何处理
```

### 问题2: 服务启动失败

**错误**:
```
cd: no such file or directory: memopark-dapp
```

**解决**:
```bash
# 检查启动脚本
cat 启动所有服务.sh | grep "cd"

# 手动更新路径
vim 启动所有服务.sh
# 将所有 memopark- 改为 stardust-
```

### 问题3: Git报错

**错误**:
```
fatal: A branch named 'xxx' already exists.
```

**解决**:
```bash
# Git会自动跟踪目录重命名
# 使用 git add -A 暂存所有更改
git add -A
git status  # 应该看到 renamed: memopark-dapp -> stardust-dapp
```

### 问题4: 需要回滚

```bash
# 查看备份标签
git tag -l "before-dir-rename*"

# 回滚到重命名前
git reset --hard before-dir-rename-manual

# 如果已经重命名目录，还需要手动改回来
cd /home/xiaodong/文档/stardust
mv stardust-dapp memopark-dapp
mv stardust-governance memopark-governance
mv stardust-gov memopark-gov
mv stardust-squid memopark-squid
mv stardust-gov-scripts memopark-gov-scripts
```

---

## 📋 执行检查清单

执行前：
- [ ] 已通知团队成员（如果是多人团队）
- [ ] 已选择合适的执行时间
- [ ] 已阅读本指南

执行中：
- [ ] 创建Git备份标签
- [ ] 停止所有服务
- [ ] 重命名5个目录
- [ ] 更新启动/停止脚本
- [ ] 更新其他脚本
- [ ] 更新文档
- [ ] 提交Git并打标签

执行后验证：
- [ ] 检查目录是否存在
- [ ] 检查脚本更新
- [ ] 测试服务启动
- [ ] 测试前端访问
- [ ] 通知团队成员

---

## 📢 通知团队成员模板

如果你是多人团队，执行后发送此通知：

```
📢 重要通知：项目目录已重命名

团队成员你好，

项目目录已经从 memopark-* 重命名为 stardust-*，
请按以下步骤更新你的本地环境：

1. 拉取最新代码
   git pull origin [your-branch]

2. Git会自动处理目录重命名，无需手动操作

3. 如果你的IDE/编辑器有项目配置，请更新：
   - VSCode: 重新打开工作区
   - IDEA: 重新导入项目

4. 重新启动开发服务器
   cd /home/xiaodong/文档/stardust
   ./启动所有服务.sh

5. 如果遇到问题，请查看: 目录重命名-简易指南.md

有问题请随时联系。
```

---

## 🎉 完成后

### 成果

完成后，你将达到：
- ✅ 目录名称100%一致
- ✅ 脚本路径100%更新
- ✅ 文档路径100%更新
- ✅ 项目改名完成度：**95% → 98%**

### 后续建议

1. **立即做**：
   - 测试所有核心功能
   - 验证服务启动
   - 检查前端页面

2. **本周做**（可选）：
   - 执行快速方案（完成代码注释）
   - 达到99%完成度

3. **未来做**（可选）：
   - 分批更新文档内容
   - 达到100%完成度

---

## 📞 相关资源

- **自动化脚本**: `重命名目录-一键执行.sh`
- **详细分析**: `docs/项目改名优化分析报告.md`
- **快速开始**: `docs/项目改名优化-快速开始.md`
- **执行总结**: `docs/项目改名优化-执行总结.md`

---

**📅 文档生成时间**: 2025-10-29  
**🔄 版本**: v1.0  
**📦 状态**: ✅ 就绪，可立即执行

**🚀 推荐使用自动化脚本！2分钟完成重命名！**

