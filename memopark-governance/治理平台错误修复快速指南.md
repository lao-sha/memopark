# 治理平台错误修复快速指南

## 🚨 问题

创建做市商审批提案时遇到错误：
```
wasm trap: wasm unreachable instruction executed
```

---

## ✅ 已修复（v1.1.0）

### 修复内容

1. ✅ 参数类型转换（mmId, slashBps → 数字）
2. ✅ 参数范围验证（0-10000）
3. ✅ URL 参数支持（?mmId=1&type=approve）
4. ✅ 调试日志增强

### 修复的文件

- `src/pages/Proposals/Create/index.tsx` - 创建提案页面
- `src/pages/MarketMakerGovernance/index.tsx` - 做市商治理页面

---

## 🚀 使用方法

### 方法 1：通过表单创建提案

1. 访问 `http://localhost:3000/proposals/create`
2. 填写表单
3. 点击"提交提案"

### 方法 2：通过 URL 快速创建（推荐）

**批准提案：**
```
http://localhost:3000/proposals/create?mmId=1&type=approve
```

**驳回提案：**
```
http://localhost:3000/proposals/create?mmId=1&type=reject
```

---

## 🔍 查看调试信息

1. 打开浏览器控制台（按 F12）
2. 提交提案
3. 查看日志：

```
📤 [创建提案] 参数详情
  提案类型: approve
  mmId: 1 (u64)
  阈值: 2
```

---

## 📋 参数要求

| 参数 | 范围 | 说明 |
|------|------|------|
| mmId | >= 0 | 申请编号 |
| threshold | >= 1 | 投票阈值 |
| slashBps | 0-10000 | 扣罚比例（仅驳回）|

---

## ❓ 如果仍然失败

1. 刷新页面（Ctrl+F5）
2. 检查控制台日志
3. 确认钱包是委员会成员
4. 确认 mmId 存在

---

## 📚 详细文档

- `治理平台Wasm_Unreachable错误修复完成.md` - 完整修复报告

---

**版本**: v1.1.0  
**日期**: 2025-10-15  
**状态**: ✅ 已修复

