# åšå¸‚å•†å®¡æ‰¹åŠŸèƒ½ - å¿«é€Ÿå¼€å§‹

## ğŸš€ ä¸€åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡

```bash
# 1. å¯åŠ¨é“¾ç«¯ï¼ˆå¦‚æœè¿˜æ²¡å¯åŠ¨ï¼‰
cd /home/xiaodong/æ–‡æ¡£/memopark
./target/release/memopark-node \
  --base-path ./my-chain-state \
  --chain dev \
  --alice \
  --rpc-external \
  --rpc-port 9944 \
  --rpc-cors=all \
  --rpc-methods=Unsafe

# 2. å¯åŠ¨æ²»ç†å‰ç«¯
cd /home/xiaodong/æ–‡æ¡£/memopark/memopark-governance
npm run dev
```

### 2. è®¿é—®é¡µé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:5174/market-maker-governance**

---

## ğŸ“– å®Œæ•´æµ‹è¯•æµç¨‹

### å‡†å¤‡å·¥ä½œï¼šåˆ›å»ºæµ‹è¯•ç”³è¯·

é¦–å…ˆéœ€è¦æœ‰ä¸€ä¸ªå¾…å®¡æ‰¹çš„åšå¸‚å•†ç”³è¯·ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºï¼š

#### æ–¹å¼ 1ï¼šä½¿ç”¨ Polkadot.js Apps

```bash
1. æ‰“å¼€ https://polkadot.js.org/apps/?rpc=ws://127.0.0.1:9944
2. Developer -> Extrinsics
3. é€‰æ‹©è´¦æˆ·ï¼šBob
4. è°ƒç”¨ï¼šmarketMaker.apply(deposit)
   - deposit: 1000000000000000000 (1000 MEMO)
5. æäº¤äº¤æ˜“
6. ç­‰å¾…ä¸Šé“¾åï¼Œè°ƒç”¨ marketMaker.submitInfo(mmId, epayGateway, epayPid, epayKey)
   - mmId: 0
   - epayGateway: "https://pay.example.com"
   - epayPid: "merchant123"
   - epayKey: "sk_test_123456"
7. æäº¤äº¤æ˜“
```

#### æ–¹å¼ 2ï¼šä½¿ç”¨ä¸»å‰ç«¯ï¼ˆå¦‚æœå·²å®ç°ï¼‰

è®¿é—®ï¼šhttp://localhost:5173/#/otc/mm-apply

---

### å§”å‘˜ä¼šå®¡æ‰¹æµç¨‹ï¼ˆ3æ­¥ï¼‰

#### æ­¥éª¤ 1ï¼šå‘èµ·ææ¡ˆï¼ˆAliceï¼‰

1. **æ‰“å¼€é¡µé¢**
   - è®¿é—®ï¼šhttp://localhost:5174/market-maker-governance
   - è¿æ¥é’±åŒ…ï¼Œé€‰æ‹© Alice è´¦æˆ·

2. **æŸ¥çœ‹å¾…å®¡æ‰¹ç”³è¯·**
   - åœ¨"å¾…å®¡æ‰¹ç”³è¯·"æ ‡ç­¾é¡µä¸­
   - å¯ä»¥çœ‹åˆ° Bob çš„ç”³è¯·ï¼ˆMM ID: 0ï¼‰

3. **å‘èµ·æ‰¹å‡†ææ¡ˆ**
   - ç‚¹å‡»"æ‰¹å‡†ææ¡ˆ"æŒ‰é’®
   - ç¡®è®¤ä¿¡æ¯
   - ç‚¹å‡»"æäº¤ææ¡ˆ"
   - ç­¾åå¹¶å‘é€äº¤æ˜“

4. **è®°å½•ææ¡ˆä¿¡æ¯**
   - äº¤æ˜“æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºææ¡ˆç´¢å¼•ï¼ˆé€šå¸¸æ˜¯ 0ï¼‰

---

#### æ­¥éª¤ 2ï¼šæŠ•ç¥¨ï¼ˆBob & Charlieï¼‰

1. **Bob æŠ•ç¥¨**
   - åˆ‡æ¢è´¦æˆ·åˆ° Bob
   - åˆ‡æ¢åˆ°"è¿›è¡Œä¸­çš„ææ¡ˆ"æ ‡ç­¾é¡µ
   - æ‰¾åˆ°åˆšæ‰ Alice å‘èµ·çš„ææ¡ˆ
   - ç‚¹å‡»"æŠ•èµæˆç¥¨"
   - ç¡®è®¤å¹¶ç­¾åäº¤æ˜“

2. **Charlie æŠ•ç¥¨**
   - åˆ‡æ¢è´¦æˆ·åˆ° Charlie
   - åŒæ ·ç‚¹å‡»"æŠ•èµæˆç¥¨"
   - ç­¾åäº¤æ˜“

3. **æ£€æŸ¥æŠ•ç¥¨çŠ¶æ€**
   - åˆ·æ–°é¡µé¢
   - åº”è¯¥çœ‹åˆ°ï¼šèµæˆ: 2, åå¯¹: 0, é˜ˆå€¼: 2
   - "å…³é—­ææ¡ˆ"æŒ‰é’®å˜ä¸ºå¯ç”¨

---

#### æ­¥éª¤ 3ï¼šå…³é—­ææ¡ˆå¹¶æ‰§è¡Œï¼ˆä»»ä½•äººï¼‰

1. **å…³é—­ææ¡ˆ**
   - å¯ä»¥ä½¿ç”¨ä»»ä½•è´¦æˆ·
   - ç‚¹å‡»"å…³é—­ææ¡ˆ"æŒ‰é’®
   - ç¡®è®¤æ‰§è¡Œä¿¡æ¯
   - ç‚¹å‡»"å…³é—­å¹¶æ‰§è¡Œ"
   - ç­¾åäº¤æ˜“

2. **éªŒè¯ç»“æœ**
   - åˆ‡æ¢å›"å¾…å®¡æ‰¹ç”³è¯·"æ ‡ç­¾é¡µ
   - ç‚¹å‡»"åˆ·æ–°"
   - MM#0 åº”è¯¥å·²ç»ä¸åœ¨åˆ—è¡¨ä¸­ï¼ˆå·²æ‰¹å‡†ï¼‰

3. **æŸ¥çœ‹é“¾ä¸ŠçŠ¶æ€**
   ```bash
   # ä½¿ç”¨ Polkadot.js Apps
   Developer -> Chain State
   marketMaker -> applications(0)
   # çŠ¶æ€åº”è¯¥æ˜¯ "Approved"
   ```

---

## ğŸ”§ å¿«é€Ÿæµ‹è¯•ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

å¦‚æœæ‚¨åªæƒ³å¿«é€Ÿæµ‹è¯•ï¼Œä¸æƒ³ç»è¿‡å®Œæ•´çš„å§”å‘˜ä¼šæµç¨‹ï¼š

### Root ç›´æ¥æ‰¹å‡†

```bash
# ä½¿ç”¨ Polkadot.js Apps
1. Developer -> Extrinsics
2. é€‰æ‹© Alice è´¦æˆ·
3. sudo.sudo(call)
4. å†…éƒ¨è°ƒç”¨ï¼šmarketMaker.approve(0)
5. æäº¤äº¤æ˜“

# æˆ–è€…é©³å›
sudo.sudo(marketMaker.reject(0, 200))  # æƒ©ç½š 2%
```

---

## ğŸ¯ æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] é“¾ç«¯èŠ‚ç‚¹æ­£å¸¸è¿è¡Œï¼ˆws://127.0.0.1:9944ï¼‰
- [ ] æ²»ç†å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆhttp://localhost:5174ï¼‰
- [ ] å·²æœ‰å¾…å®¡æ‰¹çš„åšå¸‚å•†ç”³è¯·
- [ ] å§”å‘˜ä¼šæˆå‘˜è´¦æˆ·å¯ç”¨ï¼ˆAlice, Bob, Charlieï¼‰
- [ ] å¯ä»¥è¿æ¥é’±åŒ…å¹¶åˆ‡æ¢è´¦æˆ·
- [ ] å¾…å®¡æ‰¹ç”³è¯·é¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] å¯ä»¥å‘èµ·ææ¡ˆ
- [ ] å¯ä»¥æŠ•ç¥¨
- [ ] å¯ä»¥å…³é—­ææ¡ˆ
- [ ] å®¡æ‰¹åçŠ¶æ€æ›´æ–°æ­£ç¡®

---

## ğŸ“ å§”å‘˜ä¼šæˆå‘˜é…ç½®

**é»˜è®¤å§”å‘˜ä¼šæˆå‘˜ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š**

```rust
// runtime/src/configs/mod.rs
// Alice, Bob, Charlie
```

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹å½“å‰å§”å‘˜ä¼šæˆå‘˜ï¼š

```bash
# Polkadot.js Apps
Developer -> Chain State
council -> members()
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šæ— æ³•å‘èµ·ææ¡ˆ

**å¯èƒ½åŸå› ï¼š**
- è´¦æˆ·ä¸æ˜¯å§”å‘˜ä¼šæˆå‘˜
- æ²¡æœ‰å¾…å®¡æ‰¹çš„ç”³è¯·
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥å§”å‘˜ä¼šæˆå‘˜
Developer -> Chain State -> council.members()

# æ£€æŸ¥ç”³è¯·çŠ¶æ€
Developer -> Chain State -> marketMaker.applications(0)
```

---

### é—®é¢˜ 2ï¼šæŠ•ç¥¨åæ— æ³•å…³é—­ææ¡ˆ

**å¯èƒ½åŸå› ï¼š**
- æœªè¾¾åˆ°æŠ•ç¥¨é˜ˆå€¼ï¼ˆéœ€è¦2ç¥¨ï¼‰
- ææ¡ˆå·²è¶…æ—¶

**è§£å†³æ–¹æ³•ï¼š**
- ç¡®ä¿è‡³å°‘æœ‰ 2 ä¸ªå§”å‘˜ä¼šæˆå‘˜æŠ•èµæˆç¥¨
- æ£€æŸ¥æŠ•ç¥¨æƒ…å†µï¼ˆé¡µé¢ä¼šæ˜¾ç¤ºå®æ—¶æŠ•ç¥¨æ•°ï¼‰

---

### é—®é¢˜ 3ï¼šé¡µé¢æ˜¾ç¤ºç©ºç™½

**å¯èƒ½åŸå› ï¼š**
- é“¾ç«¯æœªå¯åŠ¨
- å‰ç«¯æœªè¿æ¥åˆ°é“¾ç«¯
- é’±åŒ…æœªè¿æ¥

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥é“¾ç«¯
curl -H "Content-Type: application/json" \
  -d '{"id":1, "jsonrpc":"2.0", "method": "system_health"}' \
  http://localhost:9944

# æ£€æŸ¥å‰ç«¯æ—¥å¿—
# æµè§ˆå™¨ F12 -> Console
```

---

## ğŸ“Š å®Œæ•´æµç¨‹æ—¶åºå›¾

```
Alice (å§”å‘˜ä¼šæˆå‘˜)         Bob (å§”å‘˜ä¼šæˆå‘˜)         Charlie (å§”å‘˜ä¼šæˆå‘˜)
     |                          |                          |
     |-- å‘èµ·æ‰¹å‡†ææ¡ˆ ---------->|                          |
     |                          |                          |
     |                          |-- æŠ•èµæˆç¥¨ ------------->|
     |                          |                          |
     |                          |                          |-- æŠ•èµæˆç¥¨
     |                          |                          |
     |<-------- è¾¾åˆ°é˜ˆå€¼(2/3) --------------------------------|
     |                          |                          |
     |-- å…³é—­ææ¡ˆå¹¶æ‰§è¡Œ -------->|                          |
     |                          |                          |
     |<-------- ç”³è¯·è¢«æ‰¹å‡† --------------------------------->|
```

---

## ğŸ“ å­¦ä¹ èµ„æº

1. **å§”å‘˜ä¼šæ²»ç†**
   - Substrate Collective Pallet æ–‡æ¡£
   - Polkadot æ²»ç†æœºåˆ¶

2. **ç›¸å…³ä»£ç **
   - å‰ç«¯ï¼š`memopark-governance/src/pages/MarketMakerGovernance/`
   - Palletï¼š`pallets/market-maker/src/lib.rs`
   - Runtimeï¼š`runtime/src/configs/mod.rs`

3. **æµ‹è¯•å·¥å…·**
   - Polkadot.js Apps
   - Polkadot.js Extension

---

## ğŸ’¡ ä¸‹ä¸€æ­¥

å®Œæˆæµ‹è¯•åï¼Œæ‚¨å¯ä»¥ï¼š

1. å°è¯•é©³å›ç”³è¯·ï¼ˆè®¾ç½®ä¸åŒçš„æƒ©ç½šæ¯”ä¾‹ï¼‰
2. æµ‹è¯•ææ¡ˆå¤±è´¥çš„æƒ…å†µï¼ˆæŠ•åå¯¹ç¥¨ï¼‰
3. æŸ¥çœ‹é“¾ä¸Šäº‹ä»¶å’ŒçŠ¶æ€å˜åŒ–
4. æ‰©å±•é¡µé¢åŠŸèƒ½ï¼ˆæ·»åŠ å†å²è®°å½•ç­‰ï¼‰

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰

