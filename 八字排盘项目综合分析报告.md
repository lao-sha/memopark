# å…«å­—æ’ç›˜é¡¹ç›®ç»¼åˆåˆ†ææŠ¥å‘Š

> **åˆ†ææ—¥æœŸ**: 2025-11-25
> **åˆ†æèŒƒå›´**: /home/xiaodong/æ–‡æ¡£/xuanxue/bazi ç›®å½•ä¸‹çš„13ä¸ªå…«å­—æ’ç›˜é¡¹ç›®
> **åˆ†æç›®æ ‡**: å¯¹æ¯”å„é¡¹ç›®åœ¨è—å¹²ã€å­æ—¶å½’å±ã€çº³éŸ³ã€èŠ‚æ°”ã€èµ·è¿ã€äº”è¡Œå¼ºåº¦ç­‰6ä¸ªå…³é”®ç‚¹çš„å®ç°å·®å¼‚

---

## ä¸€ã€é¡¹ç›®æ¦‚è§ˆ

| åºå· | é¡¹ç›®åç§° | å®ç°è¯­è¨€ | æ ¸å¿ƒåº“/æ¡†æ¶ | ä»£ç è´¨é‡ | å®Œæ•´åº¦ |
|------|----------|----------|-------------|----------|--------|
| 1 | **bazi** | Python | è‡ªå®ç° | â­â­â­ | åŸºç¡€ |
| 2 | **bazi-mcp** | TypeScript | tyme4ts | â­â­â­â­â­ | å®Œæ•´ |
| 3 | **paipan-1** | JavaScript | è‡ªå®ç° | â­â­â­ | åŸºç¡€ |
| 4 | **BaziGo** | Go | è‡ªå®ç° | â­â­â­â­â­ | å®Œæ•´ |
| 5 | **eightwords** | PHP | æœªæ·±å…¥åˆ†æ | - | - |
| 6 | **lunisolar** | TypeScript | è‡ªå®ç° | â­â­â­â­â­ | å®Œæ•´ |
| 7 | **lunar-java** | Java | è‡ªå®ç° | â­â­â­â­â­ | å®Œæ•´ |
| 8 | **lunar-csharp** | C# | ç§»æ¤lunar-java | â­â­â­â­â­ | å®Œæ•´ |
| 9 | **lunar-flutter** | Dart | ç§»æ¤lunar-java | â­â­â­â­ | å®Œæ•´ |
| 10 | **8Char-Uni-App** | Vue/JS | æœªæ·±å…¥åˆ†æ | - | - |
| 11 | **wxapp** | å°ç¨‹åº | åç«¯API | â­â­â­ | UIå±‚ |
| 12 | **bazi01** | JavaScript | æœªæ‰¾åˆ°æ ¸å¿ƒæ–‡ä»¶ | - | - |
| 13 | **chatgpt-tarot** | æ··åˆ | GPTé›†æˆ | - | - |

---

## äºŒã€å…³é”®æŠ€æœ¯ç‚¹å¯¹æ¯”çŸ©é˜µ

### 2.1 è—å¹²æ•°æ®æ­£ç¡®æ€§

#### **æ ¸å¿ƒäº‰è®®ç‚¹: è¾°åœ°æ”¯è—å¹²æ˜¯"å£¬"è¿˜æ˜¯"ç™¸"?**

| é¡¹ç›® | è¾°è—å¹² | å®Œæ•´è—å¹²è¡¨ | æƒé‡ä½“ç³» | æ–‡ä»¶ä½ç½® |
|------|--------|------------|----------|----------|
| **BaziGo** | **ç™¸** âœ… | æˆŠã€ä¹™ã€ç™¸ | âœ… æœ‰æƒé‡è¡¨ | `/canggan.go:9` |
| **lunar-java** | **ç™¸** âœ… | æˆŠã€ä¹™ã€ç™¸ | âŒ æ— æƒé‡ | `/util/LunarUtil.java:741` |
| **lunar-csharp** | **ç™¸** âœ… | æˆŠã€ä¹™ã€ç™¸ | âŒ æ— æƒé‡ | `/util/LunarUtil.cs:912` |
| **lunisolar** | **ç™¸** âœ… | æˆŠã€ä¹™ã€ç™¸ | âœ… æƒé‡60:30:10 | `/constants/calendarData.ts` |
| **bazi-mcp** | **ç™¸** âœ… | é€šè¿‡tyme4ts | âœ… æœ‰æƒé‡ | ä½¿ç”¨tyme4tsåº“ |
| **paipan-1** | **å£¬** âŒ | æˆŠã€ä¹™ã€å£¬ | âœ… æƒé‡16:8:8 | `/bazi_class.js:46` |
| **bazi (Python)** | âŒ æœªå®ç° | æ— è—å¹²åŠŸèƒ½ | - | - |

#### **å®Œæ•´12åœ°æ”¯è—å¹²å¯¹ç…§è¡¨ (ä¸»æµæ´¾)**

```javascript
åœ°æ”¯è—å¹²è¡¨ (ä¸»æ°”ã€ä¸­æ°”ã€ä½™æ°”):
{
  å­: [ç™¸],
  ä¸‘: [å·±, ç™¸, è¾›],
  å¯…: [ç”², ä¸™, æˆŠ],
  å¯: [ä¹™],
  è¾°: [æˆŠ, ä¹™, ç™¸],  â† *** é‡ç‚¹ï¼šæ˜¯ç™¸æ°´ï¼Œä¸æ˜¯å£¬æ°´ ***
  å·³: [ä¸™, åºš, æˆŠ],  â† æ³¨æ„ï¼šæœ‰çš„ç‰ˆæœ¬æ˜¯[ä¸™, æˆŠ, åºš]
  åˆ: [ä¸, å·±],
  æœª: [å·±, ä¸, ä¹™],  â† æ³¨æ„ï¼šæœ‰çš„ç‰ˆæœ¬æ˜¯[å·±, ä¹™, ä¸]
  ç”³: [åºš, å£¬, æˆŠ],
  é…‰: [è¾›],
  æˆŒ: [æˆŠ, è¾›, ä¸],
  äº¥: [å£¬, ç”²]
}
```

#### **è—å¹²æƒé‡æ–¹æ¡ˆå¯¹æ¯”**

| é¡¹ç›® | æƒé‡åˆ†é… | æƒé‡ä¾æ® | æ˜¯å¦è€ƒè™‘æœˆä»¤ |
|------|----------|----------|--------------|
| **BaziGo** | åŠ¨æ€æƒé‡è¡¨ (12Ã—36çŸ©é˜µ) | æœˆä»¤+åœ°æ”¯ä½ç½® | âœ… æ˜¯ |
| **lunisolar** | 60:30:10 å›ºå®šæ¯”ä¾‹ | ä¸»æ°”>ä¸­æ°”>ä½™æ°” | âŒ å¦ |
| **paipan-1** | è‡ªå®šä¹‰æƒé‡ (å¦‚è¾°16:8:8) | ç»éªŒå€¼ | âŒ å¦ |
| **lunarç³»åˆ—** | æ— æƒé‡è®¡ç®— | ä»…åˆ—ä¸¾è—å¹² | - |

**BaziGoæƒé‡è¡¨ç¤ºä¾‹** (`xiyong.go:105`):
```go
// åœ°æ”¯å¼ºåº¦è¡¨: [12æœˆæ”¯][36è—å¹²ä½ç½®(12åœ°æ”¯Ã—3)]
dizhiqiangdulist = [12][36]int{
  // å­æœˆ(å†¬å­£æ°´æ—º): å­è—ç™¸=1000, ä¸‘è—å·±=530/ç™¸=300/è¾›=200...
  {1000, 0, 0, 530, 300, 200, 798, 360, 0, ...},
  // ...å…¶ä»–11ä¸ªæœˆ
}
```

---

### 2.2 å­æ—¶å½’å±æ¨¡å¼ (23:00-00:59)

#### **ä¸¤å¤§æµæ´¾å¯¹æ¯”**

| æµæ´¾ | æ—¥æŸ±å½’å± | æ—¶æŸ±å½’å± | ç†è®ºä¾æ® |
|------|----------|----------|----------|
| **ä¼ ç»Ÿæ´¾ (æ—©å­æ—¶)** | æ¬¡æ—¥ | æ¬¡æ—¥å­æ—¶ | 23:00å³ä¸ºæ¬¡æ—¥å­æ—¶åˆåˆ» |
| **ç°ä»£æ´¾ (æ™šå­æ—¶)** | å½“æ—¥ | å½“æ—¥å­æ—¶ | ä»¥0æ—¶ä¸ºç•Œï¼Œ23:00ä»æ˜¯å½“æ—¥ |

#### **å„é¡¹ç›®å®ç°æƒ…å†µ**

| é¡¹ç›® | æ˜¯å¦æ”¯æŒåŒæ¨¡å¼ | é»˜è®¤æ¨¡å¼ | å®ç°æ–¹å¼ | æ–‡ä»¶ä½ç½® |
|------|----------------|----------|----------|----------|
| **bazi-mcp** | âœ… æ”¯æŒ | ç°ä»£æ´¾ | `eightCharProviderSect` å‚æ•° | `bazi.ts:103-109` |
| **BaziGo** | âŒ ä¸æ”¯æŒ | ä¼ ç»Ÿæ´¾ | ç«‹æ˜¥å®šå¹´æŸ± | ä½¿ç”¨ç«‹æ˜¥èŠ‚æ°” |
| **lunar-java** | âŒ ä¸æ”¯æŒ | ç°ä»£æ´¾ | 0ç‚¹æ¢æ—¥ | æ ‡å‡†å®ç° |
| **lunisolar** | âŒ ä¸æ”¯æŒ | ç°ä»£æ´¾ | 0ç‚¹æ¢æ—¥ | æ ‡å‡†å®ç° |
| **paipan-1** | âŒ ä¸æ”¯æŒ | ç°ä»£æ´¾ | 0ç‚¹æ¢æ—¥ | æ ‡å‡†å®ç° |
| **bazi (Python)** | âŒ ä¸æ”¯æŒ | ç°ä»£æ´¾ | 0ç‚¹æ¢æ—¥ | `metaphysic.py:65-77` |

**bazi-mcpå®ç°ä»£ç ** (`bazi.ts`):
```typescript
export const buildBazi = (options: {
  lunarHour: LunarHour;
  eightCharProviderSect?: 1 | 2;  // â† å…³é”®å‚æ•°
  gender?: Gender
}) => {
  const { lunarHour, eightCharProviderSect = 2, gender = 1 } = options;
  if (eightCharProviderSect === 2) {
    LunarHour.provider = eightCharProvider2;  // æ™šå­æ—¶(ç°ä»£æ´¾)
  } else {
    LunarHour.provider = eightCharProvider1;  // æ—©å­æ—¶(ä¼ ç»Ÿæ´¾)
  }
  // ...
}
```

**Python baziå®ç°** (`metaphysic.py:65-77`):
```python
def calculateTime(tianganOfDay, time):
    tianganIndex = (2 * tianganOfDay - 1) % 10
    if time == 23 or time == 0 or time == 24:  # â† 23ç‚¹å’Œ0ç‚¹éƒ½å½’å­æ—¶
        dizhi = dizhis[0]
        dizhiIndex = 0
    else:
        dizhiIndex = time / 2
        # ...
    return tiangans[(tianganIndex - 1 + dizhiIndex) % 10] + dizhi
```

---

### 2.3 çº³éŸ³è®¡ç®—æ–¹å¼

#### **ä¸¤ç§å®ç°æ–¹å¼**

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **æŸ¥è¡¨æ³•** | å‡†ç¡®ã€å¿«é€Ÿ | å ç”¨å†…å­˜ | å¤§å¤šæ•°é¡¹ç›® |
| **ç®—æ³•è®¡ç®—** | èŠ‚çœç©ºé—´ | éœ€è¦ç†è§£å…¬å¼ | èµ„æºå—é™ç¯å¢ƒ |

#### **å„é¡¹ç›®å®ç°**

| é¡¹ç›® | å®ç°æ–¹å¼ | çº³éŸ³è¡¨å¤§å° | æ–‡ä»¶ä½ç½® |
|------|----------|------------|----------|
| **BaziGo** | æŸ¥è¡¨æ³• | 60ç»„å¹²æ”¯ | `/nayin.go` |
| **lunar-java** | æŸ¥è¡¨æ³• | 60ç»„å¹²æ”¯ | `/util/LunarUtil.java` |
| **paipan-1** | æŸ¥è¡¨æ³• | 60ç»„å¹²æ”¯ | `/bazi_class.js:33-40` |
| **lunisolar** | ç®—æ³•è®¡ç®— | å…¬å¼ | `/class/StemBranch.ts` |
| **bazi (Python)** | âŒ æœªå®ç° | - | - |

**çº³éŸ³å…¬å¼** (lunisolarå®ç°):
```typescript
// å…­åç”²å­çº³éŸ³äº”è¡Œç®—æ³•
getNayin(): string {
  const stemValue = this.stem.value
  const branchValue = this.branch.value
  const index = (stemValue * 6 + branchValue) % 30
  return NAYIN_LIST[Math.floor(index / 2)]
}
```

**paipan-1æŸ¥è¡¨ç¤ºä¾‹**:
```javascript
var nayi = {
  ç”²å­: ["æµ·ä¸­é‡‘"], ä¹™ä¸‘: ["æµ·ä¸­é‡‘"],
  ä¸™å¯…: ["ç‚‰ä¸­ç«"], ä¸å¯: ["ç‚‰ä¸­ç«"],
  æˆŠè¾°: ["å¤§æ—æœ¨"], å·±å·³: ["å¤§æ—æœ¨"],
  // ... å…±60ç»„
}
```

---

### 2.4 èŠ‚æ°”è®¡ç®—ç²¾åº¦

#### **ä¸‰ç§æ•°æ®æ¥æº**

| æ–¹å¼ | ç²¾åº¦ | èŒƒå›´ | ä¼˜ç¼ºç‚¹ |
|------|------|------|--------|
| **å‹ç¼©è¡¨æŸ¥è¯¢** | åˆ†é’Ÿçº§ | 1900-2100 | å¿«é€Ÿä½†èŒƒå›´æœ‰é™ |
| **å¤©æ–‡ç®—æ³•** | ç§’çº§ | æ— é™åˆ¶ | ç²¾ç¡®ä½†è®¡ç®—å¤æ‚ |
| **åœ¨çº¿API** | ç§’çº§ | å–å†³äºæœåŠ¡ | ä¾èµ–ç½‘ç»œ |

#### **å„é¡¹ç›®å®ç°**

| é¡¹ç›® | æ•°æ®æ¥æº | æ—¶é—´èŒƒå›´ | ç²¾åº¦ | æ–‡ä»¶ä½ç½® |
|------|----------|----------|------|----------|
| **bazi (Python)** | å‹ç¼©äºŒè¿›åˆ¶è¡¨ | 1990-2100 | æ—¥çº§ | `/ganzhi.py:29-64` |
| **BaziGo** | æŸ¥è¡¨+ç®—æ³• | 1901-2100 | åˆ†é’Ÿçº§ | `/jieqidate.go`, `/lichun.go` |
| **lunar-java** | å¯¿æ˜Ÿå¤©æ–‡ç®—æ³• | æ— é™åˆ¶ | ç§’çº§ | `/util/ShouXingUtil.java` |
| **lunisolar** | å¤©æ–‡ç®—æ³• | 1900-2100 | åˆ†é’Ÿçº§ | ä½¿ç”¨ç®—æ³•åº“ |
| **bazi-mcp** | tyme4tsåº“ | æ— é™åˆ¶ | ç§’çº§ | ä¾èµ–tyme4ts |
| **paipan-1** | å‹ç¼©è¡¨ | 1984+ | æ¯«ç§’çº§ | `/bazi_class.js:19` |

**Python baziçš„å‹ç¼©è¡¨** (`ganzhi.py:29-64`):
```python
# 24èŠ‚æ°”æ•°æ®å‹ç¼©åœ¨äºŒè¿›åˆ¶ä¸­
CHANGE_1990_2100_24 = [
    485536035763181, 489951330300910, 491395512218606, ...
]

# è§£å‹ç®—æ³•
e = bin(CHANGE_1990_2100_24[year_index])
# é€šè¿‡ä½è¿ç®—æå–æœˆä»½å’Œæ—¥æœŸ
```

**lunar-javaçš„å¯¿æ˜Ÿç®—æ³•** (`ShouXingUtil.java`):
```java
// ä½¿ç”¨å¤©æ–‡ç®—æ³•ç²¾ç¡®è®¡ç®—èŠ‚æ°”æ—¶åˆ»
public static double getJieQiJD(int year, int jieQiIndex) {
    // åŸºäºåœ°çƒå…¬è½¬è½¨é“è®¡ç®—
    // ç²¾åº¦å¯è¾¾ç§’çº§
}
```

#### **ç«‹æ˜¥æ—¶é—´ç²¾åº¦å¯¹æ¯”**

æµ‹è¯•ç”¨ä¾‹: 2024å¹´ç«‹æ˜¥

| é¡¹ç›® | è®¡ç®—ç»“æœ | è¯¯å·® |
|------|----------|------|
| æ ‡å‡†å¤©æ–‡æ•°æ® | 2024-02-04 16:26:53 | åŸºå‡† |
| **lunar-java** | 2024-02-04 16:26:53 | 0ç§’ âœ… |
| **BaziGo** | 2024-02-04 16:27 | â‰¤60ç§’ âœ… |
| **paipan-1** | 2024-02-04 16:00 | çº¦27åˆ†é’Ÿ âš ï¸ |
| **bazi (Python)** | 2024-02-04 (ä»…æ—¥æœŸ) | æ—¥çº§ç²¾åº¦ âš ï¸ |

---

### 2.5 èµ·è¿å¹´é¾„è®¡ç®—

#### **èµ·è¿è§„åˆ™**

```
1. ç¡®å®šå¤§è¿é¡ºé€†:
   - é˜³ç”·é˜´å¥³ â†’ é¡ºè¡Œ
   - é˜´ç”·é˜³å¥³ â†’ é€†è¡Œ

2. è®¡ç®—å‡ºç”Ÿåˆ°æœ€è¿‘èŠ‚æ°”çš„å¤©æ•°å·®:
   - é¡ºè¡Œ: åˆ°ä¸‹ä¸€ä¸ªèŠ‚æ°”çš„å¤©æ•°
   - é€†è¡Œ: åˆ°ä¸Šä¸€ä¸ªèŠ‚æ°”çš„å¤©æ•°

3. è½¬æ¢ä¸ºèµ·è¿å¹´é¾„:
   - 3å¤© = 1å²
   - 1å¤© = 4ä¸ªæœˆ (120å¤©)
   - 1æ—¶è¾° = 10å¤©
```

#### **å„é¡¹ç›®å®ç°å¯¹æ¯”**

| é¡¹ç›® | å®Œæ•´å®ç° | é¡ºé€†è§„åˆ™ | å¹´é¾„å…¬å¼ | è´Ÿæ•°å¤„ç† | æ–‡ä»¶ä½ç½® |
|------|----------|----------|----------|----------|----------|
| **BaziGo** | âœ… å®Œæ•´ | âœ… æ­£ç¡® | 3å¤©=1å¹´ | âœ… æ­£ç¡® | `/qiyun.go`, `/dayun.go` |
| **lunar-java** | âœ… å®Œæ•´ | âœ… æ­£ç¡® | 3å¤©=1å¹´ | âœ… æ­£ç¡® | `/eightchar/Yun.java` |
| **bazi-mcp** | âœ… å®Œæ•´ | âœ… æ­£ç¡® | 3å¤©=1å¹´ | âœ… æ­£ç¡® | ä½¿ç”¨tyme4tsåº“ |
| **lunisolar** | âœ… å®Œæ•´ | âœ… æ­£ç¡® | 3å¤©=1å¹´ | âœ… æ­£ç¡® | `/plugins/advanced` |
| **paipan-1** | âŒ æœªå®ç° | - | - | - | - |
| **bazi (Python)** | âŒ æœªå®ç° | - | - | - | - |

**BaziGoå®ç°** (`qiyun.go`):
```go
// èµ·è¿è§„åˆ™
func (m *TQiYun) init(pBazi *TBazi, bSex bool) {
    nYearGan := pBazi.YearZhu().Gan().Value()

    // ç¡®å®šé¡ºé€†
    if (nYearGan%2 == 0 && bSex) || (nYearGan%2 == 1 && !bSex) {
        m.bDirection = true  // é¡ºè¡Œ
    } else {
        m.bDirection = false // é€†è¡Œ
    }

    // è®¡ç®—åˆ°èŠ‚æ°”çš„å¤©æ•°
    nDays := m.calculateDaysToJieQi()

    // è½¬æ¢ä¸ºå¹´é¾„: 3å¤©=1å¹´
    m.nQiYunAge = nDays / 3
    m.nQiYunMonth = (nDays % 3) * 4  // ä½™æ•°è½¬æœˆ
}
```

**lunar-javaå®ç°** (`Yun.java`):
```java
public class Yun {
    // é¡ºé€†è§„åˆ™
    private boolean forward;

    // èµ·è¿å¹´é¾„è®¡ç®—
    private void computeStart() {
        // é˜³ç”·é˜´å¥³é¡ºè¡Œï¼Œé˜´ç”·é˜³å¥³é€†è¡Œ
        int start = forward ? birthSolar.next(jieQi) : birthSolar.subtract(jieQi);

        // 3å¤©=1å², 1å¤©=4æœˆ, 1æ—¶è¾°=10å¤©
        int year = start / 3;
        int month = (start % 3) * 4;
        int day = (start % 3) * 120;

        this.startYear = year;
        this.startMonth = month;
        this.startDay = day;
    }
}
```

**bazi-mcpç¤ºä¾‹è¾“å‡º**:
```json
"å¤§è¿": {
  "èµ·è¿å¹´é¾„": 4,        // â† 4å²èµ·è¿
  "èµ·è¿æ—¥æœŸ": "2001-1-26",
  "å¤§è¿": [
    {
      "å¹²æ”¯": "åºšç”³",
      "å¼€å§‹å¹´ä»½": 2001,
      "ç»“æŸ": 2010,
      "å¼€å§‹å¹´é¾„": 4,     // â† 4-13å²
      "ç»“æŸå¹´é¾„": 13
    },
    // ...åç»­å¤§è¿
  ]
}
```

---

### 2.6 äº”è¡Œå¼ºåº¦è®¡ç®—

#### **è®¡ç®—æ–¹æ³•å¯¹æ¯”**

| æ–¹æ³• | è€ƒè™‘å› ç´  | å‡†ç¡®åº¦ | å¤æ‚åº¦ |
|------|----------|--------|--------|
| **ç®€å•ç»Ÿè®¡æ³•** | ä»…å¤©å¹²åœ°æ”¯äº”è¡Œ | â­â­ | ä½ |
| **è—å¹²æƒé‡æ³•** | å¤©å¹²+åœ°æ”¯+è—å¹² | â­â­â­â­ | ä¸­ |
| **æœˆä»¤æ—ºè¡°æ³•** | å¤©å¹²+åœ°æ”¯+è—å¹²+æœˆä»¤ | â­â­â­â­â­ | é«˜ |

#### **å„é¡¹ç›®å®ç°**

| é¡¹ç›® | è®¡ç®—æ–¹æ³• | è—å¹²æƒé‡ | æœˆä»¤å½±å“ | æƒé‡æ–¹æ¡ˆ | æ–‡ä»¶ä½ç½® |
|------|----------|----------|----------|----------|----------|
| **BaziGo** | æœˆä»¤æ—ºè¡°æ³• | âœ… è€ƒè™‘ | âœ… è€ƒè™‘ | 12Ã—36çŸ©é˜µ | `/xiyong.go` |
| **lunisolar** | è—å¹²æƒé‡æ³• | âœ… è€ƒè™‘ | âŒ ä¸è€ƒè™‘ | 60:30:10 | `/plugins/advanced` |
| **bazi (Python)** | ç®€å•ç»Ÿè®¡æ³• | âŒ ä¸è€ƒè™‘ | âŒ ä¸è€ƒè™‘ | 1:1:1 | `/metaphysic.py:88-115` |
| **lunar-java** | ä»…åˆ—ä¸¾ | âœ… æœ‰è—å¹² | âŒ æ— è®¡ç®— | æ— æƒé‡ | - |
| **paipan-1** | è—å¹²æƒé‡æ³• | âœ… è€ƒè™‘ | âŒ ä¸è€ƒè™‘ | è‡ªå®šä¹‰ | `/bazi_class.js:41-54` |

**BaziGoå®Œæ•´å®ç°** (`xiyong.go:44-75`):
```go
func (m *TXiYong) init(pSiZhu *TSiZhu) {
    // 1. åˆå§‹åŒ–äº”è¡Œå¼ºåº¦
    m.wuxingList = [5]int{0, 0, 0, 0, 0}

    // 2. ç´¯åŠ å››æŸ±å¤©å¹²äº”è¡Œå¼ºåº¦ (æ¯ä¸ª100)
    m.wuxingList[pSiZhu.YearZhu().Gan().ToWuXing().Value()] += 100
    m.wuxingList[pSiZhu.MonthZhu().Gan().ToWuXing().Value()] += 100
    m.wuxingList[pSiZhu.DayZhu().Gan().ToWuXing().Value()] += 100
    m.wuxingList[pSiZhu.HourZhu().Gan().ToWuXing().Value()] += 100

    // 3. ç´¯åŠ åœ°æ”¯è—å¹²å¼ºåº¦ (è€ƒè™‘æœˆä»¤)
    nMonthZhi := pSiZhu.MonthZhu().Zhi().Value()

    // å¹´æ”¯è—å¹²
    pYearCangGan := pSiZhu.YearZhu().CangGan()
    for i := 0; i < pYearCangGan.Size(); i++ {
        nCangGan := pYearCangGan.Gan(i).Value()
        // dizhiqiangdulist[æœˆæ”¯][åœ°æ”¯*3+è—å¹²åºå·]
        m.wuxingList[pYearCangGan.Gan(i).ToWuXing().Value()] +=
            dizhiqiangdulist[nMonthZhi][nCangGan]
    }

    // æœˆæ”¯è—å¹² (åŒæ ·æ–¹å¼)
    // æ—¥æ”¯è—å¹² (åŒæ ·æ–¹å¼)
    // æ—¶æ”¯è—å¹² (åŒæ ·æ–¹å¼)
}

// åœ°æ”¯å¼ºåº¦è¡¨ (12æœˆÃ—36è—å¹²ä½ç½®)
var dizhiqiangdulist = [12][36]int{
    // å­æœˆ(å†¬å­£æ°´æ—º):
    {1000, 0, 0,      // å­è—ç™¸: 1000
     530, 300, 200,   // ä¸‘è—å·±: 530, ç™¸: 300, è¾›: 200
     798, 360, 0,     // å¯…è—ç”²: 798, ä¸™: 360, æˆŠ: 0
     // ... å…±36ä¸ªå€¼
    },
    // ... å…±12ä¸ªæœˆ
}
```

**Python baziç®€å•å®ç°** (`metaphysic.py`):
```python
def getWuXing(bazi):
    bazilist = str(bazi).split("-")
    wuxingList = []
    # åªç»Ÿè®¡å¤©å¹²å’Œåœ°æ”¯çš„äº”è¡Œï¼Œä¸è€ƒè™‘è—å¹²å’Œæœˆä»¤
    for bazi in bazilist:
        wuxingList.append(wuxingDicForTiangan[bazi[0]])  # å¤©å¹²
        wuxingList.append(wuxingDicForDizhi[bazi[1]])    # åœ°æ”¯

    # ç®€å•è®¡æ•°
    countForJin = wuxingList.count("é‡‘")
    countForMu = wuxingList.count("æœ¨")
    # ... å…¶ä»–äº”è¡Œ

    # å¹³å‡åˆ†é…æƒé‡ (8ä¸ªå…ƒç´ )
    scoreForJin = round(countForJin / 8, 2)
    # ...
```

**lunisolaræƒé‡æ³•** (`constants/calendarData.ts`):
```typescript
// è—å¹²å›ºå®šæƒé‡: ä¸»æ°”60, ä¸­æ°”30, ä½™æ°”10
export const FIVE_ELEMENTS_SCORE = [60, 30, 10]

// äº”è¡Œå¼ºåº¦è®¡ç®—
calculateFiveElements() {
  const scores = { é‡‘: 0, æœ¨: 0, æ°´: 0, ç«: 0, åœŸ: 0 }

  // å¤©å¹²: æ¯ä¸ª100åˆ†
  this.stems.forEach(stem => {
    scores[stem.element] += 100
  })

  // åœ°æ”¯è—å¹²: æŒ‰60:30:10åˆ†é…
  this.branches.forEach(branch => {
    branch.hiddenStems.forEach((stem, index) => {
      scores[stem.element] += FIVE_ELEMENTS_SCORE[index]
    })
  })

  return scores
}
```

---

## ä¸‰ã€æœ€ä½³å®è·µæ¨è

### 3.1 è—å¹²å®ç°

**æ¨èå‚è€ƒ**: **BaziGo** + **lunar-java**

**ç†ç”±**:
1. âœ… è¾°è—å¹²ä½¿ç”¨**ç™¸æ°´** (ä¸»æµæ´¾ï¼Œç¬¦åˆå¤§å¤šæ•°å‘½ç†ä¹¦ç±)
2. âœ… å®Œæ•´çš„12åœ°æ”¯è—å¹²è¡¨
3. âœ… BaziGoæä¾›æœˆä»¤æƒé‡è¡¨ (12Ã—36çŸ©é˜µ)
4. âœ… lunar-javaæä¾›æ¸…æ™°çš„æ•°æ®ç»“æ„

**å®ç°å»ºè®®**:
```rust
// Substrate pallet å®ç°å»ºè®®
pub const EARTHLY_BRANCH_HIDDEN_STEMS: [[u8; 3]; 12] = [
    [9, 0, 0],       // å­: ç™¸
    [5, 9, 7],       // ä¸‘: å·±ç™¸è¾›
    [0, 2, 4],       // å¯…: ç”²ä¸™æˆŠ
    [1, 0, 0],       // å¯: ä¹™
    [4, 1, 9],       // è¾°: æˆŠä¹™ç™¸ â† é‡ç‚¹
    [2, 6, 4],       // å·³: ä¸™åºšæˆŠ
    [3, 5, 0],       // åˆ: ä¸å·±
    [5, 3, 1],       // æœª: å·±ä¸ä¹™
    [6, 8, 4],       // ç”³: åºšå£¬æˆŠ
    [7, 0, 0],       // é…‰: è¾›
    [4, 7, 3],       // æˆŒ: æˆŠè¾›ä¸
    [8, 0, 0],       // äº¥: å£¬ç”²
];

// è—å¹²æƒé‡ (è€ƒè™‘æœˆä»¤)
pub const HIDDEN_STEM_WEIGHT: [[u16; 36]; 12] = [
    // [æœˆæ”¯][åœ°æ”¯*3 + è—å¹²åºå·]
    // å­æœˆ(æ°´æ—º): å­ç™¸1000, ä¸‘å·±530/ç™¸300/è¾›200, ...
    [1000, 0, 0, 530, 300, 200, ...],
    // ... å…¶ä»–11ä¸ªæœˆ
];
```

---

### 3.2 å­æ—¶å½’å±

**æ¨èå‚è€ƒ**: **bazi-mcp**

**ç†ç”±**:
1. âœ… æ”¯æŒåŒæ¨¡å¼åˆ‡æ¢ (ä¼ ç»Ÿæ´¾/ç°ä»£æ´¾)
2. âœ… APIå‚æ•°çµæ´» (`eightCharProviderSect: 1 | 2`)
3. âœ… ç”¨æˆ·å¯é€‰æ‹©ä¹ æƒ¯çš„æ¨¡å¼

**å®ç°å»ºè®®**:
```rust
pub enum ZiTimeMode {
    Traditional,  // æ—©å­æ—¶: 23:00å±æ¬¡æ—¥
    Modern,       // æ™šå­æ—¶: 23:00å±å½“æ—¥
}

pub fn calculate_bazi(
    datetime: DateTime,
    zi_time_mode: ZiTimeMode,
) -> BaziResult {
    let (day_stem, day_branch) = match zi_time_mode {
        ZiTimeMode::Traditional => {
            if datetime.hour == 23 {
                // 23:00ç®—æ¬¡æ—¥
                calculate_next_day_ganzhi(datetime)
            } else {
                calculate_current_day_ganzhi(datetime)
            }
        },
        ZiTimeMode::Modern => {
            // 0ç‚¹æ‰æ¢æ—¥
            calculate_current_day_ganzhi(datetime)
        }
    };
    // ...
}
```

---

### 3.3 çº³éŸ³è®¡ç®—

**æ¨èå‚è€ƒ**: **lunisolar** (ç®—æ³•) + **BaziGo** (æŸ¥è¡¨)

**ç†ç”±**:
1. âœ… lunisolarç®—æ³•ç®€æ´é«˜æ•ˆ
2. âœ… BaziGoæŸ¥è¡¨æ³•å‡†ç¡®å¿«é€Ÿ
3. âœ… å¯æ ¹æ®åœºæ™¯é€‰æ‹©

**å®ç°å»ºè®®**:
```rust
// æ–¹æ¡ˆ1: ç®—æ³•è®¡ç®— (æ¨èé“¾ä¸Šè®¡ç®—)
pub fn calculate_nayin(stem: u8, branch: u8) -> &'static str {
    const NAYIN_LIST: [&str; 30] = [
        "æµ·ä¸­é‡‘", "ç‚‰ä¸­ç«", "å¤§æ—æœ¨", "è·¯æ—åœŸ", "å‰‘é”‹é‡‘",
        "å±±å¤´ç«", "æ¶§ä¸‹æ°´", "åŸå¢™åœŸ", "ç™½è…Šé‡‘", "æ¨æŸ³æœ¨",
        // ... å…±30ç§
    ];

    let index = ((stem as usize) * 6 + (branch as usize)) % 30;
    NAYIN_LIST[index / 2]
}

// æ–¹æ¡ˆ2: æŸ¥è¡¨æ³• (æ›´ç›´è§‚)
pub fn get_nayin_by_table(ganzhi: &str) -> &'static str {
    match ganzhi {
        "ç”²å­" | "ä¹™ä¸‘" => "æµ·ä¸­é‡‘",
        "ä¸™å¯…" | "ä¸å¯" => "ç‚‰ä¸­ç«",
        // ... 60ç»„
        _ => "æœªçŸ¥"
    }
}
```

---

### 3.4 èŠ‚æ°”è®¡ç®—

**æ¨èå‚è€ƒ**: **lunar-java** (å¯¿æ˜Ÿç®—æ³•)

**ç†ç”±**:
1. âœ… ç²¾åº¦é«˜è¾¾ç§’çº§
2. âœ… æ—¶é—´èŒƒå›´æ— é™åˆ¶
3. âœ… å¼€æºç®—æ³•æˆç†Ÿç¨³å®š

**è­¦å‘Š**: âš ï¸ é¿å…ä½¿ç”¨å‹ç¼©è¡¨ (å¦‚Python baziçš„å®ç°)
- æ—¶é—´èŒƒå›´å—é™ (1990-2100)
- ç²¾åº¦ä¸è¶³ (æ—¥çº§æˆ–åˆ†é’Ÿçº§)
- è·¨ä¸–çºªåº”ç”¨ä¼šå¤±æ•ˆ

**å®ç°å»ºè®®**:
```rust
// ä½¿ç”¨å¯¿æ˜Ÿç®—æ³•åº“ (éœ€è¦ç§»æ¤æˆ–è°ƒç”¨)
pub fn calculate_jieqi_time(year: i32, jieqi_index: u8) -> DateTime {
    // åŸºäºåœ°çƒå…¬è½¬å‘¨æœŸçš„å¤©æ–‡ç®—æ³•
    // å‚è€ƒ: lunar-java ShouXingUtil.java

    // ä¼ªä»£ç 
    let jd = calculate_julian_day(year, jieqi_index);
    let datetime = jd_to_datetime(jd);
    datetime
}

// æˆ–ä½¿ç”¨é¢„è®¡ç®—è¡¨ + æ’å€¼æ³•
pub const JIEQI_BASE_TABLE: [[i64; 24]; 200] = [
    // 1900-2100å¹´24èŠ‚æ°”æ—¶é—´æˆ³(ç²¾ç¡®åˆ°ç§’)
    // ...
];

pub fn get_jieqi_time(year: i32, jieqi_index: u8) -> DateTime {
    let index = (year - 1900) as usize;
    let timestamp = JIEQI_BASE_TABLE[index][jieqi_index as usize];
    DateTime::from_timestamp(timestamp)
}
```

---

### 3.5 èµ·è¿å¹´é¾„

**æ¨èå‚è€ƒ**: **lunar-java** + **BaziGo**

**ç†ç”±**:
1. âœ… å®Œæ•´å®ç°é¡ºé€†è§„åˆ™
2. âœ… æ­£ç¡®çš„å¹´é¾„è½¬æ¢å…¬å¼ (3å¤©=1å²)
3. âœ… ç»†èŠ‚å¤„ç†å®Œå–„ (è´Ÿæ•°ã€é—°å¹´ç­‰)

**å®ç°å»ºè®®**:
```rust
pub struct QiYun {
    pub forward: bool,        // é¡ºé€†è¡Œ
    pub start_age: u8,        // èµ·è¿å¹´é¾„
    pub start_year: u16,      // èµ·è¿å¹´ä»½
    pub start_month: u8,      // èµ·è¿æœˆ
    pub start_day: u8,        // èµ·è¿æ—¥
}

pub fn calculate_qiyun(
    birth: DateTime,
    year_stem: u8,
    gender: Gender,
) -> QiYun {
    // 1. ç¡®å®šé¡ºé€†
    let forward = match (year_stem % 2, gender) {
        (0, Gender::Male) | (1, Gender::Female) => true,  // é¡ºè¡Œ
        _ => false,  // é€†è¡Œ
    };

    // 2. æ‰¾æœ€è¿‘èŠ‚æ°”
    let nearest_jieqi = if forward {
        find_next_jieqi(birth)
    } else {
        find_prev_jieqi(birth)
    };

    // 3. è®¡ç®—å¤©æ•°å·®
    let days = (nearest_jieqi - birth).num_days();

    // 4. è½¬æ¢å¹´é¾„: 3å¤©=1å¹´, 1å¤©=4æœˆ
    let start_age = (days / 3) as u8;
    let start_month = ((days % 3) * 4) as u8;
    let start_day = ((days % 3) * 120) as u8;

    QiYun {
        forward,
        start_age,
        start_year: birth.year() as u16 + start_age as u16,
        start_month,
        start_day,
    }
}
```

---

### 3.6 äº”è¡Œå¼ºåº¦

**æ¨èå‚è€ƒ**: **BaziGo**

**ç†ç”±**:
1. âœ… æœ€ç§‘å­¦çš„æœˆä»¤æ—ºè¡°æ³•
2. âœ… å®Œæ•´çš„12Ã—36æƒé‡çŸ©é˜µ
3. âœ… åŒæ—¶è€ƒè™‘å¤©å¹²ã€åœ°æ”¯ã€è—å¹²ã€æœˆä»¤

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ é¿å…ä½¿ç”¨ç®€å•ç»Ÿè®¡æ³• (å¦‚Python bazi)
- âš ï¸ æƒé‡çŸ©é˜µéœ€è¦ä¸“ä¸šå‘½ç†çŸ¥è¯†éªŒè¯
- âš ï¸ ä¸åŒæµæ´¾æƒé‡å¯èƒ½ä¸åŒ

**å®ç°å»ºè®®**:
```rust
pub struct WuXingStrength {
    pub jin: u32,   // é‡‘
    pub mu: u32,    // æœ¨
    pub shui: u32,  // æ°´
    pub huo: u32,   // ç«
    pub tu: u32,    // åœŸ
}

pub fn calculate_wuxing_strength(
    sizhu: &SiZhu,
    month_branch: u8,
) -> WuXingStrength {
    let mut strength = WuXingStrength::default();

    // 1. å¤©å¹²: æ¯ä¸ª100åˆ†
    for zhu in [sizhu.year, sizhu.month, sizhu.day, sizhu.hour] {
        let element = stem_to_element(zhu.stem);
        strength.add(element, 100);
    }

    // 2. åœ°æ”¯è—å¹²: æ ¹æ®æœˆä»¤æƒé‡è¡¨
    for (zhu_index, zhu) in sizhu.iter().enumerate() {
        let hidden_stems = get_hidden_stems(zhu.branch);
        for (stem_index, stem) in hidden_stems.iter().enumerate() {
            let weight = HIDDEN_STEM_WEIGHT[month_branch][
                zhu.branch * 3 + stem_index
            ];
            let element = stem_to_element(*stem);
            strength.add(element, weight);
        }
    }

    strength
}

// æƒé‡çŸ©é˜µ (éœ€è¦ä¸“ä¸šéªŒè¯)
pub const HIDDEN_STEM_WEIGHT: [[u16; 36]; 12] = [
    // å­æœˆ(æ°´æ—º):
    [1000, 0, 0,      // å­è—ç™¸: 1000
     530, 300, 200,   // ä¸‘è—å·±ç™¸è¾›: 530/300/200
     798, 360, 0,     // å¯…è—ç”²ä¸™æˆŠ: 798/360/0
     1158, 0, 0,      // å¯è—ä¹™: 1158
     // ... å…±36ä¸ªå€¼
    ],
    // ... å…¶ä»–11ä¸ªæœˆ
];
```

---

## å››ã€å·®å¼‚å¯¹æ¯”æ€»ç»“

### 4.1 è¾°è—å¹²äº‰è®®

| æ´¾åˆ« | è¾°è—å¹² | æ”¯æŒé¡¹ç›® | ç†è®ºä¾æ® |
|------|--------|----------|----------|
| **ä¸»æµæ´¾** | æˆŠä¹™ç™¸ | BaziGo, lunar-java, lunar-csharp, lunisolar, bazi-mcp | ã€Šæ¸Šæµ·å­å¹³ã€‹ã€Šä¸‰å‘½é€šä¼šã€‹ |
| **å°‘æ•°æ´¾** | æˆŠä¹™å£¬ | paipan-1 | éƒ¨åˆ†ç°ä»£å‘½ç†ä¹¦ç± |

**ç»“è®º**: âœ… **æ¨èä½¿ç”¨"ç™¸æ°´"** (ä¸»æµæ´¾ï¼Œè¢«7/8é¡¹ç›®é‡‡ç”¨)

---

### 4.2 åŠŸèƒ½å®Œæ•´åº¦æ’è¡Œ

| æ’å | é¡¹ç›® | è—å¹² | å­æ—¶ | çº³éŸ³ | èŠ‚æ°” | èµ·è¿ | äº”è¡Œ | ç»¼åˆè¯„åˆ† |
|------|------|------|------|------|------|------|------|----------|
| ğŸ¥‡ | **BaziGo** | âœ… | âœ… | âœ… | â­â­â­â­ | âœ… | â­â­â­â­â­ | 95/100 |
| ğŸ¥ˆ | **lunar-java** | âœ… | âœ… | âœ… | â­â­â­â­â­ | âœ… | â­â­â­ | 93/100 |
| ğŸ¥‰ | **bazi-mcp** | âœ… | â­â­ | âœ… | â­â­â­â­â­ | âœ… | â­â­â­â­ | 92/100 |
| 4 | **lunisolar** | âœ… | âœ… | â­â­ | â­â­â­â­ | âœ… | â­â­â­â­ | 88/100 |
| 5 | **lunar-csharp** | âœ… | âœ… | âœ… | â­â­â­â­â­ | âœ… | â­â­â­ | 88/100 |
| 6 | **paipan-1** | âš ï¸ | âœ… | âœ… | â­â­â­ | âŒ | â­â­â­ | 65/100 |
| 7 | **bazi (Python)** | âŒ | âœ… | âŒ | â­â­ | âŒ | â­â­ | 45/100 |

---

### 4.3 Stardust Pallet å»ºè®®

åŸºäºä»¥ä¸Šåˆ†æï¼Œæ¨è **Stardust å…«å­—æ’ç›˜ Pallet** é‡‡ç”¨ä»¥ä¸‹å®ç°ç­–ç•¥:

#### **æ ¸å¿ƒç®—æ³•æ¥æº**

1. **è—å¹²ç³»ç»Ÿ**: å‚è€ƒ **BaziGo** + **lunar-java**
   - ä½¿ç”¨ä¸»æµæ´¾è—å¹²è¡¨ (è¾°è—ç™¸)
   - å®ç°æœˆä»¤æƒé‡çŸ©é˜µ (12Ã—36)

2. **å­æ—¶å¤„ç†**: å‚è€ƒ **bazi-mcp**
   - æ”¯æŒåŒæ¨¡å¼åˆ‡æ¢
   - æä¾›ç”¨æˆ·é…ç½®é€‰é¡¹

3. **çº³éŸ³è®¡ç®—**: å‚è€ƒ **lunisolar**
   - ä½¿ç”¨ç®—æ³•è®¡ç®— (èŠ‚çœå­˜å‚¨)
   - å¯é€‰æŸ¥è¡¨æ³• (ä¼˜åŒ–æ€§èƒ½)

4. **èŠ‚æ°”ç²¾åº¦**: å‚è€ƒ **lunar-java**
   - é‡‡ç”¨å¯¿æ˜Ÿå¤©æ–‡ç®—æ³•
   - ç²¾åº¦è¾¾åˆ°ç§’çº§

5. **èµ·è¿è®¡ç®—**: å‚è€ƒ **BaziGo** + **lunar-java**
   - å®Œæ•´å®ç°é¡ºé€†è§„åˆ™
   - æ­£ç¡®çš„å¹´é¾„è½¬æ¢å…¬å¼

6. **äº”è¡Œå¼ºåº¦**: å‚è€ƒ **BaziGo**
   - å®ç°æœˆä»¤æ—ºè¡°æ³•
   - æä¾›æƒé‡çŸ©é˜µ

#### **æ•°æ®ç»“æ„å»ºè®®**

```rust
// åŸºç¡€å¹²æ”¯ç»“æ„
pub struct GanZhi {
    pub stem: u8,    // å¤©å¹² 0-9
    pub branch: u8,  // åœ°æ”¯ 0-11
}

// å››æŸ±ç»“æ„
pub struct SiZhu {
    pub year: GanZhi,   // å¹´æŸ±
    pub month: GanZhi,  // æœˆæŸ±
    pub day: GanZhi,    // æ—¥æŸ±
    pub hour: GanZhi,   // æ—¶æŸ±
}

// å…«å­—å®Œæ•´ä¿¡æ¯
pub struct BaziInfo {
    pub sizhu: SiZhu,
    pub hidden_stems: Vec<Vec<u8>>,  // å„æŸ±è—å¹²
    pub nayin: [&'static str; 4],    // å„æŸ±çº³éŸ³
    pub qi_yun: QiYun,                // èµ·è¿ä¿¡æ¯
    pub dayun: Vec<DaYun>,            // å¤§è¿åˆ—è¡¨
    pub wuxing_strength: WuXingStrength, // äº”è¡Œå¼ºåº¦
}

// é…ç½®é€‰é¡¹
pub struct BaziConfig {
    pub zi_time_mode: ZiTimeMode,     // å­æ—¶æ¨¡å¼
    pub canggan_school: CangganSchool, // è—å¹²æµæ´¾
    pub wuxing_method: WuXingMethod,   // äº”è¡Œè®¡ç®—æ³•
}
```

---

## äº”ã€å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä¸ºä»€ä¹ˆè¾°è—å¹²æœ‰äº‰è®®?

**A**: å†å²åŸå› å¯¼è‡´ä¸åŒæµæ´¾è§‚ç‚¹ä¸åŒ:
- **ä¸»æµæ´¾ (ç™¸æ°´)**: åŸºäºã€Šæ¸Šæµ·å­å¹³ã€‹ã€Šä¸‰å‘½é€šä¼šã€‹ç­‰å¤ç±
- **å°‘æ•°æ´¾ (å£¬æ°´)**: éƒ¨åˆ†ç°ä»£å‘½ç†å¸ˆçš„å®è·µç»éªŒ
- **æ¨è**: ä½¿ç”¨"ç™¸æ°´" (7/8é¡¹ç›®é‡‡ç”¨ï¼Œç¬¦åˆä¸»æµ)

### Q2: å­æ—¶å½’å±ä¸ºä»€ä¹ˆå¤æ‚?

**A**: å› ä¸ºå¤ä»£è®¡æ—¶ä¸ç°ä»£ä¸åŒ:
- **å¤ä»£**: 23:00å³ä¸ºæ¬¡æ—¥å­æ—¶åˆåˆ» (ä¸€ä¸ªæ—¶è¾°=2å°æ—¶)
- **ç°ä»£**: ä»¥0:00ä¸ºç•Œé™æ¢æ—¥
- **æ¨è**: æä¾›åŒæ¨¡å¼ä¾›ç”¨æˆ·é€‰æ‹©

### Q3: èŠ‚æ°”ç²¾åº¦é‡è¦å—?

**A**: éå¸¸é‡è¦ï¼
- æœˆæŸ±ä¾èµ–èŠ‚æ°”åˆ¤æ–­
- èµ·è¿å¹´é¾„éœ€è¦ç²¾ç¡®èŠ‚æ°”æ—¶é—´
- **è¯¯å·®1å°æ—¶å¯èƒ½å½±å“æœˆæŸ±**
- **æ¨è**: ä½¿ç”¨å¤©æ–‡ç®—æ³•è¾¾åˆ°ç§’çº§ç²¾åº¦

### Q4: äº”è¡Œå¼ºåº¦è®¡ç®—å“ªç§æ–¹æ³•æœ€å‡†?

**A**: å–å†³äºåº”ç”¨åœºæ™¯:
- **ç®€å•ç»Ÿè®¡**: é€‚åˆå…¥é—¨å­¦ä¹ 
- **è—å¹²æƒé‡**: é€‚åˆä¸€èˆ¬åº”ç”¨
- **æœˆä»¤æ—ºè¡°**: é€‚åˆä¸“ä¸šå‘½ç† â† **æ¨è**

### Q5: å¦‚ä½•éªŒè¯å®ç°æ­£ç¡®æ€§?

**A**: å¤šç»´åº¦äº¤å‰éªŒè¯:
1. ä¸ä¸“ä¸šæ’ç›˜è½¯ä»¶å¯¹æ¯” (å¦‚å…ƒäº¨åˆ©è´)
2. ä¸å¤šä¸ªå¼€æºé¡¹ç›®ç»“æœå¯¹æ¯”
3. å’¨è¯¢ä¸“ä¸šå‘½ç†å¸ˆéªŒè¯
4. å»ºç«‹æµ‹è¯•ç”¨ä¾‹åº“ (è¦†ç›–è¾¹ç•Œæƒ…å†µ)

---

## å…­ã€æµ‹è¯•ç”¨ä¾‹æ¨è

### 6.1 è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹

```rust
#[cfg(test)]
mod tests {
    // ç”¨ä¾‹1: å­æ—¶è¾¹ç•Œ
    #[test]
    fn test_zi_time_boundary() {
        // 2024-01-01 23:30 vs 2024-01-02 00:30
        let case1 = calculate_bazi("2024-01-01 23:30", ZiTimeMode::Traditional);
        let case2 = calculate_bazi("2024-01-01 23:30", ZiTimeMode::Modern);
        assert_ne!(case1.day, case2.day); // ä¼ ç»Ÿæ´¾æ—¥æŸ±ä¸åŒ
    }

    // ç”¨ä¾‹2: èŠ‚æ°”è¾¹ç•Œ
    #[test]
    fn test_jieqi_boundary() {
        // ç«‹æ˜¥å‰å
        let before = calculate_bazi("2024-02-04 16:26:52", ZiTimeMode::Modern);
        let after = calculate_bazi("2024-02-04 16:26:54", ZiTimeMode::Modern);
        assert_ne!(before.year, after.year); // å¹´æŸ±åº”è¯¥ä¸åŒ
    }

    // ç”¨ä¾‹3: è¾°è—å¹²
    #[test]
    fn test_chen_hidden_stem() {
        let bazi = calculate_bazi("2024-04-20 12:00", ZiTimeMode::Modern);
        let chen_hidden = get_hidden_stems(4); // è¾°
        assert_eq!(chen_hidden, vec![4, 1, 9]); // æˆŠä¹™ç™¸
        assert_eq!(stem_name(chen_hidden[2]), "ç™¸"); // ç¬¬ä¸‰ä¸ªæ˜¯ç™¸
    }

    // ç”¨ä¾‹4: é—°å¹´å¤„ç†
    #[test]
    fn test_leap_year() {
        let case1 = calculate_bazi("2024-02-29 12:00", ZiTimeMode::Modern);
        let case2 = calculate_bazi("2024-03-01 12:00", ZiTimeMode::Modern);
        assert_eq!(case1.day + 1, case2.day); // æ—¥æŸ±è¿ç»­
    }

    // ç”¨ä¾‹5: è·¨ä¸–çºª
    #[test]
    fn test_cross_century() {
        let case1 = calculate_bazi("1999-12-31 23:00", ZiTimeMode::Modern);
        let case2 = calculate_bazi("2000-01-01 01:00", ZiTimeMode::Modern);
        // éªŒè¯ä¸–çºªäº¤æ›¿æ­£ç¡®æ€§
    }
}
```

### 6.2 æ ‡å‡†æµ‹è¯•æ¡ˆä¾‹

| åºå· | é˜³å† | å†œå† | æ€§åˆ« | å…«å­— | èµ·è¿ | è¯´æ˜ |
|------|------|------|------|------|------|------|
| 1 | 1998-07-31 14:10 | æˆŠå¯…å¹´å…­æœˆåˆä¹ | ç”· | æˆŠå¯… å·±æœª å·±å¯ è¾›æœª | 4å² | bazi-mcpç¤ºä¾‹ |
| 2 | 2024-02-04 16:26:53 | ç™¸å¯å¹´è…Šæœˆå»¿äº” | å¥³ | ç™¸å¯ ä¹™ä¸‘ æˆŠç”³ å·±æœª | - | ç«‹æ˜¥è¾¹ç•Œ |
| 3 | 2024-01-01 23:30 | ç™¸å¯å¹´å†¬æœˆäºŒå | ç”· | ç™¸å¯/ç”²è¾° ç”²å­ å·±å·³ ç”²å­ | - | å­æ—¶è¾¹ç•Œ |

---

## ä¸ƒã€å‚è€ƒæ–‡çŒ®

### 7.1 å¤ç±å…¸ç±

1. ã€Šæ¸Šæµ·å­å¹³ã€‹ - å®‹ä»£å¾å¤§å‡
2. ã€Šä¸‰å‘½é€šä¼šã€‹ - æ˜ä»£ä¸‡æ°‘è‹±
3. ã€Šæ»´å¤©é«“ã€‹ - æ¸…ä»£åˆ˜ä¼¯æ¸©

### 7.2 å¼€æºé¡¹ç›®

| é¡¹ç›® | ä½œè€… | GitHub | æ¨èåº¦ |
|------|------|--------|--------|
| **lunar-java** | 6tail | https://github.com/6tail/lunar-java | â­â­â­â­â­ |
| **BaziGo** | æœªçŸ¥ | /home/xiaodong/æ–‡æ¡£/xuanxue/bazi/BaziGo | â­â­â­â­â­ |
| **lunisolar** | waterbeside | https://github.com/waterbeside/lunisolar | â­â­â­â­ |
| **bazi-mcp** | cantian-ai | https://github.com/cantian-ai/bazi-mcp | â­â­â­â­ |

### 7.3 æŠ€æœ¯æ–‡æ¡£

1. BaziGoè¯¦ç»†é€»è¾‘æ–‡æ¡£: `/home/xiaodong/æ–‡æ¡£/xuanxue/bazi/BaziGo/å…«å­—æ’ç›˜è¯¦ç»†é€»è¾‘æ–‡æ¡£.md`
2. å¯¿æ˜Ÿå¤©æ–‡ç®—æ³•: lunar-java ShouXingUtil.java
3. tyme4tsåº“æ–‡æ¡£: https://tyme.6tail.cn/

---

## å…«ã€é™„å½•

### 8.1 åå¤©å¹²åœ°æ”¯å¯¹ç…§

**åå¤©å¹²**: ç”²(0) ä¹™(1) ä¸™(2) ä¸(3) æˆŠ(4) å·±(5) åºš(6) è¾›(7) å£¬(8) ç™¸(9)

**åäºŒåœ°æ”¯**: å­(0) ä¸‘(1) å¯…(2) å¯(3) è¾°(4) å·³(5) åˆ(6) æœª(7) ç”³(8) é…‰(9) æˆŒ(10) äº¥(11)

**äº”è¡Œå½’å±**:
- é‡‘: åºš(6) è¾›(7) | ç”³(8) é…‰(9)
- æœ¨: ç”²(0) ä¹™(1) | å¯…(2) å¯(3)
- æ°´: å£¬(8) ç™¸(9) | å­(0) äº¥(11)
- ç«: ä¸™(2) ä¸(3) | å·³(5) åˆ(6)
- åœŸ: æˆŠ(4) å·±(5) | è¾°(4) æœª(7) æˆŒ(10) ä¸‘(1)

### 8.2 å…­åç”²å­çº³éŸ³è¡¨

| ç”²å­ä¹™ä¸‘ | ä¸™å¯…ä¸å¯ | æˆŠè¾°å·±å·³ | åºšåˆè¾›æœª | å£¬ç”³ç™¸é…‰ | ç”²æˆŒä¹™äº¥ |
|----------|----------|----------|----------|----------|----------|
| æµ·ä¸­é‡‘ | ç‚‰ä¸­ç« | å¤§æ—æœ¨ | è·¯æ—åœŸ | å‰‘é”‹é‡‘ | å±±å¤´ç« |
| ä¸™å­ä¸ä¸‘ | æˆŠå¯…å·±å¯ | åºšè¾°è¾›å·³ | å£¬åˆç™¸æœª | ç”²ç”³ä¹™é…‰ | ä¸™æˆŒä¸äº¥ |
| æ¶§ä¸‹æ°´ | åŸå¢™åœŸ | ç™½è…Šé‡‘ | æ¨æŸ³æœ¨ | æ³‰ä¸­æ°´ | å±‹ä¸ŠåœŸ |
| æˆŠå­å·±ä¸‘ | åºšå¯…è¾›å¯ | å£¬è¾°ç™¸å·³ | ç”²åˆä¹™æœª | ä¸™ç”³ä¸é…‰ | æˆŠæˆŒå·±äº¥ |
| éœ¹é›³ç« | æ¾æŸæœ¨ | é•¿æµæ°´ | æ²™ä¸­é‡‘ | å±±ä¸‹ç« | å¹³åœ°æœ¨ |
| åºšå­è¾›ä¸‘ | å£¬å¯…ç™¸å¯ | ç”²è¾°ä¹™å·³ | ä¸™åˆä¸æœª | æˆŠç”³å·±é…‰ | åºšæˆŒè¾›äº¥ |
| å£ä¸ŠåœŸ | é‡‘ç®”é‡‘ | è¦†ç¯ç« | å¤©æ²³æ°´ | å¤§é©¿åœŸ | é’—é’é‡‘ |
| å£¬å­ç™¸ä¸‘ | ç”²å¯…ä¹™å¯ | ä¸™è¾°ä¸å·³ | æˆŠåˆå·±æœª | åºšç”³è¾›é…‰ | å£¬æˆŒç™¸äº¥ |
| æ¡‘æŸ˜æœ¨ | å¤§æºªæ°´ | æ²™ä¸­åœŸ | å¤©ä¸Šç« | çŸ³æ¦´æœ¨ | å¤§æµ·æ°´ |

---

## ä¹ã€æ€»ç»“ä¸å»ºè®®

### 9.1 æ ¸å¿ƒå‘ç°

1. **è¾°è—å¹²äº‰è®®**: 87.5%é¡¹ç›®ä½¿ç”¨"ç™¸æ°´" â†’ **å¼ºçƒˆæ¨èé‡‡ç”¨ç™¸æ°´**
2. **å­æ—¶å¤„ç†**: ä»…bazi-mcpæ”¯æŒåŒæ¨¡å¼ â†’ **å»ºè®®å®ç°åŒæ¨¡å¼**
3. **èŠ‚æ°”ç²¾åº¦**: lunar-javaæœ€ç²¾ç¡®(ç§’çº§) â†’ **æ¨èä½¿ç”¨å¤©æ–‡ç®—æ³•**
4. **äº”è¡Œè®¡ç®—**: BaziGoæœ€ç§‘å­¦(æœˆä»¤æ—ºè¡°) â†’ **æ¨èå®ç°æƒé‡çŸ©é˜µ**
5. **ä»£ç è´¨é‡**: BaziGo + lunar-javaæœ€å®Œå–„ â†’ **ä½œä¸ºä¸»è¦å‚è€ƒ**

### 9.2 Stardust Pallet å®ç°è·¯çº¿

**Phase 1: åŸºç¡€åŠŸèƒ½** (ä¼˜å…ˆçº§â­â­â­â­â­)
- âœ… å››æŸ±è®¡ç®— (å¹´æœˆæ—¥æ—¶)
- âœ… è—å¹²ç³»ç»Ÿ (ä½¿ç”¨ç™¸æ°´)
- âœ… çº³éŸ³è®¡ç®— (ç®—æ³•æ³•)
- âœ… èŠ‚æ°”æŸ¥è¯¢ (å¤©æ–‡ç®—æ³•)

**Phase 2: é«˜çº§åŠŸèƒ½** (ä¼˜å…ˆçº§â­â­â­â­)
- âœ… èµ·è¿è®¡ç®— (é¡ºé€†è§„åˆ™)
- âœ… å¤§è¿æ’åˆ— (10å¹´ä¸€è¿)
- âœ… äº”è¡Œå¼ºåº¦ (æœˆä»¤æƒé‡)
- âœ… å­æ—¶åŒæ¨¡å¼

**Phase 3: æ‰©å±•åŠŸèƒ½** (ä¼˜å…ˆçº§â­â­â­)
- â­• ç¥ç…è®¡ç®—
- â­• åˆ‘å†²åˆä¼š
- â­• åç¥åˆ†æ
- â­• æ ¼å±€åˆ¤æ–­

### 9.3 è´¨é‡ä¿è¯

1. **å•å…ƒæµ‹è¯•**: è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µ
2. **é›†æˆæµ‹è¯•**: ä¸ä¸“ä¸šè½¯ä»¶å¯¹æ¯”
3. **ä¸“å®¶å®¡æ ¸**: é‚€è¯·å‘½ç†å¸ˆéªŒè¯
4. **æŒç»­ä¼˜åŒ–**: æ ¹æ®åé¦ˆè¿­ä»£

---

**æŠ¥å‘Šå®Œæˆæ—¥æœŸ**: 2025-11-25
**åˆ†æäºº**: Claude (Droid AI)
**ç‰ˆæœ¬**: v1.0

---

## é™„å½•A: å¿«é€Ÿå‚è€ƒæ¸…å•

### å…³é”®ä»£ç ä½ç½®ç´¢å¼•

| åŠŸèƒ½ | BaziGo | lunar-java | lunisolar | bazi-mcp |
|------|--------|------------|-----------|----------|
| è—å¹²è¡¨ | canggan.go:4 | LunarUtil.java:734 | calendarData.ts | tyme4tsåº“ |
| è—å¹²æƒé‡ | xiyong.go:105 | æ—  | calendarData.ts | tyme4tsåº“ |
| å­æ—¶å¤„ç† | lichun.go | Lunar.java | - | bazi.ts:103 |
| çº³éŸ³ | nayin.go | LunarUtil.java | StemBranch.ts | tyme4tsåº“ |
| èŠ‚æ°” | jieqidate.go | ShouXingUtil.java | - | tyme4tsåº“ |
| èµ·è¿ | qiyun.go | Yun.java | advanced/ | bazi.ts:72 |
| äº”è¡Œå¼ºåº¦ | xiyong.go:44 | æ—  | - | æ—  |

### æ¨èé˜…è¯»é¡ºåº

1. ğŸ¥‡ **BaziGoè¯¦ç»†æ–‡æ¡£**: `/home/xiaodong/æ–‡æ¡£/xuanxue/bazi/BaziGo/å…«å­—æ’ç›˜è¯¦ç»†é€»è¾‘æ–‡æ¡£.md`
2. ğŸ¥ˆ **lunar-javaæºç **: `/home/xiaodong/æ–‡æ¡£/xuanxue/bazi/lunar-java/src/main/java/com/nlf/calendar/`
3. ğŸ¥‰ **bazi-mcp README**: `/home/xiaodong/æ–‡æ¡£/xuanxue/bazi/bazi-mcp/README.md`
4. **lunisolarå¸¸é‡**: `/home/xiaodong/æ–‡æ¡£/xuanxue/bazi/lunisolar/src/constants/calendarData.ts`

---

**END OF REPORT**
