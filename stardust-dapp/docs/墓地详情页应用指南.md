# å¢“åœ°è¯¦æƒ…é¡µæ ·å¼åº”ç”¨æŒ‡å—

> å°†äº‘ä¸Šæ€å¿µé£æ ¼çš„è®¾è®¡åº”ç”¨åˆ°ç°æœ‰çš„ GraveDetailPage.tsx

## ä¸€ã€æ ·å¼æ–‡ä»¶å¼•å…¥

åœ¨ `GraveDetailPage.tsx` æ–‡ä»¶é¡¶éƒ¨æ·»åŠ æ ·å¼å¼•å…¥ï¼š

```tsx
import React from 'react'
import { Alert, Button, Card, Divider, Input, InputNumber, List, Space, Tabs, Tag, Typography, message, Modal, Upload, Select } from 'antd'
import './GraveDetailPage.css'  // â† æ·»åŠ è¿™è¡Œ
// ... å…¶ä»–å¯¼å…¥
```

## äºŒã€å…³é”®ç»„ä»¶æ ·å¼åº”ç”¨

### 1. é¡µé¢å®¹å™¨

**ä¿®æ”¹å‰**ï¼š
```tsx
return (
  <div style={{ padding: 16, maxWidth: 640, margin: '0 auto', paddingBottom: 80 }}>
    {/* ... */}
  </div>
)
```

**ä¿®æ”¹å**ï¼š
```tsx
return (
  <div className="grave-detail-page">
    {/* ... */}
  </div>
)
```

### 2. é¡¶éƒ¨å¯¼èˆªåŒºåŸŸ

**ä¿®æ”¹å‰**ï¼š
```tsx
<Card style={{ marginBottom: 16 }}>
  <Space>
    <Button onClick={() => window.history.back()}>è¿”å›</Button>
    <Typography.Title level={4}>å¢“åœ°è¯¦æƒ…</Typography.Title>
  </Space>
  {/* ... */}
</Card>
```

**ä¿®æ”¹å**ï¼š
```tsx
<div className="grave-detail-header">
  <div className="grave-detail-header-content">
    <button 
      className="grave-detail-back-btn"
      onClick={() => window.history.back()}
    >
      <span>â†</span>
      <span>è¿”å›</span>
    </button>
    
    <h1 className="grave-detail-title">å¢“åœ°è¯¦æƒ…</h1>
    
    {/* è®¾ç½®æŒ‰é’® */}
    <button className="grave-detail-back-btn">
      <span>âš™</span>
    </button>
  </div>
  
  {/* GraveId è¾“å…¥åŒºåŸŸï¼ˆå¯é€‰ï¼‰ */}
  <div className="grave-id-input-area">
    <InputNumber 
      value={graveId} 
      onChange={setGraveId}
      placeholder="å¢“åœ° ID"
      style={{ width: '100%' }}
    />
    <button onClick={handleLoad}>åŠ è½½</button>
  </div>
</div>
```

### 3. éŸ³ä¹æ’­æ”¾å™¨åŒºåŸŸ

**ä¿®æ”¹å**ï¼š
```tsx
<div className="grave-detail-music">
  <GraveAudioPlayer graveId={graveId} />
</div>
```

### 4. ä¸»å›¾å±•ç¤ºåŒºåŸŸ

**æ–°å¢**ï¼š
```tsx
{deceased.length > 0 && deceased[0].mainImageCid && (
  <div className="grave-detail-main-image">
    <img 
      src={`https://ipfs.io/ipfs/${deceased[0].mainImageCid}`}
      alt={deceased[0].name}
    />
    <div className="grave-detail-main-overlay">
      <div className="deceased-name">{deceased[0].name}</div>
      <div className="deceased-dates">
        {deceased[0].birth && <span>ğŸ•¯ {deceased[0].birth}</span>}
        {deceased[0].death && <span> - {deceased[0].death}</span>}
      </div>
    </div>
  </div>
)}
```

### 5. å†…å®¹æ ‡ç­¾é¡µ

**ä¿®æ”¹å‰**ï¼š
```tsx
<Tabs activeKey={activeTab} onChange={setActiveTab}>
  {/* ... */}
</Tabs>
```

**ä¿®æ”¹å**ï¼š
```tsx
<div className="grave-detail-tabs">
  <Tabs 
    activeKey={activeTab} 
    onChange={setActiveTab}
  >
    {/* ... æ ‡ç­¾é¡µå†…å®¹ä¿æŒä¸å˜ */}
  </Tabs>
</div>
```

### 6. é€è€…ä¿¡æ¯å¡ç‰‡

**ä¿®æ”¹å‰**ï¼š
```tsx
<Card>
  <Typography.Text strong>{item.name}</Typography.Text>
  {/* ... */}
</Card>
```

**ä¿®æ”¹å**ï¼š
```tsx
<div className="deceased-info-card">
  <div className="deceased-info-header">
    <div className="deceased-info-name">
      <span>{item.name}</span>
      {item.nameBadge && <Tag className="grave-detail-tag">{item.nameBadge}</Tag>}
    </div>
    <div className="deceased-info-actions">
      <button className="deceased-info-btn" onClick={handleEdit}>
        ç¼–è¾‘
      </button>
      <button className="deceased-info-btn" onClick={handleViewDetail}>
        æŸ¥çœ‹è¯¦æƒ…
      </button>
    </div>
  </div>
  
  <div className="deceased-info-body">
    <div className="deceased-info-row">
      <span className="deceased-info-label">æ€§åˆ«ï¼š</span>
      <span className="deceased-info-value">{item.gender || 'æœªçŸ¥'}</span>
    </div>
    <div className="deceased-info-row">
      <span className="deceased-info-label">ç”Ÿæ—¥ï¼š</span>
      <span className="deceased-info-value">{item.birth || 'æœªçŸ¥'}</span>
    </div>
    <div className="deceased-info-row">
      <span className="deceased-info-label">å¿Œæ—¥ï¼š</span>
      <span className="deceased-info-value">{item.death || 'æœªçŸ¥'}</span>
    </div>
  </div>
</div>
```

### 7. ç›¸å†Œç½‘æ ¼

**ä¿®æ”¹å**ï¼š
```tsx
<div className="album-grid">
  {photos.map(photo => (
    <div 
      key={photo.id} 
      className="album-item"
      onClick={() => handlePhotoClick(photo)}
    >
      <img 
        src={`https://ipfs.io/ipfs/${photo.cid}`}
        alt={`ç…§ç‰‡ ${photo.id}`}
      />
      <div className="album-item-overlay">
        ç…§ç‰‡ {photo.id}
      </div>
    </div>
  ))}
</div>
```

### 8. è§†é¢‘åˆ—è¡¨

**ä¿®æ”¹å**ï¼š
```tsx
{videos.map(video => (
  <div 
    key={video.id} 
    className="video-list-item"
    onClick={() => handleVideoClick(video)}
  >
    <div className="video-icon">
      â–¶
    </div>
    <div className="video-info">
      <div className="video-title">{video.title || 'æœªå‘½åè§†é¢‘'}</div>
      <div className="video-meta">
        æ—¶é•¿ï¼š{formatDuration(video.duration)}
      </div>
    </div>
  </div>
))}
```

### 9. æ–‡ç« åˆ—è¡¨

**ä¿®æ”¹å**ï¼š
```tsx
{articles.map(article => (
  <div 
    key={article.id} 
    className="article-list-item"
    onClick={() => handleArticleClick(article)}
  >
    <div className="article-title">{article.title}</div>
    <div className="article-summary">{article.summary}</div>
    <div className="article-meta">
      <span>ğŸ“… {formatDate(article.date)}</span>
      <span>ğŸ‘ {article.views || 0} æ¬¡é˜…è¯»</span>
    </div>
  </div>
))}
```

### 10. åº•éƒ¨æ“ä½œåŒºåŸŸ

**ä¿®æ”¹å**ï¼š
```tsx
<div className="grave-detail-actions">
  <button 
    className="grave-action-btn"
    onClick={handleSetMainImage}
  >
    <span>ğŸ–¼</span>
    <span>è®¾ç½®ä¸»å›¾</span>
  </button>
  
  <button 
    className="grave-action-btn grave-action-btn-secondary"
    onClick={handleEdit}
  >
    <span>âœï¸</span>
    <span>ç¼–è¾‘</span>
  </button>
  
  <button 
    className="grave-action-btn grave-action-btn-secondary"
    onClick={handleTransferOwner}
  >
    <span>ğŸ”„</span>
    <span>è½¬ç§»æƒé™</span>
  </button>
  
  <button 
    className="grave-action-btn"
    onClick={handleGoToOffering}
  >
    <span>ğŸ•¯</span>
    <span>å‰å¾€ä¾›å¥‰</span>
  </button>
</div>
```

## ä¸‰ã€ç©ºçŠ¶æ€å±•ç¤º

**æ·»åŠ ç©ºçŠ¶æ€ç»„ä»¶**ï¼š

```tsx
const EmptyState = ({ icon, text }: { icon: string; text: string }) => (
  <div className="empty-state">
    <div className="empty-state-icon">{icon}</div>
    <div className="empty-state-text">{text}</div>
  </div>
)

// ä½¿ç”¨ç¤ºä¾‹
{albums.length === 0 && (
  <EmptyState 
    icon="ğŸ“·" 
    text="æš‚æ— ç›¸å†Œï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ "
  />
)}

{videos.length === 0 && (
  <EmptyState 
    icon="ğŸ¬" 
    text="æš‚æ— è§†é¢‘ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ "
  />
)}

{articles.length === 0 && (
  <EmptyState 
    icon="ğŸ“" 
    text="æš‚æ— æ–‡ç« ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ "
  />
)}
```

## å››ã€åŠ è½½çŠ¶æ€å±•ç¤º

**æ·»åŠ åŠ è½½ç»„ä»¶**ï¼š

```tsx
{loading && (
  <div className="loading-container">
    <Spin size="large" />
    <div className="loading-text">åŠ è½½ä¸­...</div>
  </div>
)}
```

## äº”ã€æ³¨æ„äº‹é¡¹

1. **ä¿æŒåŠŸèƒ½å®Œæ•´æ€§**ï¼šåªä¿®æ”¹æ ·å¼ï¼Œä¸æ”¹å˜ç°æœ‰åŠŸèƒ½é€»è¾‘
2. **æ¸è¿›å¼åº”ç”¨**ï¼šå¯ä»¥å…ˆåº”ç”¨éƒ¨åˆ†æ ·å¼ï¼Œé€æ­¥å®Œå–„
3. **æµ‹è¯•å…¼å®¹æ€§**ï¼šåœ¨ä¸åŒè®¾å¤‡å’Œæµè§ˆå™¨ä¸Šæµ‹è¯•
4. **å¤‡ä»½åŸæ–‡ä»¶**ï¼šä¿®æ”¹å‰å¤‡ä»½åŸå§‹ç»„ä»¶æ–‡ä»¶

## å…­ã€å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1ï¼šå¤‡ä»½åŸæ–‡ä»¶

```bash
cp GraveDetailPage.tsx GraveDetailPage.tsx.backup
```

### æ­¥éª¤2ï¼šå¼•å…¥CSS

åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ï¼š
```tsx
import './GraveDetailPage.css'
```

### æ­¥éª¤3ï¼šåº”ç”¨æ ·å¼ç±»

æŒ‰ç…§ä¸Šè¿°ç¤ºä¾‹ï¼Œé€æ­¥æ›¿æ¢ inline styles ä¸º classNameã€‚

### æ­¥éª¤4ï¼šæµ‹è¯•æ•ˆæœ

```bash
npm run dev
# è®¿é—® http://localhost:5173/#/grave/detail?gid=13
```

### æ­¥éª¤5ï¼šè°ƒæ•´ç»†èŠ‚

æ ¹æ®å®é™…æ•ˆæœå¾®è°ƒ CSS æ ·å¼ã€‚

---

**æ³¨æ„**ï¼šæœ¬æŒ‡å—æä¾›äº†æ¸è¿›å¼çš„æ ·å¼åº”ç”¨æ–¹æ¡ˆï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æ€§åº”ç”¨ã€‚å»ºè®®å…ˆåœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

