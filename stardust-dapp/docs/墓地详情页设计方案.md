# 墓地详情页面设计方案

> 参考云上思念网站风格，打造温馨、庄重的纪念主题页面

## 一、设计理念

### 1.1 色彩方案

参考云上思念网站的配色，采用温馨、庄重的纪念主题色：

| 颜色类型 | 色值 | 用途 |
|---------|------|------|
| 主色（深金色） | #B8860B | 顶部导航、主要按钮、强调元素 |
| 辅色（金色） | #D4AF37 | 渐变辅助色、次要强调 |
| 背景色（米黄） | #F5F5DC | 页面背景、卡片背景 |
| 深色（墨绿） | #2F4F4F | 主要文字、标题 |
| 中性色 | #8B7355 | 次要文字、标签文字 |
| 边框色 | #F0E6D2 | 卡片边框、分隔线 |
| 纯白 | #FFFFFF | 卡片背景、输入框背景 |

### 1.2 视觉风格

1. **简洁温馨**：采用卡片式布局，清晰的信息层次
2. **圆角设计**：12px 圆角营造柔和感
3. **渐变效果**：使用金色系渐变提升质感
4. **阴影层次**：浅色阴影增强立体感
5. **悬停效果**：微妙的位移和阴影变化

## 二、页面结构

### 2.1 顶部导航区域

```
┌─────────────────────────────────────┐
│ ← 返回          墓地详情          ⚙ │
│ ─────────────────────────────────── │
│ [墓地ID输入框]     [加载]           │
└─────────────────────────────────────┘
```

**特点**：
- 金色渐变背景（#B8860B → #D4AF37）
- 粘性定位（sticky），滚动时保持在顶部
- 半透明返回按钮，悬停时向左位移
- 可选的墓地ID输入区域

### 2.2 主图展示区域

```
┌─────────────────────────────────────┐
│                                     │
│         [逝者主图照片]               │
│                                     │
│ ─────────────────────────────────── │
│ 姓名：张三                          │
│ 生卒：1945.03.15 - 2015.08.22      │
└─────────────────────────────────────┘
```

**特点**：
- 全宽主图展示
- 底部渐变遮罩（透明 → 黑色70%透明度）
- 白色文字，添加文字阴影增强可读性
- 圆角卡片容器，阴影效果

### 2.3 音乐播放器

```
┌─────────────────────────────────────┐
│ ⏮  ▶  ⏭     正在播放：祭奠音乐     │
└─────────────────────────────────────┘
```

**特点**：
- 白色卡片背景
- 简洁的播放控制按钮
- 当前播放信息展示

### 2.4 内容标签页

```
┌─────────────────────────────────────┐
│ [逝者信息] [家族关系] [相册] [...]  │
│ ─────────────────────────────────── │
│                                     │
│          [内容区域]                 │
│                                     │
└─────────────────────────────────────┘
```

**标签**：
1. **逝者信息**：基本资料、生平简介
2. **家族关系**：家族树、关系图谱
3. **相册**：3列网格布局，照片墙
4. **视频**：视频列表，带播放图标
5. **生平**：详细生平事迹
6. **追忆文章**：纪念文章列表

**特点**：
- 浅色导航背景（#FAFAF9）
- 激活标签使用主色
- 金色渐变指示器
- 白色内容区域

### 2.5 逝者信息卡片

```
┌─────────────────────────────────────┐
│ 张三              [编辑] [查看详情] │
│                                     │
│ 性别：男                            │
│ 生日：1945年3月15日                 │
│ 忌日：2015年8月22日                 │
│ 寿龄：70岁                          │
└─────────────────────────────────────┘
```

**特点**：
- 米黄边框（#F0E6D2）
- 悬停时提升，增强阴影
- 信息行排版整齐
- 操作按钮右对齐

### 2.6 相册网格

```
┌─────┬─────┬─────┐
│ 照片 │ 照片 │ 照片 │
├─────┼─────┼─────┤
│ 照片 │ 照片 │ 照片 │
└─────┴─────┴─────┘
```

**特点**：
- 3列网格布局（移动端2列）
- 1:1 宽高比
- 圆角8px
- 悬停时缩放1.05倍

### 2.7 底部操作区域

```
┌─────────────────────────────────────┐
│ [设置主图]     [编辑]               │
│ [转移权限]     [前往供奉]           │
└─────────────────────────────────────┘
```

**特点**：
- 2x2 网格布局（移动端1列）
- 主操作按钮：金色渐变
- 次要操作按钮：白色背景，金色边框
- 悬停效果：提升，增强阴影

## 三、交互设计

### 3.1 页面加载流程

1. **进入页面** → 显示加载状态
2. **解析GID** → 从URL或LocalStorage获取
3. **加载数据** → 并行请求墓地信息、逝者列表、媒体数据
4. **渲染内容** → 分标签页展示
5. **懒加载** → 切换标签页时才加载对应媒体内容

### 3.2 用户操作流程

#### 查看逝者详情
```
点击逝者卡片 → 弹窗展示详细信息 → 可编辑/关闭
```

#### 浏览相册
```
点击相册标签 → 网格展示缩略图 → 点击图片 → 大图预览
```

#### 播放视频
```
点击视频列表项 → 调用系统播放器 → 播放视频
```

#### 阅读文章
```
点击文章标题 → 弹窗/新页面展示全文
```

#### 创建留言
```
点击创建留言按钮 → 填写留言内容 → 上传至IPFS → 提交交易
```

### 3.3 动画效果

1. **卡片悬停**：上移2px + 增强阴影
2. **按钮悬停**：上移2px + 阴影变化
3. **相册图片悬停**：缩放1.05倍
4. **页面切换**：淡入淡出效果
5. **内容加载**：骨架屏 → 淡入内容

## 四、响应式设计

### 4.1 断点设置

- **移动端**：< 640px
- **桌面端**：≥ 640px

### 4.2 适配策略

| 元素 | 移动端 | 桌面端 |
|------|--------|--------|
| 容器最大宽度 | 100% | 640px |
| 相册网格 | 2列 | 3列 |
| 操作按钮 | 1列 | 2列 |
| 字体大小 | 标准 | 标准 |

## 五、关键优化点

### 5.1 视觉优化

1. **色彩统一**：采用纪念主题配色方案
2. **间距规范**：使用8px基准间距
3. **圆角统一**：卡片12px，按钮8px，小元素6px
4. **阴影层次**：
   - Small: `0 2px 4px rgba(0, 0, 0, 0.05)`
   - Medium: `0 2px 8px rgba(0, 0, 0, 0.1)`
   - Large: `0 4px 12px rgba(184, 134, 11, 0.15)`

### 5.2 性能优化

1. **懒加载**：媒体内容按需加载
2. **虚拟列表**：长列表使用虚拟滚动
3. **图片优化**：使用缩略图，点击加载原图
4. **缓存策略**：已加载数据本地缓存

### 5.3 用户体验优化

1. **加载反馈**：骨架屏 + 加载动画
2. **错误提示**：友好的错误信息展示
3. **空状态**：引导用户添加内容
4. **操作确认**：重要操作需二次确认
5. **快速返回**：顶部固定返回按钮

## 六、技术实现要点

### 6.1 组件结构

```
GraveDetailPage
├── Header (顶部导航)
│   ├── BackButton
│   ├── Title
│   └── GraveIdInput (可选)
├── MusicPlayer (音乐播放器)
├── MainImage (主图展示)
├── TabsContainer
│   ├── DeceasedInfo (逝者信息)
│   ├── FamilyTree (家族关系)
│   ├── Album (相册)
│   ├── Video (视频)
│   ├── Biography (生平)
│   └── Articles (追忆文章)
└── Actions (操作按钮区)
```

### 6.2 状态管理

- **graveId**: 当前墓地ID
- **loading**: 加载状态
- **graveInfo**: 墓地基本信息
- **deceased**: 逝者列表
- **activeTab**: 当前激活标签
- **albums/videos/articles**: 各类媒体数据
- **messages**: 留言列表

### 6.3 数据加载策略

1. **首次加载**：
   - 墓地信息（Graves, SlugOf）
   - 逝者列表（DeceasedByGrave, DeceasedOf）
   - 默认标签页内容

2. **按需加载**：
   - 切换标签页时加载对应媒体
   - 点击图片时加载大图
   - 滚动时加载更多留言

3. **缓存机制**：
   - 已加载数据存储在状态中
   - 避免重复请求

## 七、与云上思念风格的对应

| 云上思念特点 | 本页面实现 |
|-------------|-----------|
| 温馨配色 | 金色系渐变，米黄背景 |
| 卡片布局 | 信息卡片，媒体卡片 |
| 清晰层次 | 标签页分组，信息行对齐 |
| 圆角设计 | 统一12px/8px圆角 |
| 柔和阴影 | 多层次阴影系统 |
| 照片墙 | 3列网格相册 |
| 简洁操作 | 底部固定操作区 |

## 八、后续优化建议

1. **增强交互**：
   - 添加滑动手势切换标签
   - 照片轻扫浏览
   - 下拉刷新

2. **功能扩展**：
   - 分享功能
   - 二维码生成
   - 在线祭扫

3. **性能提升**：
   - 使用React.memo优化渲染
   - 实现虚拟滚动
   - 图片懒加载

4. **无障碍优化**：
   - 添加ARIA标签
   - 键盘导航支持
   - 高对比度模式

## 九、使用说明

### 9.1 引入样式

在 `GraveDetailPage.tsx` 中引入样式文件：

```typescript
import './GraveDetailPage.css'
```

### 9.2 应用样式类

在组件JSX中使用对应的样式类：

```tsx
<div className="grave-detail-page">
  <div className="grave-detail-header">
    {/* ... */}
  </div>
  <div className="grave-detail-main-image">
    {/* ... */}
  </div>
  {/* ... */}
</div>
```

### 9.3 自定义主题

如需调整主题色，修改 `GraveDetailPage.css` 中的色值变量。

---

**设计版本**: 1.0  
**参考网站**: https://m.yssn.cn/wap/index/pc_index.html  
**设计日期**: 2025-11-07  
**设计者**: AI Assistant

