# é¡µé¢è¿æ¥é…ç½®è¯´æ˜

> **é…ç½®æ—¶é—´**: 2024-01-15  
> **æ¶‰åŠé¡µé¢**: é¦–é¡µ â†’ åˆ›å»ºçºªå¿µé¦†é¡µé¢

---

## âœ… å·²å®Œæˆçš„è¿æ¥é…ç½®

### 1. è·¯ç”±é…ç½®æ›´æ–°

**æ–‡ä»¶ä½ç½®**: `src/routes.tsx`

**æ›´æ–°å†…å®¹ï¼š**
```typescript
// ç¬¬ 22-23 è¡Œ
{ match: h => h === '#/grave/create', component: lazy(() => import('./features/grave/CreateGravePage')) },
{ match: h => h === '#/grave/create-old', component: lazy(() => import('./features/grave/CreateGraveForm')) }, // ä¿ç•™æ—§ç‰ˆæœ¬
```

**è¯´æ˜ï¼š**
- âœ… æ–°ç‰ˆåˆ›å»ºé¡µé¢è·¯ç”±ï¼š`#/grave/create` â†’ `CreateGravePage`
- âœ… æ—§ç‰ˆé¡µé¢ä¿ç•™ï¼š`#/grave/create-old` â†’ `CreateGraveForm`
- âœ… ä½¿ç”¨æ‡’åŠ è½½ä¼˜åŒ–æ€§èƒ½

### 2. é¦–é¡µè·³è½¬é“¾æ¥

**é¦–é¡µæ–‡ä»¶**: `src/features/home/ModernHomePage.tsx`

**è·³è½¬ä½ç½®ï¼š**

1. **å¿«æ·æ“ä½œå¡ç‰‡**ï¼ˆç¬¬ 144 è¡Œï¼‰
```typescript
{
  key: 'create',
  icon: <PlusOutlined />,
  label: 'åˆ›å»ºçºªå¿µé¦†',
  description: 'ä¸ºé€è€…å»ºç«‹æ°¸æ’çš„æ•°å­—çºªå¿µç©ºé—´',
  color: 'var(--color-primary)',
  route: '#/grave/create',  // â† è·³è½¬é“¾æ¥
  gradient: 'linear-gradient(135deg, #B8860B 0%, #D4AF37 100%)'
}
```

2. **Hero åŒºé»˜è®¤æŒ‰é’®**ï¼ˆç¬¬ 269 è¡Œï¼‰
```typescript
<Button
  type="primary"
  size="large"
  icon={<PlusOutlined />}
  onClick={() => window.location.hash = '#/grave/create'}  // â† è·³è½¬é“¾æ¥
  style={{ ... }}
>
  ç«‹å³åˆ›å»ºçºªå¿µé¦†
</Button>
```

3. **åº•éƒ¨å¿«é€Ÿé“¾æ¥**ï¼ˆç¬¬ 431 è¡Œï¼‰
```typescript
<Button type="link" onClick={() => window.location.hash = '#/grave/create'}>
  <PlusOutlined /> åˆ›å»ºçºªå¿µé¦†
</Button>
```

---

## ğŸ”„ é¡µé¢è·³è½¬æµç¨‹

### ç”¨æˆ·æ“ä½œæµç¨‹

```
ç”¨æˆ·è®¿é—®é¦–é¡µ
    â†“
ç‚¹å‡»"åˆ›å»ºçºªå¿µé¦†"æŒ‰é’®
    â†“
è§¦å‘ onClick äº‹ä»¶ï¼šwindow.location.hash = '#/grave/create'
    â†“
è·¯ç”±ç³»ç»ŸåŒ¹é…ï¼š#/grave/create
    â†“
æ‡’åŠ è½½ç»„ä»¶ï¼šCreateGravePage
    â†“
æ¸²æŸ“åˆ›å»ºé¡µé¢
```

### æŠ€æœ¯å®ç°æµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
   â”œâ”€ è§¦å‘ onClick äº‹ä»¶
   â””â”€ è®¾ç½® window.location.hash

2. Hash å˜åŒ–è§¦å‘è·¯ç”±ç›‘å¬
   â”œâ”€ è·¯ç”±ç³»ç»Ÿæ£€æµ‹åˆ° hash å˜åŒ–
   â””â”€ è°ƒç”¨ resolveRoute('#/grave/create')

3. åŒ¹é…è·¯ç”±è§„åˆ™
   â”œâ”€ éå† routes æ•°ç»„
   â”œâ”€ æ‰¾åˆ°åŒ¹é…çš„è·¯ç”±é¡¹
   â””â”€ è¿”å›å¯¹åº”ç»„ä»¶

4. æ‡’åŠ è½½ç»„ä»¶
   â”œâ”€ React.lazy() åŠ¨æ€å¯¼å…¥
   â”œâ”€ åŠ è½½ CreateGravePage.tsx
   â””â”€ ç¼–è¯‘å¹¶æ‰§è¡Œç»„ä»¶ä»£ç 

5. æ¸²æŸ“é¡µé¢
   â”œâ”€ ç»„ä»¶æŒ‚è½½
   â”œâ”€ useEffect æ‰§è¡Œ
   â””â”€ é¡µé¢å±•ç¤ºç»™ç”¨æˆ·
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   cd stardust-dapp
   npm run dev
   ```

2. **è®¿é—®é¦–é¡µ**
   - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`http://localhost:3000/#/`
   - æˆ–ç›´æ¥ï¼š`http://localhost:3000/#/home`

3. **æµ‹è¯•è·³è½¬**
   
   **æ–¹å¼ä¸€ï¼šå¿«æ·æ“ä½œå¡ç‰‡**
   - æ‰¾åˆ°"å¿«æ·æ“ä½œ"åŒºåŸŸ
   - ç‚¹å‡»"åˆ›å»ºçºªå¿µé¦†"å¡ç‰‡
   - åº”è¯¥è·³è½¬åˆ°åˆ›å»ºé¡µé¢

   **æ–¹å¼äºŒï¼šHero åŒºæŒ‰é’®**
   - å¦‚æœæ²¡æœ‰è½®æ’­å›¾ï¼Œä¼šæ˜¾ç¤ºé»˜è®¤ Hero åŒº
   - ç‚¹å‡»"ç«‹å³åˆ›å»ºçºªå¿µé¦†"æŒ‰é’®
   - åº”è¯¥è·³è½¬åˆ°åˆ›å»ºé¡µé¢

   **æ–¹å¼ä¸‰ï¼šåº•éƒ¨é“¾æ¥**
   - æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨
   - åœ¨"å¿«é€Ÿé“¾æ¥"åŒºåŸŸæ‰¾åˆ°"åˆ›å»ºçºªå¿µé¦†"
   - ç‚¹å‡»åº”è¯¥è·³è½¬åˆ°åˆ›å»ºé¡µé¢

   **æ–¹å¼å››ï¼šç›´æ¥è®¿é—®**
   - åœ°å€æ è¾“å…¥ï¼š`#/grave/create`
   - ç›´æ¥è¿›å…¥åˆ›å»ºé¡µé¢

4. **éªŒè¯é¡µé¢æ˜¾ç¤º**
   - æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£ç¡®åŠ è½½
   - éªŒè¯æ ·å¼æ˜¯å¦æ­£ç¡®åº”ç”¨
   - æµ‹è¯•è¡¨å•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
   - æ£€æŸ¥å“åº”å¼å¸ƒå±€

### é¢„æœŸç»“æœ

- âœ… ç‚¹å‡»æŒ‰é’®å URL å˜ä¸º `#/grave/create`
- âœ… é¡µé¢å¹³æ»‘åˆ‡æ¢åˆ°åˆ›å»ºé¡µé¢
- âœ… åˆ›å»ºé¡µé¢æ­£ç¡®åŠ è½½å’Œæ˜¾ç¤º
- âœ… æ‰€æœ‰æ ·å¼æ­£ç¡®åº”ç”¨
- âœ… åŠ¨ç”»æ•ˆæœæµç•…æ’­æ”¾
- âœ… è¡¨å•åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šç‚¹å‡»æŒ‰é’®æ²¡æœ‰ååº”

**å¯èƒ½åŸå› ï¼š**
- JavaScript é”™è¯¯
- è·¯ç”±é…ç½®é”™è¯¯
- ç»„ä»¶å¯¼å…¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. æŸ¥çœ‹ Console æ ‡ç­¾é¡µ
3. æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤

### é—®é¢˜ 2ï¼šé¡µé¢æ˜¾ç¤ºç©ºç™½

**å¯èƒ½åŸå› ï¼š**
- ç»„ä»¶åŠ è½½å¤±è´¥
- æ ·å¼æ–‡ä»¶æœªå¯¼å…¥
- ç»„ä»¶å†…éƒ¨é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ Network æ ‡ç­¾é¡µ
2. ç¡®è®¤ç»„ä»¶æ–‡ä»¶å·²åŠ è½½
3. æŸ¥çœ‹ Console é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥ CSS æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥

### é—®é¢˜ 3ï¼šæ ·å¼ä¸æ­£ç¡®

**å¯èƒ½åŸå› ï¼š**
- CSS æ–‡ä»¶æœªå¯¼å…¥
- ç±»åä¸åŒ¹é…
- CSS å†²çª

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ `CreateGravePage.css` å·²å¯¼å…¥
2. æ£€æŸ¥ className æ˜¯å¦æ­£ç¡®
3. ä½¿ç”¨å¼€å‘è€…å·¥å…·æ£€æŸ¥æ ·å¼åº”ç”¨æƒ…å†µ

### é—®é¢˜ 4ï¼šè·¯ç”±ä¸åŒ¹é…

**å¯èƒ½åŸå› ï¼š**
- Hash å€¼ä¸æ­£ç¡®
- è·¯ç”±è§„åˆ™æœªæ›´æ–°
- ç»„ä»¶è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ `routes.tsx` å·²æ›´æ–°
2. æ£€æŸ¥ç»„ä»¶å¯¼å…¥è·¯å¾„
3. é‡å¯å¼€å‘æœåŠ¡å™¨

---

## ğŸ“ ç›¸å…³æ–‡ä»¶æ¸…å•

### ç»„ä»¶æ–‡ä»¶
- âœ… `src/features/grave/CreateGravePage.tsx` - æ–°ç‰ˆåˆ›å»ºé¡µé¢
- âœ… `src/features/grave/CreateGravePage.css` - é¡µé¢æ ·å¼
- âš ï¸ `src/features/grave/CreateGraveForm.tsx` - æ—§ç‰ˆï¼ˆä¿ç•™ï¼‰

### è·¯ç”±æ–‡ä»¶
- âœ… `src/routes.tsx` - è·¯ç”±é…ç½®

### å…¥å£æ–‡ä»¶
- âœ… `src/features/home/ModernHomePage.tsx` - é¦–é¡µï¼ˆæ–°ç‰ˆï¼‰
- âš ï¸ `src/features/home/HomePage.tsx` - é¦–é¡µï¼ˆæ—§ç‰ˆï¼‰

### æ–‡æ¡£æ–‡ä»¶
- âœ… `docs/åˆ›å»ºçºªå¿µé¦†é¡µé¢è®¾è®¡è¯´æ˜.md`
- âœ… `docs/åˆ›å»ºçºªå¿µé¦†ä½¿ç”¨æŒ‡å—.md`
- âœ… `docs/åˆ›å»ºçºªå¿µé¦†é¡µé¢ä¼˜åŒ–å¯¹æ¯”.md`
- âœ… `docs/é¡µé¢è¿æ¥é…ç½®è¯´æ˜.md`ï¼ˆæœ¬æ–‡æ¡£ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

### å¼€å‘ç¯å¢ƒæµ‹è¯•

1. **å¯åŠ¨é¡¹ç›®**
   ```bash
   cd /home/xiaodong/æ–‡æ¡£/stardust/stardust-dapp
   npm run dev
   ```

2. **è®¿é—®é¦–é¡µ**
   - æµè§ˆå™¨æ‰“å¼€ï¼š`http://localhost:3000/#/`

3. **ç‚¹å‡»æµ‹è¯•**
   - ç‚¹å‡»"åˆ›å»ºçºªå¿µé¦†"å¡ç‰‡æˆ–æŒ‰é’®
   - éªŒè¯è·³è½¬æ˜¯å¦æ­£å¸¸
   - æ£€æŸ¥é¡µé¢æ˜¾ç¤ºæ•ˆæœ

4. **åŠŸèƒ½æµ‹è¯•**
   - å¡«å†™è¡¨å•
   - æäº¤åˆ›å»º
   - éªŒè¯å®Œæ•´æµç¨‹

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

2. **æ£€æŸ¥æ„å»ºäº§ç‰©**
   - ç¡®è®¤ CreateGravePage å·²æ‰“åŒ…
   - éªŒè¯ä»£ç åˆ†å‰²æ­£ç¡®

3. **éƒ¨ç½²ä¸Šçº¿**
   - æŒ‰ç…§é¡¹ç›®éƒ¨ç½²æµç¨‹æ“ä½œ
   - éªŒè¯çº¿ä¸Šç¯å¢ƒåŠŸèƒ½

---

## ğŸ”— ç›¸å…³è·¯ç”±ä¸€è§ˆ

### çºªå¿µé¦†ç›¸å…³è·¯ç”±

| è·¯ç”± | ç»„ä»¶ | è¯´æ˜ |
|-----|------|------|
| `#/grave/create` | CreateGravePage | åˆ›å»ºçºªå¿µé¦†ï¼ˆæ–°ç‰ˆï¼‰ |
| `#/grave/create-old` | CreateGraveForm | åˆ›å»ºçºªå¿µé¦†ï¼ˆæ—§ç‰ˆï¼‰ |
| `#/grave/my` | MyGravesPage | æˆ‘çš„çºªå¿µé¦† |
| `#/grave/detail?id=xxx` | GraveDetailPage | çºªå¿µé¦†è¯¦æƒ… |

### é¦–é¡µè·¯ç”±

| è·¯ç”± | ç»„ä»¶ | è¯´æ˜ |
|-----|------|------|
| `#/` | ModernHomePage | é¦–é¡µï¼ˆæ–°ç‰ˆï¼‰ |
| `#/home` | ModernHomePage | é¦–é¡µï¼ˆæ–°ç‰ˆï¼‰ |
| `#/home-old` | HomePage | é¦–é¡µï¼ˆæ—§ç‰ˆï¼‰ |

### å…¶ä»–ç›¸å…³è·¯ç”±

| è·¯ç”± | ç»„ä»¶ | è¯´æ˜ |
|-----|------|------|
| `#/deceased/create` | CreateDeceasedForm | åˆ›å»ºé€è€…æ¡£æ¡ˆ |
| `#/deceased/list` | DeceasedListPage | é€è€…åˆ—è¡¨ |
| `#/memorial/xxx` | MemorialHallDetailPage | çºªå¿µé¦†è¯¦æƒ…é¡µ |

---

## ğŸ’¡ å¼€å‘æç¤º

### 1. ç»„ä»¶å‘½åè§„èŒƒ
- é¡µé¢ç»„ä»¶ï¼šxxxPage.tsx
- è¡¨å•ç»„ä»¶ï¼šxxxForm.tsx
- æ ·å¼æ–‡ä»¶ï¼šä¸ç»„ä»¶åŒå .css

### 2. è·¯ç”±è§„åˆ™
- ç²¾ç¡®åŒ¹é…ï¼š`h => h === '#/path'`
- å‰ç¼€åŒ¹é…ï¼š`h => h.startsWith('#/path')`
- å‚æ•°è·¯ç”±ï¼šä½¿ç”¨ URLSearchParams è§£æ

### 3. æ‡’åŠ è½½ä¼˜åŠ¿
- å‡å°åˆå§‹åŒ…ä½“ç§¯
- æŒ‰éœ€åŠ è½½æå‡æ€§èƒ½
- æ›´å¿«çš„é¦–å±åŠ è½½

### 4. ä¿ç•™æ—§ç‰ˆæœ¬
- æ–¹ä¾¿ A/B æµ‹è¯•
- æ”¯æŒæ¸è¿›å¼è¿ç§»
- ä¾¿äºé—®é¢˜å›æ»š

---

## âœ… é…ç½®éªŒè¯æ¸…å•

- [x] è·¯ç”±é…ç½®å·²æ›´æ–°
- [x] æ–°ç»„ä»¶å·²åˆ›å»º
- [x] æ ·å¼æ–‡ä»¶å·²åˆ›å»º
- [x] é¦–é¡µè·³è½¬é“¾æ¥æ­£ç¡®
- [x] æ—  linter é”™è¯¯
- [x] æ–‡æ¡£å·²å®Œå–„
- [ ] å¼€å‘ç¯å¢ƒæµ‹è¯•ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰
- [ ] åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰

---

**é…ç½®å®Œæˆæ—¶é—´**: 2024-01-15  
**é…ç½®çŠ¶æ€**: âœ… å·²å®Œæˆï¼Œå¾…æµ‹è¯•  
**ä¸‹ä¸€æ­¥**: å¯åŠ¨å¼€å‘æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•

