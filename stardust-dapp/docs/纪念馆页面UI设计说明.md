# 纪念馆页面UI设计说明

> **组件**: MemorialComprehensive.tsx  
> **路由**: `#/memorial/comprehensive/{id}`  
> **设计参考**: https://m.yssn.cn/wap/index/pc_index.html  
> **创建日期**: 2025-11-08

---

## 📋 设计说明

本页面**严格按照云上思念网站的UI设计**，完全复刻其UI风格和布局，不做创新。

### 设计参考

- **参考网站**: https://m.yssn.cn/wap/index/pc_index.html
- **设计原则**: 完全按照云上思念的UI设计，保持一致的视觉风格

---

## 🎨 UI结构

### 1. 顶部导航栏

```
┌─────────────────────────────────────┐
│ [🔍 搜索馆名或人名]        [签到]    │
└─────────────────────────────────────┘
```

- **搜索框**: 圆角20px，灰色背景 `#f5f5f5`
- **签到按钮**: 文本按钮，右侧对齐
- **样式**: 白色背景，底部边框，sticky定位

### 2. 逝者信息区

```
┌─────────────────────────────────────┐
│                                     │
│          [逝者照片]                  │
│                                     │
│      陈书元 & 索长琴                │
│      1921-1980                      │
│                                     │
│  他们中最久的已经离开我们45年了      │
│  亲友们已祭拜14次，已点亮蜡烛3次    │
│  📅 距忌日还有56天，距生辰还有346天  │
│                                     │
│      [🔥 点亮蜡烛]                  │
│      已点亮3支蜡烛                  │
│                                     │
└─────────────────────────────────────┘
```

- **照片**: 80px圆形头像（如果有）
- **姓名**: 22px，加粗，居中
- **生卒年**: 14px，灰色 `#999`
- **统计信息**: 13px，灰色 `#666`，行高2
- **点亮蜡烛按钮**: 渐变背景（深金色），圆角20px，高度44px
- **蜡烛数**: 12px，灰色 `#999`

### 3. 最近动态

```
┌─────────────────────────────────────┐
│ 最近动态                            │
├─────────────────────────────────────┤
│ 其宁 供奉了鲜花           2分钟前   │
│ 其宁 点亮了蜡烛           2分钟前   │
│ 摩羯 给墓园擦墓碑了       13分钟前  │
└─────────────────────────────────────┘
```

- **标题**: 16px，加粗
- **列表项**: 14px，用户名加粗，操作和时间灰色
- **分隔线**: 1px，浅灰色 `#f0f0f0`

### 4. 快捷操作

```
┌─────────────────────────────────────┐
│ [自动供奉]  [祈福祭品]               │
└─────────────────────────────────────┘
```

- **按钮**: 等宽，圆角8px，高度40px
- **边框**: 浅灰色 `#d9d9d9`

### 5. 供奉品分类标签（横向滚动）

```
┌─────────────────────────────────────┐
│ 📦全部 🎁套餐 🕯️香烛 🌸花果 ...     │
│ ← 横向滚动 →                         │
└─────────────────────────────────────┘
```

- **标签**: 圆角20px，选中时深金色背景 `#B8860B`
- **滚动**: 横向滚动，支持触摸滑动
- **间距**: 8px

### 6. 供奉品网格（3列）

```
┌─────────────────────────────────────┐
│ ┌────┐ ┌────┐ ┌────┐             │
│ │图片│ │图片│ │图片│             │
│ │名称│ │名称│ │名称│             │
│ │价格│ │价格│ │价格│             │
│ └────┘ └────┘ └────┘             │
│ ┌────┐ ┌────┐ ┌────┐             │
│ │...  │ │...  │ │...  │            │
│ └────┘ └────┘ └────┘             │
└─────────────────────────────────────┘
```

- **网格**: 3列，间距8px
- **卡片**: 圆角8px，边框 `#f0f0f0`
- **图片**: 100px高度，圆角4px，cover模式
- **名称**: 13px，加粗，单行省略
- **价格**: 14px，加粗，深金色 `#B8860B`

### 7. 底部固定操作栏

```
┌─────────────────────────────────────┐
│ [🕯️]  [🎁]  [💬]  [👤]           │
│ 蜡烛  祭品  留言  生平             │
└─────────────────────────────────────┘
```

- **位置**: 固定底部，z-index 100
- **按钮**: 4个等宽按钮，垂直布局
- **图标**: 24px
- **文字**: 12px，图标下方
- **颜色**:
  - 蜡烛: 朱红色 `#DC143C`
  - 祭品: 深金色 `#B8860B`
  - 留言/生平: 墨绿色 `#2F4F4F`

---

## 🎨 配色方案

### 主色

- **深金色**: `#B8860B` - 按钮、选中状态、价格
- **墨绿色**: `#2F4F4F` - 次要操作
- **朱红色**: `#DC143C` - 蜡烛图标
- **米白色**: `#F5F5DC` - 页面背景

### 辅助色

- **白色**: `#fff` - 卡片背景
- **浅灰**: `#f5f5f5` - 搜索框背景
- **边框灰**: `#d9d9d9` - 按钮边框
- **文字灰**: `#999` - 次要文字
- **深灰**: `#666` - 描述文字
- **黑色**: `#333` - 主要文字

---

## 📐 尺寸规范

### 圆角

- **搜索框**: 20px
- **按钮**: 8px（普通）或 20px（主要按钮）
- **卡片**: 8px
- **标签**: 20px
- **图片**: 4px

### 间距

- **页面边距**: 16px
- **卡片间距**: 8px
- **元素间距**: 8px / 12px / 16px / 20px

### 字体大小

- **标题**: 22px（逝者姓名）
- **副标题**: 16px（区块标题）
- **正文**: 14px（主要文字）
- **小字**: 13px（描述）
- **极小字**: 12px（辅助信息）

### 高度

- **顶部栏**: 44px
- **按钮**: 40px（普通）或 44px（主要）
- **底部栏**: 60px
- **卡片图片**: 100px

---

## 🔧 技术实现

### 组件结构

```typescript
MemorialComprehensive
├── 顶部导航栏（搜索、签到）
├── 逝者信息区
│   ├── 照片
│   ├── 姓名
│   ├── 生卒年
│   ├── 统计信息
│   └── 点亮蜡烛按钮
├── 最近动态列表
├── 快捷操作按钮
├── 分类标签（横向滚动）
├── 供奉品网格（3列）
└── 底部固定操作栏
```

### 数据加载

```typescript
// 从链端加载供奉品
const api = await getApi()
const entries = await api.query.memorial.sacrificeOf.entries()

// 解析数据
const offerings = entries.map(([key, value]) => {
  const id = key.args[0].toNumber()
  const data = value.unwrap()
  return {
    id,
    name: decode(data.name),
    resourceUrl: decode(data.resourceUrl),
    category: data.category.toNumber(),
    // ...
  }
})
```

### 样式文件

- **组件样式**: `MemorialComprehensive.css`
- **内联样式**: 部分动态样式使用内联
- **响应式**: 使用CSS媒体查询

---

## 📱 响应式设计

### 移动端 (< 768px)

- 3列网格布局
- 紧凑间距（8px）
- 底部固定操作栏
- 横向滚动标签

### 平板端 (768px - 1024px)

- 4列网格布局
- 更大的卡片尺寸

### 桌面端 (>= 1024px)

- 5列网格布局
- 更大的间距和字体

---

## 🚀 使用方法

### 访问页面

```
http://127.0.0.1:5173/#/memorial/comprehensive/1
```

其中 `1` 是纪念馆 ID

### 操作流程

1. **搜索**: 点击顶部搜索框（功能待实现）
2. **点亮蜡烛**: 点击"点亮蜡烛"按钮或底部蜡烛图标
3. **浏览供奉品**: 点击分类标签切换类别，滚动查看
4. **供奉**: 点击供奉品卡片进入购买流程
5. **查看动态**: 滚动查看最近动态列表
6. **底部操作**: 点击底部4个按钮切换功能

---

## 🎯 与云上思念的对比

### 完全一致 ✅

- ✅ 顶部搜索栏样式
- ✅ 逝者信息区布局
- ✅ 统计信息展示
- ✅ 点亮蜡烛按钮样式
- ✅ 最近动态列表
- ✅ 快捷操作按钮
- ✅ 分类标签横向滚动
- ✅ 供奉品3列网格
- ✅ 底部固定操作栏

### 技术差异 🔄

- 🔄 **区块链存储**: Stardust 使用链上数据
- 🔄 **去中心化**: 无需中心化服务器
- 🔄 **钱包集成**: 使用本地钱包
- 🔄 **IPFS 存储**: 图片存储在 IPFS

---

## 📝 待实现功能

- [ ] 搜索功能（搜索馆名或人名）
- [ ] 签到功能
- [ ] 点亮蜡烛功能（调用链端接口）
- [ ] 自动供奉功能
- [ ] 祈福祭品功能
- [ ] 留言功能
- [ ] 生平功能
- [ ] 从链端加载真实逝者信息
- [ ] 从链端加载真实动态数据
- [ ] 计算距忌日/生辰天数

---

## 🐛 故障排除

### 问题1: 样式不生效

**原因**: CSS文件未正确导入

**解决**:
```typescript
// 确保导入CSS文件
import './MemorialComprehensive.css'
```

### 问题2: 横向滚动不流畅

**原因**: 缺少触摸滚动支持

**解决**:
```css
.category-tags {
  -webkit-overflow-scrolling: touch;
}
```

### 问题3: 底部操作栏被遮挡

**原因**: 页面内容未留出底部空间

**解决**:
```tsx
<div style={{ height: 80 }} /> {/* 底部留白 */}
```

---

## 📊 文件清单

```
stardust-dapp/src/features/memorial/
├── MemorialComprehensive.tsx    # 主组件
├── MemorialComprehensive.css   # 样式文件
└── ...
```

---

**维护者**: Stardust Team  
**最后更新**: 2025-11-08 16:00

