# 前端冗余清理 - 测试清单

## 🚀 启动测试

```bash
cd /home/xiaodong/文档/stardust/stardust-dapp
npm run dev
```

浏览器打开: http://localhost:5173

---

## ✅ 必测功能清单

### 1. 交易模块 (Trading) - 最关键

#### 1.1 做市商申请
- [ ] 打开页面: `#/otc/mm-apply`
- [ ] 表单能否正常加载
- [ ] 填写申请信息
- [ ] 上传加密资料（使用委员会加密）
- [ ] 提交申请成功
- [ ] **预期**: 无 API 错误，加密功能正常

#### 1.2 免费配额查询
- [ ] 打开做市商管理页面
- [ ] 查看免费配额显示
- [ ] **预期**: 能正常显示配额数量（从 `api.query.trading.freeOrderQuota`）

#### 1.3 OTC 订单创建
- [ ] 打开页面: `#/otc/order`
- [ ] 选择做市商
- [ ] 创建买单/卖单
- [ ] 查看订单列表
- [ ] **预期**: 订单创建和查询正常

#### 1.4 桥接服务
- [ ] 打开页面: `#/bridge/simple`
- [ ] 查看桥接仪表板
- [ ] 兑换功能正常
- [ ] **预期**: 桥接数据查询正常

---

### 2. 纪念服务 (Memorial)

#### 2.1 供奉功能
- [ ] 打开纪念馆详情页
- [ ] 点击供奉按钮
- [ ] 选择祭祀品
- [ ] 完成供奉
- [ ] **预期**: 供奉流程正常，VIP 折扣计算正确

---

### 3. 逝者管理 (Deceased)

#### 3.1 逝者信息
- [ ] 打开页面: `#/deceased/create`
- [ ] 创建逝者信息
- [ ] 上传照片/视频
- [ ] **预期**: 媒体上传功能正常（使用 `api.tx.deceased`）

---

### 4. 浏览器控制台检查

打开浏览器开发者工具（F12），检查：

#### ✅ 无错误日志
- [ ] 无 `marketMaker is not defined` 错误
- [ ] 无 `otcOrder is not defined` 错误
- [ ] 无 `simpleBridge is not defined` 错误
- [ ] 无 `deceasedMedia` 相关错误

#### ✅ API 调用正确
在控制台执行：
```javascript
// 检查 API 对象
console.log(api.query.trading); // 应该存在
console.log(api.query.memorial); // 应该存在
console.log(api.query.deceased); // 应该存在
console.log(api.query.marketMaker); // 应该不存在
```

---

## 🐛 如果发现问题

### 快速回滚

```bash
cd /home/xiaodong/文档/stardust/stardust-dapp
git reset --hard HEAD~1
```

### 查看修改

```bash
git diff HEAD~1 src/services/freeQuotaService.ts
```

### 单文件回滚

```bash
git checkout HEAD~1 -- src/services/freeQuotaService.ts
```

---

## ✅ 测试通过标准

- ✅ 所有页面能正常加载
- ✅ 做市商申请流程完整
- ✅ OTC 订单创建和查询正常
- ✅ 免费配额显示正确
- ✅ 桥接功能正常运行
- ✅ 浏览器控制台无错误

---

## 📋 测试完成后

如果测试通过，推送到远程：

```bash
git push origin cleanup/frontend-redundancy
```

然后创建 Pull Request，合并到 main 分支。

---

**测试负责人**: ___________  
**测试日期**: ___________  
**测试结果**: ☐ 通过  ☐ 失败  

**备注**: 

