# ğŸ§ª å‰ç«¯å†—ä½™æ¸…ç† - æµ‹è¯•å¼€å§‹

## âœ… æœåŠ¡å™¨çŠ¶æ€

- ğŸŸ¢ å¼€å‘æœåŠ¡å™¨ï¼š**å·²å¯åŠ¨**
- ğŸŒ è®¿é—®åœ°å€ï¼š**http://localhost:5173**
- ğŸ“‚ åˆ†æ”¯ï¼š**cleanup/frontend-redundancy**
- ğŸ“ æ—¥å¿—æ–‡ä»¶ï¼š`/tmp/stardust-dapp-dev.log`

---

## ğŸ¯ å…³é”®æµ‹è¯•é¡¹ï¼ˆå¿…æµ‹ï¼‰

### 1. åšå¸‚å•†ç”³è¯·æµç¨‹ ğŸ”´ æœ€é‡è¦

**æµ‹è¯•é¡µé¢**: http://localhost:5173/#/otc/mm-apply

**æµ‹è¯•æ­¥éª¤**:
1. âœ… é¡µé¢èƒ½æ­£å¸¸åŠ è½½ï¼ˆæ— ç™½å±ï¼‰
2. âœ… è¡¨å•æ‰€æœ‰å­—æ®µæ˜¾ç¤ºæ­£å¸¸
3. âœ… ç‚¹å‡»"ä¸Šä¼ èµ„æ–™"æŒ‰é’®
4. âœ… æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰:
   - æ—  `marketMaker is not defined` é”™è¯¯
   - æ—  `api.query.marketMaker` ç›¸å…³é”™è¯¯
5. âœ… å¡«å†™ç”³è¯·ä¿¡æ¯å¹¶æäº¤ï¼ˆå¯ä»¥æµ‹è¯•åˆ°åŠ å¯†æ­¥éª¤ï¼‰

**é¢„æœŸç»“æœ**: 
- âœ“ ä½¿ç”¨ `api.query.trading.*` æ­£å¸¸
- âœ“ å§”å‘˜ä¼šåŠ å¯†åŠŸèƒ½æ­£å¸¸ï¼ˆ`committeeEncryption.ts` å·²ä¿®å¤ï¼‰

**å¦‚æœå¤±è´¥**: æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ï¼Œå›æ»š `src/utils/committeeEncryption.ts`

---

### 2. å…è´¹é…é¢æ˜¾ç¤º ğŸ”´ é‡è¦

**æµ‹è¯•é¡µé¢**: http://localhost:5173/#/market-maker/quota

**æµ‹è¯•æ­¥éª¤**:
1. âœ… æ‰“å¼€åšå¸‚å•†é…é¢ç®¡ç†é¡µé¢
2. âœ… æŸ¥çœ‹å…è´¹é…é¢æ˜¾ç¤º
3. âœ… æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°:
   - æ—  `freeOrderQuota` ç›¸å…³é”™è¯¯

**é¢„æœŸç»“æœ**:
- âœ“ é…é¢æ•°æ®æ­£å¸¸åŠ è½½ï¼ˆä» `api.query.trading.freeOrderQuota`ï¼‰
- âœ“ æ˜¾ç¤º"å‰©ä½™å…è´¹æ¬¡æ•°"

**å¦‚æœå¤±è´¥**: å›æ»š `src/services/freeQuotaService.ts`

---

### 3. OTC è®¢å•åˆ›å»º ğŸ”´ é‡è¦

**æµ‹è¯•é¡µé¢**: http://localhost:5173/#/otc/order

**æµ‹è¯•æ­¥éª¤**:
1. âœ… é¡µé¢åŠ è½½æ­£å¸¸
2. âœ… é€‰æ‹©åšå¸‚å•†ä¸‹æ‹‰åˆ—è¡¨èƒ½æ­£å¸¸æ˜¾ç¤º
3. âœ… å¡«å†™è®¢å•é‡‘é¢
4. âœ… ç‚¹å‡»"åˆ›å»ºè®¢å•"ï¼ˆå¯ä»¥æµ‹è¯•åˆ°æäº¤æ­¥éª¤ï¼‰

**é¢„æœŸç»“æœ**:
- âœ“ ä½¿ç”¨ `api.query.trading.orderOf` æ­£å¸¸
- âœ“ è®¢å•åˆ›å»ºæµç¨‹æ— é”™è¯¯

---

### 4. æ¡¥æ¥æœåŠ¡ ğŸŸ¡ æ¬¡è¦

**æµ‹è¯•é¡µé¢**: http://localhost:5173/#/bridge/simple

**æµ‹è¯•æ­¥éª¤**:
1. âœ… é¡µé¢åŠ è½½æ­£å¸¸
2. âœ… æ¡¥æ¥æ•°æ®æ˜¾ç¤ºæ­£å¸¸

**é¢„æœŸç»“æœ**:
- âœ“ ä½¿ç”¨ `api.query.trading.swapOf` æ­£å¸¸

---

## ğŸ” æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥

### æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰

#### âœ… æ£€æŸ¥é¡¹ 1: æ— æ—§ API é”™è¯¯

åœ¨æ§åˆ¶å°ä¸­ï¼Œç¡®ä¿**æ²¡æœ‰**ä»¥ä¸‹é”™è¯¯ï¼š
```
âŒ Cannot read property 'marketMaker' of undefined
âŒ api.query.marketMaker is not a function
âŒ api.query.otcOrder is not a function
âŒ api.query.simpleBridge is not a function
âŒ Cannot read property 'deceasedMedia' of undefined
```

#### âœ… æ£€æŸ¥é¡¹ 2: API å¯¹è±¡æ­£ç¡®

åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š
```javascript
// 1. æ£€æŸ¥æ–° API å­˜åœ¨
console.log('Trading API:', !!api?.query?.trading); // åº”è¯¥è¾“å‡º: true
console.log('Memorial API:', !!api?.query?.memorial); // åº”è¯¥è¾“å‡º: true
console.log('Deceased API:', !!api?.query?.deceased); // åº”è¯¥è¾“å‡º: true

// 2. æ£€æŸ¥æ—§ API ä¸å­˜åœ¨ï¼ˆæ­£å¸¸ï¼‰
console.log('Old marketMaker:', !!api?.query?.marketMaker); // åº”è¯¥è¾“å‡º: false
console.log('Old otcOrder:', !!api?.query?.otcOrder); // åº”è¯¥è¾“å‡º: false
console.log('Old simpleBridge:', !!api?.query?.simpleBridge); // åº”è¯¥è¾“å‡º: false
```

---

## ğŸŸ¢ æµ‹è¯•é€šè¿‡æ ‡å‡†

**å¿…é¡»å…¨éƒ¨æ»¡è¶³**ï¼š

- âœ… æ‰€æœ‰æµ‹è¯•é¡µé¢èƒ½æ­£å¸¸åŠ è½½ï¼ˆæ— ç™½å±ï¼‰
- âœ… åšå¸‚å•†ç”³è¯·æµç¨‹æ­£å¸¸
- âœ… OTC è®¢å•åˆ›å»ºåŠŸèƒ½æ­£å¸¸
- âœ… å…è´¹é…é¢æ˜¾ç¤ºæ­£ç¡®
- âœ… æµè§ˆå™¨æ§åˆ¶å°æ—  `marketMaker`/`otcOrder` ç›¸å…³é”™è¯¯
- âœ… æ–° API (`api.query.trading`) æ­£å¸¸å·¥ä½œ

---

## ğŸŸ¡ æ¬¡è¦æµ‹è¯•é¡¹ï¼ˆå¯é€‰ï¼‰

### ä¾›å¥‰åŠŸèƒ½
- **é¡µé¢**: http://localhost:5173/#/grave/detail?id=1
- **æµ‹è¯•**: ç‚¹å‡»"ä¾›å¥‰"æŒ‰é’®ï¼Œé€‰æ‹©ç¥­ç¥€å“

### é€è€…ç®¡ç†
- **é¡µé¢**: http://localhost:5173/#/deceased/create
- **æµ‹è¯•**: åˆ›å»ºé€è€…ï¼Œä¸Šä¼ åª’ä½“

---

## ğŸ› å¦‚æœå‘ç°é—®é¢˜

### åœºæ™¯ 1: API è°ƒç”¨é”™è¯¯

**é”™è¯¯ç¤ºä¾‹**:
```
Cannot read property 'marketMaker' of undefined
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
cd /home/xiaodong/æ–‡æ¡£/stardust/stardust-dapp

# æŸ¥çœ‹å…·ä½“é”™è¯¯æ–‡ä»¶
git diff HEAD~1 src/services/freeQuotaService.ts

# å›æ»šå•ä¸ªæ–‡ä»¶
git checkout HEAD~1 -- src/services/freeQuotaService.ts

# é‡æ–°ç¼–è¯‘
# æœåŠ¡å™¨ä¼šè‡ªåŠ¨çƒ­æ›´æ–°
```

### åœºæ™¯ 2: åŠŸèƒ½å®Œå…¨å¤±æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¿«é€Ÿå›æ»šæ‰€æœ‰æ›´æ”¹
cd /home/xiaodong/æ–‡æ¡£/stardust/stardust-dapp
git reset --hard HEAD~1

# é‡å¯æœåŠ¡å™¨
pkill -f "vite.*stardust-dapp"
npm run dev
```

### åœºæ™¯ 3: ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹ç¼–è¯‘æ—¥å¿—
tail -f /tmp/stardust-dapp-dev.log

# æ¸…é™¤ç¼“å­˜é‡æ–°ç¼–è¯‘
rm -rf node_modules/.vite
# æœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘
```

---

## ğŸ“Š æµ‹è¯•è®°å½•

**æµ‹è¯•äºº**: ___________  
**æµ‹è¯•æ—¥æœŸ**: 2025-11-02  
**æµ‹è¯•æ—¶é—´**: ___________

### æµ‹è¯•ç»“æœ

| æµ‹è¯•é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| åšå¸‚å•†ç”³è¯· | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| å…è´¹é…é¢æ˜¾ç¤º | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| OTC è®¢å•åˆ›å»º | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| æ¡¥æ¥æœåŠ¡ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |
| æ§åˆ¶å°æ— é”™è¯¯ | â˜ é€šè¿‡ â˜ å¤±è´¥ | |

### æ€»ä½“è¯„ä»·

â˜ **å…¨éƒ¨é€šè¿‡** - å¯ä»¥æ¨é€åˆ°è¿œç¨‹  
â˜ **éƒ¨åˆ†å¤±è´¥** - éœ€è¦ä¿®å¤  
â˜ **å…¨éƒ¨å¤±è´¥** - éœ€è¦å›æ»š  

---

## âœ… æµ‹è¯•é€šè¿‡åçš„æ­¥éª¤

### 1. æ¨é€åˆ°è¿œç¨‹

```bash
cd /home/xiaodong/æ–‡æ¡£/stardust/stardust-dapp
git push origin cleanup/frontend-redundancy
```

### 2. åˆ›å»º Pull Request

**æ ‡é¢˜**: `chore: å‰ç«¯å†—ä½™ä»£ç æ¸…ç†`

**æè¿°**:
```
## ğŸ“‹ æ¸…ç†å†…å®¹

### API è°ƒç”¨ä¿®å¤
- âœ… marketMaker/otcOrder/simpleBridge â†’ trading (4 æ–‡ä»¶)
- âœ… ä¿®å¤å…è´¹é…é¢æœåŠ¡ (freeQuotaService.ts)
- âœ… ä¿®å¤å§”å‘˜ä¼šåŠ å¯† (committeeEncryption.ts)

### å†—ä½™æ¨¡å—åˆ é™¤
- âœ… åˆ é™¤ deceasedMedia æ¨¡å— (3 æ–‡ä»¶, 434 è¡Œ)

### æ–‡æ¡£æ•´ç†
- âœ… æ•´ç† 58 ä¸ªæ–‡æ¡£åˆ° docs/archived/

### æµ‹è¯•ç»“æœ
- âœ… åšå¸‚å•†ç”³è¯·æ­£å¸¸
- âœ… OTC è®¢å•åˆ›å»ºæ­£å¸¸
- âœ… å…è´¹é…é¢æ˜¾ç¤ºæ­£å¸¸
- âœ… æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯

## ğŸ“– å‚è€ƒæ–‡æ¡£
- docs/stardust-dapp-å†—ä½™ä»£ç åˆ†ææŠ¥å‘Š.md
- docs/å‰ç«¯å†—ä½™æ¸…ç†-å¿«é€Ÿå¼€å§‹.md
```

### 3. åˆå¹¶åˆ° main

åœ¨ PR é€šè¿‡ review åï¼Œåˆå¹¶åˆ° main åˆ†æ”¯ã€‚

---

## ğŸ›‘ åœæ­¢æµ‹è¯•

å½“æµ‹è¯•å®Œæˆåï¼Œå¯ä»¥åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼š

```bash
pkill -f "vite.*stardust-dapp"
```

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…å®Œæ•´åˆ†ææŠ¥å‘Šï¼š`docs/stardust-dapp-å†—ä½™ä»£ç åˆ†ææŠ¥å‘Š.md`

