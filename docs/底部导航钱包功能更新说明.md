# åº•éƒ¨å¯¼èˆªé’±åŒ…åŠŸèƒ½æ›´æ–°è¯´æ˜

## æ›´æ–°æ¦‚è¿°

å°†å‰ç«¯åº•éƒ¨å¯¼èˆªçš„"ä¸ªäºº"æ”¹ä¸º"é’±åŒ…"ï¼Œå¹¶é“¾æ¥åˆ°"æˆ‘çš„é’±åŒ…"é¡µé¢ã€‚

## æ›´æ–°å†…å®¹

### 1. **å›¾æ ‡æ›´æ¢**

**ä¹‹å‰**ï¼š`UserOutlined`ï¼ˆç”¨æˆ·å›¾æ ‡ï¼‰  
**ç°åœ¨**ï¼š`WalletOutlined`ï¼ˆé’±åŒ…å›¾æ ‡ï¼‰

```tsx
// å¯¼å…¥æ–°å›¾æ ‡
import { WalletOutlined } from '@ant-design/icons'

// ä½¿ç”¨æ–°å›¾æ ‡
<WalletOutlined style={{ fontSize: 22 }} />
```

### 2. **æ–‡å­—æ›´æ–°**

**ä¹‹å‰**ï¼šä¸ªäºº  
**ç°åœ¨**ï¼šé’±åŒ…

```tsx
<span style={txtStyle}>é’±åŒ…</span>
```

### 3. **å¯¼èˆªç›®æ ‡æ›´æ–°**

**ä¹‹å‰**ï¼š
- Tab Key: `profile`
- Hash: `#/profile`

**ç°åœ¨**ï¼š
- Tab Key: `my-wallet`
- Hash: æ— ï¼ˆç›´æ¥é€šè¿‡ mp.nav äº‹ä»¶åˆ‡æ¢ Tabï¼‰

```tsx
<button onClick={() => go('my-wallet')} style={...}>
  <WalletOutlined style={{ fontSize: 22 }} />
  <span style={txtStyle}>é’±åŒ…</span>
</button>
```

### 4. **è·¯ç”±åˆ¤æ–­æ›´æ–°**

**computeActiveByHash å‡½æ•°**ï¼š
```tsx
// ä¹‹å‰
if (h.startsWith('#/profile')) return 'profile'

// ç°åœ¨
if (h.startsWith('#/profile')) return 'my-wallet'
```

### 5. **ç™»å½•æ‹¦æˆªæ›´æ–°**

**go å‡½æ•°**ï¼š
```tsx
// ä¹‹å‰
const needAddr = tabKey === 'create-grave' || tabKey === 'grave-my' || tabKey === 'profile'

// ç°åœ¨
const needAddr = tabKey === 'create-grave' || tabKey === 'grave-my' || tabKey === 'my-wallet'
```

### 6. **æ³¨é‡Šæ›´æ–°**

**ç»„ä»¶æ³¨é‡Š**ï¼š
```tsx
// ä¹‹å‰
* - å…¥å£ï¼šä¸»é¡µã€åˆ›å»ºé™µå¢“ã€å›½åº“ã€æˆ‘çš„æ²»ç†ã€ä¸ªäººä¸­å¿ƒ

// ç°åœ¨
* - å…¥å£ï¼šä¸»é¡µã€æˆ‘çš„å¢“åœ°ã€åˆ›å»ºå¢“åœ°ï¼ˆFABï¼‰ã€é€è€…åˆ—è¡¨ã€æˆ‘çš„é’±åŒ…
```

## åº•éƒ¨å¯¼èˆªå¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¦–é¡µ]  [å¢“åœ°]  [+]  [é€è€…]  [é’±åŒ…]    â”‚
â”‚   ğŸ       ğŸ“‹     â•     ğŸ‘¥      ğŸ’¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†å¸ƒå±€

| ä½ç½® | å›¾æ ‡ | æ–‡å­— | åŠŸèƒ½ | Tab Key |
|------|------|------|------|---------|
| å·¦1 | ğŸ  HomeOutlined | é¦–é¡µ | è¿”å›é¦–é¡µ | `home` |
| å·¦2 | ğŸ“‹ UnorderedListOutlined | å¢“åœ° | æˆ‘çš„å¢“åœ°åˆ—è¡¨ | `grave-my` |
| ä¸­å¤® | â• PlusCircleOutlined | - | åˆ›å»ºå¢“åœ°ï¼ˆFABï¼‰ | `create-grave` |
| å³2 | ğŸ‘¥ TeamOutlined | é€è€… | é€è€…åˆ—è¡¨ | `deceased-list` |
| å³1 | ğŸ’¼ WalletOutlined | é’±åŒ… | æˆ‘çš„é’±åŒ… | `my-wallet` |

## åŠŸèƒ½é€»è¾‘

### 1. **å¯¼èˆªè·³è½¬**

ç‚¹å‡»"é’±åŒ…"æŒ‰é’®æ—¶ï¼š
1. æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼ˆæ˜¯å¦æœ‰é’±åŒ…åœ°å€ï¼‰
2. å¦‚æœæœªç™»å½•ï¼Œå¼¹å‡ºæç¤ºæ¡†
3. å¦‚æœå·²ç™»å½•ï¼Œè§¦å‘ `mp.nav` äº‹ä»¶
4. `AuthEntryPage` æ¥æ”¶äº‹ä»¶å¹¶åˆ‡æ¢åˆ°"æˆ‘çš„é’±åŒ…" Tab

### 2. **æœªç™»å½•æ‹¦æˆª**

```tsx
if (needAddr && !addr) {
  Modal.confirm({
    title: 'éœ€è¦é’±åŒ…',
    content: 'è¯·å…ˆç™»å½•æˆ–åˆ›å»ºæœ¬åœ°é’±åŒ…åå†ç»§ç»­ã€‚',
    okText: 'å»åˆ›å»ºé’±åŒ…',
    cancelText: 'ç»§ç»­æµè§ˆ',
    onOk: () => { /* è·³è½¬åˆ°åˆ›å»ºé’±åŒ… */ },
  })
  return
}
```

### 3. **äº‹ä»¶é€šä¿¡**

```tsx
// è§¦å‘å¯¼èˆªäº‹ä»¶
window.dispatchEvent(new CustomEvent('mp.nav', { detail: { tab: 'my-wallet' } }))
```

**äº‹ä»¶æµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»"é’±åŒ…"æŒ‰é’®
    â†“
go('my-wallet') å‡½æ•°
    â†“
æ£€æŸ¥ç™»å½•çŠ¶æ€
    â†“
è§¦å‘ mp.nav äº‹ä»¶
    â†“
AuthEntryPage ç›‘å¬äº‹ä»¶
    â†“
åˆ‡æ¢åˆ°"æˆ‘çš„é’±åŒ…" Tab
    â†“
æ˜¾ç¤º MyWalletPage ç»„ä»¶
```

## æ¿€æ´»çŠ¶æ€

### åˆ¤æ–­é€»è¾‘

```tsx
const computeActiveByHash = React.useCallback(() => {
  const h = window.location.hash || ''
  if (h === '#/' || h === '' ) return 'home'
  if (h.startsWith('#/grave/create')) return 'create-grave'
  if (h.startsWith('#/grave/my')) return 'grave-my'
  if (h.startsWith('#/deceased/list')) return 'deceased-list'
  if (h.startsWith('#/profile')) return 'my-wallet'
  return 'home'
}, [])
```

### æ¿€æ´»æ ·å¼

```tsx
const btnActiveStyle: React.CSSProperties = { 
  color: '#1677ff'  // è“è‰²é«˜äº®
}
```

**æ•ˆæœ**ï¼š
- å½“å‰æ¿€æ´»çš„æŒ‰é’®æ–‡å­—å’Œå›¾æ ‡å˜ä¸ºè“è‰²
- å…¶ä»–æŒ‰é’®ä¿æŒé»˜è®¤ç°è‰²

## æ ·å¼ç»†èŠ‚

### æŒ‰é’®æ ·å¼

```tsx
const btnStyle: React.CSSProperties = {
  appearance: 'none',
  background: 'transparent',
  border: 'none',
  display: 'flex',
  flexDirection: 'column',
  alignItems: 'center',
  justifyContent: 'center',
  gap: 2,
  width: '20%',
  padding: '6px 0',
  color: '#333',
}
```

### æ–‡å­—æ ·å¼

```tsx
const txtStyle: React.CSSProperties = { 
  fontSize: 11 
}
```

### å›¾æ ‡å¤§å°

```tsx
style={{ fontSize: 22 }}
```

## å“åº”å¼è®¾è®¡

### å®¹å™¨å¸ƒå±€

```tsx
<div style={{ 
  display: 'grid',
  gridTemplateColumns: '1fr 1fr 64px 1fr 1fr',
  gap: 0,
  alignItems: 'center'
}}>
```

**è¯´æ˜**ï¼š
- ä½¿ç”¨ CSS Grid å¸ƒå±€
- 5 åˆ—ï¼šå·¦2åˆ— + ä¸­å¤® FABï¼ˆ64pxï¼‰+ å³2åˆ—
- ä¸­å¤® FAB å ä½ä½†ä¸è®¡å…¥ grid æµ

### åº•éƒ¨å®‰å…¨åŒºåŸŸ

```tsx
padding: '8px 8px calc(8px + env(safe-area-inset-bottom))'
```

**è¯´æ˜**ï¼š
- é€‚é… iPhone X åŠä»¥ä¸Šè®¾å¤‡çš„åº•éƒ¨å®‰å…¨åŒºåŸŸ
- ä½¿ç”¨ `env(safe-area-inset-bottom)` åŠ¨æ€è®¡ç®—

## ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. **å›¾æ ‡è¯­ä¹‰æ˜ç¡®**
- âœ… é’±åŒ…å›¾æ ‡ï¼ˆğŸ’¼ï¼‰æ¯”ç”¨æˆ·å›¾æ ‡ï¼ˆğŸ‘¤ï¼‰æ›´ç¬¦åˆåŠŸèƒ½å®šä½
- âœ… ç”¨æˆ·ä¸€çœ¼å°±èƒ½è¯†åˆ«é’±åŒ…åŠŸèƒ½

### 2. **æ–‡å­—ç®€æ´**
- âœ… "é’±åŒ…"æ¯”"ä¸ªäºº"æ›´ç›´æ¥
- âœ… æ˜ç¡®æŒ‡å‘é’±åŒ…åŠŸèƒ½

### 3. **ç™»å½•æ‹¦æˆªå‹å¥½**
- âœ… æœªç™»å½•æ—¶å¼¹å‡ºæç¤º
- âœ… æä¾›"å»åˆ›å»ºé’±åŒ…"å¿«æ·å…¥å£
- âœ… å…è®¸"ç»§ç»­æµè§ˆ"

### 4. **å¯¼èˆªæµç•…**
- âœ… ä¸€é”®è·³è½¬åˆ°é’±åŒ…é¡µé¢
- âœ… æ”¯æŒäº‹ä»¶é€šä¿¡å’Œ Hash è·¯ç”±åŒé€šé“
- âœ… æ¿€æ´»çŠ¶æ€æ˜ç¡®

## æµ‹è¯•è¦ç‚¹

### åŠŸèƒ½æµ‹è¯•
- âœ… ç‚¹å‡»"é’±åŒ…"æŒ‰é’®èƒ½è·³è½¬åˆ°"æˆ‘çš„é’±åŒ…"é¡µé¢
- âœ… æœªç™»å½•æ—¶æ˜¾ç¤ºæç¤ºæ¡†
- âœ… å·²ç™»å½•æ—¶ç›´æ¥è·³è½¬
- âœ… æ¿€æ´»çŠ¶æ€æ­£ç¡®æ˜¾ç¤º

### è§†è§‰æµ‹è¯•
- âœ… é’±åŒ…å›¾æ ‡æ˜¾ç¤ºæ­£å¸¸
- âœ… æ–‡å­—"é’±åŒ…"æ˜¾ç¤ºæ¸…æ™°
- âœ… æ¿€æ´»æ—¶è“è‰²é«˜äº®
- âœ… æœªæ¿€æ´»æ—¶ç°è‰²

### å“åº”å¼æµ‹è¯•
- âœ… ç§»åŠ¨ç«¯å¸ƒå±€æ­£å¸¸
- âœ… æ¡Œé¢ç«¯å¸ƒå±€æ­£å¸¸
- âœ… åº•éƒ¨å®‰å…¨åŒºåŸŸé€‚é…æ­£ç¡®

## å¯¹æ¯”æ•ˆæœ

### ä¼˜åŒ–å‰
```
[é¦–é¡µ] [å¢“åœ°] [+] [é€è€…] [ä¸ªäºº]
  ğŸ     ğŸ“‹    â•   ğŸ‘¥    ğŸ‘¤
```

### ä¼˜åŒ–å
```
[é¦–é¡µ] [å¢“åœ°] [+] [é€è€…] [é’±åŒ…]
  ğŸ     ğŸ“‹    â•   ğŸ‘¥    ğŸ’¼
```

**æ”¹è¿›ç‚¹**ï¼š
- âœ… å›¾æ ‡æ›´ç¬¦åˆåŠŸèƒ½ï¼ˆé’±åŒ… vs ç”¨æˆ·ï¼‰
- âœ… æ–‡å­—æ›´ç›´æ¥ï¼ˆé’±åŒ… vs ä¸ªäººï¼‰
- âœ… é“¾æ¥åˆ°ä¸“é—¨çš„é’±åŒ…é¡µé¢

## ç›¸å…³æ–‡ä»¶

- **åº•éƒ¨å¯¼èˆªç»„ä»¶**ï¼š`memopark-dapp/src/components/nav/BottomNav.tsx`
- **æˆ‘çš„é’±åŒ…é¡µé¢**ï¼š`memopark-dapp/src/features/profile/MyWalletPage.tsx`
- **è®¤è¯å…¥å£é¡µé¢**ï¼š`memopark-dapp/src/features/auth/AuthEntryPage.tsx`
- **åº”ç”¨ä¸»ç»„ä»¶**ï¼š`memopark-dapp/src/App.tsx`

## å®Œæˆæ—¥æœŸ

2025-10-06

## éµå¾ªè§„åˆ™

- âœ… å‡½æ•°çº§è¯¦ç»†ä¸­æ–‡æ³¨é‡Š
- âœ… "ä¸ªäºº"æ”¹ä¸º"é’±åŒ…"
- âœ… å›¾æ ‡æ›´æ¢ä¸º WalletOutlined
- âœ… é“¾æ¥åˆ°"æˆ‘çš„é’±åŒ…"é¡µé¢
- âœ… ç™»å½•æ‹¦æˆªé€»è¾‘æ›´æ–°
- âœ… æ¿€æ´»çŠ¶æ€åˆ¤æ–­æ›´æ–°
- âœ… æ³¨é‡ŠåŒæ­¥æ›´æ–°

