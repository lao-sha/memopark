# 委员会提案 UI - 快速开始

## 🎉 功能已完成

完整的委员会提案管理界面已开发完成，包括：
- ✅ 提交提案（批准/驳回做市商）
- ✅ 查看提案列表
- ✅ 投票（赞成/反对）
- ✅ 执行已通过的提案
- ✅ 查看个人投票记录

## 🚀 快速开始

### 1. 启动前端服务

```bash
cd /home/xiaodong/文档/memopark/memopark-dapp
npm run dev
```

### 2. 访问提案页面

```
http://127.0.0.1:5173/#/gov/council-proposals
```

或从做市商审核页面点击"委员会提案管理"链接进入。

## 📖 使用流程

### 场景 1：提交批准提案

1. **访问页面**
   - 打开 `#/gov/council-proposals`
   - 点击"提交提案"标签

2. **填写表单**
   - 提案类型：批准做市商申请
   - 申请编号：从下拉列表选择
   - 投票阈值：2（推荐）

3. **提交**
   - 点击"提交提案"
   - 输入密码签名
   - 等待确认

4. **复制提案哈希**
   - 自动弹出提案信息
   - 复制哈希分享给其他成员

### 场景 2：投票

1. **查看提案列表**
   - 点击"提案列表"标签
   - 查看所有活跃提案

2. **查看详情**
   - 点击提案卡片
   - 查看投票进度

3. **投票**
   - 点击"赞成"或"反对"
   - 确认投票
   - 等待确认

### 场景 3：执行提案

1. **检查状态**
   - 提案显示"可执行"标签
   - 赞成票达到阈值

2. **执行**
   - 点击"执行提案"
   - 确认并签名
   - 等待执行完成

3. **验证结果**
   - 前往 `#/gov/mm-review` 查看
   - 申请应出现在"已批准"列表

## 🔧 问题排查

### 问题 1：加载失败

```
Failed to fetch dynamically imported module
```

**解决方案**：
```bash
# 清理缓存
cd memopark-dapp
rm -rf node_modules/.vite

# 重启服务
npm run dev
```

### 问题 2：看不到待审申请

**原因**：没有 PendingReview 状态的申请

**解决方案**：
1. 访问 `#/otc/mm-apply` 创建申请
2. 先 lock_deposit，再 submit_info

### 问题 3：提交提案失败（BadOrigin）

**原因**：当前账户不是委员会成员

**解决方案**：
1. 使用 Polkadot.js Apps 配置委员会成员
2. 切换到委员会成员账户

### 问题 4：执行提案失败

**可能原因**：
- 未达到投票阈值
- weight bound 不足
- 申请已被处理

**解决方案**：
1. 检查投票进度
2. 确认申请仍处于 PendingReview 状态

## 🔑 权限说明

| 操作 | 权限要求 |
|------|---------|
| 查看提案列表 | 任何人 |
| 提交提案 | 委员会成员 |
| 投票 | 委员会成员 |
| 执行提案 | 任何人（达到阈值后）|

## 📱 界面说明

### 提案列表
- **绿色标签**：可执行（达到阈值）
- **✓ 已投赞成**：您已投赞成票
- **✗ 已投反对**：您已投反对票
- **进度条**：赞成票进度（例如 2/2 = 100%）

### 提交提案
- **待审申请**：自动加载 PendingReview 状态的申请
- **投票阈值**：推荐设为 2（3 成员时）
- **扣罚比例**：仅驳回时需要填写（0-10000 bps）

### 我的投票
- **统计卡片**：总投票、赞成、反对
- **投票列表**：所有投票历史
- **提案进度**：实时显示是否达到阈值

## 🎯 测试建议

### 测试步骤

1. **准备测试账户**（开发模式）
   - Alice（委员会成员 + Sudo）
   - Bob（委员会成员）
   - Charlie（委员会成员）
   - Dave（申请人）

2. **创建测试申请**
   - 使用 Dave 账户
   - 访问 `#/otc/mm-apply`
   - lock_deposit → submit_info

3. **提交批准提案**
   - 使用 Alice 账户
   - 访问 `#/gov/council-proposals`
   - 提交批准提案（mm_id=0, threshold=2）

4. **投票**
   - 切换到 Bob 账户
   - 在提案列表点击"赞成"

5. **执行**
   - 使用任意账户
   - 点击"执行提案"

6. **验证**
   - 访问 `#/gov/mm-review`
   - 申请应在"已批准"列表

## 📚 相关文档

- **使用指南**：`memopark-dapp/docs/council-proposal-ui.md`
- **技术文档**：`pallets/market-maker/README.md`
- **实施总结**：`COUNCIL_UI_IMPLEMENTATION.md`

## ⚡ 性能提示

- 提案列表自动刷新，无需手动刷新
- 投票后自动更新状态
- 执行后自动跳转

## 🎨 UI 特性

- 移动端优先（最大宽度 640px）
- 深色模式友好
- 触摸友好的按钮
- 实时反馈和进度条

---

现在可以开始使用了！访问 `http://127.0.0.1:5173/#/gov/council-proposals` 开始体验。
