# ç»Ÿä¸€æ²»ç†æœåŠ¡ä½¿ç”¨æ–‡æ¡£

> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-20
> **ç‰ˆæœ¬**ï¼šv1.0.0
> **çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#1-æ¦‚è¿°)
2. [å¿«é€Ÿå¼€å§‹](#2-å¿«é€Ÿå¼€å§‹)
3. [APIå‚è€ƒ](#3-apiå‚è€ƒ)
4. [ä½¿ç”¨ç¤ºä¾‹](#4-ä½¿ç”¨ç¤ºä¾‹)
5. [æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)
6. [æ•…éšœæ’æŸ¥](#6-æ•…éšœæ’æŸ¥)

---

## 1. æ¦‚è¿°

### 1.1 åŠŸèƒ½è¯´æ˜

ç»Ÿä¸€æ²»ç†æœåŠ¡æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥è®¿é—®StarduståŒºå—é“¾çš„æ‰€æœ‰æ²»ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

- âœ… å†…å®¹ç”³è¯‰ï¼ˆpallet-stardust-appealsï¼‰
- âœ… é€è€…å†…å®¹æŠ•è¯‰ï¼ˆpallet-deceasedï¼‰
- âœ… ç”Ÿæ€ææ¡ˆï¼ˆpallet-democracyï¼‰
- âœ… äº‰è®®ä»²è£ï¼ˆpallet-arbitrationï¼‰

### 1.2 æ ¸å¿ƒä¼˜åŠ¿

- **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰æ²»ç†æ“ä½œé€šè¿‡å•ä¸€æœåŠ¡è®¿é—®
- **è‡ªåŠ¨è·¯ç”±**ï¼šæ ¹æ®è¯·æ±‚ç±»å‹è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”çš„åç«¯æ¨¡å—
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **äº‹ä»¶ç›‘å¬**ï¼šæ ‡å‡†åŒ–çš„äº‹ä»¶ç›‘å¬æœºåˆ¶
- **Reacté›†æˆ**ï¼šå¼€ç®±å³ç”¨çš„React Hooks

### 1.3 æ–‡ä»¶ç»“æ„

```
stardust-dapp/src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ governanceService.ts        # ç»Ÿä¸€æ²»ç†æœåŠ¡
â”‚   â””â”€â”€ governanceEventService.ts   # äº‹ä»¶ç›‘å¬æœåŠ¡
â””â”€â”€ hooks/
    â””â”€â”€ useGovernance.ts             # React Hookså°è£…
```

---

## 2. å¿«é€Ÿå¼€å§‹

### 2.1 å®‰è£…ä¾èµ–

ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

```json
{
  "@polkadot/api": "^16.4.6",
  "@polkadot/keyring": "^13.2.1",
  "react": "^19.0.0"
}
```

### 2.2 åŸºç¡€ç”¨æ³•

```tsx
import { useGovernance, GovernanceRequestType, GovernanceDomain, GovernanceAction } from '@/hooks'

function MyComponent() {
  const { submitGovernanceRequest, isReady } = useGovernance()

  const handleSubmitAppeal = async () => {
    const result = await submitGovernanceRequest({
      type: GovernanceRequestType.ContentAppeal,
      domain: GovernanceDomain.Text,
      targetId: 123,
      action: GovernanceAction.Delete,
      reason: 'åŒ…å«ä¸å½“å†…å®¹',
      evidenceCid: 'QmXXX...',
    })

    if (result.success) {
      console.log('ç”³è¯‰æäº¤æˆåŠŸï¼äº¤æ˜“å“ˆå¸Œï¼š', result.txHash)
    } else {
      console.error('ç”³è¯‰æäº¤å¤±è´¥ï¼š', result.error)
    }
  }

  return (
    <button onClick={handleSubmitAppeal} disabled={!isReady}>
      æäº¤ç”³è¯‰
    </button>
  )
}
```

---

## 3. APIå‚è€ƒ

### 3.1 ç±»å‹å®šä¹‰

#### GovernanceDomainï¼ˆæ²»ç†åŸŸï¼‰

```typescript
enum GovernanceDomain {
  Grave = 1,        // å¢“ç¢‘
  Deceased = 2,     // é€è€…
  Text = 3,         // æ–‡æœ¬
  Media = 4,        // åª’ä½“
  Offerings = 5,    // ä¾›å¥‰å“
  Park = 6,         // å…¬å›­
  Works = 7,        // ä½œå“
}
```

#### GovernanceActionï¼ˆæ²»ç†æ“ä½œï¼‰

```typescript
enum GovernanceAction {
  Delete = 1,   // åˆ é™¤
  Update = 2,   // æ›´æ–°
  Hide = 3,     // éšè—
  Restore = 4,  // æ¢å¤
}
```

#### GovernanceRequestTypeï¼ˆè¯·æ±‚ç±»å‹ï¼‰

```typescript
enum GovernanceRequestType {
  ContentAppeal = 'content_appeal',                   // å†…å®¹ç”³è¯‰
  OwnerOperationComplaint = 'owner_operation_complaint', // æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰
  TextComplaint = 'text_complaint',                   // TextæŠ•è¯‰
  MediaComplaint = 'media_complaint',                 // MediaæŠ•è¯‰
  EcosystemProposal = 'ecosystem_proposal',           // ç”Ÿæ€ææ¡ˆ
  DisputeArbitration = 'dispute_arbitration',         // äº‰è®®ä»²è£
}
```

#### UnifiedGovernanceStatusï¼ˆç»Ÿä¸€çŠ¶æ€ï¼‰

```typescript
enum UnifiedGovernanceStatus {
  Submitted = 'submitted',              // å·²æäº¤
  UnderReview = 'under_review',         // å®¡æ ¸ä¸­
  Approved = 'approved',                // å·²æ‰¹å‡†
  Rejected = 'rejected',                // å·²é©³å›
  InNoticePeriod = 'in_notice_period',  // å…¬ç¤ºä¸­
  Executed = 'executed',                // å·²æ‰§è¡Œ
  Revoked = 'revoked',                  // å·²æ’¤é”€
  Expired = 'expired',                  // å·²è¿‡æœŸ
}
```

### 3.2 React Hooks

#### useGovernance

```typescript
function useGovernance(): {
  submitGovernanceRequest: (params: GovernanceRequestParams) => Promise<GovernanceRequestResponse>
  getGovernanceStatus: (requestType: GovernanceRequestType, requestId: number | string) => Promise<GovernanceStatusResponse | null>
  getUserGovernanceRequests: (account?: string, filterType?: GovernanceRequestType) => Promise<GovernanceStatusResponse[]>
  isReady: boolean
}
```

#### useGovernanceEvents

```typescript
function useGovernanceEvents(
  eventTypes: GovernanceEventType | GovernanceEventType[] | 'all',
  callback: (event: StandardGovernanceEvent) => void,
  filter?: EventFilter
): void
```

#### useGovernanceStatus

```typescript
function useGovernanceStatus(
  requestType: GovernanceRequestType,
  requestId: number | string | null,
  autoRefresh?: boolean
): {
  status: GovernanceStatusResponse | null
  loading: boolean
  error: string | null
  refresh: () => Promise<void>
}
```

#### useUserGovernanceRequests

```typescript
function useUserGovernanceRequests(
  account?: string,
  filterType?: GovernanceRequestType,
  autoRefresh?: boolean
): {
  requests: GovernanceStatusResponse[]
  loading: boolean
  error: string | null
  refresh: () => Promise<void>
}
```

---

## 4. ä½¿ç”¨ç¤ºä¾‹

### 4.1 æäº¤å†…å®¹ç”³è¯‰

```tsx
import { useGovernance, GovernanceRequestType, GovernanceDomain, GovernanceAction } from '@/hooks'
import { Button, message } from 'antd'

function SubmitAppealButton({ textId }: { textId: number }) {
  const { submitGovernanceRequest } = useGovernance()
  const [loading, setLoading] = useState(false)

  const handleSubmit = async () => {
    setLoading(true)
    try {
      const result = await submitGovernanceRequest({
        type: GovernanceRequestType.ContentAppeal,
        domain: GovernanceDomain.Text,
        targetId: textId,
        action: GovernanceAction.Delete,
        reason: 'åŒ…å«ä¸å½“å†…å®¹ï¼Œè¿åç¤¾åŒºè§„èŒƒ',
        evidenceCid: 'QmExampleCID123',
      })

      if (result.success) {
        message.success(`ç”³è¯‰æäº¤æˆåŠŸï¼äº¤æ˜“å“ˆå¸Œï¼š${result.txHash}`)
      } else {
        message.error(`ç”³è¯‰æäº¤å¤±è´¥ï¼š${result.error}`)
      }
    } catch (error) {
      message.error('æäº¤è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button type="primary" onClick={handleSubmit} loading={loading}>
      æäº¤ç”³è¯‰
    </Button>
  )
}
```

### 4.2 æäº¤Textå†…å®¹æŠ•è¯‰

```tsx
import { useGovernance, GovernanceRequestType } from '@/hooks'
import { Modal, Form, Input, Button, message } from 'antd'

function ComplaintTextModal({ textId, visible, onClose }: Props) {
  const { submitGovernanceRequest } = useGovernance()
  const [form] = Form.useForm()
  const [loading, setLoading] = useState(false)

  const handleSubmit = async (values: any) => {
    setLoading(true)
    try {
      const result = await submitGovernanceRequest({
        type: GovernanceRequestType.TextComplaint,
        textId,
        reason: values.reason,
        evidenceCid: values.evidenceCid,
      })

      if (result.success) {
        message.success('æŠ•è¯‰æäº¤æˆåŠŸï¼')
        onClose()
      } else {
        message.error(`æŠ•è¯‰æäº¤å¤±è´¥ï¼š${result.error}`)
      }
    } finally {
      setLoading(false)
    }
  }

  return (
    <Modal
      title="æŠ•è¯‰Textå†…å®¹"
      visible={visible}
      onCancel={onClose}
      footer={null}
    >
      <Form form={form} onFinish={handleSubmit}>
        <Form.Item
          name="reason"
          label="æŠ•è¯‰ç†ç”±"
          rules={[{ required: true, message: 'è¯·è¾“å…¥æŠ•è¯‰ç†ç”±' }]}
        >
          <Input.TextArea rows={4} placeholder="è¯·è¯¦ç»†æè¿°æŠ•è¯‰ç†ç”±" />
        </Form.Item>

        <Form.Item name="evidenceCid" label="è¯æ®IPFS CIDï¼ˆå¯é€‰ï¼‰">
          <Input placeholder="QmXXX..." />
        </Form.Item>

        <Form.Item>
          <Button type="primary" htmlType="submit" loading={loading} block>
            æäº¤æŠ•è¯‰
          </Button>
        </Form.Item>
      </Form>
    </Modal>
  )
}
```

### 4.3 ç›‘å¬æ²»ç†äº‹ä»¶

```tsx
import { useGovernanceEvents, GovernanceEventType } from '@/hooks'
import { message } from 'antd'

function GovernanceNotifications() {
  // ç›‘å¬å•ä¸ªäº‹ä»¶
  useGovernanceEvents(GovernanceEventType.AppealSubmitted, (event) => {
    message.info(`æ–°çš„ç”³è¯‰å·²æäº¤ï¼æäº¤è€…ï¼š${event.data.actor}`)
  })

  // ç›‘å¬å¤šä¸ªäº‹ä»¶
  useGovernanceEvents(
    [
      GovernanceEventType.AppealApproved,
      GovernanceEventType.AppealRejected,
    ],
    (event) => {
      const isApproved = event.name === GovernanceEventType.AppealApproved
      message[isApproved ? 'success' : 'error'](
        `ç”³è¯‰å·²${isApproved ? 'æ‰¹å‡†' : 'é©³å›'}`
      )
    }
  )

  // ç›‘å¬æ‰€æœ‰æ²»ç†äº‹ä»¶ï¼ˆå¸¦è¿‡æ»¤ï¼‰
  useGovernanceEvents(
    'all',
    (event) => {
      console.log('æ²»ç†äº‹ä»¶:', event)
    },
    {
      // åªç›‘å¬å½“å‰ç”¨æˆ·çš„äº‹ä»¶
      actors: [currentAccount],
    }
  )

  return null // è¿™æ˜¯ä¸€ä¸ªçº¯ç›‘å¬ç»„ä»¶
}
```

### 4.4 æŸ¥è¯¢æ²»ç†çŠ¶æ€

```tsx
import { useGovernanceStatus, GovernanceRequestType } from '@/hooks'
import { Card, Tag, Spin, Alert } from 'antd'

function AppealStatusCard({ appealId }: { appealId: number }) {
  const { status, loading, error, refresh } = useGovernanceStatus(
    GovernanceRequestType.ContentAppeal,
    appealId,
    true // è‡ªåŠ¨åˆ·æ–°
  )

  if (loading) return <Spin />
  if (error) return <Alert message={error} type="error" />
  if (!status) return <Alert message="æœªæ‰¾åˆ°ç”³è¯‰è®°å½•" type="warning" />

  const statusColors = {
    submitted: 'default',
    under_review: 'processing',
    approved: 'success',
    rejected: 'error',
    in_notice_period: 'warning',
    executed: 'success',
  }

  return (
    <Card title={`ç”³è¯‰ #${appealId}`}>
      <p>
        çŠ¶æ€ï¼š<Tag color={statusColors[status.status]}>{status.status}</Tag>
      </p>
      <p>æäº¤è€…ï¼š{status.submitter}</p>
      <p>åˆ›å»ºåŒºå—ï¼š#{status.createdAt}</p>
      {status.metadata && (
        <p>
          ç›®æ ‡IDï¼š{status.metadata.targetId}
          <br />
          æ“ä½œï¼š{status.metadata.action}
        </p>
      )}
      <Button onClick={refresh} size="small">
        åˆ·æ–°
      </Button>
    </Card>
  )
}
```

### 4.5 è·å–ç”¨æˆ·æ²»ç†è¯·æ±‚åˆ—è¡¨

```tsx
import { useUserGovernanceRequests } from '@/hooks'
import { List, Tag, Spin, Empty } from 'antd'

function MyGovernanceRequestsList() {
  const { requests, loading, error, refresh } = useUserGovernanceRequests(
    undefined, // ä½¿ç”¨å½“å‰è´¦æˆ·
    undefined, // ä¸è¿‡æ»¤ç±»å‹
    true       // è‡ªåŠ¨åˆ·æ–°
  )

  if (loading) return <Spin />
  if (error) return <Alert message={error} type="error" />
  if (requests.length === 0) return <Empty description="æš‚æ— æ²»ç†è¯·æ±‚" />

  return (
    <List
      dataSource={requests}
      renderItem={(item) => (
        <List.Item>
          <List.Item.Meta
            title={
              <>
                {item.requestType}
                <Tag color="blue" style={{ marginLeft: 8 }}>
                  {item.status}
                </Tag>
              </>
            }
            description={`åˆ›å»ºäºåŒºå— #${item.createdAt}`}
          />
        </List.Item>
      )}
    />
  )
}
```

### 4.6 å®Œæ•´ç¤ºä¾‹ï¼šæ²»ç†è¯·æ±‚é¡µé¢

```tsx
import { useState } from 'react'
import {
  useGovernance,
  useGovernanceEvents,
  useUserGovernanceRequests,
  GovernanceRequestType,
  GovernanceDomain,
  GovernanceAction,
  GovernanceEventType,
} from '@/hooks'
import { Card, Button, Modal, Form, Input, Select, message, Table, Tag } from 'antd'

export default function GovernanceRequestPage() {
  const { submitGovernanceRequest } = useGovernance()
  const { requests, loading, refresh } = useUserGovernanceRequests(undefined, undefined, false)
  const [modalVisible, setModalVisible] = useState(false)
  const [form] = Form.useForm()

  // ç›‘å¬äº‹ä»¶å¹¶åˆ·æ–°åˆ—è¡¨
  useGovernanceEvents('all', () => {
    refresh()
  })

  const handleSubmit = async (values: any) => {
    const result = await submitGovernanceRequest({
      type: GovernanceRequestType.ContentAppeal,
      domain: values.domain,
      targetId: values.targetId,
      action: values.action,
      reason: values.reason,
      evidenceCid: values.evidenceCid,
    })

    if (result.success) {
      message.success('ç”³è¯‰æäº¤æˆåŠŸï¼')
      setModalVisible(false)
      form.resetFields()
      refresh()
    } else {
      message.error(`æäº¤å¤±è´¥ï¼š${result.error}`)
    }
  }

  const columns = [
    {
      title: 'ç±»å‹',
      dataIndex: 'requestType',
      key: 'requestType',
    },
    {
      title: 'çŠ¶æ€',
      dataIndex: 'status',
      key: 'status',
      render: (status: string) => <Tag color="blue">{status}</Tag>,
    },
    {
      title: 'åˆ›å»ºåŒºå—',
      dataIndex: 'createdAt',
      key: 'createdAt',
      render: (block: number) => `#${block}`,
    },
  ]

  return (
    <Card
      title="æˆ‘çš„æ²»ç†è¯·æ±‚"
      extra={
        <Button type="primary" onClick={() => setModalVisible(true)}>
          æ–°å»ºç”³è¯‰
        </Button>
      }
    >
      <Table
        columns={columns}
        dataSource={requests}
        loading={loading}
        rowKey={(record) => `${record.requestType}-${record.createdAt}`}
      />

      <Modal
        title="æäº¤ç”³è¯‰"
        visible={modalVisible}
        onCancel={() => setModalVisible(false)}
        footer={null}
      >
        <Form form={form} onFinish={handleSubmit} layout="vertical">
          <Form.Item
            name="domain"
            label="æ²»ç†åŸŸ"
            rules={[{ required: true, message: 'è¯·é€‰æ‹©æ²»ç†åŸŸ' }]}
          >
            <Select>
              <Select.Option value={GovernanceDomain.Grave}>å¢“ç¢‘</Select.Option>
              <Select.Option value={GovernanceDomain.Deceased}>é€è€…</Select.Option>
              <Select.Option value={GovernanceDomain.Text}>æ–‡æœ¬</Select.Option>
              <Select.Option value={GovernanceDomain.Media}>åª’ä½“</Select.Option>
            </Select>
          </Form.Item>

          <Form.Item
            name="targetId"
            label="ç›®æ ‡ID"
            rules={[{ required: true, message: 'è¯·è¾“å…¥ç›®æ ‡ID' }]}
          >
            <Input type="number" />
          </Form.Item>

          <Form.Item
            name="action"
            label="æ“ä½œç±»å‹"
            rules={[{ required: true, message: 'è¯·é€‰æ‹©æ“ä½œç±»å‹' }]}
          >
            <Select>
              <Select.Option value={GovernanceAction.Delete}>åˆ é™¤</Select.Option>
              <Select.Option value={GovernanceAction.Update}>æ›´æ–°</Select.Option>
              <Select.Option value={GovernanceAction.Hide}>éšè—</Select.Option>
            </Select>
          </Form.Item>

          <Form.Item
            name="reason"
            label="ç”³è¯‰ç†ç”±"
            rules={[{ required: true, message: 'è¯·è¾“å…¥ç”³è¯‰ç†ç”±' }]}
          >
            <Input.TextArea rows={4} />
          </Form.Item>

          <Form.Item name="evidenceCid" label="è¯æ®CIDï¼ˆå¯é€‰ï¼‰">
            <Input placeholder="QmXXX..." />
          </Form.Item>

          <Form.Item>
            <Button type="primary" htmlType="submit" block>
              æäº¤ç”³è¯‰
            </Button>
          </Form.Item>
        </Form>
      </Modal>
    </Card>
  )
}
```

---

## 5. æœ€ä½³å®è·µ

### 5.1 é”™è¯¯å¤„ç†

å§‹ç»ˆå¤„ç†å¯èƒ½çš„é”™è¯¯æƒ…å†µï¼š

```tsx
const { submitGovernanceRequest } = useGovernance()

const handleSubmit = async (params: GovernanceRequestParams) => {
  try {
    const result = await submitGovernanceRequest(params)

    if (!result.success) {
      // å¤„ç†ä¸šåŠ¡é”™è¯¯
      if (result.error?.includes('InsufficientBalance')) {
        message.error('ä½™é¢ä¸è¶³ï¼Œè¯·å……å€¼åé‡è¯•')
      } else {
        message.error(result.error || 'æäº¤å¤±è´¥')
      }
      return
    }

    // æˆåŠŸå¤„ç†
    message.success('æäº¤æˆåŠŸï¼')
  } catch (error) {
    // å¤„ç†å¼‚å¸¸
    console.error('æäº¤è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸:', error)
    message.error('ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•')
  }
}
```

### 5.2 é¿å…è¿‡åº¦åˆ·æ–°

ä½¿ç”¨ `autoRefresh` å‚æ•°æ—¶è¦è°¨æ…ï¼š

```tsx
// âœ… æ¨èï¼šä»…åœ¨éœ€è¦å®æ—¶æ›´æ–°çš„é¡µé¢ä½¿ç”¨
const { status } = useGovernanceStatus(requestType, requestId, true)

// âŒ ä¸æ¨èï¼šåœ¨åˆ—è¡¨é¡µé¢ä½¿ç”¨è‡ªåŠ¨åˆ·æ–°ï¼ˆä¼šå¯¼è‡´é¢‘ç¹è¯·æ±‚ï¼‰
const { requests } = useUserGovernanceRequests(undefined, undefined, true)

// âœ… æ¨èï¼šåœ¨åˆ—è¡¨é¡µé¢æ‰‹åŠ¨åˆ·æ–°
const { requests, refresh } = useUserGovernanceRequests()
useGovernanceEvents('all', () => refresh())
```

### 5.3 ç±»å‹å®‰å…¨

å……åˆ†åˆ©ç”¨TypeScriptç±»å‹æ£€æŸ¥ï¼š

```tsx
// âœ… æ¨èï¼šä½¿ç”¨æšä¸¾å’Œç±»å‹å®šä¹‰
const params: GovernanceRequestParams = {
  type: GovernanceRequestType.ContentAppeal,
  domain: GovernanceDomain.Text,
  targetId: 123,
  action: GovernanceAction.Delete,
  reason: 'åŒ…å«ä¸å½“å†…å®¹',
}

// âŒ ä¸æ¨èï¼šä½¿ç”¨é­”æ³•æ•°å­—
const params = {
  type: 'content_appeal',
  domain: 3,
  targetId: 123,
  action: 1,
  reason: 'åŒ…å«ä¸å½“å†…å®¹',
}
```

### 5.4 äº‹ä»¶ç›‘å¬ä¼˜åŒ–

ä½¿ç”¨äº‹ä»¶è¿‡æ»¤å™¨å‡å°‘ä¸å¿…è¦çš„å›è°ƒï¼š

```tsx
// âœ… æ¨èï¼šä½¿ç”¨è¿‡æ»¤å™¨
useGovernanceEvents(
  'all',
  handleEvent,
  {
    actors: [currentAccount],        // åªç›‘å¬å½“å‰ç”¨æˆ·çš„äº‹ä»¶
    pallets: ['StardustAppeals'],    // åªç›‘å¬ç‰¹å®šæ¨¡å—
  }
)

// âŒ ä¸æ¨èï¼šåœ¨å›è°ƒä¸­æ‰‹åŠ¨è¿‡æ»¤
useGovernanceEvents('all', (event) => {
  if (event.data.actor === currentAccount) {
    handleEvent(event)
  }
})
```

---

## 6. æ•…éšœæ’æŸ¥

### 6.1 å¸¸è§é—®é¢˜

#### Q: "APIæœªå°±ç»ª"é”™è¯¯

**åŸå› **ï¼šAPIå®ä¾‹æœªåˆå§‹åŒ–å®Œæˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```tsx
const { submitGovernanceRequest, isReady } = useGovernance()

// æ£€æŸ¥isReadyçŠ¶æ€
if (!isReady) {
  return <Spin tip="æ­£åœ¨è¿æ¥åŒºå—é“¾..." />
}
```

#### Q: "æœªè¿æ¥é’±åŒ…"é”™è¯¯

**åŸå› **ï¼šç”¨æˆ·æœªè¿æ¥é’±åŒ…æˆ–æœªé€‰æ‹©è´¦æˆ·

**è§£å†³æ–¹æ¡ˆ**ï¼š
```tsx
const { currentAccount } = useWallet()

if (!currentAccount) {
  return <Alert message="è¯·å…ˆè¿æ¥é’±åŒ…" type="warning" />
}
```

#### Q: äº‹ä»¶ç›‘å¬ä¸ç”Ÿæ•ˆ

**åŸå› **ï¼šå¯èƒ½æ˜¯äº‹ä»¶åç§°ä¸åŒ¹é…æˆ–è¿‡æ»¤å™¨é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```tsx
// æ£€æŸ¥äº‹ä»¶åç§°æ˜¯å¦æ­£ç¡®
console.log('ç›‘å¬äº‹ä»¶:', GovernanceEventType.AppealSubmitted)

// æµ‹è¯•ä¸å¸¦è¿‡æ»¤å™¨
useGovernanceEvents('all', (event) => {
  console.log('æ”¶åˆ°äº‹ä»¶:', event)
})
```

### 6.2 è°ƒè¯•æŠ€å·§

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```tsx
const { submitGovernanceRequest } = useGovernance()

const result = await submitGovernanceRequest(params)
console.log('æäº¤ç»“æœ:', result)

// æŸ¥çœ‹äº¤æ˜“å“ˆå¸Œ
if (result.success && result.txHash) {
  console.log('äº¤æ˜“å“ˆå¸Œ:', result.txHash)
  console.log('åŒºå—æµè§ˆå™¨é“¾æ¥:', `https://polkadot.js.org/apps/?rpc=...#/explorer/query/${result.txHash}`)
}
```

---

## 7. ç›¸å…³èµ„æº

- [Stardustæ²»ç†æ ¸å¿ƒåŒ–è®¾è®¡](./Stardustæ²»ç†æ ¸å¿ƒåŒ–è®¾è®¡.md)
- [Stardustæ²»ç†ä¼˜åŒ–å®æ–½æ–¹æ¡ˆ](./Stardustæ²»ç†ä¼˜åŒ–å®æ–½æ–¹æ¡ˆ-æ¨èç‰ˆ.md)
- [pallet-stardust-appeals README](../pallets/stardust-appeals/README.md)
- [pallet-deceased README](../pallets/deceased/README.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šStardust å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**ï¼š2025-01-20
