# é€è€…ä¿¡æ¯å…¬ä¼—æ²»ç†æœ€ä¼˜æ–¹æ¡ˆè®¾è®¡

## æ‰§è¡Œæ‘˜è¦

æœ¬æ–¹æ¡ˆç»¼åˆåˆ†æäº†ä¸¤ä¸ªç°æœ‰æ²»ç†æœºåˆ¶è®¾è®¡ï¼Œèåˆä¸¤è€…ä¼˜åŠ¿ï¼Œæå‡ºäº†ä¸€ä¸ª**æŠ€æœ¯æˆç†Ÿã€ç»æµåˆç†ã€æ²»ç†æœ‰æ•ˆ**çš„é€è€…ä¿¡æ¯å…¬ä¼—æ²»ç†æœ€ä¼˜æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆåŸºäºç°æœ‰ `pallet-stardust-appeals` ç³»ç»Ÿè¿›è¡Œæ‰©å±•ï¼Œå¼•å…¥åˆ†å±‚æƒé™ã€åŠ¨æ€æŠ¼é‡‘ã€æ™ºèƒ½å®¡æ ¸ç­‰åˆ›æ–°æœºåˆ¶ã€‚

### ğŸ¯ æ ¸å¿ƒç›®æ ‡

- **æŠ€æœ¯å¯è¡Œ**ï¼šåŸºäºæˆç†Ÿç³»ç»Ÿæ‰©å±•ï¼Œé™ä½å¼€å‘é£é™©
- **ç»æµåˆç†**ï¼šåŠ¨æ€æŠ¼é‡‘æœºåˆ¶ï¼Œæé«˜å‚ä¸ç§¯ææ€§
- **æ²»ç†æœ‰æ•ˆ**ï¼šå¤šå±‚é˜²æŠ¤ï¼Œç¡®ä¿å†…å®¹è´¨é‡
- **ç”¨æˆ·å‹å¥½**ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œç®€åŒ–æ“ä½œæµç¨‹

### ğŸ”¥ å…³é”®åˆ›æ–°

1. **åˆ†å±‚æƒé™æœºåˆ¶**ï¼šæ ¹æ®å†…å®¹é‡è¦æ€§è®¾å®šä¸åŒæƒé™é˜ˆå€¼
2. **åŠ¨æ€æŠ¼é‡‘ç®—æ³•**ï¼šæ ¹æ®ç”¨æˆ·ä¿¡èª‰å’Œå†…å®¹ç±»å‹æ™ºèƒ½è°ƒæ•´æŠ¼é‡‘
3. **AI+ä¸“å®¶+ç¤¾åŒºä¸‰é‡å®¡æ ¸**ï¼šæé«˜å®¡æ ¸è´¨é‡å’Œæ•ˆç‡
4. **æ¸è¿›å¼å¥–æƒ©æœºåˆ¶**ï¼šé¼“åŠ±ä¼˜è´¨è´¡çŒ®ï¼Œéåˆ¶æ¶æ„è¡Œä¸º

---

## 1. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©

### 1.1 ç°æœ‰æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | æ–¹æ¡ˆAï¼šæ–°å»ºpallet-deceased-governance | æ–¹æ¡ˆBï¼šæ‰©å±•pallet-stardust-appeals | **æœ€ä¼˜é€‰æ‹©** |
|-----|-------------------------------------|----------------------------------|------------|
| **æŠ€æœ¯æ¶æ„** | ç‹¬ç«‹æ¨¡å—ï¼ŒåŠŸèƒ½æ¸…æ™° | åŸºäºæˆç†Ÿç³»ç»Ÿï¼Œç¨³å®šå¯é  | **æ–¹æ¡ˆB** âœ… |
| **å¼€å‘æˆæœ¬** | 11-13å‘¨ï¼Œå…¨æ–°å¼€å‘ | 6-8å‘¨ï¼Œå¢é‡å¼€å‘ | **æ–¹æ¡ˆB** âœ… |
| **ç»´æŠ¤å¤æ‚åº¦** | ç‹¬ç«‹ç»´æŠ¤ï¼Œå¤æ‚åº¦é«˜ | ç»Ÿä¸€ç»´æŠ¤ï¼Œå¤æ‚åº¦ä½ | **æ–¹æ¡ˆB** âœ… |
| **åŠŸèƒ½å®Œæ•´æ€§** | åŠŸèƒ½ä¸“é—¨åŒ–è®¾è®¡ | é€šç”¨æ¡†æ¶æ‰©å±• | **æ–¹æ¡ˆA** âœ… |
| **åˆ›æ–°è®¾è®¡** | UI/UXè®¾è®¡ä¼˜ç§€ | æŠ€æœ¯æ¶æ„æˆç†Ÿ | **èåˆä¸¤è€…** â­ |

### 1.2 æœ€ä¼˜æ–¹æ¡ˆé€‰æ‹©é€»è¾‘

**é€‰æ‹©æ–¹æ¡ˆBä½œä¸ºæŠ€æœ¯åŸºç¡€**ï¼ŒåŸå› ï¼š
- âœ… **æˆç†Ÿåº¦**ï¼špallet-stardust-appealså·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯
- âœ… **å¼€å‘æ•ˆç‡**ï¼šå¯èŠ‚çœ45%å¼€å‘æ—¶é—´
- âœ… **é£é™©æ§åˆ¶**ï¼šåŸºäºç¨³å®šç³»ç»Ÿæ‰©å±•ï¼Œé£é™©æ›´ä½
- âœ… **ç»´æŠ¤æˆæœ¬**ï¼šç»Ÿä¸€ç»´æŠ¤ï¼Œé•¿æœŸæˆæœ¬æ›´ä½

**å¸æ”¶æ–¹æ¡ˆAçš„ä¼˜ç§€è®¾è®¡**ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆçš„UI/UXè®¾è®¡
- ğŸ”’ å®Œå–„çš„å®‰å…¨æœºåˆ¶è®¾è®¡
- ğŸ“Š æ¸…æ™°çš„çŠ¶æ€ç®¡ç†æœºåˆ¶
- ğŸ¨ ç›´è§‚çš„ç”¨æˆ·äº¤äº’æµç¨‹

---

## 2. æœ€ä¼˜æ–¹æ¡ˆæ¶æ„è®¾è®¡

### 2.1 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœ€ä¼˜æ²»ç†æ–¹æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  ğŸ¯ æ ¸å¿ƒæ‰©å±•ï¼špallet-stardust-appeals             â”‚
â”‚  â”œâ”€â”€ Domain 3: é€è€…æ–‡æœ¬æ¡£æ¡ˆ                       â”‚
â”‚  â”œâ”€â”€ Domain 4: é€è€…åª’ä½“å†…å®¹                       â”‚
â”‚  â””â”€â”€ Domain 7: é€è€…ä½œå“ä¿¡æ¯                       â”‚
â”‚                                                  â”‚
â”‚  ğŸ”„ æ–°å¢æ“ä½œç±»å‹ï¼š                                â”‚
â”‚  â”œâ”€â”€ Action 10: å…¬ä¼—ç”³è¯·æ·»åŠ å†…å®¹                  â”‚
â”‚  â”œâ”€â”€ Action 11: å…¬ä¼—ç”³è¯·ä¿®æ”¹å†…å®¹                  â”‚
â”‚  â””â”€â”€ Action 12: å…¬ä¼—ç”³è¯·åˆ é™¤å†…å®¹                  â”‚
â”‚                                                  â”‚
â”‚  ğŸ›¡ï¸ åˆ›æ–°æœºåˆ¶ï¼š                                   â”‚
â”‚  â”œâ”€â”€ åˆ†å±‚æƒé™æ§åˆ¶ (Tiered Permissions)           â”‚
â”‚  â”œâ”€â”€ åŠ¨æ€æŠ¼é‡‘ç®—æ³• (Dynamic Deposit)              â”‚
â”‚  â”œâ”€â”€ æ™ºèƒ½é¢„å®¡æ ¸ (AI Pre-screening)               â”‚
â”‚  â”œâ”€â”€ ä¸“å®¶åº“å®¡æ ¸ (Expert Review)                  â”‚
â”‚  â”œâ”€â”€ ç¤¾åŒºæŠ•ç¥¨è¾…åŠ© (Community Voting)             â”‚
â”‚  â””â”€â”€ æ¸è¿›å¼å¥–æƒ© (Progressive Incentives)         â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åˆ†å±‚æƒé™æœºåˆ¶

```rust
/// å†…å®¹æƒé™ç­‰çº§
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub enum ContentTier {
    /// å…¬å¼€ä¿¡æ¯ï¼šåŸºæœ¬ç”Ÿå¹³ã€å…¬å¼€ä½œå“
    Public,
    /// æ•æ„Ÿä¿¡æ¯ï¼šä¸ªäººéšç§ã€å®¶åº­å…³ç³»
    Sensitive,
    /// æ ¸å¿ƒä¿¡æ¯ï¼šæ­»äº¡è¯æ˜ã€é—å˜±ç­‰
    Critical,
}

/// ç”¨æˆ·æƒé™ç­‰çº§
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub enum UserTier {
    /// æ™®é€šç”¨æˆ·ï¼šåŸºç¡€ç¼–è¾‘æƒé™
    Regular,
    /// éªŒè¯ç”¨æˆ·ï¼šé€šè¿‡èº«ä»½éªŒè¯
    Verified,
    /// ä¸“å®¶ç”¨æˆ·ï¼šä¸“ä¸šèƒŒæ™¯è®¤è¯
    Expert,
    /// å®¶å±ç”¨æˆ·ï¼šè¡€ç¼˜/æ³•å®šå…³ç³»
    Family,
}

/// æƒé™çŸ©é˜µ
impl PermissionMatrix {
    pub fn can_edit(user_tier: UserTier, content_tier: ContentTier, operation: OperationType) -> bool {
        match (user_tier, content_tier, operation) {
            // æ™®é€šç”¨æˆ·åªèƒ½ç¼–è¾‘å…¬å¼€ä¿¡æ¯
            (UserTier::Regular, ContentTier::Public, _) => true,
            // éªŒè¯ç”¨æˆ·å¯ä»¥ç¼–è¾‘æ•æ„Ÿä¿¡æ¯
            (UserTier::Verified, ContentTier::Sensitive, _) => true,
            // ä¸“å®¶ç”¨æˆ·å¯ä»¥ç¼–è¾‘æ‰€æœ‰éæ ¸å¿ƒä¿¡æ¯
            (UserTier::Expert, ContentTier::Critical, OperationType::Add) => false,
            (UserTier::Expert, _, _) => true,
            // å®¶å±ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™
            (UserTier::Family, _, _) => true,
            _ => false,
        }
    }
}
```

### 2.3 åŠ¨æ€æŠ¼é‡‘ç®—æ³•

```rust
/// åŠ¨æ€æŠ¼é‡‘è®¡ç®—å™¨
pub struct DynamicDepositCalculator<T: Config> {
    base_deposits: BTreeMap<(u8, u8), BalanceOf<T>>, // (domain, action) -> base_amount
    user_reputation: BTreeMap<T::AccountId, ReputationScore>,
    content_importance: BTreeMap<ContentId, ImportanceLevel>,
}

impl<T: Config> DynamicDepositCalculator<T> {
    /// è®¡ç®—ç”³è¯·æŠ¼é‡‘
    pub fn calculate_request_deposit(
        &self,
        user: &T::AccountId,
        domain: u8,
        action: u8,
        target_content: Option<ContentId>,
    ) -> Result<BalanceOf<T>, Error<T>> {
        // 1. åŸºç¡€æŠ¼é‡‘
        let base_deposit = self.base_deposits
            .get(&(domain, action))
            .copied()
            .unwrap_or_else(|| T::BaseRequestDeposit::get());

        // 2. ç”¨æˆ·ä¿¡èª‰è°ƒæ•´ï¼ˆ0.5x - 2.0xï¼‰
        let reputation_multiplier = self.get_reputation_multiplier(user)?;

        // 3. å†…å®¹é‡è¦æ€§è°ƒæ•´ï¼ˆ1.0x - 3.0xï¼‰
        let importance_multiplier = target_content
            .and_then(|id| self.content_importance.get(&id))
            .map(|level| level.multiplier())
            .unwrap_or(Perbill::from_percent(100)); // 1.0x

        // 4. é¦–æ¬¡ç”¨æˆ·ä¼˜æƒ ï¼ˆ0.7xï¼‰
        let first_time_discount = if self.is_first_time_user(user) {
            Perbill::from_percent(70) // 30% discount
        } else {
            Perbill::from_percent(100)
        };

        // 5. ç»¼åˆè®¡ç®—
        let final_deposit = base_deposit
            .saturating_mul(reputation_multiplier.mul_floor(100) as u128)
            .div(100)
            .saturating_mul(importance_multiplier.mul_floor(100) as u128)
            .div(100)
            .saturating_mul(first_time_discount.mul_floor(100) as u128)
            .div(100);

        Ok(final_deposit.into())
    }

    /// è·å–ä¿¡èª‰ä¹˜æ•°
    fn get_reputation_multiplier(&self, user: &T::AccountId) -> Result<Perbill, Error<T>> {
        let reputation = self.user_reputation
            .get(user)
            .copied()
            .unwrap_or(ReputationScore::new());

        // ä¿¡èª‰åˆ†æ•° 0-100 æ˜ å°„åˆ° 0.5x-2.0x
        let multiplier_bps = match reputation.score {
            90..=100 => 5000,  // 0.5x - ä¼˜ç§€ç”¨æˆ·å¤§å¹…å‡å…
            80..=89 => 7000,   // 0.7x - è‰¯å¥½ç”¨æˆ·å‡å…
            60..=79 => 10000,  // 1.0x - æ™®é€šç”¨æˆ·æ­£å¸¸
            40..=59 => 13000,  // 1.3x - å¾…è§‚å¯Ÿç”¨æˆ·å¢åŠ 
            20..=39 => 16000,  // 1.6x - ä½ä¿¡èª‰ç”¨æˆ·å¤§å¹…å¢åŠ 
            0..=19 => 20000,   // 2.0x - æä½ä¿¡èª‰ç”¨æˆ·æœ€é«˜æŠ¼é‡‘
        };

        Ok(Perbill::from_rational(multiplier_bps, 10000))
    }
}

/// å†…å®¹é‡è¦æ€§ç­‰çº§
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub enum ImportanceLevel {
    Low,    // 1.0x - æ™®é€šå†…å®¹
    Medium, // 1.5x - é‡è¦å†…å®¹
    High,   // 2.0x - æ ¸å¿ƒå†…å®¹
    Critical, // 3.0x - å…³é”®å†…å®¹
}

impl ImportanceLevel {
    pub fn multiplier(&self) -> Perbill {
        match self {
            Self::Low => Perbill::from_percent(100),      // 1.0x
            Self::Medium => Perbill::from_percent(150),   // 1.5x
            Self::High => Perbill::from_percent(200),     // 2.0x
            Self::Critical => Perbill::from_percent(300), // 3.0x
        }
    }
}
```

### 2.4 æ™ºèƒ½å®¡æ ¸æœºåˆ¶

```rust
/// ä¸‰å±‚å®¡æ ¸æœºåˆ¶
pub struct TripleReviewSystem<T: Config> {
    ai_screener: AIContentScreener,
    expert_pool: ExpertPool<T>,
    community_voting: CommunityVotingSystem<T>,
}

impl<T: Config> TripleReviewSystem<T> {
    /// å¤„ç†ç”³è¯·çš„å®Œæ•´å®¡æ ¸æµç¨‹
    pub async fn process_request(&mut self, request_id: u64) -> Result<ReviewDecision, Error<T>> {
        let request = PublicRequests::<T>::get(request_id)
            .ok_or(Error::<T>::RequestNotFound)?;

        // ç¬¬ä¸€å±‚ï¼šAI é¢„å®¡æ ¸
        let ai_result = self.ai_screener.screen_content(
            &request.reason_cid,
            &request.evidence_cids,
            request.new_content_cid.as_ref(),
        ).await?;

        match ai_result {
            AIDecision::Clear => {
                // AIè®¤ä¸ºå†…å®¹æ— é—®é¢˜ï¼Œå¿«é€Ÿé€šé“
                return Ok(ReviewDecision::Approved {
                    reason: \"AIå®¡æ ¸é€šè¿‡\".into(),
                    confidence: ai_result.confidence,
                });
            },
            AIDecision::Flagged { issues, severity } => {
                // AIå‘ç°é—®é¢˜ï¼Œè¿›å…¥äººå·¥å®¡æ ¸
                if severity >= SeverityLevel::High {
                    // é«˜é£é™©å†…å®¹ï¼Œå§”å‘˜ä¼š+ä¸“å®¶å®¡æ ¸
                    return self.expert_committee_review(request_id, issues).await;
                } else {
                    // ä¸­ä½é£é™©å†…å®¹ï¼Œä¸“å®¶æ± å®¡æ ¸
                    return self.expert_pool_review(request_id, issues).await;
                }
            },
            AIDecision::Uncertain => {
                // AIæ— æ³•åˆ¤æ–­ï¼Œç¤¾åŒºæŠ•ç¥¨è¾…åŠ©å†³ç­–
                return self.community_assisted_review(request_id).await;
            }
        }
    }

    /// ä¸“å®¶æ± å®¡æ ¸
    async fn expert_pool_review(
        &mut self,
        request_id: u64,
        ai_issues: Vec<AIIssue>
    ) -> Result<ReviewDecision, Error<T>> {
        // 1. æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©ä¸“å®¶
        let request = PublicRequests::<T>::get(request_id).unwrap();
        let relevant_experts = self.expert_pool.get_experts_for_domain(
            request.domain,
            request.action
        )?;

        // 2. åˆ†é…ç»™å¤šä¸ªä¸“å®¶å®¡æ ¸
        let review_tasks: Vec<_> = relevant_experts.iter()
            .take(3) // æœ€å¤š3ä¸ªä¸“å®¶
            .map(|expert| self.assign_expert_review(expert, request_id, &ai_issues))
            .collect();

        // 3. ç­‰å¾…ä¸“å®¶å®¡æ ¸ç»“æœ
        let expert_decisions = futures::future::try_join_all(review_tasks).await?;

        // 4. ç»¼åˆä¸“å®¶æ„è§
        let consensus = self.calculate_expert_consensus(&expert_decisions)?;

        // 5. å¦‚æœä¸“å®¶æ„è§åˆ†æ­§è¾ƒå¤§ï¼Œæäº¤å§”å‘˜ä¼š
        if consensus.confidence < Percent::from_percent(70) {
            return self.committee_final_review(request_id, expert_decisions).await;
        }

        Ok(consensus.decision)
    }

    /// ç¤¾åŒºæŠ•ç¥¨è¾…åŠ©å®¡æ ¸
    async fn community_assisted_review(&mut self, request_id: u64) -> Result<ReviewDecision, Error<T>> {
        // 1. å‘èµ·ç¤¾åŒºæŠ•ç¥¨
        let voting_id = self.community_voting.create_vote(
            request_id,
            VotingType::ContentReview,
            Duration::from_days(3), // 3å¤©æŠ•ç¥¨æœŸ
        )?;

        // 2. è®¾ç½®æŠ•ç¥¨æƒé‡ï¼ˆæ ¹æ®ç”¨æˆ·ä¿¡èª‰ï¼‰
        let eligible_voters = self.community_voting.get_eligible_voters(
            MinReputation::from(50), // æœ€ä½ä¿¡èª‰è¦æ±‚
            MaxVoters::from(100),    // æœ€å¤š100äººå‚ä¸
        )?;

        // 3. ç­‰å¾…æŠ•ç¥¨ç»“æœ
        let voting_result = self.community_voting.wait_for_result(voting_id).await?;

        // 4. ç»“åˆæŠ•ç¥¨ç»“æœå’Œä¸“å®¶æ„è§
        let final_decision = self.combine_community_and_expert_opinion(
            request_id,
            voting_result
        )?;

        Ok(final_decision)
    }
}

/// AIå†…å®¹ç­›æŸ¥å™¨
pub struct AIContentScreener {
    model_endpoint: String,
    confidence_threshold: Percent,
}

impl AIContentScreener {
    /// å†…å®¹ç­›æŸ¥
    pub async fn screen_content(
        &self,
        reason_cid: &[u8],
        evidence_cids: &[Vec<u8>],
        content_cid: Option<&[u8]>,
    ) -> Result<AIDecision, AIError> {
        // 1. è·å–å†…å®¹
        let reason_text = ipfs::get_text(reason_cid).await?;
        let evidence_data = self.fetch_evidence(evidence_cids).await?;
        let content_data = if let Some(cid) = content_cid {
            Some(ipfs::get_content(cid).await?)
        } else {
            None
        };

        // 2. AIåˆ†æ
        let analysis_request = AIAnalysisRequest {
            reason: reason_text,
            evidence: evidence_data,
            content: content_data,
            task: \"content_governance_review\",
        };

        let response = self.call_ai_model(analysis_request).await?;

        // 3. è§£æç»“æœ
        let decision = match response.risk_level {
            0.0..=0.3 => AIDecision::Clear,
            0.3..=0.7 => AIDecision::Uncertain,
            0.7..=1.0 => AIDecision::Flagged {
                issues: response.detected_issues,
                severity: SeverityLevel::from_score(response.risk_level),
            },
        };

        Ok(decision)
    }
}
```

---

## 3. æ ¸å¿ƒæœºåˆ¶è¯¦ç»†è®¾è®¡

### 3.1 ç”³è¯·å¤„ç†æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·æäº¤ç”³è¯·] --> B[æƒé™éªŒè¯]
    B --> C{æƒé™æ£€æŸ¥}
    C -->|é€šè¿‡| D[åŠ¨æ€æŠ¼é‡‘è®¡ç®—]
    C -->|å¤±è´¥| Z[ç”³è¯·è¢«æ‹’ç»]

    D --> E[é”å®šæŠ¼é‡‘]
    E --> F[è¿›å…¥å…¬ç¤ºæœŸ]
    F --> G[AIé¢„å®¡æ ¸]

    G --> H{AIå®¡æ ¸ç»“æœ}
    H -->|æ¸…æ´å†…å®¹| I[å¿«é€Ÿé€šé“å®¡æ‰¹]
    H -->|é—®é¢˜å†…å®¹| J[ä¸“å®¶æ± å®¡æ ¸]
    H -->|ä¸ç¡®å®š| K[ç¤¾åŒºæŠ•ç¥¨è¾…åŠ©]

    J --> L{ä¸“å®¶å…±è¯†}
    L -->|é«˜å…±è¯†| M[ä¸“å®¶å†³å®š]
    L -->|ä½å…±è¯†| N[å§”å‘˜ä¼šç»ˆå®¡]

    K --> O[æŠ•ç¥¨+ä¸“å®¶ç»¼åˆ]
    I --> P[æ‰§è¡Œç”³è¯·]
    M --> P
    N --> P
    O --> P

    P --> Q[æŠ¼é‡‘å¤„ç†]
    Q --> R[æ›´æ–°å†…å®¹]

    %% æŠ•è¯‰æµç¨‹
    F --> S{æ”¶åˆ°æŠ•è¯‰?}
    S -->|æ˜¯| T[æŠ•è¯‰å¤„ç†æµç¨‹]
    S -->|å¦| G

    T --> U[å§”å‘˜ä¼šè£å†³]
    U --> V{è£å†³ç»“æœ}
    V -->|æŠ•è¯‰æˆåŠŸ| W[ç½šæ²¡ç”³è¯·æŠ¼é‡‘]
    V -->|æŠ•è¯‰å¤±è´¥| X[ç½šæ²¡æŠ•è¯‰æŠ¼é‡‘]

    W --> Y[åˆ†é…å¥–åŠ±]
    X --> Y
```

### 3.2 ä¼˜åŒ–çš„æŠ¼é‡‘åˆ†é…æœºåˆ¶

```rust
/// ä¼˜åŒ–çš„æŠ¼é‡‘åˆ†é…è§„åˆ™
pub struct OptimizedDepositDistribution;

impl OptimizedDepositDistribution {
    /// æŠ•è¯‰æˆåŠŸæ—¶çš„æŠ¼é‡‘åˆ†é…
    pub fn distribute_on_complaint_success<T: Config>(
        request_deposit: BalanceOf<T>,
        complaint_deposit: BalanceOf<T>,
        complainant: &T::AccountId,
        committee_members: &[(T::AccountId, Perbill)], // (è´¦æˆ·, å‚ä¸åº¦æƒé‡)
    ) -> Result<DistributionPlan<T>, Error<T>> {
        let total_pool = request_deposit;

        // åˆ†é…æ¯”ä¾‹ä¼˜åŒ–ï¼š85% æŠ•è¯‰äºº + 15% å§”å‘˜ä¼š
        let complainant_share = Perbill::from_percent(85).mul_floor(total_pool);
        let committee_share = total_pool.saturating_sub(complainant_share);

        // æŠ•è¯‰æŠ¼é‡‘å…¨é¢é€€å›
        let refund_to_complainant = complaint_deposit;

        Ok(DistributionPlan {
            complainant_reward: complainant_share,
            complainant_refund: refund_to_complainant,
            committee_distribution: Self::distribute_committee_share(
                committee_share,
                committee_members
            )?,
            treasury_allocation: BalanceOf::<T>::zero(),
        })
    }

    /// æŠ•è¯‰å¤±è´¥æ—¶çš„æŠ¼é‡‘åˆ†é…
    pub fn distribute_on_complaint_failure<T: Config>(
        complaint_deposit: BalanceOf<T>,
        original_owner: &T::AccountId,
        committee_members: &[(T::AccountId, Perbill)],
    ) -> Result<DistributionPlan<T>, Error<T>> {
        let total_pool = complaint_deposit;

        // åˆ†é…æ¯”ä¾‹ï¼š75% åŸæ‰€æœ‰è€… + 20% å§”å‘˜ä¼š + 5% å›½åº“
        let owner_share = Perbill::from_percent(75).mul_floor(total_pool);
        let committee_share = Perbill::from_percent(20).mul_floor(total_pool);
        let treasury_share = total_pool
            .saturating_sub(owner_share)
            .saturating_sub(committee_share);

        Ok(DistributionPlan {
            owner_reward: owner_share,
            committee_distribution: Self::distribute_committee_share(
                committee_share,
                committee_members
            )?,
            treasury_allocation: treasury_share,
        })
    }

    /// å§”å‘˜ä¼šå†…éƒ¨åˆ†é…
    fn distribute_committee_share<T: Config>(
        total_share: BalanceOf<T>,
        members: &[(T::AccountId, Perbill)],
    ) -> Result<Vec<(T::AccountId, BalanceOf<T>)>, Error<T>> {
        if members.is_empty() {
            return Ok(vec![]);
        }

        // æŒ‰å‚ä¸åº¦æƒé‡åˆ†é…
        let total_weight: u32 = members.iter()
            .map(|(_, weight)| weight.deconstruct())
            .sum();

        if total_weight == 0 {
            // å¦‚æœæ²¡æœ‰æƒé‡ï¼Œå¹³å‡åˆ†é…
            let per_member = total_share / (members.len() as u32).into();
            return Ok(members.iter()
                .map(|(account, _)| (account.clone(), per_member))
                .collect());
        }

        // æŒ‰æƒé‡æ¯”ä¾‹åˆ†é…
        let mut distributions = Vec::new();
        for (account, weight) in members {
            let member_weight = Perbill::from_rational(
                weight.deconstruct(),
                total_weight
            );
            let member_share = member_weight.mul_floor(total_share);
            distributions.push((account.clone(), member_share));
        }

        Ok(distributions)
    }
}
```

### 3.3 ç”¨æˆ·ä¿¡èª‰ç³»ç»Ÿ

```rust
/// ç”¨æˆ·ä¿¡èª‰è¯„åˆ†ç³»ç»Ÿ
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct ReputationScore {
    /// åŸºç¡€åˆ†æ•° (0-100)
    pub base_score: u8,
    /// ç”³è¯·æˆåŠŸæ¬¡æ•°
    pub successful_requests: u32,
    /// ç”³è¯·å¤±è´¥æ¬¡æ•°
    pub failed_requests: u32,
    /// æŠ•è¯‰æˆåŠŸæ¬¡æ•°
    pub successful_complaints: u32,
    /// æŠ•è¯‰å¤±è´¥æ¬¡æ•°
    pub failed_complaints: u32,
    /// è¢«æŠ•è¯‰æ¬¡æ•°
    pub times_complained: u32,
    /// ä¸“å®¶è¯„åˆ†åŠ æˆ
    pub expert_bonus: u8,
    /// ç¤¾åŒºè´¡çŒ®åŠ æˆ
    pub community_bonus: u8,
    /// æœ€åæ›´æ–°æ—¶é—´
    pub last_updated: BlockNumber,
}

impl ReputationScore {
    /// æ–°ç”¨æˆ·é»˜è®¤ä¿¡èª‰
    pub fn new() -> Self {
        Self {
            base_score: 60, // æ–°ç”¨æˆ·ä»60åˆ†å¼€å§‹
            successful_requests: 0,
            failed_requests: 0,
            successful_complaints: 0,
            failed_complaints: 0,
            times_complained: 0,
            expert_bonus: 0,
            community_bonus: 0,
            last_updated: 0,
        }
    }

    /// è®¡ç®—ç»¼åˆä¿¡èª‰åˆ†æ•°
    pub fn calculate_total_score(&self) -> u8 {
        let success_rate_bonus = self.calculate_success_rate_bonus();
        let activity_bonus = self.calculate_activity_bonus();
        let penalty = self.calculate_penalty();

        let total = (self.base_score as i16)
            .saturating_add(success_rate_bonus)
            .saturating_add(activity_bonus)
            .saturating_add(self.expert_bonus as i16)
            .saturating_add(self.community_bonus as i16)
            .saturating_sub(penalty);

        (total.max(0).min(100)) as u8
    }

    /// è®¡ç®—æˆåŠŸç‡å¥–åŠ±
    fn calculate_success_rate_bonus(&self) -> i16 {
        let total_requests = self.successful_requests + self.failed_requests;
        let total_complaints = self.successful_complaints + self.failed_complaints;

        if total_requests + total_complaints < 5 {
            return 0; // æ ·æœ¬å¤ªå°‘ï¼Œä¸ç»™å¥–åŠ±
        }

        let request_success_rate = if total_requests > 0 {
            (self.successful_requests as f32) / (total_requests as f32)
        } else {
            0.0
        };

        let complaint_success_rate = if total_complaints > 0 {
            (self.successful_complaints as f32) / (total_complaints as f32)
        } else {
            0.0
        };

        // é«˜æˆåŠŸç‡å¥–åŠ±
        let request_bonus = if request_success_rate >= 0.8 { 10 }
                           else if request_success_rate >= 0.6 { 5 }
                           else { 0 };

        let complaint_bonus = if complaint_success_rate >= 0.7 { 8 }
                             else if complaint_success_rate >= 0.5 { 4 }
                             else { 0 };

        request_bonus + complaint_bonus
    }

    /// è®¡ç®—æ´»è·ƒåº¦å¥–åŠ±
    fn calculate_activity_bonus(&self) -> i16 {
        let total_activity = self.successful_requests
            + self.failed_requests
            + self.successful_complaints
            + self.failed_complaints;

        // æ´»è·ƒåº¦å¥–åŠ±ï¼š10-50æ¬¡æ´»åŠ¨+2åˆ†ï¼Œ50-100æ¬¡+5åˆ†ï¼Œ100+æ¬¡+8åˆ†
        match total_activity {
            10..=49 => 2,
            50..=99 => 5,
            100.. => 8,
            _ => 0,
        }
    }

    /// è®¡ç®—è¢«æŠ•è¯‰æƒ©ç½š
    fn calculate_penalty(&self) -> i16 {
        // è¢«æŠ•è¯‰æƒ©ç½šï¼šæ¯è¢«æŠ•è¯‰1æ¬¡æ‰£2åˆ†ï¼Œä¸Šé™æ‰£20åˆ†
        (self.times_complained as i16 * 2).min(20)
    }

    /// æ›´æ–°ç”³è¯·ç»“æœ
    pub fn update_request_result(&mut self, success: bool, current_block: BlockNumber) {
        if success {
            self.successful_requests = self.successful_requests.saturating_add(1);
        } else {
            self.failed_requests = self.failed_requests.saturating_add(1);
        }
        self.last_updated = current_block;
    }

    /// æ›´æ–°æŠ•è¯‰ç»“æœ
    pub fn update_complaint_result(&mut self, success: bool, current_block: BlockNumber) {
        if success {
            self.successful_complaints = self.successful_complaints.saturating_add(1);
        } else {
            self.failed_complaints = self.failed_complaints.saturating_add(1);
        }
        self.last_updated = current_block;
    }

    /// è®°å½•è¢«æŠ•è¯‰
    pub fn record_complained(&mut self, current_block: BlockNumber) {
        self.times_complained = self.times_complained.saturating_add(1);
        self.last_updated = current_block;
    }

    /// è·å–æŠ¼é‡‘å€æ•°
    pub fn get_deposit_multiplier(&self) -> Perbill {
        let score = self.calculate_total_score();
        match score {
            90..=100 => Perbill::from_percent(50),   // 0.5x - ä¼˜ç§€ç”¨æˆ·
            80..=89 => Perbill::from_percent(70),    // 0.7x - è‰¯å¥½ç”¨æˆ·
            60..=79 => Perbill::from_percent(100),   // 1.0x - æ™®é€šç”¨æˆ·
            40..=59 => Perbill::from_percent(130),   // 1.3x - å¾…è§‚å¯Ÿç”¨æˆ·
            20..=39 => Perbill::from_percent(160),   // 1.6x - ä½ä¿¡èª‰ç”¨æˆ·
            0..=19 => Perbill::from_percent(200),    // 2.0x - æä½ä¿¡èª‰ç”¨æˆ·
        }
    }
}
```

---

## 4. å‰ç«¯ç”¨æˆ·ä½“éªŒè®¾è®¡

### 4.1 ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡

```typescript
// ç”³è¯·æäº¤ç•Œé¢ç»„ä»¶
interface ContentEditRequest {
  deceasedId: string;
  contentType: 'text' | 'media' | 'works';
  operation: 'add' | 'modify' | 'delete';
  content: ContentData;
  reason: string;
  evidence: FileList;
}

const RequestSubmissionPage: React.FC = () => {
  const [request, setRequest] = useState<ContentEditRequest>();
  const [estimatedDeposit, setEstimatedDeposit] = useState<string>('0');
  const [userReputation, setUserReputation] = useState<ReputationInfo>();
  const [permissionCheck, setPermissionCheck] = useState<PermissionResult>();

  // å®æ—¶è®¡ç®—æŠ¼é‡‘
  const calculateDeposit = useCallback(async () => {
    if (!request) return;

    const deposit = await api.calculateDynamicDeposit({
      userId: currentUser.id,
      contentType: request.contentType,
      operation: request.operation,
      targetId: request.targetId,
    });

    setEstimatedDeposit(deposit.amount);
  }, [request]);

  return (
    <div className=\"max-w-md mx-auto p-4 space-y-6\">
      {/* ç”³è¯·ç±»å‹é€‰æ‹© */}
      <ContentTypeSelector
        value={request?.contentType}
        onChange={(type) => setRequest(prev => ({ ...prev, contentType: type }))}
      />

      {/* æƒé™æ£€æŸ¥çŠ¶æ€ */}
      <PermissionBadge
        userTier={userReputation?.tier}
        contentTier={permissionCheck?.requiredTier}
        status={permissionCheck?.allowed}
      />

      {/* å†…å®¹ç¼–è¾‘å™¨ */}
      <ContentEditor
        type={request?.contentType}
        initialValue={request?.content}
        onChange={(content) => setRequest(prev => ({ ...prev, content }))}
      />

      {/* ç”³è¯·ç†ç”± */}
      <ReasonInput
        value={request?.reason}
        onChange={(reason) => setRequest(prev => ({ ...prev, reason }))}
        placeholder=\"è¯·è¯¦ç»†è¯´æ˜ç”³è¯·ç†ç”±...\"
      />

      {/* è¯æ®ä¸Šä¼  */}
      <EvidenceUploader
        files={request?.evidence}
        onChange={(evidence) => setRequest(prev => ({ ...prev, evidence }))}
        maxFiles={5}
        maxSize={10 * 1024 * 1024} // 10MB
      />

      {/* æŠ¼é‡‘ä¿¡æ¯ */}
      <DepositInfoCard>
        <div className=\"flex justify-between items-center\">
          <span>é¢„ä¼°æŠ¼é‡‘</span>
          <div className=\"text-right\">
            <div className=\"text-2xl font-bold\">{estimatedDeposit} DUST</div>
            {userReputation?.tier !== 'Regular' && (
              <div className=\"text-sm text-green-600\">
                å·²äº«å— {userReputation.discountRate}% ä¿¡èª‰ä¼˜æƒ 
              </div>
            )}
          </div>
        </div>

        <ReputationIndicator score={userReputation?.score} />

        <DepositBreakdown
          baseAmount={estimatedDeposit.base}
          reputationMultiplier={estimatedDeposit.reputationMultiplier}
          contentMultiplier={estimatedDeposit.contentMultiplier}
          firstTimeDiscount={estimatedDeposit.firstTimeDiscount}
        />
      </DepositInfoCard>

      {/* æäº¤æŒ‰é’® */}
      <SubmitButton
        disabled={!isFormValid}
        loading={submitting}
        onClick={handleSubmit}
      >
        é”å®šæŠ¼é‡‘å¹¶æäº¤ç”³è¯·
      </SubmitButton>

      {/* å…¬ç¤ºæœŸè¯´æ˜ */}
      <NotificationPeriodInfo
        duration=\"7å¤©\"
        description=\"ç”³è¯·å°†è¿›å…¥å…¬ç¤ºæœŸï¼ŒæœŸé—´å…¬ä¼—å¯è¿›è¡ŒæŠ•è¯‰\"
      />
    </div>
  );
};

// ç”³è¯·çŠ¶æ€è¿½è¸ªé¡µé¢
const RequestTrackingPage: React.FC<{ requestId: string }> = ({ requestId }) => {
  const { request, loading } = useRequest(requestId);

  if (loading) return <LoadingSpinner />;

  return (
    <div className=\"max-w-md mx-auto p-4\">
      {/* çŠ¶æ€æ—¶é—´çº¿ */}
      <StatusTimeline>
        <TimelineItem
          status=\"completed\"
          title=\"ç”³è¯·æäº¤\"
          description={`æŠ¼é‡‘ ${request.deposit} DUST å·²é”å®š`}
          timestamp={request.submittedAt}
        />

        <TimelineItem
          status={request.status === 'notice_period' ? 'active' : 'completed'}
          title=\"å…¬ç¤ºæœŸ\"
          description={
            request.status === 'notice_period'
              ? <CountdownTimer endTime={request.noticeEndTime} />
              : \"å…¬ç¤ºæœŸå·²ç»“æŸ\"
          }
        />

        {request.complaints?.length > 0 && (
          <TimelineItem
            status=\"warning\"
            title=\"æ”¶åˆ°æŠ•è¯‰\"
            description={`${request.complaints.length} ä¸ªæŠ•è¯‰å¾…å¤„ç†`}
          />
        )}

        <TimelineItem
          status={getReviewStatus(request)}
          title=\"å®¡æ ¸ä¸­\"
          description={getReviewDescription(request)}
        />
      </StatusTimeline>

      {/* ç”³è¯·è¯¦æƒ… */}
      <RequestDetailsCard request={request} />

      {/* æŠ•è¯‰åˆ—è¡¨ */}
      {request.complaints?.length > 0 && (
        <ComplaintsList complaints={request.complaints} />
      )}

      {/* æ“ä½œæŒ‰é’® */}
      <div className=\"mt-6 space-y-3\">
        {request.status === 'notice_period' && (
          <Button variant=\"outline\" onClick={() => router.push(`/requests/${requestId}/withdraw`)}>
            æ’¤å›ç”³è¯·
          </Button>
        )}

        {request.canComplaint && (
          <Button variant=\"secondary\" onClick={() => router.push(`/requests/${requestId}/complaint`)}>
            æäº¤æŠ•è¯‰
          </Button>
        )}
      </div>
    </div>
  );
};

// æŠ•è¯‰æäº¤é¡µé¢
const ComplaintSubmissionPage: React.FC<{ requestId: string }> = ({ requestId }) => {
  const [complaint, setComplaint] = useState<ComplaintData>();
  const [depositAmount, setDepositAmount] = useState<string>('0');

  return (
    <div className=\"max-w-md mx-auto p-4 space-y-6\">
      {/* åŸç”³è¯·ä¿¡æ¯ */}
      <OriginalRequestCard requestId={requestId} />

      {/* æŠ•è¯‰ç†ç”± */}
      <ComplaintReasonSelector
        value={complaint?.reason}
        onChange={(reason) => setComplaint(prev => ({ ...prev, reason }))}
        options={[
          { value: 'false_info', label: 'è™šå‡ä¿¡æ¯', description: 'ç”³è¯·åŒ…å«æ˜æ˜¾é”™è¯¯æˆ–è™šå‡å†…å®¹' },
          { value: 'inappropriate', label: 'å†…å®¹ä¸å½“', description: 'ç”³è¯·å†…å®¹ä¸é€‚åˆæˆ–è¿åè§„èŒƒ' },
          { value: 'unauthorized', label: 'æ— æƒä¿®æ”¹', description: 'ç”³è¯·äººæ— æƒé™ä¿®æ”¹æ­¤å†…å®¹' },
          { value: 'malicious', label: 'æ¶æ„ç”³è¯·', description: 'æ˜æ˜¾çš„æ¶æ„æˆ–åƒåœ¾ç”³è¯·' },
          { value: 'other', label: 'å…¶ä»–åŸå› ', description: 'å…¶ä»–ä¸ç¬¦åˆè§„èŒƒçš„æƒ…å†µ' },
        ]}
      />

      {/* è¯¦ç»†è¯´æ˜ */}
      <DetailedExplanation
        value={complaint?.explanation}
        onChange={(explanation) => setComplaint(prev => ({ ...prev, explanation }))}
        placeholder=\"è¯·è¯¦ç»†è¯´æ˜æŠ•è¯‰ç†ç”±å’Œè¯æ®...\"
        minLength={100}
      />

      {/* è¯æ®ä¸Šä¼  */}
      <EvidenceUploader
        files={complaint?.evidence}
        onChange={(evidence) => setComplaint(prev => ({ ...prev, evidence }))}
        title=\"æŠ•è¯‰è¯æ®\"
        description=\"ä¸Šä¼ æ”¯æŒæŠ•è¯‰ç†ç”±çš„ç›¸å…³è¯æ®\"
      />

      {/* æŠ•è¯‰æŠ¼é‡‘ä¿¡æ¯ */}
      <ComplaintDepositCard>
        <div className=\"text-center\">
          <div className=\"text-3xl font-bold text-orange-600\">{depositAmount} DUST</div>
          <div className=\"text-sm text-gray-600 mt-1\">æŠ•è¯‰æŠ¼é‡‘</div>
        </div>

        <div className=\"mt-4 p-3 bg-amber-50 rounded-lg\">
          <div className=\"flex items-center text-amber-800\">
            <AlertTriangleIcon className=\"w-4 h-4 mr-2\" />
            <span className=\"text-sm font-medium\">æŠ•è¯‰é£é™©æç¤º</span>
          </div>
          <ul className=\"mt-2 text-xs text-amber-700 space-y-1\">
            <li>â€¢ æŠ•è¯‰æˆåŠŸï¼šè·å¾—ç”³è¯·æ–¹æŠ¼é‡‘çš„80%</li>
            <li>â€¢ æŠ•è¯‰å¤±è´¥ï¼šæ‚¨çš„æŠ¼é‡‘å°†è¢«ç½šæ²¡</li>
            <li>â€¢ è¯·ç¡®ä¿æŠ•è¯‰ç†ç”±å……åˆ†ä¸”è¯æ®ç¡®å‡¿</li>
          </ul>
        </div>
      </ComplaintDepositCard>

      {/* æäº¤æŒ‰é’® */}
      <SubmitComplaintButton
        disabled={!isComplaintValid}
        depositAmount={depositAmount}
        onClick={handleSubmitComplaint}
      />
    </div>
  );
};
```

### 4.2 ç®¡ç†å‘˜å®¡æ ¸ç•Œé¢

```typescript
// å§”å‘˜ä¼šå®¡æ ¸å·¥ä½œå°
const ReviewWorkbench: React.FC = () => {
  const [pendingReviews, setPendingReviews] = useState<ReviewTask[]>([]);
  const [currentReview, setCurrentReview] = useState<ReviewTask | null>(null);
  const [aiInsights, setAIInsights] = useState<AIInsights | null>(null);

  return (
    <div className=\"min-h-screen bg-gray-50\">
      {/* å¤´éƒ¨çŠ¶æ€æ  */}
      <ReviewHeader>
        <div className=\"flex items-center space-x-6\">
          <StatCard title=\"å¾…å®¡æ ¸\" value={pendingReviews.length} color=\"orange\" />
          <StatCard title=\"ä»Šæ—¥å®Œæˆ\" value={reviewStats.todayCompleted} color=\"green\" />
          <StatCard title=\"å¹³å‡å¤„ç†æ—¶é—´\" value={reviewStats.avgTime} unit=\"å°æ—¶\" color=\"blue\" />
        </div>
      </ReviewHeader>

      <div className=\"flex\">
        {/* å·¦ä¾§ï¼šå¾…å®¡æ ¸åˆ—è¡¨ */}
        <ReviewQueue className=\"w-1/3 bg-white\">
          <div className=\"p-4 border-b\">
            <h2 className=\"font-semibold\">å¾…å®¡æ ¸é˜Ÿåˆ—</h2>
            <FilterTabs
              filters={['å…¨éƒ¨', 'ç”³è¯·', 'æŠ•è¯‰', 'ç´§æ€¥']}
              active={activeFilter}
              onChange={setActiveFilter}
            />
          </div>

          <div className=\"overflow-y-auto\">
            {pendingReviews.map(review => (
              <ReviewTaskCard
                key={review.id}
                task={review}
                active={currentReview?.id === review.id}
                onClick={() => setCurrentReview(review)}
              >
                <div className=\"flex items-center justify-between\">
                  <div>
                    <div className=\"font-medium\">{getTaskTitle(review)}</div>
                    <div className=\"text-sm text-gray-500\">{review.submittedBy}</div>
                  </div>
                  <div className=\"text-right\">
                    <PriorityBadge level={review.priority} />
                    <div className=\"text-xs text-gray-400 mt-1\">
                      {formatTimeAgo(review.submittedAt)}
                    </div>
                  </div>
                </div>

                {review.type === 'complaint' && (
                  <ComplaintPreview complaint={review.complaint} />
                )}

                <AIRiskIndicator score={review.aiRiskScore} />
              </ReviewTaskCard>
            ))}
          </div>
        </ReviewQueue>

        {/* å³ä¾§ï¼šå®¡æ ¸è¯¦æƒ… */}
        <ReviewDetails className=\"flex-1 bg-white ml-4 mr-4 rounded-lg shadow\">
          {currentReview ? (
            <div className=\"p-6\">
              {/* ä»»åŠ¡æ¦‚è¦ */}
              <ReviewSummary>
                <div className=\"flex items-center justify-between mb-4\">
                  <h1 className=\"text-xl font-bold\">{getTaskTitle(currentReview)}</h1>
                  <div className=\"flex items-center space-x-2\">
                    <PriorityBadge level={currentReview.priority} />
                    <TypeBadge type={currentReview.type} />
                  </div>
                </div>

                <div className=\"grid grid-cols-3 gap-4 mb-6\">
                  <InfoCard title=\"ç”³è¯·äºº\" value={currentReview.submittedBy} />
                  <InfoCard title=\"æäº¤æ—¶é—´\" value={formatDateTime(currentReview.submittedAt)} />
                  <InfoCard title=\"æŠ¼é‡‘é‡‘é¢\" value={`${currentReview.depositAmount} DUST`} />
                </div>
              </ReviewSummary>

              {/* AI åˆ†æç»“æœ */}
              {aiInsights && (
                <AIAnalysisPanel insights={aiInsights}>
                  <div className=\"bg-blue-50 p-4 rounded-lg mb-6\">
                    <div className=\"flex items-center mb-3\">
                      <BrainIcon className=\"w-5 h-5 text-blue-600 mr-2\" />
                      <span className=\"font-medium text-blue-900\">AI åˆ†æç»“æœ</span>
                      <ConfidenceBadge score={aiInsights.confidence} />
                    </div>

                    <div className=\"space-y-3\">
                      <RiskAssessment risks={aiInsights.detectedRisks} />
                      <ContentAnalysis analysis={aiInsights.contentAnalysis} />
                      <RecommendedAction action={aiInsights.recommendedAction} />
                    </div>
                  </div>
                </AIAnalysisPanel>
              )}

              {/* å†…å®¹å¯¹æ¯”è§†å›¾ */}
              <ContentComparison>
                <div className=\"grid grid-cols-2 gap-6 mb-6\">
                  <div>
                    <h3 className=\"font-medium mb-2\">åŸå†…å®¹</h3>
                    <ContentViewer content={currentReview.originalContent} readonly />
                  </div>
                  <div>
                    <h3 className=\"font-medium mb-2\">ç”³è¯·å†…å®¹</h3>
                    <ContentViewer
                      content={currentReview.proposedContent}
                      highlights={getChanges(currentReview)}
                      readonly
                    />
                  </div>
                </div>
              </ContentComparison>

              {/* ç”³è¯·ç†ç”±å’Œè¯æ® */}
              <ReasonAndEvidence>
                <div className=\"mb-6\">
                  <h3 className=\"font-medium mb-2\">ç”³è¯·ç†ç”±</h3>
                  <div className=\"bg-gray-50 p-3 rounded border\">
                    {currentReview.reason}
                  </div>
                </div>

                <div className=\"mb-6\">
                  <h3 className=\"font-medium mb-2\">è¯æ®ææ–™</h3>
                  <EvidenceGallery evidence={currentReview.evidence} />
                </div>
              </ReasonAndEvidence>

              {/* æŠ•è¯‰ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰ */}
              {currentReview.complaints?.length > 0 && (
                <ComplaintsSection>
                  <h3 className=\"font-medium mb-4\">ç›¸å…³æŠ•è¯‰ ({currentReview.complaints.length})</h3>
                  {currentReview.complaints.map(complaint => (
                    <ComplaintCard key={complaint.id} complaint={complaint} />
                  ))}
                </ComplaintsSection>
              )}

              {/* å®¡æ ¸æ“ä½œ */}
              <ReviewActions className=\"border-t pt-6 mt-6\">
                <div className=\"flex space-x-4\">
                  <Button
                    variant=\"success\"
                    size=\"lg\"
                    onClick={() => handleApprove(currentReview.id)}
                  >
                    <CheckIcon className=\"w-4 h-4 mr-2\" />
                    æ‰¹å‡†ç”³è¯·
                  </Button>

                  <Button
                    variant=\"danger\"
                    size=\"lg\"
                    onClick={() => handleReject(currentReview.id)}
                  >
                    <XIcon className=\"w-4 h-4 mr-2\" />
                    é©³å›ç”³è¯·
                  </Button>

                  <Button
                    variant=\"secondary\"
                    onClick={() => handleRequestMoreInfo(currentReview.id)}
                  >
                    <InfoIcon className=\"w-4 h-4 mr-2\" />
                    è¦æ±‚è¡¥å……ä¿¡æ¯
                  </Button>
                </div>

                <div className=\"mt-4\">
                  <label className=\"block text-sm font-medium mb-2\">å®¡æ ¸æ„è§</label>
                  <textarea
                    className=\"w-full p-3 border rounded-lg\"
                    rows={3}
                    placeholder=\"è¯·è¾“å…¥å®¡æ ¸æ„è§...ï¼ˆå¿…å¡«ï¼‰\"
                    value={reviewComment}
                    onChange={(e) => setReviewComment(e.target.value)}
                  />
                </div>
              </ReviewActions>
            </div>
          ) : (
            <EmptyState message=\"è¯·ä»å·¦ä¾§é€‰æ‹©å¾…å®¡æ ¸ä»»åŠ¡\" />
          )}
        </ReviewDetails>
      </div>
    </div>
  );
};
```

---

## 5. å®æ–½è·¯çº¿å›¾

### 5.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

```
Phase 1: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ (4å‘¨)
â”œâ”€â”€ Week 1: æ‰©å±•pallet-stardust-appeals
â”‚   â”œâ”€â”€ æ–°å¢Domain 3, 4, 7æ”¯æŒ
â”‚   â”œâ”€â”€ æ–°å¢Action 10, 11, 12æ”¯æŒ
â”‚   â”œâ”€â”€ å®ç°åŠ¨æ€æŠ¼é‡‘è®¡ç®—
â”‚   â””â”€â”€ åŸºç¡€æ¥å£å®ç°
â”œâ”€â”€ Week 2: æƒé™å’Œä¿¡èª‰ç³»ç»Ÿ
â”‚   â”œâ”€â”€ åˆ†å±‚æƒé™æ§åˆ¶
â”‚   â”œâ”€â”€ ç”¨æˆ·ä¿¡èª‰è¯„åˆ†
â”‚   â”œâ”€â”€ åŠ¨æ€æŠ¼é‡‘ç®—æ³•
â”‚   â””â”€â”€ å•å…ƒæµ‹è¯•
â”œâ”€â”€ Week 3: å®¡æ ¸æœºåˆ¶
â”‚   â”œâ”€â”€ AIé¢„å®¡æ ¸æ¥å£
â”‚   â”œâ”€â”€ ä¸“å®¶æ± ç®¡ç†
â”‚   â”œâ”€â”€ ç¤¾åŒºæŠ•ç¥¨ç³»ç»Ÿ
â”‚   â””â”€â”€ ä¸‰å±‚å®¡æ ¸æµç¨‹
â””â”€â”€ Week 4: æŠ¼é‡‘åˆ†é…ä¼˜åŒ–
    â”œâ”€â”€ ä¼˜åŒ–åˆ†é…ç®—æ³•
    â”œâ”€â”€ å§”å‘˜ä¼šå¥–åŠ±åˆ†é…
    â”œâ”€â”€ é€€æ¬¾æœºåˆ¶
    â””â”€â”€ é›†æˆæµ‹è¯•

Phase 2: å‰ç«¯ç•Œé¢å¼€å‘ (3å‘¨)
â”œâ”€â”€ Week 5: ç§»åŠ¨ç«¯ç”³è¯·ç•Œé¢
â”‚   â”œâ”€â”€ ç”³è¯·æäº¤é¡µé¢
â”‚   â”œâ”€â”€ çŠ¶æ€è¿½è¸ªé¡µé¢
â”‚   â”œâ”€â”€ æŠ•è¯‰æäº¤é¡µé¢
â”‚   â””â”€â”€ ç”¨æˆ·ä¿¡èª‰é¡µé¢
â”œâ”€â”€ Week 6: ç®¡ç†ç«¯å®¡æ ¸ç•Œé¢
â”‚   â”œâ”€â”€ å®¡æ ¸å·¥ä½œå°
â”‚   â”œâ”€â”€ AIåˆ†æé¢æ¿
â”‚   â”œâ”€â”€ å†…å®¹å¯¹æ¯”è§†å›¾
â”‚   â””â”€â”€ æ‰¹é‡å¤„ç†åŠŸèƒ½
â””â”€â”€ Week 7: ä¼˜åŒ–å’Œé›†æˆ
    â”œâ”€â”€ ç•Œé¢ä¼˜åŒ–
    â”œâ”€â”€ å“åº”å¼é€‚é…
    â”œâ”€â”€ å‰åç«¯é›†æˆ
    â””â”€â”€ ç”¨æˆ·ä½“éªŒæµ‹è¯•

Phase 3: æµ‹è¯•å’Œä¼˜åŒ– (2å‘¨)
â”œâ”€â”€ Week 8: ç³»ç»Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ æ€§èƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ å®‰å…¨æµ‹è¯•
â”‚   â””â”€â”€ å…¼å®¹æ€§æµ‹è¯•
â””â”€â”€ Week 9: ä¼˜åŒ–å’Œéƒ¨ç½²
    â”œâ”€â”€ Bugä¿®å¤
    â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–
    â”œâ”€â”€ æ–‡æ¡£å®Œå–„
    â””â”€â”€ æµ‹è¯•ç½‘éƒ¨ç½²

Phase 4: ä¸Šçº¿å’Œç›‘æ§ (1å‘¨)
â””â”€â”€ Week 10: ä¸»ç½‘éƒ¨ç½²
    â”œâ”€â”€ å‚æ•°é…ç½®
    â”œâ”€â”€ ç°åº¦å‘å¸ƒ
    â”œâ”€â”€ ç›‘æ§è®¾ç½®
    â””â”€â”€ ç”¨æˆ·åŸ¹è®­
```

### 5.2 å…³é”®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´èŠ‚ç‚¹ | äº¤ä»˜ç‰© | æˆåŠŸæ ‡å‡† |
|--------|----------|--------|----------|
| **MVPå®Œæˆ** | Week 4 | æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ | ç”³è¯·ã€æŠ•è¯‰ã€å®¡æ ¸æµç¨‹æ­£å¸¸è¿è¡Œ |
| **å‰ç«¯å®Œæˆ** | Week 7 | ç”¨æˆ·ç•Œé¢å¯ç”¨ | ç§»åŠ¨ç«¯å’Œç®¡ç†ç«¯ç•Œé¢åŠŸèƒ½å®Œæ•´ |
| **æµ‹è¯•å®Œæˆ** | Week 9 | ç³»ç»Ÿç¨³å®šå¯é  | åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡>95%ï¼Œæ€§èƒ½è¾¾æ ‡ |
| **æ­£å¼ä¸Šçº¿** | Week 10 | ç³»ç»ŸæŠ•äº§è¿è¡Œ | ç”¨æˆ·å¯æ­£å¸¸ä½¿ç”¨å…¨éƒ¨åŠŸèƒ½ |

### 5.3 é£é™©æ§åˆ¶æªæ–½

#### æŠ€æœ¯é£é™©æ§åˆ¶
- **ä»£ç å®¡æŸ¥**ï¼šæ¯ä¸ªPRå¿…é¡»ç»è¿‡2äººä»¥ä¸Šå®¡æŸ¥
- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡>90%ï¼Œé›†æˆæµ‹è¯•è¦†ç›–å…³é”®æµç¨‹
- **åˆ†é˜¶æ®µéƒ¨ç½²**ï¼šå…ˆæµ‹è¯•ç½‘éªŒè¯ï¼Œå†ä¸»ç½‘ç°åº¦å‘å¸ƒ
- **å›æ»šæ–¹æ¡ˆ**ï¼šå‡†å¤‡ç´§æ€¥å›æ»šå’Œæ•°æ®æ¢å¤æ–¹æ¡ˆ

#### äº§å“é£é™©æ§åˆ¶
- **ç”¨æˆ·æµ‹è¯•**ï¼šé‚€è¯·æ—©æœŸç”¨æˆ·å‚ä¸æµ‹è¯•åé¦ˆ
- **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®æµ‹è¯•æ•°æ®è°ƒæ•´æŠ¼é‡‘ã€å¥–åŠ±ç­‰å‚æ•°
- **åŠŸèƒ½å¼€å…³**ï¼šå…³é”®åŠŸèƒ½æ”¯æŒåŠ¨æ€å¼€å¯/å…³é—­
- **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶æ€å’Œç”¨æˆ·è¡Œä¸º

#### è¿è¥é£é™©æ§åˆ¶
- **ç¤¾åŒºæ²Ÿé€š**ï¼šæå‰ä¸ç¤¾åŒºæ²Ÿé€šåŠŸèƒ½å˜æ›´å’Œä½¿ç”¨æ–¹æ³•
- **æ–‡æ¡£å®Œå–„**ï¼šæä¾›è¯¦ç»†çš„ç”¨æˆ·æŒ‡å—å’ŒFAQ
- **å®¢æœæ”¯æŒ**ï¼šå‡†å¤‡å……è¶³çš„å®¢æœèµ„æºå¤„ç†ç”¨æˆ·é—®é¢˜
- **æ¿€åŠ±æªæ–½**ï¼šåˆæœŸè®¾ç½®æ–°æ‰‹ä¼˜æƒ å’Œä¼˜è´¨è´¡çŒ®å¥–åŠ±

---

## 6. ç»æµæ¨¡å‹è®¾è®¡

### 6.1 æŠ¼é‡‘æ ‡å‡†å»ºè®®

| å†…å®¹ç±»å‹ | æ“ä½œ | åŸºç¡€æŠ¼é‡‘ | è¯´æ˜ |
|---------|------|---------|------|
| **æ–‡æœ¬æ¡£æ¡ˆ** | æ·»åŠ  | 15 DUST | æ–°å¢æ–‡æœ¬ä¿¡æ¯ï¼Œéœ€è¦éªŒè¯çœŸå®æ€§ |
| **æ–‡æœ¬æ¡£æ¡ˆ** | ä¿®æ”¹ | 25 DUST | ä¿®æ”¹ç°æœ‰æ–‡æœ¬ï¼Œå½±å“è¾ƒå¤§ |
| **æ–‡æœ¬æ¡£æ¡ˆ** | åˆ é™¤ | 40 DUST | åˆ é™¤ä¸å¯é€†ï¼Œéœ€è¦æ›´é«˜é—¨æ§› |
| **åª’ä½“å†…å®¹** | æ·»åŠ  | 25 DUST | åª’ä½“æ–‡ä»¶è¾ƒå¤§ï¼Œå­˜å‚¨æˆæœ¬é«˜ |
| **åª’ä½“å†…å®¹** | ä¿®æ”¹ | 35 DUST | ä¿®æ”¹åª’ä½“éœ€è¦é‡æ–°å¤„ç† |
| **åª’ä½“å†…å®¹** | åˆ é™¤ | 55 DUST | åˆ é™¤åª’ä½“å½±å“è¾ƒå¤§ |
| **ä½œå“ä¿¡æ¯** | æ·»åŠ  | 20 DUST | ä½œå“ä¿¡æ¯éœ€è¦ç‰ˆæƒéªŒè¯ |
| **ä½œå“ä¿¡æ¯** | ä¿®æ”¹ | 30 DUST | ä¿®æ”¹ä½œå“ä¿¡æ¯éœ€è¦è°¨æ… |
| **ä½œå“ä¿¡æ¯** | åˆ é™¤ | 70 DUST | åˆ é™¤ä½œå“å½±å“æœ€å¤§ |

### 6.2 ä¿¡èª‰è°ƒæ•´ç³»æ•°

| ä¿¡èª‰ç­‰çº§ | åˆ†æ•°èŒƒå›´ | æŠ¼é‡‘å€æ•° | ä¼˜æƒ æ¯”ä¾‹ | ç‰¹æ®Šæƒé™ |
|---------|---------|---------|---------|---------|
| **æ–°æ‰‹** | 0-59 | 1.2x | - | åŸºç¡€æƒé™ |
| **æ™®é€š** | 60-79 | 1.0x | - | åŸºç¡€æƒé™ |
| **è‰¯å¥½** | 80-89 | 0.8x | 20% | å¿«é€Ÿå®¡æ ¸ |
| **ä¼˜ç§€** | 90-95 | 0.6x | 40% | ä¼˜å…ˆå¤„ç† |
| **ä¸“å®¶** | 96-100 | 0.4x | 60% | ä¸“å®¶æ ‡è¯† |

### 6.3 å¥–åŠ±åˆ†é…ä¼˜åŒ–

#### æŠ•è¯‰æˆåŠŸåˆ†é…ï¼ˆæ–°æ–¹æ¡ˆï¼‰
```
ç”³è¯·æ–¹æŠ¼é‡‘ 100 DUSTï¼š
â”œâ”€â”€ 85% â†’ æŠ•è¯‰äºº (85 DUST) â¬†ï¸ æé«˜æ¿€åŠ±
â”œâ”€â”€ 12% â†’ å§”å‘˜ä¼š (12 DUST)
â””â”€â”€ 3% â†’ å›½åº“ (3 DUST) ğŸ†• æ”¯æŒç³»ç»Ÿè¿è¥
```

#### æŠ•è¯‰å¤±è´¥åˆ†é…ï¼ˆæ–°æ–¹æ¡ˆï¼‰
```
æŠ•è¯‰æ–¹æŠ¼é‡‘ 100 DUSTï¼š
â”œâ”€â”€ 75% â†’ åŸå†…å®¹æ‰€æœ‰è€… (75 DUST)
â”œâ”€â”€ 20% â†’ å§”å‘˜ä¼š (20 DUST)
â””â”€â”€ 5% â†’ å›½åº“ (5 DUST) ğŸ†• æ”¯æŒç³»ç»Ÿè¿è¥
```

### 6.4 ç»æµå¯æŒç»­æ€§åˆ†æ

**æ”¶å…¥æ¥æº**ï¼š
- 3-5%çš„æŠ¼é‡‘æµå‘å›½åº“ï¼Œæ”¯æŒç³»ç»Ÿè¿è¥
- å§”å‘˜ä¼šè·å¾—ç¨³å®šçš„æ²»ç†å¥–åŠ±
- é«˜è´¨é‡å†…å®¹è´¡çŒ®è€…è·å¾—ä¿¡èª‰å¥–åŠ±

**æˆæœ¬æ§åˆ¶**ï¼š
- AIé¢„å®¡æ ¸é™ä½äººå·¥å®¡æ ¸æˆæœ¬
- åˆ†å±‚æƒé™å‡å°‘æ— æ•ˆç”³è¯·
- ä¿¡èª‰ç³»ç»Ÿæé«˜ç”³è¯·è´¨é‡

**é£é™©æ§åˆ¶**ï¼š
- åŠ¨æ€è°ƒæ•´æŠ¼é‡‘æ ‡å‡†ï¼Œç¡®ä¿é—¨æ§›åˆç†
- è®¾ç½®æŠ¼é‡‘æ± æœ€ä½é˜ˆå€¼ï¼Œé¿å…ç³»ç»Ÿç˜«ç—ª
- å»ºç«‹åº”æ€¥èµ„é‡‘æ± ï¼Œåº”å¯¹æç«¯æƒ…å†µ

---

## 7. ç›‘æ§å’Œæ²»ç†

### 7.1 å…³é”®æ€§èƒ½æŒ‡æ ‡ (KPI)

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | ç›‘æ§é¢‘ç‡ | å‘Šè­¦é˜ˆå€¼ |
|---------|---------|--------|---------|---------|
| **ç”³è¯·è´¨é‡** | ç”³è¯·é€šè¿‡ç‡ | 70-85% | æ¯æ—¥ | <60% æˆ– >90% |
| **ç”³è¯·è´¨é‡** | æ’¤å›ç‡ | <10% | æ¯æ—¥ | >15% |
| **æŠ•è¯‰æ•ˆç‡** | æŠ•è¯‰æˆåŠŸç‡ | 40-60% | æ¯æ—¥ | <30% æˆ– >70% |
| **æŠ•è¯‰æ•ˆç‡** | æ¶æ„æŠ•è¯‰ç‡ | <5% | æ¯å‘¨ | >10% |
| **å®¡æ ¸æ•ˆç‡** | å¹³å‡å¤„ç†æ—¶é—´ | <48å°æ—¶ | å®æ—¶ | >72å°æ—¶ |
| **å®¡æ ¸æ•ˆç‡** | ç§¯å‹ç”³è¯·æ•° | <50 | å®æ—¶ | >100 |
| **ç”¨æˆ·æ»¡æ„åº¦** | NPSè¯„åˆ† | >6.0 | æ¯æœˆ | <5.0 |
| **ç»æµå¥åº·** | æŠ¼é‡‘æ± ä½™é¢ | >10000 DUST | æ¯æ—¥ | <5000 DUST |

### 7.2 è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿ

```rust
/// ç³»ç»Ÿå¥åº·ç›‘æ§å™¨
#[pallet::hooks]
impl<T: Config> Hooks<BlockNumberFor<T>> for Pallet<T> {
    fn on_initialize(block_number: BlockNumberFor<T>) -> Weight {
        // æ¯100ä¸ªå—ï¼ˆçº¦10åˆ†é’Ÿï¼‰æ‰§è¡Œä¸€æ¬¡å¥åº·æ£€æŸ¥
        if block_number % 100u32.into() == Zero::zero() {
            Self::perform_health_check(block_number);
        }

        T::DbWeight::get().reads_writes(5, 2)
    }
}

impl<T: Config> Pallet<T> {
    /// æ‰§è¡Œç³»ç»Ÿå¥åº·æ£€æŸ¥
    fn perform_health_check(block_number: BlockNumberFor<T>) {
        let mut alerts = Vec::new();

        // 1. æ£€æŸ¥ç§¯å‹ç”³è¯·
        let pending_count = Self::count_pending_requests();
        if pending_count > T::MaxPendingRequests::get() {
            alerts.push(SystemAlert::RequestBacklog {
                count: pending_count,
                threshold: T::MaxPendingRequests::get(),
            });
        }

        // 2. æ£€æŸ¥æŠ¼é‡‘æ± ä½™é¢
        let total_deposits = Self::calculate_total_held_deposits();
        if total_deposits < T::MinDepositPoolBalance::get() {
            alerts.push(SystemAlert::LowDepositPool {
                current: total_deposits,
                minimum: T::MinDepositPoolBalance::get(),
            });
        }

        // 3. æ£€æŸ¥å®¡æ ¸è¶…æ—¶
        let overdue_reviews = Self::get_overdue_reviews(block_number);
        if !overdue_reviews.is_empty() {
            alerts.push(SystemAlert::OverdueReviews {
                count: overdue_reviews.len() as u32,
                oldest: overdue_reviews[0].submitted_at,
            });
        }

        // 4. æ£€æŸ¥å¼‚å¸¸ç”¨æˆ·è¡Œä¸º
        let suspicious_users = Self::detect_suspicious_behavior(block_number);
        if !suspicious_users.is_empty() {
            alerts.push(SystemAlert::SuspiciousActivity {
                users: suspicious_users,
            });
        }

        // 5. å‘é€å‘Šè­¦äº‹ä»¶
        for alert in alerts {
            Self::deposit_event(Event::SystemAlert { alert });
        }
    }

    /// æ£€æµ‹å¯ç–‘ç”¨æˆ·è¡Œä¸º
    fn detect_suspicious_behavior(block_number: BlockNumberFor<T>) -> Vec<T::AccountId> {
        let mut suspicious_users = Vec::new();
        let time_window = BlockNumberFor::<T>::from(14400u32); // 24å°æ—¶
        let start_block = block_number.saturating_sub(time_window);

        // æ£€æŸ¥é¢‘ç¹ç”³è¯·ç”¨æˆ·
        for (user, requests) in UserRequestCounts::<T>::iter() {
            if requests.len() > 10 { // 24å°æ—¶å†…è¶…è¿‡10æ¬¡ç”³è¯·
                let recent_requests: Vec<_> = requests.into_iter()
                    .filter(|&block| block >= start_block)
                    .collect();

                if recent_requests.len() > 10 {
                    suspicious_users.push(user);
                }
            }
        }

        // æ£€æŸ¥é¢‘ç¹æŠ•è¯‰ç”¨æˆ·
        for (user, complaints) in UserComplaintCounts::<T>::iter() {
            if complaints.len() > 5 { // 24å°æ—¶å†…è¶…è¿‡5æ¬¡æŠ•è¯‰
                let recent_complaints: Vec<_> = complaints.into_iter()
                    .filter(|&block| block >= start_block)
                    .collect();

                if recent_complaints.len() > 5 {
                    suspicious_users.push(user);
                }
            }
        }

        suspicious_users
    }
}

/// ç³»ç»Ÿå‘Šè­¦ç±»å‹
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub enum SystemAlert<T: Config> {
    RequestBacklog {
        count: u32,
        threshold: u32,
    },
    LowDepositPool {
        current: BalanceOf<T>,
        minimum: BalanceOf<T>,
    },
    OverdueReviews {
        count: u32,
        oldest: BlockNumberFor<T>,
    },
    SuspiciousActivity {
        users: Vec<T::AccountId>,
    },
}
```

### 7.3 æ²»ç†å‚æ•°è°ƒä¼˜æœºåˆ¶

```rust
/// åŠ¨æ€å‚æ•°è°ƒæ•´ç³»ç»Ÿ
pub struct ParameterTuningSystem<T: Config> {
    /// å½“å‰å‚æ•°é…ç½®
    pub current_config: GovernanceConfig<T>,
    /// è°ƒæ•´å†å²
    pub adjustment_history: Vec<ParameterAdjustment<T>>,
    /// æ€§èƒ½ç›‘æ§æ•°æ®
    pub performance_metrics: PerformanceMetrics,
}

impl<T: Config> ParameterTuningSystem<T> {
    /// æ ¹æ®ç³»ç»Ÿè¡¨ç°è‡ªåŠ¨è°ƒæ•´å‚æ•°
    pub fn auto_tune_parameters(&mut self) -> Result<Vec<ParameterChange>, Error<T>> {
        let mut changes = Vec::new();
        let metrics = &self.performance_metrics;

        // 1. è°ƒæ•´å…¬ç¤ºæœŸé•¿åº¦
        if metrics.avg_complaint_time < Duration::from_days(2) {
            // å¦‚æœæŠ•è¯‰å¾ˆå¿«ï¼Œå¯ä»¥ç¼©çŸ­å…¬ç¤ºæœŸ
            let new_notice_period = self.current_config.notice_period
                .saturating_mul(90)  // å‡å°‘10%
                .saturating_div(100);

            changes.push(ParameterChange::NoticePeriod {
                old: self.current_config.notice_period,
                new: new_notice_period,
                reason: \"æŠ•è¯‰å“åº”å¿«ï¼Œç¼©çŸ­å…¬ç¤ºæœŸ\".into(),
            });
        }

        // 2. è°ƒæ•´æŠ¼é‡‘æ ‡å‡†
        if metrics.request_success_rate > Percent::from_percent(90) {
            // å¦‚æœæˆåŠŸç‡è¿‡é«˜ï¼Œå¯èƒ½æŠ¼é‡‘åä½ï¼Œéœ€è¦æé«˜è´¨é‡é—¨æ§›
            let multiplier = Perbill::from_percent(110); // å¢åŠ 10%
            changes.push(ParameterChange::DepositMultiplier {
                multiplier,
                reason: \"ç”³è¯·è´¨é‡è¿‡é«˜ï¼Œæé«˜æŠ¼é‡‘é—¨æ§›\".into(),
            });
        } else if metrics.request_success_rate < Percent::from_percent(60) {
            // å¦‚æœæˆåŠŸç‡è¿‡ä½ï¼ŒæŠ¼é‡‘å¯èƒ½åé«˜ï¼Œé™ä½é—¨æ§›
            let multiplier = Perbill::from_percent(90); // å‡å°‘10%
            changes.push(ParameterChange::DepositMultiplier {
                multiplier,
                reason: \"ç”³è¯·æˆåŠŸç‡åä½ï¼Œé™ä½æŠ¼é‡‘é—¨æ§›\".into(),
            });
        }

        // 3. è°ƒæ•´å¥–åŠ±åˆ†é…æ¯”ä¾‹
        if metrics.committee_participation_rate < Percent::from_percent(80) {
            // å¦‚æœå§”å‘˜ä¼šå‚ä¸åº¦ä¸é«˜ï¼Œæé«˜å¥–åŠ±æ¯”ä¾‹
            let new_ratio = self.current_config.committee_reward_bps
                .saturating_add(500); // å¢åŠ 5%

            changes.push(ParameterChange::CommitteeRewardRatio {
                old: self.current_config.committee_reward_bps,
                new: new_ratio,
                reason: \"æé«˜å§”å‘˜ä¼šå‚ä¸ç§¯ææ€§\".into(),
            });
        }

        Ok(changes)
    }

    /// åº”ç”¨å‚æ•°å˜æ›´
    pub fn apply_parameter_changes(
        &mut self,
        changes: Vec<ParameterChange>,
        authority: &T::AccountId,
    ) -> DispatchResult {
        for change in changes {
            match change {
                ParameterChange::NoticePeriod { new, .. } => {
                    self.current_config.notice_period = new;
                },
                ParameterChange::DepositMultiplier { multiplier, .. } => {
                    self.current_config.deposit_multiplier = multiplier;
                },
                ParameterChange::CommitteeRewardRatio { new, .. } => {
                    self.current_config.committee_reward_bps = new;
                },
            }

            // è®°å½•è°ƒæ•´å†å²
            self.adjustment_history.push(ParameterAdjustment {
                change,
                applied_by: authority.clone(),
                applied_at: <frame_system::Pallet<T>>::block_number(),
            });
        }

        Ok(())
    }
}
```

---

## 8. æ€»ç»“ä¸å»ºè®®

### 8.1 æ–¹æ¡ˆä¼˜åŠ¿æ€»ç»“

| ä¼˜åŠ¿ç»´åº¦ | å…·ä½“è¡¨ç° | ç«äº‰ä¼˜åŠ¿ |
|---------|---------|---------|
| **æŠ€æœ¯æˆç†Ÿåº¦** | åŸºäºéªŒè¯ç³»ç»Ÿæ‰©å±•ï¼Œé£é™©å¯æ§ | æ¯”æ–°å»ºç³»ç»Ÿå¿«50%ä¸Šçº¿ |
| **ç”¨æˆ·ä½“éªŒ** | ç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œæ“ä½œæµç¨‹ç®€åŒ– | é™ä½ç”¨æˆ·ä½¿ç”¨é—¨æ§› |
| **æ²»ç†æ•ˆç‡** | AI+ä¸“å®¶+ç¤¾åŒºä¸‰å±‚å®¡æ ¸ | æå‡å®¡æ ¸è´¨é‡å’Œé€Ÿåº¦ |
| **ç»æµåˆç†** | åŠ¨æ€æŠ¼é‡‘+ä¿¡èª‰å¥–åŠ±æœºåˆ¶ | æ¿€åŠ±ä¼˜è´¨è´¡çŒ®ï¼Œæƒ©ç½šæ¶æ„è¡Œä¸º |
| **å¯æ‰©å±•æ€§** | æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•åŠŸèƒ½ | æ”¯æŒæœªæ¥åŠŸèƒ½è¿­ä»£ |

### 8.2 å…³é”®æˆåŠŸå› ç´ 

1. **æŠ€æœ¯å®ç°**ï¼š
   - âœ… åŸºäºæˆç†Ÿçš„pallet-stardust-appealsç³»ç»Ÿ
   - âœ… å®Œå–„çš„æµ‹è¯•è¦†ç›–å’Œä»£ç å®¡æŸ¥
   - âœ… åˆ†é˜¶æ®µéƒ¨ç½²é™ä½ä¸Šçº¿é£é™©

2. **ç»æµè®¾è®¡**ï¼š
   - âœ… åŠ¨æ€æŠ¼é‡‘ç®—æ³•å¹³è¡¡é—¨æ§›ä¸å‚ä¸åº¦
   - âœ… ä¿¡èª‰ç³»ç»Ÿæ¿€åŠ±é•¿æœŸä¼˜è´¨è´¡çŒ®
   - âœ… å¤šé‡å¥–åŠ±æœºåˆ¶ç¡®ä¿å„æ–¹åˆ©ç›Š

3. **æ²»ç†æœºåˆ¶**ï¼š
   - âœ… AIé¢„å®¡æ ¸æé«˜æ•ˆç‡
   - âœ… ä¸“å®¶æ± ä¿è¯ä¸“ä¸šæ€§
   - âœ… ç¤¾åŒºæŠ•ç¥¨å¢åŠ é€æ˜åº¦

4. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - âœ… ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡
   - âœ… ç›´è§‚çš„çŠ¶æ€è·Ÿè¸ª
   - âœ… æ¸…æ™°çš„é£é™©æç¤º

### 8.3 å®æ–½å»ºè®®

#### çŸ­æœŸå»ºè®®ï¼ˆå‰3ä¸ªæœˆï¼‰

1. **å‚æ•°ä¿å®ˆè®¾ç½®**ï¼š
   - å…¬ç¤ºæœŸï¼š7å¤©ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
   - æŠ¼é‡‘æ ‡å‡†ï¼šé€‚ä¸­æ°´å¹³ï¼Œé¿å…è¿‡é«˜é—¨æ§›
   - å¥–åŠ±æ¯”ä¾‹ï¼š85%/12%/3%åˆ†é…

2. **é‡ç‚¹ç›‘æ§æŒ‡æ ‡**ï¼š
   - ç”³è¯·é€šè¿‡ç‡ç»´æŒåœ¨70-85%
   - æŠ•è¯‰æˆåŠŸç‡ç»´æŒåœ¨40-60%
   - å¹³å‡å¤„ç†æ—¶é—´æ§åˆ¶åœ¨48å°æ—¶å†…

3. **ç”¨æˆ·æ•™è‚²**ï¼š
   - å‘å¸ƒè¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
   - ä¸¾åŠåœ¨çº¿åŸ¹è®­æ´»åŠ¨
   - å»ºç«‹FAQå’Œå®¢æœæ”¯æŒ

#### ä¸­æœŸå»ºè®®ï¼ˆ3-12ä¸ªæœˆï¼‰

1. **æ ¹æ®æ•°æ®ä¼˜åŒ–**ï¼š
   - è°ƒæ•´æŠ¼é‡‘æ ‡å‡†å’Œä¿¡èª‰å€æ•°
   - ä¼˜åŒ–AIæ¨¡å‹å‡†ç¡®ç‡
   - å®Œå–„ä¸“å®¶åº“ç®¡ç†

2. **åŠŸèƒ½è¿­ä»£**ï¼š
   - å¢åŠ æ‰¹é‡æ“ä½œåŠŸèƒ½
   - æ”¯æŒå¤šè¯­è¨€å†…å®¹å®¡æ ¸
   - é›†æˆæ›´å¤šAIåˆ†æç»´åº¦

3. **ç”Ÿæ€å»ºè®¾**ï¼š
   - å¼•å…¥ä¸“ä¸šæœºæ„å‚ä¸
   - å»ºç«‹å†…å®¹è´¨é‡æ ‡å‡†
   - æ‰©å¤§ä¸“å®¶åº“è¦†ç›–é¢

#### é•¿æœŸå»ºè®®ï¼ˆ1å¹´ä»¥ä¸Šï¼‰

1. **æŠ€æœ¯å‡çº§**ï¼š
   - å¼•å…¥æ›´å…ˆè¿›çš„AIæ¨¡å‹
   - æ”¯æŒè·¨é“¾æ²»ç†äº’æ“ä½œ
   - å»ºç«‹å»ä¸­å¿ƒåŒ–å­˜å‚¨

2. **æ²»ç†æ¼”è¿›**ï¼š
   - é€æ­¥å‘ç¤¾åŒºè‡ªæ²»è½¬ç§»
   - å»ºç«‹å›½é™…åŒ–æ²»ç†æ ‡å‡†
   - æ¢ç´¢DAOæ²»ç†æ¨¡å¼

3. **å•†ä¸šåŒ–æ¢ç´¢**ï¼š
   - ä¸æ–‡åŒ–æœºæ„åˆä½œ
   - æä¾›ä¼ä¸šçº§æœåŠ¡
   - å»ºç«‹å¯æŒç»­å•†ä¸šæ¨¡å¼

### 8.4 é£é™©æç¤º

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **æ³•å¾‹åˆè§„**ï¼šåŠ¡å¿…åœ¨å®æ–½å‰è¿›è¡Œæ³•å¾‹åˆè§„å®¡æŸ¥
2. **æ•°æ®å®‰å…¨**ï¼šç¡®ä¿ç”¨æˆ·æ•°æ®å’ŒæŠ¼é‡‘èµ„é‡‘å®‰å…¨
3. **ç¤¾åŒºæ¥å—åº¦**ï¼šéœ€è¦å……åˆ†æ²Ÿé€šè·å¾—ç¤¾åŒºæ”¯æŒ
4. **æŠ€æœ¯é£é™©**ï¼šåšå¥½å……åˆ†çš„æµ‹è¯•å’Œåº”æ€¥é¢„æ¡ˆ

**å»ºè®®**ï¼šé‡‡ç”¨å°æ­¥å¿«è·‘çš„æ–¹å¼ï¼Œå…ˆåœ¨å°èŒƒå›´è¯•ç‚¹ï¼Œæ ¹æ®åé¦ˆä¸æ–­ä¼˜åŒ–ï¼Œå†é€æ­¥æ¨å¹¿åˆ°å…¨å¹³å°ã€‚

---

## 9. é€è€…æ‹¥æœ‰è€…ä¾›å¥‰åˆ†è´¦æœºåˆ¶åˆ†æ â­ æ–°å¢

### 9.1 éœ€æ±‚æ¦‚è¿°

**åœºæ™¯æè¿°**ï¼šç”¨æˆ·åˆ›å»ºä¾›å¥‰ç¥­ç¥€å“è®¢å•å¹¶æ”¯ä»˜ï¼Œé€è€…æ‹¥æœ‰è€…ï¼ˆå¢“åœ°æ‹¥æœ‰è€…ï¼‰è·å¾—åˆ†è´¦æ”¶ç›Šã€‚

**æ ¸å¿ƒé—®é¢˜**ï¼š
- æ˜¯å¦åº”è¯¥è®©é€è€…æ‹¥æœ‰è€…ä»ä¾›å¥‰è®¢å•ä¸­è·å¾—åˆ†è´¦ï¼Ÿ
- å¦‚ä½•å¹³è¡¡æ¨èé“¾æ¿€åŠ±å’Œæ‹¥æœ‰è€…æ¿€åŠ±ï¼Ÿ
- åˆ†è´¦æ¯”ä¾‹å¦‚ä½•è®¾ç½®æ‰åˆç†ï¼Ÿ

### 9.2 å¯è¡Œæ€§åˆ†æ

#### 9.2.1 æŠ€æœ¯å¯è¡Œæ€§ â­â­â­â­â­

**å®Œå…¨å¯è¡Œ**ï¼ŒåŸºäºç°æœ‰åŸºç¡€è®¾æ–½ï¼š

1. **æ‹¥æœ‰è€…æŸ¥è¯¢æœºåˆ¶**ï¼š
   ```rust
   // ç°æœ‰ GraveProvider trait å·²æ”¯æŒ
   pub trait GraveProvider<AccountId> {
       fn owner_of(grave_id: u64) -> Option<AccountId>;
   }
   ```

2. **åˆ†è´¦ç³»ç»Ÿå®Œå–„**ï¼š
   - âœ… ç°æœ‰ `pallet-memorial` å·²æœ‰åˆ†è´¦é€»è¾‘
   - âœ… æ”¯æŒå¤šè´¦æˆ·åˆ†è´¦ï¼ˆ`release_split`ï¼‰
   - âœ… ä¸ `pallet-escrow` æ‰˜ç®¡ç³»ç»Ÿé›†æˆ
   - âœ… ä¸ `pallet-affiliate` æ¨èé“¾ç³»ç»Ÿé›†æˆ

3. **å®ç°æ–¹æ¡ˆ**ï¼š
   ```rust
   // æ–¹æ¡ˆ1ï¼šä¿®æ”¹ç°æœ‰åˆ†è´¦é€»è¾‘
   fn transfer_with_owner_share(
       who: &T::AccountId,
       grave_id: u64,
       total: u128,
       sacrifice_id: u64,
       duration_weeks: Option<u32>,
   ) -> DispatchResult {
       // 1. è·å–å¢“åœ°æ‹¥æœ‰è€…
       let owner = T::GraveProvider::owner_of(grave_id)
           .ok_or(Error::<T>::GraveNotFound)?;
       
       // 2. è®¡ç®—åˆ†è´¦æ¯”ä¾‹
       let owner_share = total * T::OwnerSharePercent::get() / 100;
       let affiliate_share = total - owner_share;
       
       // 3. åˆ†è´¦è½¬è´¦
       T::Currency::transfer(&who, &owner, owner_share, ExistenceRequirement::KeepAlive)?;
       
       // 4. å‰©ä½™è¿›å…¥æ¨èé“¾
       T::OnOfferingCommitted::on_offering(
           grave_id,
           sacrifice_id,
           who,
           affiliate_share,
           duration_weeks,
       );
       
       Ok(())
   }
   ```

**æŠ€æœ¯è¯„ä¼°**ï¼š
- âœ… **å®ç°éš¾åº¦**ï¼šä½ï¼ˆ1-2å‘¨å¼€å‘ï¼‰
- âœ… **ç³»ç»Ÿå…¼å®¹æ€§**ï¼šå®Œå…¨å…¼å®¹ç°æœ‰ç³»ç»Ÿ
- âœ… **æ€§èƒ½å½±å“**ï¼šå¯å¿½ç•¥ï¼ˆä»…å¢åŠ ä¸€æ¬¡æŸ¥è¯¢å’Œè½¬è´¦ï¼‰

#### 9.2.2 ç»æµå¯è¡Œæ€§ â­â­â­â­âš¬

**åŸºæœ¬å¯è¡Œ**ï¼Œéœ€è¦åˆç†è®¾ç½®åˆ†è´¦æ¯”ä¾‹ï¼š

1. **æˆæœ¬åˆ†æ**ï¼š
   - å¼€å‘æˆæœ¬ï¼šä½ï¼ˆåŸºäºç°æœ‰ç³»ç»Ÿï¼‰
   - è¿è¥æˆæœ¬ï¼šæ— é¢å¤–æˆæœ¬
   - ç»´æŠ¤æˆæœ¬ï¼šä½ï¼ˆé€»è¾‘ç®€å•ï¼‰

2. **æ”¶ç›Šåˆ†æ**ï¼š
   - æ‹¥æœ‰è€…è·å¾—æ”¶ç›Šï¼Œæ¿€åŠ±ç»´æŠ¤çºªå¿µé¦†
   - æ¨èé“¾ä»ä¿ç•™å¤§éƒ¨åˆ†æ”¶ç›Šï¼Œä¿æŒæ¨èæ¿€åŠ±
   - å¹³å°å¯é€šè¿‡æ‹¥æœ‰è€…åˆ†è´¦æ¯”ä¾‹è°ƒæ•´æ”¶ç›Š

3. **é£é™©æ§åˆ¶**ï¼š
   - âš ï¸ éœ€è¦å¹³è¡¡æ‹¥æœ‰è€…å’Œæ¨èé“¾çš„åˆ†è´¦æ¯”ä¾‹
   - âš ï¸ é¿å…è¿‡åº¦æ¿€åŠ±å¯¼è‡´åˆ·å•
   - âš ï¸ éœ€è¦è®¾ç½®åˆ†è´¦ä¸Šé™å’Œä¸‹é™

**ç»æµè¯„ä¼°**ï¼š
- âœ… **å¼€å‘æˆæœ¬**ï¼šä½ï¼ˆ1-2å‘¨ï¼‰
- âœ… **è¿è¥æˆæœ¬**ï¼šæ— é¢å¤–æˆæœ¬
- âš ï¸ **åˆ†è´¦æ¯”ä¾‹**ï¼šéœ€è¦æ ¹æ®å®é™…æ•°æ®è°ƒæ•´

### 9.3 åˆç†æ€§åˆ†æ

#### 9.3.1 ä¸šåŠ¡åˆç†æ€§ â­â­â­â­â­

**éå¸¸åˆç†**ï¼Œç¬¦åˆä¸šåŠ¡é€»è¾‘ï¼š

1. **æ‹¥æœ‰è€…æƒç›Š**ï¼š
   - âœ… æ‹¥æœ‰è€…åˆ›å»ºå’Œç»´æŠ¤çºªå¿µé¦†ï¼Œåº”è¯¥è·å¾—æ”¶ç›Š
   - âœ… æ‹¥æœ‰è€…ç»´æŠ¤å†…å®¹è´¨é‡ï¼Œæä¾›ä¼˜è´¨æœåŠ¡
   - âœ… æ‹¥æœ‰è€…æ‰¿æ‹…çºªå¿µé¦†è¿è¥æˆæœ¬ï¼ˆå¦‚IPFSå­˜å‚¨è´¹ç”¨ï¼‰

2. **æ¿€åŠ±æœºåˆ¶**ï¼š
   - âœ… æ‹¥æœ‰è€…è·å¾—æ”¶ç›Šï¼Œæ¿€åŠ±ç»´æŠ¤çºªå¿µé¦†è´¨é‡
   - âœ… æ‹¥æœ‰è€…è·å¾—æ”¶ç›Šï¼Œæ¿€åŠ±æ¨å¹¿çºªå¿µé¦†
   - âœ… å½¢æˆæ­£å‘å¾ªç¯ï¼šè´¨é‡å¥½ â†’ ä¾›å¥‰å¤š â†’ æ”¶ç›Šå¤š â†’ è´¨é‡æ›´å¥½

3. **å¸‚åœºé€»è¾‘**ï¼š
   - âœ… ç±»ä¼¼å†…å®¹å¹³å°çš„åˆ›ä½œè€…åˆ†æˆæœºåˆ¶
   - âœ… ç¬¦åˆ"è°è´¡çŒ®è°æ”¶ç›Š"çš„åŸåˆ™
   - âœ… ç¬¦åˆ"è°ç»´æŠ¤è°æ”¶ç›Š"çš„åŸåˆ™

#### 9.3.2 åˆ†è´¦æ¯”ä¾‹åˆç†æ€§åˆ†æ

**æ¨èæ–¹æ¡ˆ**ï¼šé‡‡ç”¨**åˆ†å±‚åˆ†è´¦**æœºåˆ¶

| åˆ†è´¦å¯¹è±¡ | æ¨èæ¯”ä¾‹ | ç†ç”± |
|---------|---------|------|
| **é€è€…æ‹¥æœ‰è€…** | 30-40% | ç»´æŠ¤çºªå¿µé¦†ï¼Œæä¾›å†…å®¹æœåŠ¡ |
| **æ¨èé“¾ï¼ˆAffiliateï¼‰** | 50-60% | ä¿æŒæ¨èæ¿€åŠ±ï¼Œä¿ƒè¿›ç”¨æˆ·å¢é•¿ |
| **å¹³å°** | 5-10% | å¹³å°è¿è¥æˆæœ¬ï¼ŒæŠ€æœ¯ç»´æŠ¤ |

**åˆ†è´¦æ¯”ä¾‹å»ºè®®**ï¼š

1. **åˆå§‹è®¾ç½®**ï¼ˆä¿å®ˆæ–¹æ¡ˆï¼‰ï¼š
   - æ‹¥æœ‰è€…ï¼š30%
   - æ¨èé“¾ï¼š65%
   - å¹³å°ï¼š5%

2. **ä¼˜åŒ–è®¾ç½®**ï¼ˆå¹³è¡¡æ–¹æ¡ˆï¼‰ï¼š
   - æ‹¥æœ‰è€…ï¼š35%
   - æ¨èé“¾ï¼š60%
   - å¹³å°ï¼š5%

3. **æ¿€è¿›è®¾ç½®**ï¼ˆæ¿€åŠ±æ–¹æ¡ˆï¼‰ï¼š
   - æ‹¥æœ‰è€…ï¼š40%
   - æ¨èé“¾ï¼š55%
   - å¹³å°ï¼š5%

**åˆ†è´¦æ¯”ä¾‹è°ƒæ•´æœºåˆ¶**ï¼š
- æ”¯æŒæ²»ç†æŠ•ç¥¨è°ƒæ•´åˆ†è´¦æ¯”ä¾‹
- æ ¹æ®å®é™…è¿è¥æ•°æ®åŠ¨æ€ä¼˜åŒ–
- è®¾ç½®åˆ†è´¦æ¯”ä¾‹ä¸Šä¸‹é™ï¼ˆæ‹¥æœ‰è€…ï¼š20-50%ï¼Œæ¨èé“¾ï¼š40-70%ï¼‰

#### 9.3.3 æ½œåœ¨é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

**é—®é¢˜1ï¼šæ‹¥æœ‰è€…åˆ·å•**

- **é£é™©**ï¼šæ‹¥æœ‰è€…å¯èƒ½è‡ªå·±ç»™è‡ªå·±ä¾›å¥‰ï¼Œåˆ·å–æ”¶ç›Š
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - âœ… é™åˆ¶åŒä¸€è´¦æˆ·ç»™è‡ªå·±çš„ä¾›å¥‰æ¬¡æ•°
  - âœ… è®¾ç½®æœ€å°ä¾›å¥‰é‡‘é¢
  - âœ… ç›‘æ§å¼‚å¸¸ä¾›å¥‰è¡Œä¸ºï¼ˆå¦‚çŸ­æ—¶é—´å†…å¤§é‡ä¾›å¥‰ï¼‰

**é—®é¢˜2ï¼šæ¨èé“¾æ¿€åŠ±é™ä½**

- **é£é™©**ï¼šæ‹¥æœ‰è€…åˆ†è´¦å¯èƒ½é™ä½æ¨èé“¾æ¿€åŠ±
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - âœ… ä¿æŒæ¨èé“¾åˆ†è´¦æ¯”ä¾‹åœ¨50%ä»¥ä¸Š
  - âœ… æ‹¥æœ‰è€…åˆ†è´¦æ¯”ä¾‹ä¸è¶…è¿‡40%
  - âœ… é€šè¿‡å…¶ä»–æ–¹å¼å¢å¼ºæ¨èæ¿€åŠ±ï¼ˆå¦‚æ¨èå¥–åŠ±åŠ æˆï¼‰

**é—®é¢˜3ï¼šåˆ†è´¦å¤æ‚åº¦å¢åŠ **

- **é£é™©**ï¼šåˆ†è´¦é€»è¾‘å˜å¤æ‚ï¼Œå¯èƒ½å½±å“æ€§èƒ½
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - âœ… ä½¿ç”¨æ‰¹é‡åˆ†è´¦ï¼ˆ`release_split`ï¼‰æé«˜æ•ˆç‡
  - âœ… ä¼˜åŒ–åˆ†è´¦é€»è¾‘ï¼Œå‡å°‘é“¾ä¸Šè®¡ç®—
  - âœ… ä½¿ç”¨äº‹ä»¶æœºåˆ¶ï¼Œå¼‚æ­¥å¤„ç†åˆ†è´¦

### 9.4 å®æ–½æ–¹æ¡ˆè®¾è®¡

#### 9.4.1 æ•°æ®ç»“æ„æ‰©å±•

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šä¾›å¥‰åˆ†è´¦é…ç½®
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct OfferingShareConfig {
    /// æ‹¥æœ‰è€…åˆ†è´¦æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œbpsï¼Œ3000 = 30%ï¼‰
    pub owner_share_bps: u16,
    /// æ¨èé“¾åˆ†è´¦æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œbpsï¼Œ6000 = 60%ï¼‰
    pub affiliate_share_bps: u16,
    /// å¹³å°åˆ†è´¦æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œbpsï¼Œ500 = 5%ï¼‰
    pub platform_share_bps: u16,
    /// æœ€å°æ‹¥æœ‰è€…åˆ†è´¦é‡‘é¢ï¼ˆé˜²æ­¢å°é¢è®¢å•åˆ†è´¦æˆæœ¬è¿‡é«˜ï¼‰
    pub min_owner_share: BalanceOf<T>,
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šæ‹¥æœ‰è€…ä¾›å¥‰æ”¶ç›Šç»Ÿè®¡
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct OwnerOfferingStats {
    /// æ‹¥æœ‰è€…è´¦æˆ·
    pub owner: T::AccountId,
    /// ç´¯è®¡ä¾›å¥‰è®¢å•æ•°
    pub total_offerings: u64,
    /// ç´¯è®¡ä¾›å¥‰é‡‘é¢
    pub total_amount: BalanceOf<T>,
    /// ç´¯è®¡åˆ†è´¦æ”¶ç›Š
    pub total_rewards: BalanceOf<T>,
    /// æœ€åæ›´æ–°æ—¶é—´
    pub last_updated: BlockNumberFor<T>,
}
```

#### 9.4.2 æ ¸å¿ƒæ¥å£è®¾è®¡

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šè®¾ç½®ä¾›å¥‰åˆ†è´¦é…ç½®
#[pallet::call_index(25)]
#[pallet::weight(T::WeightInfo::set_offering_share_config())]
pub fn set_offering_share_config(
    origin: OriginFor<T>,
    owner_share_bps: u16,
    affiliate_share_bps: u16,
    platform_share_bps: u16,
) -> DispatchResult {
    T::AdminOrigin::try_origin(origin)?;
    
    ensure!(
        owner_share_bps + affiliate_share_bps + platform_share_bps == 10000,
        Error::<T>::BadInput
    );
    
    // éªŒè¯åˆ†è´¦æ¯”ä¾‹èŒƒå›´
    ensure!(
        owner_share_bps >= 2000 && owner_share_bps <= 5000,
        Error::<T>::BadInput  // æ‹¥æœ‰è€…åˆ†è´¦ï¼š20-50%
    );
    
    ensure!(
        affiliate_share_bps >= 4000 && affiliate_share_bps <= 7000,
        Error::<T>::BadInput  // æ¨èé“¾åˆ†è´¦ï¼š40-70%
    );
    
    OfferingShareConfig::<T>::put(OfferingShareConfig {
        owner_share_bps,
        affiliate_share_bps,
        platform_share_bps,
        min_owner_share: T::MinOwnerShare::get(),
    });
    
    Self::deposit_event(Event::OfferingShareConfigUpdated {
        owner_share_bps,
        affiliate_share_bps,
        platform_share_bps,
    });
    
    Ok(())
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šä¿®æ”¹åˆ†è´¦é€»è¾‘ï¼ˆåœ¨ offer å‡½æ•°ä¸­è°ƒç”¨ï¼‰
/// 
/// ### ğŸ†• å¤šé€è€…åˆ†è´¦æ”¯æŒ
/// å¦‚æœä¸€ä¸ªgraveåŒ…å«å¤šä¸ªdeceasedï¼Œéœ€è¦å°†æ‹¥æœ‰è€…åˆ†è´¦åˆ†é…ç»™ä¸åŒçš„é€è€…æ‹¥æœ‰è€…
fn transfer_with_owner_share(
    who: &T::AccountId,
    grave_id: u64,
    total: u128,
    sacrifice_id: u64,
    duration_weeks: Option<u32>,
) -> DispatchResult {
    // 1. è·å–åˆ†è´¦é…ç½®
    let config = OfferingShareConfig::<T>::get();
    
    // 2. è®¡ç®—æ‹¥æœ‰è€…æ€»åˆ†è´¦é‡‘é¢
    let owner_share_total = total
        .saturating_mul(config.owner_share_bps as u128)
        .saturating_div(10000u128);
    
    // 3. æ£€æŸ¥æœ€å°æ‹¥æœ‰è€…åˆ†è´¦é‡‘é¢
    let affiliate_share = if owner_share_total >= config.min_owner_share {
        // 4. è·å–graveä¸­çš„æ‰€æœ‰é€è€…å¹¶åˆ†é…åˆ†è´¦
        Self::distribute_owner_share_to_deceased_owners(
            who,
            grave_id,
            owner_share_total,
            total,
        )?;
        
        // å‰©ä½™é‡‘é¢è¿›å…¥æ¨èé“¾
        total.saturating_sub(owner_share_total)
    } else {
        // é‡‘é¢å¤ªå°ï¼Œå…¨éƒ¨è¿›å…¥æ¨èé“¾
        total
    };
    
    // 5. å‰©ä½™é‡‘é¢è¿›å…¥æ¨èé“¾
    T::OnOfferingCommitted::on_offering(
        grave_id,
        sacrifice_id,
        who,
        affiliate_share,
        duration_weeks,
    );
    
    Ok(())
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šå°†æ‹¥æœ‰è€…åˆ†è´¦åˆ†é…ç»™graveä¸­çš„å¤šä¸ªé€è€…æ‹¥æœ‰è€…
/// 
/// ### åˆ†è´¦ç­–ç•¥
/// é‡‡ç”¨"æŒ‰æ‹¥æœ‰è€…åˆå¹¶+å¹³å‡åˆ†é…"ç­–ç•¥ï¼š
/// 1. æŸ¥è¯¢graveä¸­çš„æ‰€æœ‰deceased
/// 2. æŒ‰æ‹¥æœ‰è€…åˆ†ç»„ï¼ˆç›¸åŒæ‹¥æœ‰è€…åˆå¹¶ï¼‰
/// 3. å¹³å‡åˆ†é…ç»™æ¯ä¸ªæ‹¥æœ‰è€…ç»„
/// 4. å¦‚æœåªæœ‰ä¸€ä¸ªæ‹¥æœ‰è€…ï¼Œåˆ™å…¨éƒ¨ç»™è¯¥æ‹¥æœ‰è€…
fn distribute_owner_share_to_deceased_owners(
    who: &T::AccountId,
    grave_id: u64,
    owner_share_total: u128,
    total_amount: u128,
) -> DispatchResult {
    // 1. è·å–graveä¸­çš„æ‰€æœ‰é€è€…ID
    let deceased_ids = T::DeceasedProvider::get_deceased_by_grave(grave_id)
        .unwrap_or_default();
    
    if deceased_ids.is_empty() {
        // å¦‚æœæ²¡æœ‰é€è€…ï¼Œåˆ†è´¦ç»™graveæ‹¥æœ‰è€…ï¼ˆå‘åå…¼å®¹ï¼‰
        let grave_owner = T::GraveProvider::owner_of(grave_id)
            .ok_or(Error::<T>::GraveNotFound)?;
        
        T::Currency::transfer(
            who,
            &grave_owner,
            owner_share_total,
            ExistenceRequirement::KeepAlive,
        )?;
        
        Self::update_owner_stats(&grave_owner, total_amount, owner_share_total);
        
        Self::deposit_event(Event::OwnerShareDistributed {
            grave_id,
            owner: grave_owner.clone(),
            amount: owner_share_total,
            total_amount,
            deceased_ids: None,
        });
        
        return Ok(());
    }
    
    // 2. æŒ‰æ‹¥æœ‰è€…åˆ†ç»„ï¼ˆä½¿ç”¨BTreeMapä¿æŒé¡ºåºï¼‰
    let mut owner_groups: BTreeMap<T::AccountId, Vec<u64>> = BTreeMap::new();
    
    for deceased_id in deceased_ids.iter() {
        if let Some(deceased) = T::DeceasedProvider::get_deceased(*deceased_id) {
            owner_groups
                .entry(deceased.owner.clone())
                .or_insert_with(Vec::new)
                .push(*deceased_id);
        }
    }
    
    // 3. è®¡ç®—æ¯ä¸ªæ‹¥æœ‰è€…ç»„åº”å¾—çš„åˆ†è´¦é‡‘é¢
    let owner_count = owner_groups.len() as u128;
    let share_per_owner = owner_share_total.saturating_div(owner_count);
    let remainder = owner_share_total.saturating_sub(share_per_owner.saturating_mul(owner_count));
    
    // 4. åˆ†é…åˆ†è´¦ï¼ˆç¬¬ä¸€ä¸ªæ‹¥æœ‰è€…è·å¾—ä½™æ•°ï¼Œé¿å…ç²¾åº¦æŸå¤±ï¼‰
    let mut is_first = true;
    for (owner, deceased_ids) in owner_groups.iter() {
        let mut share = share_per_owner;
        
        // ç¬¬ä¸€ä¸ªæ‹¥æœ‰è€…è·å¾—ä½™æ•°ï¼ˆå¤„ç†ç²¾åº¦é—®é¢˜ï¼‰
        if is_first {
            share = share.saturating_add(remainder);
            is_first = false;
        }
        
        // è½¬è´¦ç»™æ‹¥æœ‰è€…
        T::Currency::transfer(
            who,
            owner,
            share,
            ExistenceRequirement::KeepAlive,
        )?;
        
        // æ›´æ–°æ‹¥æœ‰è€…ç»Ÿè®¡
        Self::update_owner_stats(owner, total_amount, share);
        
        // å‘é€åˆ†è´¦äº‹ä»¶
        Self::deposit_event(Event::OwnerShareDistributed {
            grave_id,
            owner: owner.clone(),
            amount: share,
            total_amount,
            deceased_ids: Some(deceased_ids.clone()),
        });
    }
    
    Ok(())
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šæ›´æ–°æ‹¥æœ‰è€…ç»Ÿè®¡ä¿¡æ¯
fn update_owner_stats(
    owner: &T::AccountId,
    total_amount: u128,
    owner_share: u128,
) {
    OwnerOfferingStats::<T>::mutate(owner, |stats| {
        stats.total_offerings = stats.total_offerings.saturating_add(1);
        stats.total_amount = stats.total_amount.saturating_add(total_amount);
        stats.total_rewards = stats.total_rewards.saturating_add(owner_share);
        stats.last_updated = <frame_system::Pallet<T>>::block_number();
    });
}
```

#### 9.4.3 å¤šé€è€…åˆ†è´¦æ–¹æ¡ˆè®¾è®¡ â­ æ–°å¢

**é—®é¢˜åœºæ™¯**ï¼šä¸€ä¸ªgraveï¼ˆå¢“åœ°ï¼‰å¯èƒ½åŒ…å«å¤šä¸ªdeceasedï¼ˆé€è€…ï¼‰ï¼Œæ¯ä¸ªé€è€…æœ‰è‡ªå·±çš„æ‹¥æœ‰è€…ã€‚å½“ç”¨æˆ·è´­ä¹°ç¥­ç¥€å“è®¢å•æ—¶ï¼Œå¦‚ä½•å°†æ”¯ä»˜åˆ†é…ç»™ä¸åŒçš„é€è€…æ‹¥æœ‰è€…ï¼Ÿ

**æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | åˆ†é…ç­–ç•¥ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|---------|------|------|--------|
| **æ–¹æ¡ˆ1ï¼šå¹³å‡åˆ†é…** | æŒ‰é€è€…æ•°é‡å¹³å‡åˆ†é… | ç®€å•å…¬å¹³ï¼Œæ˜“äºç†è§£ | å¿½ç•¥æ‹¥æœ‰è€…å…³ç³»ï¼Œå¯èƒ½ä¸å…¬å¹³ | â­â­â­ |
| **æ–¹æ¡ˆ2ï¼šæŒ‰æ‹¥æœ‰è€…åˆå¹¶** | ç›¸åŒæ‹¥æœ‰è€…åˆå¹¶åå¹³å‡åˆ†é… | å…¬å¹³åˆç†ï¼Œé¿å…é‡å¤åˆ†é… | å®ç°ç¨å¤æ‚ | â­â­â­â­â­ |
| **æ–¹æ¡ˆ3ï¼šæŒ‰æƒé‡åˆ†é…** | æ ¹æ®é€è€…é‡è¦æ€§åˆ†é…æƒé‡ | çµæ´»ï¼Œå¯å®šåˆ¶ | å¤æ‚åº¦é«˜ï¼Œéœ€è¦æƒé‡é…ç½® | â­â­â­âš¬ |
| **æ–¹æ¡ˆ4ï¼šç”¨æˆ·æŒ‡å®š** | ç”¨æˆ·é€‰æ‹©åˆ†é…ç»™å“ªä¸ªé€è€… | ç”¨æˆ·è‡ªä¸»ï¼Œçµæ´» | ç”¨æˆ·ä½“éªŒå¤æ‚ï¼Œå¯èƒ½é—æ¼ | â­â­âš¬ |

**æ¨èæ–¹æ¡ˆ**ï¼š**æ–¹æ¡ˆ2 - æŒ‰æ‹¥æœ‰è€…åˆå¹¶+å¹³å‡åˆ†é…**

**æ ¸å¿ƒé€»è¾‘**ï¼š
1. æŸ¥è¯¢graveä¸­çš„æ‰€æœ‰deceased
2. æŒ‰æ‹¥æœ‰è€…åˆ†ç»„ï¼ˆç›¸åŒæ‹¥æœ‰è€…åˆå¹¶ï¼‰
3. å¹³å‡åˆ†é…ç»™æ¯ä¸ªæ‹¥æœ‰è€…ç»„
4. å¦‚æœåªæœ‰ä¸€ä¸ªæ‹¥æœ‰è€…ï¼Œåˆ™å…¨éƒ¨ç»™è¯¥æ‹¥æœ‰è€…

**ç¤ºä¾‹åœºæ™¯**ï¼š

**åœºæ™¯1ï¼šå•ä¸ªé€è€…**
- Grave 1 åŒ…å«ï¼šDeceased Aï¼ˆæ‹¥æœ‰è€…ï¼šAliceï¼‰
- ç”¨æˆ·è´­ä¹°100 DUSTçš„ç¥­ç¥€å“
- æ‹¥æœ‰è€…åˆ†è´¦ï¼š30 DUST â†’ å…¨éƒ¨ç»™Alice âœ…

**åœºæ™¯2ï¼šå¤šä¸ªé€è€…ï¼Œä¸åŒæ‹¥æœ‰è€…**
- Grave 2 åŒ…å«ï¼š
  - Deceased Bï¼ˆæ‹¥æœ‰è€…ï¼šBobï¼‰
  - Deceased Cï¼ˆæ‹¥æœ‰è€…ï¼šCharlieï¼‰
- ç”¨æˆ·è´­ä¹°100 DUSTçš„ç¥­ç¥€å“
- æ‹¥æœ‰è€…åˆ†è´¦ï¼š30 DUST â†’ 15 DUSTç»™Bobï¼Œ15 DUSTç»™Charlie âœ…

**åœºæ™¯3ï¼šå¤šä¸ªé€è€…ï¼Œç›¸åŒæ‹¥æœ‰è€…**
- Grave 3 åŒ…å«ï¼š
  - Deceased Dï¼ˆæ‹¥æœ‰è€…ï¼šDavidï¼‰
  - Deceased Eï¼ˆæ‹¥æœ‰è€…ï¼šDavidï¼‰
- ç”¨æˆ·è´­ä¹°100 DUSTçš„ç¥­ç¥€å“
- æ‹¥æœ‰è€…åˆ†è´¦ï¼š30 DUST â†’ å…¨éƒ¨ç»™Davidï¼ˆå› ä¸ºä¸¤ä¸ªé€è€…éƒ½æ˜¯Davidçš„ï¼‰âœ…

**åœºæ™¯4ï¼šæ··åˆåœºæ™¯**
- Grave 4 åŒ…å«ï¼š
  - Deceased Fï¼ˆæ‹¥æœ‰è€…ï¼šFrankï¼‰
  - Deceased Gï¼ˆæ‹¥æœ‰è€…ï¼šGraceï¼‰
  - Deceased Hï¼ˆæ‹¥æœ‰è€…ï¼šGraceï¼‰
- ç”¨æˆ·è´­ä¹°100 DUSTçš„ç¥­ç¥€å“
- æ‹¥æœ‰è€…åˆ†è´¦ï¼š30 DUST â†’ 15 DUSTç»™Frankï¼Œ15 DUSTç»™Grace âœ…

**å®ç°ç»†èŠ‚**ï¼š

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šDeceasedProvider traitï¼ˆéœ€è¦æ‰©å±•ï¼‰
pub trait DeceasedProvider<AccountId, DeceasedId> {
    /// è·å–graveä¸­çš„æ‰€æœ‰é€è€…ID
    fn get_deceased_by_grave(grave_id: u64) -> Option<Vec<DeceasedId>>;
    
    /// è·å–é€è€…ä¿¡æ¯
    fn get_deceased(deceased_id: DeceasedId) -> Option<Deceased<AccountId>>;
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šæ‰©å±•äº‹ä»¶ç»“æ„
pub enum Event<T: Config> {
    /// æ‹¥æœ‰è€…åˆ†è´¦å·²åˆ†é…
    OwnerShareDistributed {
        grave_id: u64,
        owner: T::AccountId,
        amount: BalanceOf<T>,
        total_amount: BalanceOf<T>,
        /// ğŸ†• æ–°å¢ï¼šå…³è”çš„é€è€…IDåˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
        deceased_ids: Option<Vec<u64>>,
    },
}
```

**è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼š

1. **æ²¡æœ‰é€è€…çš„æƒ…å†µ**ï¼š
   - å¦‚æœgraveä¸­æ²¡æœ‰é€è€…ï¼Œåˆ†è´¦ç»™graveæ‹¥æœ‰è€…ï¼ˆå‘åå…¼å®¹ï¼‰

2. **ç²¾åº¦æŸå¤±å¤„ç†**ï¼š
   - ä½¿ç”¨`saturating_div`å’Œä½™æ•°åˆ†é…
   - ç¬¬ä¸€ä¸ªæ‹¥æœ‰è€…è·å¾—ä½™æ•°ï¼Œé¿å…ç²¾åº¦æŸå¤±

3. **æœ€å°åˆ†è´¦é‡‘é¢**ï¼š
   - å¦‚æœå¹³å‡åˆ†é…åå•ä¸ªæ‹¥æœ‰è€…åˆ†è´¦é‡‘é¢å°äº`MinOwnerShare`ï¼Œåˆ™å…¨éƒ¨è¿›å…¥æ¨èé“¾

4. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨`BTreeMap`ä¿æŒé¡ºåºï¼Œä¾¿äºæµ‹è¯•å’Œè°ƒè¯•
   - æ‰¹é‡æŸ¥è¯¢é€è€…ä¿¡æ¯ï¼Œå‡å°‘å­˜å‚¨è®¿é—®

**é…ç½®å‚æ•°æ‰©å±•**ï¼š

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šå¤šé€è€…åˆ†è´¦ç­–ç•¥
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum MultiDeceasedShareStrategy {
    /// æŒ‰æ‹¥æœ‰è€…åˆå¹¶+å¹³å‡åˆ†é…ï¼ˆæ¨èï¼‰
    ByOwnerAverage,
    /// æŒ‰é€è€…æ•°é‡å¹³å‡åˆ†é…
    ByDeceasedCount,
    /// æŒ‰æƒé‡åˆ†é…ï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰
    ByWeight,
}

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šå¤šé€è€…åˆ†è´¦é…ç½®
#[pallet::storage]
pub type MultiDeceasedShareConfig<T: Config> = StorageValue<
    _,
    MultiDeceasedShareStrategy,
    ValueQuery,
    DefaultMultiDeceasedShareStrategy,
>;

#[pallet::type_value]
pub fn DefaultMultiDeceasedShareStrategy() -> MultiDeceasedShareStrategy {
    MultiDeceasedShareStrategy::ByOwnerAverage
}
```

#### 9.4.4 é…ç½®å‚æ•°

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šæœ€å°æ‹¥æœ‰è€…åˆ†è´¦é‡‘é¢
/// é˜²æ­¢å°é¢è®¢å•åˆ†è´¦æˆæœ¬è¿‡é«˜
#[pallet::constant]
type MinOwnerShare: Get<BalanceOf<Self>>;

/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šDeceasedProvider traitï¼ˆéœ€è¦å®ç°ï¼‰
type DeceasedProvider: DeceasedProvider<Self::AccountId, u64>;

// Runtime é…ç½®ç¤ºä¾‹
impl pallet_memorial::Config for Runtime {
    // ... å…¶ä»–é…ç½®
    type MinOwnerShare = ConstU128<{ 1_000_000_000_000 }>; // 1 DUST
    type DeceasedProvider = pallet_deceased::Pallet<Runtime>;
}
```

### 9.5 ç»¼åˆè¯„ä¼°

#### 9.5.1 å¯è¡Œæ€§æ€»ç»“

| ç»´åº¦ | è¯„åˆ† | ç»“è®º |
|------|------|------|
| **æŠ€æœ¯å¯è¡Œæ€§** | â­â­â­â­â­ | å®Œå…¨å¯è¡Œï¼ŒåŸºäºç°æœ‰åŸºç¡€è®¾æ–½ |
| **ç»æµå¯è¡Œæ€§** | â­â­â­â­âš¬ | åŸºæœ¬å¯è¡Œï¼Œéœ€è¦åˆç†è®¾ç½®åˆ†è´¦æ¯”ä¾‹ |
| **ä¸šåŠ¡åˆç†æ€§** | â­â­â­â­â­ | éå¸¸åˆç†ï¼Œç¬¦åˆä¸šåŠ¡é€»è¾‘ |
| **å®æ–½éš¾åº¦** | â­â­â­â­â­ | ä½éš¾åº¦ï¼Œ1-2å‘¨å¼€å‘ |

**ç»¼åˆè¯„ä¼°**ï¼š
- âœ… **æŠ€æœ¯å¯è¡Œ**ï¼šå®Œå…¨å¯è¡Œï¼ŒåŸºäºç°æœ‰ç³»ç»Ÿæ‰©å±•
- âœ… **ç»æµåˆç†**ï¼šéœ€è¦åˆç†è®¾ç½®åˆ†è´¦æ¯”ä¾‹ï¼ˆæ‹¥æœ‰è€…30-40%ï¼‰
- âœ… **ä¸šåŠ¡åˆç†**ï¼šç¬¦åˆ"è°è´¡çŒ®è°æ”¶ç›Š"çš„åŸåˆ™
- âœ… **å®æ–½ç®€å•**ï¼šä½éš¾åº¦ï¼Œ1-2å‘¨å¼€å‘

#### 9.5.2 æ¨èæ–¹æ¡ˆ

**æ¨èé‡‡ç”¨**ï¼š**åˆ†å±‚åˆ†è´¦æœºåˆ¶**

1. **åˆ†è´¦æ¯”ä¾‹**ï¼ˆåˆå§‹è®¾ç½®ï¼‰ï¼š
   - æ‹¥æœ‰è€…ï¼š30%
   - æ¨èé“¾ï¼š65%
   - å¹³å°ï¼š5%

2. **å®æ–½æ­¥éª¤**ï¼š
   - **é˜¶æ®µ1**ï¼ˆ1-2å‘¨ï¼‰ï¼šå¼€å‘åˆ†è´¦é€»è¾‘ï¼Œæ·»åŠ æ‹¥æœ‰è€…åˆ†è´¦
   - **é˜¶æ®µ2**ï¼ˆ1å‘¨ï¼‰ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼Œç¡®ä¿åˆ†è´¦æ­£ç¡®
   - **é˜¶æ®µ3**ï¼ˆ1å‘¨ï¼‰ï¼šä¸Šçº¿å°èŒƒå›´è¯•ç‚¹ï¼Œæ”¶é›†æ•°æ®
   - **é˜¶æ®µ4**ï¼ˆæŒç»­ï¼‰ï¼šæ ¹æ®æ•°æ®è°ƒæ•´åˆ†è´¦æ¯”ä¾‹

3. **é£é™©æ§åˆ¶**ï¼š
   - âœ… è®¾ç½®åˆ†è´¦æ¯”ä¾‹ä¸Šä¸‹é™
   - âœ… ç›‘æ§å¼‚å¸¸ä¾›å¥‰è¡Œä¸º
   - âœ… æ”¯æŒæ²»ç†æŠ•ç¥¨è°ƒæ•´åˆ†è´¦æ¯”ä¾‹

### 9.6 å®æ–½å»ºè®®

1. **çŸ­æœŸå»ºè®®**ï¼ˆ1-3ä¸ªæœˆï¼‰ï¼š
   - âœ… å®æ–½æ‹¥æœ‰è€…åˆ†è´¦æœºåˆ¶ï¼ˆ30%ï¼‰
   - âœ… ç›‘æ§åˆ†è´¦æ•°æ®å’Œç”¨æˆ·åé¦ˆ
   - âœ… ä¼˜åŒ–åˆ†è´¦é€»è¾‘å’Œæ€§èƒ½

2. **ä¸­æœŸå»ºè®®**ï¼ˆ3-6ä¸ªæœˆï¼‰ï¼š
   - âœ… æ ¹æ®æ•°æ®è°ƒæ•´åˆ†è´¦æ¯”ä¾‹
   - âœ… å»ºç«‹æ‹¥æœ‰è€…æ”¶ç›Šç»Ÿè®¡å’Œå±•ç¤º
   - âœ… ä¼˜åŒ–æ‹¥æœ‰è€…æ¿€åŠ±æœºåˆ¶

3. **é•¿æœŸå»ºè®®**ï¼ˆ6-12ä¸ªæœˆï¼‰ï¼š
   - âœ… æ¢ç´¢åŠ¨æ€åˆ†è´¦æœºåˆ¶ï¼ˆæ ¹æ®çºªå¿µé¦†è´¨é‡è°ƒæ•´ï¼‰
   - âœ… å»ºç«‹æ‹¥æœ‰è€…ç­‰çº§ä½“ç³»ï¼ˆæ ¹æ®æ”¶ç›Šå’Œè´¨é‡ï¼‰
   - âœ… æ¢ç´¢å…¶ä»–æ”¶ç›Šæ¥æºï¼ˆå¦‚å¹¿å‘Šã€ä¼šå‘˜ç­‰ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.2
**æœ€åæ›´æ–°**: 2025-01-15
**ä½œè€…**: Stardust å¼€å‘å›¢é˜Ÿ
**çŠ¶æ€**: å¾…å®¡æ ¸å®æ–½

**æ›´æ–°æ—¥å¿—**:
- v1.2 (2025-01-15): æ–°å¢å¤šé€è€…åˆ†è´¦æ–¹æ¡ˆè®¾è®¡
  - æ–°å¢å¤šé€è€…åˆ†è´¦é—®é¢˜åœºæ™¯åˆ†æ
  - æ–°å¢4ç§åˆ†è´¦æ–¹æ¡ˆå¯¹æ¯”ï¼ˆå¹³å‡åˆ†é…ã€æŒ‰æ‹¥æœ‰è€…åˆå¹¶ã€æŒ‰æƒé‡ã€ç”¨æˆ·æŒ‡å®šï¼‰
  - æ¨èæ–¹æ¡ˆï¼šæŒ‰æ‹¥æœ‰è€…åˆå¹¶+å¹³å‡åˆ†é…
  - æ–°å¢4ä¸ªå…¸å‹åœºæ™¯ç¤ºä¾‹ï¼ˆå•ä¸ªé€è€…ã€å¤šä¸ªä¸åŒæ‹¥æœ‰è€…ã€å¤šä¸ªç›¸åŒæ‹¥æœ‰è€…ã€æ··åˆåœºæ™¯ï¼‰
  - æ–°å¢å®ç°ç»†èŠ‚å’Œè¾¹ç•Œæƒ…å†µå¤„ç†
  - ä¿®å¤åˆ†è´¦é€»è¾‘ä»£ç ï¼Œæ”¯æŒå¤šé€è€…åœºæ™¯
- v1.1 (2025-01-15): æ–°å¢é€è€…æ‹¥æœ‰è€…ä¾›å¥‰åˆ†è´¦æœºåˆ¶åˆ†æ
  - æ–°å¢å¯è¡Œæ€§åˆ†æï¼ˆæŠ€æœ¯ã€ç»æµï¼‰
  - æ–°å¢åˆç†æ€§åˆ†æï¼ˆä¸šåŠ¡ã€åˆ†è´¦æ¯”ä¾‹ï¼‰
  - æ–°å¢å®æ–½æ–¹æ¡ˆè®¾è®¡ï¼ˆæ•°æ®ç»“æ„ã€æ¥å£ã€é…ç½®ï¼‰
  - æ–°å¢ç»¼åˆè¯„ä¼°å’Œå®æ–½å»ºè®®

**ç›¸å…³æ–‡æ¡£**:
- [é€è€…ä¿¡æ¯å…¬ä¼—æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ](./é€è€…ä¿¡æ¯å…¬ä¼—æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ.md)
- [é€è€…å†…å®¹å…¬ä¼—æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ](./é€è€…å†…å®¹å…¬ä¼—æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ.md)
- [pallet-stardust-appeals README](../pallets/stardust-appeals/README.md)