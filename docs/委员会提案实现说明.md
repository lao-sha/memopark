# å§”å‘˜ä¼šææ¡ˆæµç¨‹ - å®ç°è¯´æ˜

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å§”å‘˜ä¼šææ¡ˆæµç¨‹çš„æŠ€æœ¯å®ç°ã€é¡µé¢ç»„ä»¶ã€ä½¿ç”¨æ–¹æ³•å’Œä»£ç ä½ç½®ã€‚

## éœ€æ±‚èƒŒæ™¯

**é—®é¢˜**ï¼šå§”å‘˜ä¼šæˆå‘˜æ²¡æœ‰æƒé™ç›´æ¥æ‰¹å‡†/é©³å›åšå¸‚å•†ç”³è¯·  
**åŸå› **ï¼š`marketMaker.approve` å’Œ `marketMaker.reject` éœ€è¦ `GovernanceOrigin` æƒé™ï¼ˆRoot æˆ– å§”å‘˜ä¼š 2/3 å¤šæ•°ï¼‰  
**è§£å†³æ–¹æ¡ˆ**ï¼šå®ç°å§”å‘˜ä¼šææ¡ˆæµç¨‹ï¼Œé€šè¿‡é›†ä½“æŠ•ç¥¨å®Œæˆæ‰¹å‡†/é©³å›æ“ä½œ

## å®ç°æ–¹æ¡ˆ

### 1. é“¾ç«¯é…ç½®

**æ–‡ä»¶**: `pallets/market-maker/src/lib.rs`

```rust
// GovernanceOrigin ç±»å‹ï¼Œç”¨äºæ‰¹å‡†/é©³å›
type GovernanceOrigin: EnsureOrigin<Self::RuntimeOrigin>;

// approve å’Œ reject ä½¿ç”¨ GovernanceOrigin
pub fn approve(origin: OriginFor<T>, mm_id: u64) -> DispatchResult {
    T::GovernanceOrigin::ensure_origin(origin)?;
    // ...
}

pub fn reject(origin: OriginFor<T>, mm_id: u64, slash_bps: u16) -> DispatchResult {
    T::GovernanceOrigin::ensure_origin(origin)?;
    // ...
}
```

**Runtime é…ç½®**: `runtime/src/configs/mod.rs`

```rust
impl pallet_market_maker::Config for Runtime {
    // ...
    type GovernanceOrigin = EitherOfDiverse<
        EnsureRoot<AccountId>,
        pallet_collective::EnsureProportionAtLeast<AccountId, CouncilCollective, 2, 3>
    >;
}
```

**è¯´æ˜**ï¼š
- `EnsureRoot`: Sudo è´¦æˆ·å¯ç›´æ¥æ‰¹å‡†ï¼ˆç´§æ€¥é€šé“ï¼‰
- `EnsureProportionAtLeast<2, 3>`: å§”å‘˜ä¼š 2/3 å¤šæ•°é€šè¿‡ï¼ˆæ¨èæ–¹å¼ï¼‰

### 2. å‰ç«¯å®ç°

#### é¡µé¢ç»“æ„

```
memopark-dapp/src/features/
â”œâ”€â”€ governance/
â”‚   â”œâ”€â”€ CouncilProposalPage.tsx          # ä¸»é¡µé¢
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ CreateProposalForm.tsx       # æäº¤ææ¡ˆè¡¨å•
â”‚       â”œâ”€â”€ ProposalList.tsx             # ææ¡ˆåˆ—è¡¨ï¼ˆæŠ•ç¥¨+æ‰§è¡Œï¼‰
â”‚       â””â”€â”€ MyVotes.tsx                  # æˆ‘çš„æŠ•ç¥¨è®°å½•
â””â”€â”€ otc/
    â””â”€â”€ GovMarketMakerReviewPage.tsx     # åšå¸‚å•†å®¡æ ¸é¡µé¢
```

#### ä¸»é¡µé¢ï¼šCouncilProposalPage.tsx

**è·¯å¾„**: `#/gov/council-proposals`

**åŠŸèƒ½**ï¼š
- ä¸‰ä¸ªæ ‡ç­¾é¡µï¼šææ¡ˆåˆ—è¡¨ã€æäº¤ææ¡ˆã€æˆ‘çš„æŠ•ç¥¨
- ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡ï¼ˆæœ€å¤§å®½åº¦ 640pxï¼‰
- ç»„ä»¶åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•

**ä»£ç ä½ç½®**: `memopark-dapp/src/features/governance/CouncilProposalPage.tsx`

```typescript
export default function CouncilProposalPage() {
  const [activeTab, setActiveTab] = React.useState<string>('list')
  
  const items = [
    { key: 'list', label: 'ææ¡ˆåˆ—è¡¨', children: <ProposalList /> },
    { key: 'create', label: 'æäº¤ææ¡ˆ', children: <CreateProposalForm /> },
    { key: 'votes', label: 'æˆ‘çš„æŠ•ç¥¨', children: <MyVotes /> }
  ]
  
  return <Tabs activeKey={activeTab} onChange={setActiveTab} items={items} />
}
```

#### ç»„ä»¶ 1ï¼šCreateProposalForm.tsx

**åŠŸèƒ½**ï¼š
- è‡ªåŠ¨åŠ è½½å¾…å®¡æ ¸ç”³è¯·åˆ—è¡¨ï¼ˆ`PendingReview` çŠ¶æ€ï¼‰
- æ”¯æŒæ‰¹å‡†å’Œé©³å›ä¸¤ç§ææ¡ˆç±»å‹
- è‡ªåŠ¨è®¡ç®—ææ¡ˆå‚æ•°ï¼ˆthreshold, lengthï¼‰
- æäº¤åæ˜¾ç¤ºææ¡ˆå“ˆå¸Œ

**æ ¸å¿ƒä»£ç **ï¼š
```typescript
const handleSubmit = async (values: any) => {
  const api = await getApi()
  const { mmId, slashBps, threshold } = values
  
  // æ„é€ å†…éƒ¨è°ƒç”¨
  let innerCall
  if (proposalType === 'approve') {
    innerCall = api.tx.marketMaker.approve(mmId)
  } else {
    innerCall = api.tx.marketMaker.reject(mmId, slashBps || 0)
  }
  
  // æäº¤ææ¡ˆ
  await signAndSendLocalFromKeystore(
    'council',
    'propose',
    [threshold, innerCall, innerCall.length]
  )
  
  // æ˜¾ç¤ºææ¡ˆå“ˆå¸Œ
  const proposalHash = innerCall.method.hash.toHex()
  Modal.info({ content: proposalHash })
}
```

**è¯´æ˜**ï¼š
- `council.propose(threshold, call, length)` åˆ›å»ºææ¡ˆ
- `innerCall` æ˜¯å®é™…è¦æ‰§è¡Œçš„è°ƒç”¨ï¼ˆapprove æˆ– rejectï¼‰
- `proposalHash` ç”¨äºåç»­æŠ•ç¥¨å’Œæ‰§è¡Œ

#### ç»„ä»¶ 2ï¼šProposalList.tsx

**åŠŸèƒ½**ï¼š
- æŸ¥è¯¢æ‰€æœ‰æ´»è·ƒææ¡ˆï¼ˆ`council.proposals()`ï¼‰
- æ˜¾ç¤ºæŠ•ç¥¨è¿›åº¦ï¼ˆèµæˆ/åå¯¹/é˜ˆå€¼ï¼‰
- æ”¯æŒæŠ•ç¥¨æ“ä½œï¼ˆèµæˆ/åå¯¹ï¼‰
- æ”¯æŒæ‰§è¡Œå·²è¾¾é˜ˆå€¼çš„ææ¡ˆ
- æ˜¾ç¤ºå½“å‰ç”¨æˆ·æŠ•ç¥¨çŠ¶æ€

**æ ¸å¿ƒä»£ç **ï¼š
```typescript
// åŠ è½½ææ¡ˆåˆ—è¡¨
const loadProposals = async () => {
  const proposalHashes = await api.query.council.proposals()
  
  for (const hash of proposalHashes) {
    const voting = await api.query.council.voting(hash)
    const proposal = await api.query.council.proposalOf(hash)
    
    proposalList.push({
      hash: hash.toHex(),
      threshold: voting.threshold,
      ayes: voting.ayes,
      nays: voting.nays,
      call: {
        section: proposal.section,
        method: proposal.method,
        args: proposal.args
      }
    })
  }
}

// æŠ•ç¥¨
const handleVote = async (proposal, approve) => {
  await signAndSendLocalFromKeystore(
    'council',
    'vote',
    [proposal.hash, proposal.index, approve]
  )
}

// æ‰§è¡Œææ¡ˆ
const handleExecute = async (proposal) => {
  await signAndSendLocalFromKeystore(
    'council',
    'close',
    [proposal.hash, proposal.index, weightBound, lengthBound]
  )
}
```

**UI ç‰¹æ€§**ï¼š
- è¿›åº¦æ¡æ˜¾ç¤ºæŠ•ç¥¨è¿›åº¦
- å·²è¾¾é˜ˆå€¼æ˜¾ç¤º"å¯æ‰§è¡Œ"æ ‡ç­¾
- å½“å‰ç”¨æˆ·å·²æŠ•ç¥¨æ˜¾ç¤º"å·²æŠ•èµæˆ/åå¯¹"æ ‡ç­¾
- æ”¯æŒæŸ¥çœ‹ææ¡ˆè¯¦æƒ…ï¼ˆå¼¹çª—ï¼‰

#### ç»„ä»¶ 3ï¼šMyVotes.tsx

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€æœ‰æŠ•ç¥¨è®°å½•
- ç»Ÿè®¡èµæˆ/åå¯¹ç¥¨æ•°
- æ˜¾ç¤ºæ¯ä¸ªææ¡ˆçš„å½“å‰çŠ¶æ€

**æ ¸å¿ƒä»£ç **ï¼š
```typescript
const loadMyVotes = async () => {
  const api = await getApi()
  const currentUser = getCurrentAddress()
  const proposalHashes = await api.query.council.proposals()
  
  const votes = []
  for (const hash of proposalHashes) {
    const voting = await api.query.council.voting(hash)
    
    const votedAye = voting.ayes.includes(currentUser)
    const votedNay = voting.nays.includes(currentUser)
    
    if (votedAye || votedNay) {
      votes.push({ votedAye, votedNay, ... })
    }
  }
  
  setMyVotes(votes)
}
```

#### åšå¸‚å•†å®¡æ ¸é¡µé¢ï¼šGovMarketMakerReviewPage.tsx

**è·¯å¾„**: `#/gov/mm-review`

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºå¾…å®¡æ ¸ç”³è¯·åˆ—è¡¨
- æ˜¾ç¤ºå·²æ‰¹å‡†åšå¸‚å•†åˆ—è¡¨
- é“¾æ¥åˆ°å§”å‘˜ä¼šææ¡ˆç®¡ç†é¡µé¢
- æç¤ºæ²»ç†æµç¨‹

**å…³é”®æ”¹è¿›**ï¼š
```typescript
<Alert 
  type="info" 
  message="æ²»ç†è¯´æ˜" 
  description={
    <div>
      <p>æ‰¹å‡†/é©³å›éœ€è¦é€šè¿‡<strong>å§”å‘˜ä¼š 2/3 å¤šæ•°æŠ•ç¥¨</strong>æˆ– <strong>Root ç›´æ¥è°ƒç”¨</strong>ã€‚</p>
      <p>
        å§”å‘˜ä¼šæˆå‘˜è¯·ä½¿ç”¨ 
        <a href="#/gov/council-proposals">å§”å‘˜ä¼šææ¡ˆç®¡ç†</a> 
        æäº¤ææ¡ˆå’ŒæŠ•ç¥¨ã€‚
      </p>
    </div>
  }
/>
```

## ä½¿ç”¨æµç¨‹

### æµç¨‹å›¾

```
ç”³è¯·äºº                å§”å‘˜ä¼š                   é“¾ä¸Š
  |                      |                       |
  |--lock_deposit------->|                       |
  |                      |                       |
  |--submit_info-------->|                       |
  |                      |                       |
  |                      |--1.æäº¤ææ¡ˆ---------->|
  |                      |   (propose)           |
  |                      |                       |
  |                      |<-----ææ¡ˆå“ˆå¸Œ---------|
  |                      |                       |
  |                      |--2.æˆå‘˜æŠ•ç¥¨---------->|
  |                      |   (vote)              |
  |                      |                       |
  |                      |--3.æ‰§è¡Œææ¡ˆ---------->|
  |                      |   (close)             |
  |                      |                       |
  |                      |                       |--approve/reject-->
  |                      |                       |
  |<-----çŠ¶æ€æ›´æ–°--------|<----------------------|
  |    (Active/Rejected) |                       |
```

### è¯¦ç»†æ­¥éª¤

#### 1. æäº¤ææ¡ˆ

**æ“ä½œè€…**ï¼šä»»ä¸€å§”å‘˜ä¼šæˆå‘˜

**æ­¥éª¤**ï¼š
1. è®¿é—® `#/gov/council-proposals`
2. åˆ‡æ¢åˆ°"æäº¤ææ¡ˆ"æ ‡ç­¾
3. é€‰æ‹©ææ¡ˆç±»å‹ï¼ˆæ‰¹å‡†/é©³å›ï¼‰
4. é€‰æ‹©ç”³è¯·ç¼–å·
5. è®¾ç½®æŠ•ç¥¨é˜ˆå€¼ï¼ˆæ¨èï¼š2ï¼‰
6. æäº¤å¹¶è·å–ææ¡ˆå“ˆå¸Œ

**é“¾ä¸Šè°ƒç”¨**ï¼š
```rust
council.propose(
    threshold: 2,                      // æŠ•ç¥¨é˜ˆå€¼
    proposal: marketMaker.approve(5),  // å†…éƒ¨è°ƒç”¨
    length: 47                         // è°ƒç”¨é•¿åº¦ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
)
```

**ç»“æœ**ï¼š
- ææ¡ˆè¿›å…¥æ´»è·ƒåˆ—è¡¨
- ææ¡ˆç´¢å¼•ï¼ˆindexï¼‰è‡ªåŠ¨é€’å¢
- ææ¡ˆå“ˆå¸Œå¯ç”¨äºæŠ•ç¥¨

#### 2. æˆå‘˜æŠ•ç¥¨

**æ“ä½œè€…**ï¼šå…¶ä»–å§”å‘˜ä¼šæˆå‘˜

**æ­¥éª¤**ï¼š
1. è®¿é—® `#/gov/council-proposals`
2. åœ¨"ææ¡ˆåˆ—è¡¨"æ‰¾åˆ°ææ¡ˆ
3. æŸ¥çœ‹ææ¡ˆè¯¦æƒ…ï¼ˆè°ƒç”¨å†…å®¹ã€è¿›åº¦ï¼‰
4. ç‚¹å‡»"èµæˆ"æˆ–"åå¯¹"
5. ç¡®è®¤æŠ•ç¥¨

**é“¾ä¸Šè°ƒç”¨**ï¼š
```rust
council.vote(
    proposal_hash: 0xabcd..., // ææ¡ˆå“ˆå¸Œ
    index: 0,                 // ææ¡ˆç´¢å¼•
    approve: true             // true=èµæˆ, false=åå¯¹
)
```

**ç»“æœ**ï¼š
- æŠ•ç¥¨è®°å½•æ›´æ–°
- è¿›åº¦æ¡æ›´æ–°ï¼ˆ1/2 â†’ 2/2ï¼‰
- è¾¾åˆ°é˜ˆå€¼åæ˜¾ç¤º"å¯æ‰§è¡Œ"æ ‡ç­¾

#### 3. æ‰§è¡Œææ¡ˆ

**æ“ä½œè€…**ï¼šä»»ä½•äººï¼ˆææ¡ˆå·²è¾¾é˜ˆå€¼ï¼‰

**æ­¥éª¤**ï¼š
1. è®¿é—® `#/gov/council-proposals`
2. æ‰¾åˆ°å·²è¾¾é˜ˆå€¼çš„ææ¡ˆï¼ˆæ˜¾ç¤º"å¯æ‰§è¡Œ"ï¼‰
3. ç‚¹å‡»"æ‰§è¡Œææ¡ˆ"
4. ç¡®è®¤æ‰§è¡Œ

**é“¾ä¸Šè°ƒç”¨**ï¼š
```rust
council.close(
    proposal_hash: 0xabcd...,
    index: 0,
    proposal_weight_bound: { refTime: 1_000_000_000, proofSize: 1000 },
    length_bound: 1000
)
```

**é“¾ä¸Šè‡ªåŠ¨æ‰§è¡Œ**ï¼š
```rust
// council.close å†…éƒ¨ä¼šï¼š
// 1. æ£€æŸ¥æŠ•ç¥¨æ˜¯å¦è¾¾åˆ°é˜ˆå€¼
// 2. å¦‚æœè¾¾åˆ°ï¼Œè°ƒç”¨ marketMaker.approve(5)
// 3. æ›´æ–°ç”³è¯·çŠ¶æ€ä¸º Active
// 4. å‘å‡º Approved äº‹ä»¶
```

**ç»“æœ**ï¼š
- åšå¸‚å•†ç”³è¯·çŠ¶æ€å˜ä¸º `Active` æˆ– `Rejected`
- ææ¡ˆä»æ´»è·ƒåˆ—è¡¨ç§»é™¤
- å¯åœ¨ `#/gov/mm-review` æŸ¥çœ‹ç»“æœ

## æŠ€æœ¯ç‰¹æ€§

### 1. å…¨å±€é“¾ä¸Šç›´è¿

**ç‰¹ç‚¹**ï¼š
- ä¸ä¾èµ– Subsquid ç´¢å¼•å™¨
- ç›´æ¥ä»é“¾ä¸ŠæŸ¥è¯¢æ•°æ®
- å®æ—¶è·å–æœ€æ–°çŠ¶æ€

**æ•°æ®æŸ¥è¯¢**ï¼š
```typescript
// æŸ¥è¯¢ææ¡ˆåˆ—è¡¨
const proposalHashes = await api.query.council.proposals()

// æŸ¥è¯¢æŠ•ç¥¨è¯¦æƒ…
const voting = await api.query.council.voting(hash)

// æŸ¥è¯¢ææ¡ˆå†…å®¹
const proposal = await api.query.council.proposalOf(hash)

// æŸ¥è¯¢å¾…å®¡ç”³è¯·
for (let id = 0; id < maxId; id++) {
  const app = await api.query.marketMaker.applications(id)
  if (app.status === 'PendingReview') {
    pendingList.push(app)
  }
}
```

### 2. æœ¬åœ°é’±åŒ…ç­¾å

**ç‰¹ç‚¹**ï¼š
- ä¸ä½¿ç”¨æµè§ˆå™¨æ‰©å±•ï¼ˆPolkadot.js æ‰©å±•ï¼‰
- ä½¿ç”¨ Keystore æœ¬åœ°é’±åŒ…
- æ”¯æŒå¯†ç åŠ å¯†

**ç­¾åå‡½æ•°**ï¼š
```typescript
import { signAndSendLocalFromKeystore } from '../../lib/polkadot-safe'

// ä½¿ç”¨ Keystore é’±åŒ…ç­¾å
await signAndSendLocalFromKeystore(
  'council',    // pallet åç§°
  'propose',    // æ–¹æ³•åç§°
  [threshold, innerCall, length]  // å‚æ•°
)
```

### 3. ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡

**å¸ƒå±€**ï¼š
- æœ€å¤§å®½åº¦ï¼š640px
- è‡ªåŠ¨å±…ä¸­
- å“åº”å¼å¡ç‰‡å¸ƒå±€

**ç»„ä»¶**ï¼š
- Ant Design 5
- Typography, Card, List, Button, Space
- æŒ‰é’®ä½¿ç”¨ `block` å¸ƒå±€

**ç¤ºä¾‹**ï¼š
```typescript
<div style={{ maxWidth: 640, margin: '0 auto', padding: '16px' }}>
  <Card>
    <Typography.Title level={4}>å§”å‘˜ä¼šææ¡ˆç®¡ç†</Typography.Title>
    <Tabs items={items} />
  </Card>
</div>
```

### 4. ç»„ä»¶åŒ–è®¾è®¡

**ä¼˜ç‚¹**ï¼š
- èŒè´£åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤
- å¯å¤ç”¨ç»„ä»¶
- ç‹¬ç«‹æµ‹è¯•

**ç»„ä»¶èŒè´£**ï¼š
- `CouncilProposalPage`: é¡µé¢å®¹å™¨ï¼Œç®¡ç†æ ‡ç­¾åˆ‡æ¢
- `CreateProposalForm`: ææ¡ˆåˆ›å»ºé€»è¾‘
- `ProposalList`: ææ¡ˆå±•ç¤ºå’Œæ“ä½œ
- `MyVotes`: ä¸ªäººæŠ•ç¥¨è®°å½•

### 5. é”™è¯¯å¤„ç†

**ç”¨æˆ·å‹å¥½æç¤º**ï¼š
```typescript
try {
  await signAndSendLocalFromKeystore(...)
  message.success('æ“ä½œæˆåŠŸï¼')
} catch (e: any) {
  message.error('æ“ä½œå¤±è´¥ï¼š' + (e?.message || ''))
}
```

**æƒé™æ£€æŸ¥**ï¼š
```typescript
// å‰ç«¯æç¤º
<Alert 
  type="warning" 
  message="ä»…é™å§”å‘˜ä¼šæˆå‘˜"
  description="æäº¤ææ¡ˆéœ€è¦æ‚¨æ˜¯å§”å‘˜ä¼šæˆå‘˜ã€‚éå§”å‘˜ä¼šæˆå‘˜æäº¤ä¼šå¤±è´¥ï¼ˆBadOriginï¼‰ã€‚"
/>

// é“¾ç«¯æ£€æŸ¥
T::GovernanceOrigin::ensure_origin(origin)?
```

## è·¯ç”±é…ç½®

**æ–‡ä»¶**: `memopark-dapp/src/App.tsx`

```typescript
import CouncilProposalPage from './features/governance/CouncilProposalPage'
import GovMarketMakerReviewPage from './features/otc/GovMarketMakerReviewPage'

const App = () => {
  const hash = window.location.hash
  
  return (
    <>
      {hash === '#/gov/council-proposals' ? <CouncilProposalPage />
      : hash === '#/gov/mm-review' ? <GovMarketMakerReviewPage />
      : <AuthEntryPage />}
    </>
  )
}
```

## å¯¼èˆªå…¥å£

### 1. ä¸ªäººèµ„æ–™é¡µ

**æ–‡ä»¶**: `memopark-dapp/src/features/profile/ProfilePage.tsx`

```typescript
<Card size="small" title="åšå¸‚å•†ä¸OTCäº¤æ˜“">
  <Space direction="vertical" style={{ width: '100%' }}>
    <Button onClick={() => { window.location.hash = '#/otc/mm-apply' }}>
      ç”³è¯·åšå¸‚å•†
    </Button>
    <Button onClick={() => { window.location.hash = '#/gov/mm-review' }}>
      å®¡æ ¸åšå¸‚å•†
    </Button>
    <Button onClick={() => { window.location.hash = '#/gov/council-proposals' }}>
      å§”å‘˜ä¼šææ¡ˆ
    </Button>
  </Space>
</Card>
```

### 2. åšå¸‚å•†å®¡æ ¸é¡µ

**æ–‡ä»¶**: `memopark-dapp/src/features/otc/GovMarketMakerReviewPage.tsx`

```typescript
<Alert 
  description={
    <p>
      å§”å‘˜ä¼šæˆå‘˜è¯·ä½¿ç”¨ 
      <a href="#/gov/council-proposals">å§”å‘˜ä¼šææ¡ˆç®¡ç†</a> 
      æäº¤ææ¡ˆå’ŒæŠ•ç¥¨ã€‚
    </p>
  }
/>
```

## é…ç½®å§”å‘˜ä¼šæˆå‘˜

### ä½¿ç”¨ Sudo è®¾ç½®æˆå‘˜

```typescript
const api = await getApi()

// è®¾ç½®å§”å‘˜ä¼šæˆå‘˜
await api.tx.sudo.sudo(
  api.tx.council.setMembers(
    [
      'member1_address',
      'member2_address',
      'member3_address'
    ],
    null,  // prime member (å¯é€‰)
    0      // old count
  )
).signAndSend(sudoAccount)
```

### æŸ¥è¯¢å½“å‰æˆå‘˜

```typescript
const members = await api.query.council.members()
console.log('å§”å‘˜ä¼šæˆå‘˜:', members.toJSON())
```

## æµ‹è¯•æµç¨‹

### 1. å‡†å¤‡å·¥ä½œ

```bash
# å¯åŠ¨é“¾èŠ‚ç‚¹
./start-node.sh

# å¯åŠ¨å‰ç«¯
cd memopark-dapp
npm run dev
```

### 2. é…ç½®å§”å‘˜ä¼š

```typescript
// ä½¿ç”¨ Sudo è´¦æˆ·è®¾ç½® 3 ä¸ªå§”å‘˜ä¼šæˆå‘˜
// Alice, Bob, Charlie
```

### 3. åˆ›å»ºæµ‹è¯•ç”³è¯·

```typescript
// ä½¿ç”¨ä»»æ„è´¦æˆ·ç”³è¯·åšå¸‚å•†
#/otc/mm-apply
â†’ è´¨æŠ¼æŠ¼é‡‘
â†’ æäº¤èµ„æ–™
â†’ ç”³è¯·è¿›å…¥ PendingReview çŠ¶æ€
```

### 4. æµ‹è¯•ææ¡ˆæµç¨‹

```typescript
// Alice æäº¤ææ¡ˆ
#/gov/council-proposals â†’ æäº¤ææ¡ˆ
â†’ æ‰¹å‡†åšå¸‚å•† #0
â†’ é˜ˆå€¼: 2

// Bob æŠ•èµæˆç¥¨
#/gov/council-proposals â†’ ææ¡ˆåˆ—è¡¨
â†’ ææ¡ˆ #0 â†’ èµæˆ

// Charlie æŠ•èµæˆç¥¨
#/gov/council-proposals â†’ ææ¡ˆåˆ—è¡¨
â†’ ææ¡ˆ #0 â†’ èµæˆ

// ä»»ä½•äººæ‰§è¡Œ
#/gov/council-proposals â†’ ææ¡ˆåˆ—è¡¨
â†’ ææ¡ˆ #0 â†’ æ‰§è¡Œææ¡ˆ

// éªŒè¯ç»“æœ
#/gov/mm-review â†’ å·²å®¡æ ¸
â†’ åšå¸‚å•† #0 çŠ¶æ€ä¸º Active
```

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. BadOrigin é”™è¯¯

**åŸå› **ï¼šå½“å‰è´¦æˆ·ä¸æ˜¯å§”å‘˜ä¼šæˆå‘˜

**æ’æŸ¥**ï¼š
```typescript
const members = await api.query.council.members()
const currentUser = getCurrentAddress()
console.log('å§”å‘˜ä¼šæˆå‘˜:', members.toJSON())
console.log('å½“å‰ç”¨æˆ·:', currentUser)
console.log('æ˜¯å¦æ˜¯æˆå‘˜:', members.includes(currentUser))
```

**è§£å†³**ï¼šä½¿ç”¨ Sudo è´¦æˆ·æ·»åŠ ç”¨æˆ·åˆ°å§”å‘˜ä¼š

### 2. ææ¡ˆåˆ—è¡¨ä¸ºç©º

**åŸå› **ï¼šæ²¡æœ‰æ´»è·ƒææ¡ˆ

**æ’æŸ¥**ï¼š
```typescript
const proposals = await api.query.council.proposals()
console.log('ææ¡ˆæ•°é‡:', proposals.length)
```

**è§£å†³**ï¼šæäº¤æ–°ææ¡ˆæˆ–ç­‰å¾…å…¶ä»–æˆå‘˜æäº¤

### 3. æŠ•ç¥¨åæœªæ›´æ–°

**åŸå› **ï¼šäº¤æ˜“éœ€è¦ç­‰å¾…åŒºå—ç¡®è®¤

**è§£å†³**ï¼šç­‰å¾… 6 ç§’åç‚¹å‡»"åˆ·æ–°ææ¡ˆåˆ—è¡¨"

### 4. æ‰§è¡Œææ¡ˆå¤±è´¥

**åŸå› **ï¼š
- æœªè¾¾åˆ°æŠ•ç¥¨é˜ˆå€¼
- weight/length bound ä¸è¶³

**æ’æŸ¥**ï¼š
```typescript
const voting = await api.query.council.voting(hash)
console.log('èµæˆç¥¨:', voting.ayes.length)
console.log('é˜ˆå€¼:', voting.threshold)
console.log('æ˜¯å¦è¾¾åˆ°:', voting.ayes.length >= voting.threshold)
```

**è§£å†³**ï¼š
- ç­‰å¾…æ›´å¤šæˆå‘˜æŠ•ç¥¨
- å¢åŠ  weight_bound

## åç»­ä¼˜åŒ–

### 1. é€šçŸ¥ç³»ç»Ÿ
- æ–°ææ¡ˆæé†’
- æŠ•ç¥¨è¾¾åˆ°é˜ˆå€¼æé†’
- ææ¡ˆæ‰§è¡Œç»“æœé€šçŸ¥

### 2. æ‰¹é‡æ“ä½œ
- æ‰¹é‡æ‰¹å‡†å¤šä¸ªç”³è¯·
- ä¸€æ¬¡æ€§å¯¹å¤šä¸ªææ¡ˆæŠ•ç¥¨

### 3. å†å²è®°å½•
- å·²æ‰§è¡Œææ¡ˆåˆ—è¡¨
- å§”å‘˜ä¼šæŠ•ç¥¨ç»Ÿè®¡
- åšå¸‚å•†å®¡æ‰¹å†å²

### 4. é›†æˆ Subsquid
- ç´¢å¼•ææ¡ˆæ•°æ®
- é«˜çº§æœç´¢å’Œç­›é€‰
- å®æ—¶äº‹ä»¶æ¨é€

## æ–‡ä»¶æ¸…å•

### å‰ç«¯æ–‡ä»¶

```
memopark-dapp/src/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ governance/
â”‚   â”‚   â”œâ”€â”€ CouncilProposalPage.tsx           # ä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ CreateProposalForm.tsx        # æäº¤ææ¡ˆ
â”‚   â”‚       â”œâ”€â”€ ProposalList.tsx              # ææ¡ˆåˆ—è¡¨
â”‚   â”‚       â””â”€â”€ MyVotes.tsx                   # æˆ‘çš„æŠ•ç¥¨
â”‚   â””â”€â”€ otc/
â”‚       â””â”€â”€ GovMarketMakerReviewPage.tsx      # åšå¸‚å•†å®¡æ ¸
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ polkadot.ts                           # API åˆå§‹åŒ–
â”‚   â”œâ”€â”€ polkadot-safe.ts                      # ç­¾åå‡½æ•°
â”‚   â””â”€â”€ keystore.ts                           # Keystore ç®¡ç†
â””â”€â”€ App.tsx                                   # è·¯ç”±é…ç½®
```

### é“¾ç«¯æ–‡ä»¶

```
pallets/
â”œâ”€â”€ market-maker/
â”‚   â”œâ”€â”€ src/lib.rs                            # Pallet å®ç°
â”‚   â””â”€â”€ README.md                             # æ–‡æ¡£
â”œâ”€â”€ collective/
â”‚   â””â”€â”€ src/lib.rs                            # å§”å‘˜ä¼š Pallet
â””â”€â”€ runtime/
    â””â”€â”€ src/configs/mod.rs                    # Runtime é…ç½®
```

### æ–‡æ¡£æ–‡ä»¶

```
docs/
â”œâ”€â”€ å§”å‘˜ä¼šææ¡ˆä½¿ç”¨æŒ‡å—.md                    # å®Œæ•´ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ å§”å‘˜ä¼šææ¡ˆå¿«é€Ÿå¼€å§‹.md                    # å¿«é€Ÿå¼€å§‹
â””â”€â”€ å§”å‘˜ä¼šææ¡ˆå®ç°è¯´æ˜.md                    # æœ¬æ–‡æ¡£ï¼ˆæŠ€æœ¯å®ç°ï¼‰
```

## æ€»ç»“

âœ… **å·²å®ç°åŠŸèƒ½**ï¼š
- å§”å‘˜ä¼šææ¡ˆç®¡ç†é¡µé¢ï¼ˆæäº¤ã€æŠ•ç¥¨ã€æ‰§è¡Œï¼‰
- åšå¸‚å•†å®¡æ ¸é¡µé¢ï¼ˆå¾…å®¡ã€å·²æ‰¹å‡†åˆ—è¡¨ï¼‰
- æˆ‘çš„æŠ•ç¥¨è®°å½•
- å…¨å±€é“¾ä¸Šç›´è¿
- æœ¬åœ°é’±åŒ…ç­¾å
- ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡
- ç»„ä»¶åŒ–æ¶æ„

âœ… **æŠ€æœ¯ç‰¹æ€§**ï¼š
- React 18 + TypeScript
- Ant Design 5
- Polkadot.js API
- æœ¬åœ° Keystore é’±åŒ…
- æ— æµè§ˆå™¨æ‰©å±•ä¾èµ–

âœ… **æ–‡æ¡£å®Œå–„**ï¼š
- ä½¿ç”¨æŒ‡å—ï¼ˆå®Œæ•´ç‰ˆï¼‰
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- æŠ€æœ¯å®ç°è¯´æ˜

ğŸ“Œ **ä¸‹ä¸€æ­¥**ï¼š
- æµ‹è¯•å®Œæ•´æµç¨‹
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- æ·»åŠ é€šçŸ¥ç³»ç»Ÿ
- ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-02  
**ç‰ˆæœ¬**: v1.0.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

