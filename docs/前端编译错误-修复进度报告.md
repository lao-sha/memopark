# å‰ç«¯ç¼–è¯‘é”™è¯¯ - ä¿®å¤è¿›åº¦æŠ¥å‘Š

## ğŸ“Š å½“å‰çŠ¶æ€

**ç”Ÿæˆæ—¶é—´**ï¼š2025-10-24  
**æ€»é”™è¯¯æ•°**ï¼š197ä¸ª  
**å·²ä¿®å¤**ï¼šå¼•å·åµŒå¥—é—®é¢˜ã€ipfs-http-clientä¾èµ–  

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. å¼•å·åµŒå¥—é—®é¢˜ âœ…
- **GraveDetailPage.tsx (ç¬¬781è¡Œ)**ï¼šå­—ç¬¦ä¸²ä¸­çš„åŒå¼•å·å¯¼è‡´è§£æé”™è¯¯
- **deceasedErrorHandler.tsx**ï¼šæ–‡ä»¶æ‰©å±•åé”™è¯¯ï¼ˆ.tsæ”¹ä¸º.tsxï¼‰

### 2. ç¼ºå¤±ä¾èµ–åŒ… âœ…
- `ipfs-http-client` âœ…
- `moment` âœ…
- `react-router-dom` âœ…
- `axios` âœ…
- `ethers` âœ…

### 3. ç±»å‹å¯¼å…¥é—®é¢˜ï¼ˆéƒ¨åˆ†å®Œæˆï¼‰âœ…
- `DeceasedItem` âœ…
- `AutoPinFailedData`, `AutoPinSuccessData` âœ…
- `Session`, `Message`, `MessageContent` âœ…
- `FreeQuotaInfo` âœ…
- `SponsoredStats` âœ…

---

## âš ï¸ å‰©ä½™é”™è¯¯åˆ†ç±»

### ç±»åˆ« 1: æ¨¡å—è·¯å¾„é”™è¯¯ï¼ˆçº¦30ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼š`@/hooks/useApi`ã€`@/hooks/useAccount`ã€`@/services/ipfs` ç­‰æ¨¡å—æ‰¾ä¸åˆ°

**åŸå› **ï¼š
1. `@/` è·¯å¾„åˆ«åå¯èƒ½æœªé…ç½®
2. è¿™äº›æ¨¡å—å¯èƒ½ä¸å­˜åœ¨æˆ–è·¯å¾„é”™è¯¯

**å—å½±å“æ–‡ä»¶**ï¼š
- `src/components/Dispute/SubmitChatEvidence.tsx`
- `src/components/Governance/ViewEncryptedEvidence.tsx`
- `src/examples/MultiRecipientEncryptionExample.tsx`
- ç­‰ç­‰

**å»ºè®®ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// æ–¹æ¡ˆAï¼šæ£€æŸ¥tsconfig.jsonçš„pathsé…ç½®
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}

// æ–¹æ¡ˆBï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„æ›¿ä»£
// ä»: import { useApi } from '@/hooks/useApi';
// æ”¹ä¸º: import { useApi } from '../../lib/polkadot';
```

---

### ç±»åˆ« 2: Polkadot Codec ç±»å‹é—®é¢˜ï¼ˆçº¦50ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼š`Property 'unwrap' does not exist on type 'Codec'`

**åŸå› **ï¼šPolkadot API è¿”å›çš„ç±»å‹éœ€è¦ç±»å‹æ–­è¨€

**ç¤ºä¾‹é”™è¯¯**ï¼š
```
src/features/bridge/MakerBridgeComplaintPage.tsx(61,21): error TS2339: Property 'isNone' does not exist on type 'Codec'.
src/features/bridge/MakerBridgeComplaintPage.tsx(67,32): error TS2339: Property 'unwrap' does not exist on type 'Codec'.
```

**å»ºè®®ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// æ–¹æ³•1ï¼šä½¿ç”¨ç±»å‹æ–­è¨€
const data = (await api.query.module.storage(id)) as Option<SomeType>;
if (data.isSome) {
  const value = data.unwrap();
}

// æ–¹æ³•2ï¼šä½¿ç”¨ toJSON()
const data = await api.query.module.storage(id);
const json = data.toJSON();
```

---

### ç±»åˆ« 3: ç¼ºå¤±ç»„ä»¶å’Œå›¾æ ‡ï¼ˆçº¦10ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼š
- `ClockCircleOutlined` æœªå¯¼å…¥
- `Input` ç»„ä»¶æœªå¯¼å…¥
- `FamilyOutlined` ä¸å­˜åœ¨ï¼ˆåº”æ”¹ä¸ºå…¶ä»–å›¾æ ‡ï¼‰

**å—å½±å“æ–‡ä»¶**ï¼š
- `src/features/bridge/MakerBridgeDashboard.tsx`
- `src/features/deceased/RelationshipPage.tsx`

**å»ºè®®ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// MakerBridgeDashboard.tsx - æ·»åŠ ç¼ºå¤±çš„å¯¼å…¥
import { Input } from 'antd';
import { ClockCircleOutlined } from '@ant-design/icons';

// RelationshipPage.tsx - æ›¿æ¢ä¸å­˜åœ¨çš„å›¾æ ‡
// ä»: import { FamilyOutlined } from '@ant-design/icons';
// æ”¹ä¸º: import { TeamOutlined } from '@ant-design/icons';
```

---

### ç±»åˆ« 4: å·²åºŸå¼ƒå±æ€§å¼•ç”¨ï¼ˆçº¦6ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼š`epayGateway` å’Œ `epayPort` å±æ€§å·²åˆ é™¤

**å—å½±å“æ–‡ä»¶**ï¼š
- `src/features/otc/CreateMarketMakerPage.tsx`

**å»ºè®®ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// åˆ é™¤æ‰€æœ‰å¯¹ epayGateway å’Œ epayPort çš„å¼•ç”¨
// è¿™äº›æ˜¯å·²åºŸå¼ƒçš„é¦–è´­åŠŸèƒ½ç›¸å…³ä»£ç 
```

---

### ç±»åˆ« 5: æœªå®šä¹‰å˜é‡ï¼ˆçº¦15ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼šDashboardPage ä¸­ä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡

**å—å½±å“æ–‡ä»¶**ï¼š
- `src/features/dashboard/DashboardPage.tsx`

**é”™è¯¯å˜é‡**ï¼š
- `squidError`
- `dailyNewGraves`
- `topParks`
- `topGraves`
- `recentActions`

**å»ºè®®ä¿®å¤æ–¹æ¡ˆ**ï¼š
è¿™äº›çœ‹èµ·æ¥æ˜¯ Subsquid ç›¸å…³çš„æ•°æ®æŸ¥è¯¢ï¼Œå¯èƒ½éœ€è¦ï¼š
1. æ³¨é‡Šæ‰ç›¸å…³ä»£ç ï¼ˆå¦‚æœSubsquidæš‚æœªå®ç°ï¼‰
2. æˆ–æ·»åŠ ç›¸åº”çš„æ•°æ®æŸ¥è¯¢é€»è¾‘

---

### ç±»åˆ« 6: å…¶ä»–ç±»å‹é”™è¯¯ï¼ˆçº¦80ä¸ªé”™è¯¯ï¼‰

**é—®é¢˜**ï¼šå„ç§TypeScriptç±»å‹ä¸åŒ¹é…ã€éšå¼anyç­‰

**ç¤ºä¾‹**ï¼š
```
src/components/deceased/RelationProposalManager.tsx(21,13): error TS1294: This syntax is not allowed when 'erasableSyntaxOnly' is enabled.
src/features/otc/CreateListingForm.tsx(247,30): error TS2345: Argument of type 'string | undefined' is not assignable...
```

---

## ğŸ¯ å»ºè®®çš„ä¿®å¤ç­–ç•¥

è€ƒè™‘åˆ°é”™è¯¯æ•°é‡è¾ƒå¤šä¸”æ¶‰åŠæ¶æ„é—®é¢˜ï¼Œå»ºè®®é‡‡å–ä»¥ä¸‹ç­–ç•¥ä¹‹ä¸€ï¼š

### ç­–ç•¥ Aï¼šå…¨é¢ä¿®å¤ï¼ˆé¢„è®¡4-6å°æ—¶ï¼‰
é€ä¸ªä¿®å¤æ‰€æœ‰197ä¸ªé”™è¯¯ï¼ŒåŒ…æ‹¬ï¼š
1. é…ç½®è·¯å¾„åˆ«å
2. ä¿®å¤æ‰€æœ‰Codecç±»å‹é—®é¢˜
3. æ·»åŠ ç¼ºå¤±çš„å¯¼å…¥
4. æ¸…ç†åºŸå¼ƒä»£ç 
5. ä¿®å¤ç±»å‹é”™è¯¯

**ä¼˜ç‚¹**ï¼šå½»åº•è§£å†³é—®é¢˜  
**ç¼ºç‚¹**ï¼šè€—æ—¶è¾ƒé•¿

### ç­–ç•¥ Bï¼šæ¸è¿›å¼ä¿®å¤ï¼ˆæ¨èï¼‰
1. å…ˆä¿®å¤å…³é”®é”™è¯¯ï¼ˆæ¨¡å—è·¯å¾„ã€Codecç±»å‹ï¼‰
2. æš‚æ—¶æ³¨é‡Šæ‰éå…³é”®åŠŸèƒ½ï¼ˆå¦‚Dashboardã€Chatç­‰ï¼‰
3. ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½ï¼ˆDeceasedã€Graveã€OTCï¼‰å¯ç¼–è¯‘
4. åç»­é€æ­¥æ¢å¤å…¶ä»–åŠŸèƒ½

**ä¼˜ç‚¹**ï¼šå¿«é€Ÿè§æ•ˆ  
**ç¼ºç‚¹**ï¼šéƒ¨åˆ†åŠŸèƒ½æš‚ä¸å¯ç”¨

### ç­–ç•¥ Cï¼šé™ä½TypeScriptä¸¥æ ¼åº¦ï¼ˆä¸æ¨èï¼‰
ä¿®æ”¹ `tsconfig.json`ï¼Œé™ä½ç±»å‹æ£€æŸ¥ä¸¥æ ¼åº¦ï¼š
```json
{
  "compilerOptions": {
    "noImplicitAny": false,
    "strict": false
  }
}
```

**ä¼˜ç‚¹**ï¼šç¼–è¯‘å¯èƒ½é€šè¿‡  
**ç¼ºç‚¹**ï¼šå¤±å»ç±»å‹å®‰å…¨ï¼Œå¯èƒ½éšè—è¿è¡Œæ—¶é”™è¯¯

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

è¯·é€‰æ‹©ä¿®å¤ç­–ç•¥ï¼š

### é€‰é¡¹ 1: ç»§ç»­å…¨é¢ä¿®å¤
æˆ‘å°†ç³»ç»Ÿåœ°ä¿®å¤æ‰€æœ‰197ä¸ªé”™è¯¯ï¼ˆé¢„è®¡éœ€è¦200-300æ¬¡å·¥å…·è°ƒç”¨ï¼‰

### é€‰é¡¹ 2: é‡‡ç”¨æ¸è¿›å¼ä¿®å¤
å…ˆä¿®å¤å…³é”®æ¨¡å—ï¼ˆDeceasedã€Graveã€OTCã€MarketMakerï¼‰çš„ç¼–è¯‘é”™è¯¯

### é€‰é¡¹ 3: æš‚åœä¿®å¤
ä¿ç•™å½“å‰å·²å®Œæˆçš„ä¿®å¤ï¼ˆå¼•å·é—®é¢˜ã€ä¾èµ–å®‰è£…ã€éƒ¨åˆ†ç±»å‹å¯¼å…¥ï¼‰ï¼Œç­‰å¾…åç»­éœ€è¦æ—¶å†ç»§ç»­

---

**å½“å‰å»ºè®®**ï¼šé€‰é¡¹2ï¼ˆæ¸è¿›å¼ä¿®å¤ï¼‰

ç†ç”±ï¼š
1. å¯ä»¥å¿«é€Ÿè®©æ ¸å¿ƒåŠŸèƒ½ç¼–è¯‘é€šè¿‡
2. é¿å…èŠ±è´¹è¿‡å¤šæ—¶é—´åœ¨éå…³é”®åŠŸèƒ½ä¸Š
3. ä¿æŒç±»å‹å®‰å…¨çš„ä¼˜åŠ¿

---

**æœ€åæ›´æ–°**ï¼š2025-10-24  
**ä¿®å¤è¿›åº¦**ï¼šçº¦5%ï¼ˆ10/197ï¼‰

