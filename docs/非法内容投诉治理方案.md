# 非法内容投诉治理方案

> **文档版本**: v1.0.0  
> **更新日期**: 2025-11-13  
> **适用范围**: 墓地、陵园、逝者创建者上传的非法内容  
> **相关 Pallet**: `pallet-stardust-appeals`（申诉系统）

---

## 📋 目录

1. [方案概述](#方案概述)
2. [问题分析](#问题分析)
3. [治理架构设计](#治理架构设计)
4. [投诉流程设计](#投诉流程设计)
5. [激励机制设计](#激励机制设计)
6. [防护机制设计](#防护机制设计)
7. [技术实现方案](#技术实现方案)
8. [可行性分析](#可行性分析)
9. [风险评估与应对](#风险评估与应对)
10. [实施路线图](#实施路线图)

---

## 1. 方案概述

### 1.1 背景

在 Stardust 数字纪念平台中，用户（墓地、陵园、逝者创建者）可能上传以下类型的非法内容：

- **违法违规内容**：色情、暴力、恐怖主义、极端主义等
- **虚假信息**：伪造逝者身份、虚假生平、虚假照片等
- **侵权内容**：侵犯他人肖像权、名誉权、隐私权等
- **商业欺诈**：虚假宣传、诈骗信息等
- **其他不当内容**：恶意诋毁、仇恨言论、歧视性内容等

### 1.2 目标

设计一个**去中心化、透明、高效、可激励**的投诉治理机制，实现：

1. ✅ **快速响应**：公众可便捷举报非法内容
2. ✅ **专业审核**：内容委员会专业判断和处理
3. ✅ **透明公正**：所有流程链上可查，公开透明
4. ✅ **激励参与**：奖励有效举报，惩罚恶意投诉
5. ✅ **自动执行**：审核通过后自动处理违规内容

### 1.3 核心原则

- **去中心化**：不依赖单一中心化审核机构
- **透明性**：所有投诉、审核、执行过程链上可查
- **公平性**：给予内容创建者答辩机会
- **效率性**：自动化流程，减少人工干预
- **可持续性**：通过激励机制维持长期运营

---

## 2. 问题分析

### 2.1 现有系统分析

#### 2.1.1 现有申诉系统（`pallet-stardust-appeals`）

**优势**：
- ✅ 支持多域申诉（墓地、逝者、媒体、文本等）
- ✅ 委员会投票审批机制
- ✅ 公示期保护机制
- ✅ 自动执行机制
- ✅ 押金管理（Holds API）

**不足**：
- ⚠️ 缺乏针对非法内容的专门流程
- ⚠️ 缺乏举报者激励机制
- ⚠️ 缺乏恶意投诉惩罚机制
- ⚠️ 缺乏紧急处理机制（严重违法内容）

### 2.2 需求分析

#### 2.2.1 功能需求

1. **投诉提交**
   - 支持匿名/实名投诉
   - 必须提供证据（IPFS CID）
   - 需要冻结押金（防止恶意投诉）
   - 限频控制（防止刷屏）

2. **分类处理**
   - **普通投诉**：常规流程（委员会投票）
   - **紧急投诉**：严重违法内容（快速通道）
   - **批量投诉**：同一内容多人投诉（合并处理）

3. **审核机制**
   - 内容委员会投票（2/3 多数通过）
   - 公示期保护（给予创建者答辩机会）
   - 自动执行（公示期到期后自动处理）

4. **激励机制**
   - 有效投诉奖励（从罚没资金中分配）
   - 恶意投诉惩罚（罚没押金）
   - 审核员激励（委员会成员获得审核报酬）

#### 2.2.2 非功能需求

- **响应时间**：紧急投诉 24 小时内处理
- **处理效率**：普通投诉 7 天内完成
- **系统可用性**：99.9% 可用性
- **可扩展性**：支持未来新增投诉类型

---

## 3. 治理架构设计

### 3.1 三层治理架构

```
┌─────────────────────────────────────────────────────────┐
│ 第一层：公众投诉层                                        │
│ • 任何用户可提交投诉                                      │
│ • 需要提供证据和押金                                      │
│ • 限频控制防止滥用                                        │
└─────────────────────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────────────────────┐
│ 第二层：内容委员会审核层                                  │
│ • 内容委员会投票（2/3 多数）                             │
│ • 公示期保护（给予创建者答辩机会）                        │
│ • 专业判断和处理                                          │
└─────────────────────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────────────────────┐
│ 第三层：自动执行层                                        │
│ • 公示期到期后自动执行                                    │
│ • 支持多种处理动作（删除、隐藏、转移等）                  │
│ • 失败自动重试机制                                        │
└─────────────────────────────────────────────────────────┘
```

### 3.2 角色定义

| 角色 | 权限 | 职责 |
|------|------|------|
| **投诉者** | 任何用户 | 提交投诉、提供证据、支付押金 |
| **内容创建者** | 内容所有者 | 查看投诉、提交答辩、申诉 |
| **内容委员会** | 治理权限 | 审核投诉、投票决定、专业判断 |
| **系统** | 自动执行 | 公示期到期后自动处理 |

### 3.3 治理权限配置

**内容委员会权限**：
- 投票批准/驳回投诉（2/3 多数通过）
- 设置紧急投诉快速通道
- 调整投诉押金和罚没比例（治理提案）

**Root 权限**：
- 紧急暂停投诉系统
- 直接处理严重违法内容
- 调整系统参数

---

## 4. 投诉流程设计

### 4.1 完整流程图

```
用户发现非法内容
    ↓
提交投诉（提供证据 + 支付押金）
    ↓
系统验证（限频、押金、证据完整性）
    ↓
投诉进入待审核状态
    ↓
内容委员会投票（2/3 多数）
    ├─ 批准 → 进入公示期
    └─ 驳回 → 罚没部分押金，投诉结束
    ↓
公示期（7天，给予创建者答辩机会）
    ├─ 创建者答辩 → 重新审核或自动否决
    └─ 无答辩 → 公示期到期
    ↓
自动执行处理动作
    ├─ 删除内容
    ├─ 隐藏内容
    ├─ 转移拥有者
    └─ 其他治理动作
    ↓
释放/分配押金
    ├─ 有效投诉 → 奖励投诉者
    └─ 恶意投诉 → 罚没押金
```

### 4.2 投诉类型分类

#### 4.2.1 普通投诉（常规流程）

**适用场景**：
- 虚假信息
- 轻微侵权
- 不当内容
- 其他一般违规

**处理流程**：
1. 提交投诉（押金：10 DUST）
2. 委员会投票（7天内）
3. 公示期（7天）
4. 自动执行

**预计处理时间**：14 天

#### 4.2.2 紧急投诉（快速通道）

**适用场景**：
- 严重违法内容（色情、暴力、恐怖主义）
- 紧急侵权（大规模传播）
- 其他严重违规

**处理流程**：
1. 提交紧急投诉（押金：50 DUST，更高押金防止滥用）
2. 委员会快速投票（24小时内）
3. 缩短公示期（3天）
4. 自动执行

**预计处理时间**：4 天

#### 4.2.3 批量投诉（合并处理）

**适用场景**：
- 同一内容多人投诉
- 大规模违规内容

**处理流程**：
1. 系统自动识别批量投诉
2. 合并为单一投诉案件
3. 提高优先级
4. 快速处理

**优势**：
- 减少重复审核
- 提高处理效率
- 节省系统资源

### 4.3 投诉动作类型

| Action | 动作 | 适用场景 | 执行方式 |
|--------|------|---------|---------|
| 1 | 删除内容 | 严重违法、虚假信息 | 直接删除 |
| 2 | 隐藏内容 | 轻微违规、待核实 | 设置为不可见 |
| 3 | 转移拥有者 | 侵权、虚假身份 | 转移到平台账户 |
| 4 | 标记警告 | 不当内容 | 添加警告标记 |
| 5 | 限制访问 | 敏感内容 | 限制特定用户访问 |

---

## 5. 激励机制设计

### 5.1 投诉者激励

#### 5.1.1 有效投诉奖励

**奖励来源**：
- 违规内容创建者的押金罚没
- 恶意投诉者的押金罚没
- 国库资金（可选）

**奖励分配**：
- **投诉者**：50% 的罚没资金
- **内容委员会**：30% 的罚没资金（审核报酬）
- **国库**：20% 的罚没资金（系统维护）

**奖励计算**：
```rust
// 有效投诉奖励 = 罚没资金 × 50%
let reporter_reward = slashed_amount * 50 / 100;

// 委员会奖励 = 罚没资金 × 30%
let committee_reward = slashed_amount * 30 / 100;

// 国库收入 = 罚没资金 × 20%
let treasury_income = slashed_amount * 20 / 100;
```

#### 5.1.2 恶意投诉惩罚

**惩罚机制**：
- 驳回投诉：罚没 30% 押金
- 恶意刷屏：罚没 100% 押金 + 限制投诉权限
- 虚假证据：罚没 100% 押金 + 记录黑名单

**恶意投诉判定**：
- 连续 3 次投诉被驳回
- 投诉成功率 < 20%（投诉总数 > 10）
- 提供虚假证据

### 5.2 内容委员会激励

#### 5.2.1 审核报酬

**报酬来源**：
- 有效投诉的罚没资金（30%）
- 国库定期拨款（可选）

**报酬分配**：
- 按投票权重分配（支持票获得更多报酬）
- 按审核质量评分（后续优化）

#### 5.2.2 审核质量评估

**评估指标**：
- 投票准确率（与最终结果一致性）
- 审核及时性（投票速度）
- 社区评价（后续优化）

### 5.3 创建者保护机制

#### 5.3.1 答辩机制

**答辩流程**：
1. 投诉进入公示期后，创建者收到通知
2. 创建者可在公示期内提交答辩（证据 CID）
3. 答辩后重新进入委员会审核
4. 或自动否决投诉（如果答辩充分）

**答辩效果**：
- 提供充分证据 → 自动否决投诉
- 提供部分证据 → 重新审核
- 无答辩 → 公示期到期后执行

#### 5.3.2 申诉机制

**申诉流程**：
1. 对已执行的投诉结果不满
2. 提交申诉（需要新证据）
3. 委员会重新审核
4. 如果申诉成功，恢复内容并补偿

---

## 6. 防护机制设计

### 6.1 防恶意投诉机制

#### 6.1.1 押金机制

**押金设置**：
- 普通投诉：10 DUST
- 紧急投诉：50 DUST
- 批量投诉：20 DUST

**押金作用**：
- 防止恶意刷屏
- 确保投诉者认真对待
- 作为奖励资金来源

#### 6.1.2 限频控制

**限频规则**：
- 每用户每天最多 5 次投诉
- 每用户每周最多 20 次投诉
- 同一内容最多 10 次投诉（超过后合并处理）

**限频实现**：
```rust
// 检查账户级限频
let (window_start, count) = ComplaintRate::<T>::get(&who);
if now - window_start > T::WindowBlocks::get() {
    // 窗口重置
    ComplaintRate::<T>::insert(&who, (now, 1));
} else if count >= T::MaxPerWindow::get() {
    return Err(Error::<T>::TooManyComplaints);
} else {
    ComplaintRate::<T>::insert(&who, (window_start, count + 1));
}
```

#### 6.1.3 黑名单机制

**黑名单条件**：
- 连续 5 次投诉被驳回
- 投诉成功率 < 10%（投诉总数 > 20）
- 提供虚假证据 3 次以上

**黑名单效果**：
- 禁止提交投诉（30天）
- 提高押金要求（2倍）
- 记录链上，永久可查

### 6.2 防滥用机制

#### 6.2.1 证据要求

**证据要求**：
- 必须提供证据 CID（IPFS）
- 证据最小长度：32 字节
- 支持图片、视频、文本等多种格式

**证据验证**：
- 检查 CID 格式有效性
- 检查 IPFS 可访问性（链下验证）
- 检查证据相关性（人工审核）

#### 6.2.2 批量投诉合并

**合并规则**：
- 同一内容 3 次以上投诉 → 自动合并
- 同一用户对同一内容重复投诉 → 拒绝
- 相似投诉内容 → 智能合并（后续优化）

### 6.3 系统防护机制

#### 6.3.1 DoS 防护

**防护措施**：
- 每块最多处理 10 个投诉
- 每块最多执行 5 个处理动作
- 失败重试限制（最多 3 次）

#### 6.3.2 紧急暂停机制

**暂停条件**：
- 系统异常（大量失败）
- 恶意攻击（大量无效投诉）
- 其他紧急情况

**暂停权限**：
- Root 可紧急暂停
- 内容委员会 2/3 多数可暂停

---

## 7. 技术实现方案

### 7.1 基于现有系统扩展

#### 7.1.1 复用 `pallet-stardust-appeals`

**现有功能复用**：
- ✅ 申诉提交机制
- ✅ 委员会投票机制
- ✅ 公示期保护机制
- ✅ 自动执行机制
- ✅ 押金管理（Holds API）

**需要扩展的功能**：
- ⚠️ 投诉分类（普通/紧急/批量）
- ⚠️ 投诉者激励机制
- ⚠️ 恶意投诉惩罚机制
- ⚠️ 批量投诉合并机制

#### 7.1.2 新增存储项

```rust
// 投诉分类
#[pallet::storage]
pub type ComplaintType<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64,  // complaint_id
    ComplaintCategory,  // Normal/Emergency/Batch
    OptionQuery,
>;

// 投诉者统计（用于恶意投诉判定）
#[pallet::storage]
pub type ComplainantStats<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    ComplainantStatistics,
    ValueQuery,
>;

// 批量投诉映射
#[pallet::storage]
pub type BatchComplaints<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64,  // target_id
    BoundedVec<u64, ConstU32<100>>,  // complaint_ids
    ValueQuery,
>;
```

### 7.2 新增接口设计

#### 7.2.1 投诉提交接口

```rust
/// 提交普通投诉
#[pallet::call_index(10)]
pub fn submit_complaint(
    origin: OriginFor<T>,
    domain: u8,  // 1=grave, 2=deceased, 3=media, 4=text
    target: u64,
    action: u8,  // 1=删除, 2=隐藏, 3=转移, 4=标记, 5=限制
    evidence_cid: Vec<u8>,
    reason_cid: Option<Vec<u8>>,
) -> DispatchResult;

/// 提交紧急投诉
#[pallet::call_index(11)]
pub fn submit_emergency_complaint(
    origin: OriginFor<T>,
    domain: u8,
    target: u64,
    action: u8,
    evidence_cid: Vec<u8>,
    reason_cid: Option<Vec<u8>>,
) -> DispatchResult;
```

#### 7.2.2 答辩接口

```rust
/// 内容创建者提交答辩
#[pallet::call_index(12)]
pub fn submit_response(
    origin: OriginFor<T>,
    complaint_id: u64,
    response_cid: Vec<u8>,  // 答辩证据
) -> DispatchResult;
```

#### 7.2.3 奖励分配接口

```rust
/// 分配投诉奖励（自动调用）
fn distribute_rewards(
    complaint_id: u64,
    slashed_amount: BalanceOf<T>,
) -> DispatchResult {
    // 50% 给投诉者
    let reporter_reward = slashed_amount * 50 / 100;
    // 30% 给委员会
    let committee_reward = slashed_amount * 30 / 100;
    // 20% 给国库
    let treasury_income = slashed_amount * 20 / 100;
    
    // 执行分配...
}
```

### 7.3 事件设计

```rust
#[pallet::event]
pub enum Event<T: Config> {
    /// 投诉已提交
    ComplaintSubmitted {
        id: u64,
        who: T::AccountId,
        domain: u8,
        target: u64,
        category: ComplaintCategory,
    },
    
    /// 投诉已批准
    ComplaintApproved {
        id: u64,
        notice_until: BlockNumberFor<T>,
    },
    
    /// 投诉已驳回
    ComplaintRejected {
        id: u64,
        slashed_amount: BalanceOf<T>,
    },
    
    /// 创建者已答辩
    ResponseSubmitted {
        complaint_id: u64,
        who: T::AccountId,
    },
    
    /// 投诉奖励已分配
    RewardsDistributed {
        complaint_id: u64,
        reporter_reward: BalanceOf<T>,
        committee_reward: BalanceOf<T>,
        treasury_income: BalanceOf<T>,
    },
}
```

---

## 8. 可行性分析

### 8.1 技术可行性

#### 8.1.1 现有基础设施

**优势**：
- ✅ 已有完整的申诉系统（`pallet-stardust-appeals`）
- ✅ 已有内容委员会治理机制
- ✅ 已有押金管理（Holds API）
- ✅ 已有自动执行机制

**技术难度**：**低** ⭐⭐

**实现时间**：**2-3 周**

#### 8.1.2 需要开发的功能

1. **投诉分类机制**（1周）
   - 普通/紧急/批量投诉分类
   - 不同押金和流程

2. **激励机制**（1周）
   - 奖励分配逻辑
   - 恶意投诉惩罚

3. **批量投诉合并**（3天）
   - 自动识别和合并
   - 优先级提升

4. **答辩机制**（3天）
   - 创建者答辩接口
   - 自动否决逻辑

### 8.2 经济可行性

#### 8.2.1 成本分析

**开发成本**：
- 开发时间：2-3 周
- 测试时间：1 周
- 总计：3-4 周

**运营成本**：
- 链上存储：低（仅存储元数据）
- Gas 费用：由用户支付押金覆盖
- 维护成本：低（自动化流程）

#### 8.2.2 收益分析

**直接收益**：
- 罚没资金进入国库（20%）
- 提高平台内容质量
- 增强用户信任

**间接收益**：
- 减少人工审核成本
- 提高平台合规性
- 增强社区治理能力

**结论**：**经济可行** ✅

### 8.3 社会可行性

#### 8.3.1 用户接受度

**优势**：
- 透明公正的流程
- 给予创建者答辩机会
- 奖励有效举报

**挑战**：
- 需要用户理解押金机制
- 需要用户提供证据

**应对**：
- 完善前端 UI/UX
- 提供详细使用指南
- 降低押金门槛（普通投诉 10 DUST）

#### 8.3.2 法律合规性

**合规要求**：
- 符合内容审核法规
- 保护用户隐私
- 提供申诉渠道

**方案符合性**：
- ✅ 去中心化审核（符合监管趋势）
- ✅ 透明流程（符合公开要求）
- ✅ 答辩机制（符合程序正义）

**结论**：**社会可行** ✅

---

## 9. 风险评估与应对

### 9.1 技术风险

#### 9.1.1 系统性能风险

**风险**：
- 大量投诉导致系统拥堵
- 自动执行失败率高

**应对**：
- DoS 防护机制（每块处理限制）
- 失败重试机制（指数退避）
- 批量投诉合并（减少重复处理）

#### 9.1.2 数据安全风险

**风险**：
- 证据 CID 泄露
- 投诉者隐私泄露

**应对**：
- 证据加密存储（IPFS 加密）
- 匿名投诉支持（可选）
- 隐私保护机制

### 9.2 经济风险

#### 9.2.1 恶意投诉风险

**风险**：
- 大量恶意投诉消耗系统资源
- 恶意投诉者刷屏

**应对**：
- 押金机制（提高成本）
- 限频控制（防止刷屏）
- 黑名单机制（永久禁止）

#### 9.2.2 资金安全风险

**风险**：
- 押金被恶意锁定
- 奖励分配错误

**应对**：
- Holds API 安全机制
- 多重签名验证（可选）
- 审计和监控

### 9.3 治理风险

#### 9.3.1 委员会滥用风险

**风险**：
- 委员会成员串通
- 投票不公正

**应对**：
- 2/3 多数通过（提高门槛）
- 投票记录链上可查（透明）
- 社区监督机制

#### 9.3.2 紧急暂停滥用风险

**风险**：
- Root 滥用紧急暂停
- 系统被恶意关闭

**应对**：
- 紧急暂停需要理由（链上记录）
- 社区监督和问责
- 多重签名机制（可选）

---

## 10. 实施路线图

### 10.1 Phase 1：基础功能（2周）

**目标**：实现基本的投诉和审核功能

**任务**：
1. ✅ 扩展 `pallet-stardust-appeals` 支持投诉分类
2. ✅ 实现普通投诉和紧急投诉流程
3. ✅ 实现委员会投票和公示期机制
4. ✅ 实现自动执行机制

**交付物**：
- 投诉提交接口
- 委员会审核接口
- 自动执行逻辑

### 10.2 Phase 2：激励机制（1周）

**目标**：实现投诉者和委员会激励机制

**任务**：
1. ✅ 实现奖励分配逻辑
2. ✅ 实现恶意投诉惩罚
3. ✅ 实现投诉者统计
4. ✅ 实现黑名单机制

**交付物**：
- 奖励分配接口
- 统计和黑名单存储
- 惩罚逻辑

### 10.3 Phase 3：高级功能（1周）

**目标**：实现批量投诉和答辩机制

**任务**：
1. ✅ 实现批量投诉合并
2. ✅ 实现创建者答辩机制
3. ✅ 实现自动否决逻辑
4. ✅ 优化前端 UI/UX

**交付物**：
- 批量投诉合并逻辑
- 答辩接口
- 前端投诉页面

### 10.4 Phase 4：测试和优化（1周）

**目标**：全面测试和性能优化

**任务**：
1. ✅ 单元测试和集成测试
2. ✅ 性能测试和优化
3. ✅ 安全审计
4. ✅ 文档完善

**交付物**：
- 测试报告
- 性能优化报告
- 用户使用指南

---

## 11. 总结

### 11.1 方案优势

1. ✅ **去中心化**：不依赖单一审核机构
2. ✅ **透明公正**：所有流程链上可查
3. ✅ **高效自动**：自动化流程，减少人工干预
4. ✅ **激励参与**：奖励有效举报，惩罚恶意投诉
5. ✅ **保护创建者**：给予答辩机会，保护合法权益

### 11.2 实施建议

1. **优先实施 Phase 1**：基础功能最重要
2. **逐步完善**：根据实际使用情况优化
3. **社区参与**：鼓励社区参与治理
4. **持续监控**：监控系统运行情况，及时调整

### 11.3 预期效果

- **响应速度**：紧急投诉 24 小时内处理
- **处理效率**：普通投诉 7 天内完成
- **用户满意度**：提高平台内容质量
- **治理能力**：增强社区自治能力

---

## 12. 附录

### 12.1 相关文档

- [pallet-stardust-appeals README](../pallets/stardust-appeals/README.md)
- [治理奖励机制可行性分析](./治理奖励机制可行性分析.md)
- [内容委员会治理规范](./内容委员会治理规范.md)（待创建）

### 12.2 参考标准

- **内容审核标准**：参考国家相关法规
- **证据要求**：参考司法证据标准
- **程序正义**：参考法律程序要求

### 12.3 联系方式

- **技术问题**：开发团队
- **治理问题**：内容委员会
- **紧急情况**：Root 账户

---

**文档维护**: Stardust 开发团队  
**最后更新**: 2025-11-13  
**版本**: v1.0.0

