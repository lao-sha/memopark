# Stardust æ²»ç†ä¼˜åŒ–å®æ–½æ–¹æ¡ˆï¼ˆæ¨èç‰ˆï¼‰

> **æ ¸å¿ƒåŸåˆ™**ï¼šåœ¨ä¿æŒæ¨¡å—ä½è€¦åˆçš„å‰æä¸‹ï¼Œé€šè¿‡å‰ç«¯ç»Ÿä¸€å°è£…å’Œå‚æ•°é›†ä¸­ç®¡ç†ä¼˜åŒ–æ²»ç†ä½“éªŒï¼Œé¿å…åç«¯è¿‡åº¦æ•´åˆå¸¦æ¥çš„æ¶æ„å¤æ‚æ€§ã€‚

## ğŸ“‹ ç›®å½•

1. [æ–¹æ¡ˆæ¦‚è¿°](#1-æ–¹æ¡ˆæ¦‚è¿°)
2. [ç«‹å³å®æ–½é˜¶æ®µï¼ˆ0-1å‘¨ï¼‰](#2-ç«‹å³å®æ–½é˜¶æ®µ0-1å‘¨)
3. [çŸ­æœŸå®æ–½é˜¶æ®µï¼ˆ2-4å‘¨ï¼‰](#3-çŸ­æœŸå®æ–½é˜¶æ®µ2-4å‘¨)
4. [å®æ–½æ•ˆæœè¯„ä¼°](#4-å®æ–½æ•ˆæœè¯„ä¼°)
5. [é™„å½•ï¼šä¸æ¨èæ–¹æ¡ˆåˆ†æ](#5-é™„å½•ä¸æ¨èæ–¹æ¡ˆåˆ†æ)

---

## 1. æ–¹æ¡ˆæ¦‚è¿°

### 1.1 å†³ç­–èƒŒæ™¯

ç»è¿‡å¯¹[Stardustæ²»ç†æ ¸å¿ƒåŒ–è®¾è®¡](./Stardustæ²»ç†æ ¸å¿ƒåŒ–è®¾è®¡.md)çš„æ·±åº¦åˆ†æï¼Œæˆ‘ä»¬**ä¸æ¨è**å®æ–½"ç»Ÿä¸€æ²»ç†åè°ƒæ¨¡å—"ï¼ˆ`pallet-unified-governance`ï¼‰ï¼ŒåŸå› å¦‚ä¸‹ï¼š

| ç»´åº¦ | ç»Ÿä¸€åè°ƒæ¨¡å—æ–¹æ¡ˆ | æ¨èæ–¹æ¡ˆ |
|------|----------------|----------|
| **æ¶æ„è€¦åˆåº¦** | âŒ é«˜ï¼ˆéœ€åè°ƒ7+æ¨¡å—ï¼‰ | âœ… ä½ï¼ˆå‰ç«¯é€‚é…å±‚ï¼‰ |
| **Substrateå…¼å®¹æ€§** | âš ï¸ è¿åæ¨¡å—ç‹¬ç«‹æ€§åŸåˆ™ | âœ… ç¬¦åˆFRAMEæœ€ä½³å®è·µ |
| **å‘åå…¼å®¹æ€§** | âŒ éš¾ä»¥ç»´æŠ¤ | âœ… é›¶ç ´åæ€§å˜æ›´ |
| **å¼€å‘æˆæœ¬** | ğŸ”´ 3-4å‘¨ + æŒç»­ç»´æŠ¤ | ğŸŸ¢ 1-2å‘¨ä¸€æ¬¡æ€§æŠ•å…¥ |
| **é£é™©ç­‰çº§** | ğŸ”´ é«˜ï¼ˆå½±å“æ ¸å¿ƒæ¶æ„ï¼‰ | ğŸŸ¢ ä½ï¼ˆä»…å‰ç«¯æ”¹åŠ¨ï¼‰ |

### 1.2 æ¨èæ–¹æ¡ˆæ ¸å¿ƒæ€æƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ¨èæ²»ç†ä¼˜åŒ–æ–¹æ¡ˆæ¶æ„                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  å‰ç«¯å±‚ï¼šç»Ÿä¸€æ²»ç†APIå°è£…
  â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  governanceService.ts                    â”‚
  â”‚  - æä¾›ç»Ÿä¸€çš„æ²»ç†æ“ä½œæ¥å£                â”‚
  â”‚  - è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”åç«¯æ¨¡å—                â”‚
  â”‚  - æ ‡å‡†åŒ–é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“                â†“                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ pallet-       â”‚  â”‚ pallet-      â”‚  â”‚ pallet-    â”‚
  â”‚ stardust-     â”‚  â”‚ deceased/    â”‚  â”‚ democracy  â”‚
  â”‚ appeals       â”‚  â”‚ governance   â”‚  â”‚            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                  â†‘                  â†‘
  ä¿æŒæ¨¡å—ç‹¬ç«‹æ€§ï¼Œä½è€¦åˆï¼Œç¬¦åˆSubstrateæœ€ä½³å®è·µ
```

### 1.3 å®æ–½è·¯çº¿å›¾

```mermaid
gantt
    title Stardustæ²»ç†ä¼˜åŒ–å®æ–½æ—¶é—´çº¿
    dateFormat  YYYY-MM-DD
    section ç«‹å³å®æ–½
    å‰ç«¯ç»Ÿä¸€æ²»ç†APIå°è£…        :a1, 2025-01-20, 3d
    æ²»ç†äº‹ä»¶æ ‡å‡†åŒ–             :a2, 2025-01-23, 2d
    section çŸ­æœŸå®æ–½
    pallet-governance-paramså¼€å‘ :b1, 2025-01-25, 1w
    æ²»ç†ä»ªè¡¨ç›˜å¼€å‘              :b2, 2025-01-30, 1w
    section éªŒè¯ä¸éƒ¨ç½²
    æµ‹è¯•ä¸ä¼˜åŒ–                  :c1, 2025-02-06, 3d
    ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²                :c2, 2025-02-09, 2d
```

---

## 2. ç«‹å³å®æ–½é˜¶æ®µï¼ˆ0-1å‘¨ï¼‰

### 2.1 å‰ç«¯ç»Ÿä¸€æ²»ç†APIå°è£…

#### 2.1.1 ç›®æ ‡

åˆ›å»ºå‰ç«¯æœåŠ¡å±‚ï¼Œç»Ÿä¸€å°è£…æ‰€æœ‰æ²»ç†æ“ä½œæ¥å£ï¼Œéšè—åç«¯æ¨¡å—å·®å¼‚ï¼Œæä¾›ä¸€è‡´çš„å¼€å‘ä½“éªŒã€‚

#### 2.1.2 æŠ€æœ¯è®¾è®¡

**æ–‡ä»¶ä½ç½®**ï¼š`stardust-dapp/src/services/governanceService.ts`

```typescript
// ==================== ç±»å‹å®šä¹‰ ====================

/**
 * æ²»ç†åŸŸæšä¸¾ï¼ˆä¸pallet-stardust-appealsä¿æŒä¸€è‡´ï¼‰
 */
export enum GovernanceDomain {
  Grave = 1,
  Deceased = 2,
  Text = 3,
  Media = 4,
  Offerings = 5,
  Park = 6,
  Works = 7,
}

/**
 * æ²»ç†æ“ä½œç±»å‹æšä¸¾
 */
export enum GovernanceAction {
  Delete = 1,
  Update = 2,
  Hide = 3,
  Restore = 4,
}

/**
 * æ²»ç†è¯·æ±‚ç±»å‹
 */
export enum GovernanceRequestType {
  /** å†…å®¹ç”³è¯‰ï¼ˆé€šç”¨ï¼‰ */
  ContentAppeal = 'content_appeal',
  /** æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰ï¼ˆä»…deceasedç›¸å…³ï¼‰ */
  OwnerOperationComplaint = 'owner_operation_complaint',
  /** Textå†…å®¹æŠ•è¯‰ */
  TextComplaint = 'text_complaint',
  /** Mediaå†…å®¹æŠ•è¯‰ */
  MediaComplaint = 'media_complaint',
  /** ç”Ÿæ€ææ¡ˆ */
  EcosystemProposal = 'ecosystem_proposal',
  /** äº‰è®®ä»²è£ */
  DisputeArbitration = 'dispute_arbitration',
}

/**
 * ç»Ÿä¸€æ²»ç†çŠ¶æ€
 */
export enum UnifiedGovernanceStatus {
  Submitted = 'submitted',
  UnderReview = 'under_review',
  Approved = 'approved',
  Rejected = 'rejected',
  InNoticePeriod = 'in_notice_period',
  Executed = 'executed',
  Revoked = 'revoked',
  Expired = 'expired',
}

/**
 * æ²»ç†è¯·æ±‚å‚æ•°ï¼ˆè”åˆç±»å‹ï¼‰
 */
export type GovernanceRequestParams =
  | ContentAppealParams
  | OwnerOperationComplaintParams
  | TextComplaintParams
  | MediaComplaintParams
  | EcosystemProposalParams
  | DisputeArbitrationParams;

interface ContentAppealParams {
  type: GovernanceRequestType.ContentAppeal;
  domain: GovernanceDomain;
  targetId: number | string;
  action: GovernanceAction;
  reason: string;
  evidenceCid?: string;
}

interface OwnerOperationComplaintParams {
  type: GovernanceRequestType.OwnerOperationComplaint;
  operationId: number | string;
  reason: string;
  evidenceCid?: string;
}

interface TextComplaintParams {
  type: GovernanceRequestType.TextComplaint;
  textId: number | string;
  reason: string;
  evidenceCid?: string;
}

interface MediaComplaintParams {
  type: GovernanceRequestType.MediaComplaint;
  mediaId?: number | string;
  albumId?: number | string;
  videoCollectionId?: number | string;
  reason: string;
  evidenceCid?: string;
}

interface EcosystemProposalParams {
  type: GovernanceRequestType.EcosystemProposal;
  proposalId: number | string;
}

interface DisputeArbitrationParams {
  type: GovernanceRequestType.DisputeArbitration;
  disputeId: number | string;
}

/**
 * æ²»ç†è¯·æ±‚å“åº”
 */
export interface GovernanceRequestResponse {
  success: boolean;
  requestId?: number | string;
  txHash?: string;
  error?: string;
}

/**
 * æ²»ç†çŠ¶æ€æŸ¥è¯¢å“åº”
 */
export interface GovernanceStatusResponse {
  requestType: GovernanceRequestType;
  status: UnifiedGovernanceStatus;
  submitter: string;
  createdAt: number; // åŒºå—å·æˆ–æ—¶é—´æˆ³
  updatedAt: number;
  metadata?: Record<string, any>;
}

// ==================== æœåŠ¡å®ç° ====================

/**
 * ç»Ÿä¸€æ²»ç†æœåŠ¡ç±»
 *
 * èŒè´£ï¼š
 * 1. ç»Ÿä¸€å°è£…æ‰€æœ‰æ²»ç†æ“ä½œæ¥å£
 * 2. è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”çš„åç«¯æ¨¡å—
 * 3. æ ‡å‡†åŒ–é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†
 * 4. æä¾›ä¸€è‡´çš„å¼€å‘ä½“éªŒ
 */
export class GovernanceService {
  private api: ApiPromise;

  constructor(api: ApiPromise) {
    this.api = api;
  }

  /**
   * æäº¤æ²»ç†è¯·æ±‚ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
   *
   * @param params æ²»ç†è¯·æ±‚å‚æ•°
   * @param signer ç­¾åè´¦æˆ·
   * @returns æ²»ç†è¯·æ±‚å“åº”
   */
  async submitGovernanceRequest(
    params: GovernanceRequestParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    try {
      // æ ¹æ®è¯·æ±‚ç±»å‹è·¯ç”±åˆ°å¯¹åº”çš„å¤„ç†å‡½æ•°
      switch (params.type) {
        case GovernanceRequestType.ContentAppeal:
          return await this._submitContentAppeal(params, signer);

        case GovernanceRequestType.OwnerOperationComplaint:
          return await this._submitOwnerOperationComplaint(params, signer);

        case GovernanceRequestType.TextComplaint:
          return await this._submitTextComplaint(params, signer);

        case GovernanceRequestType.MediaComplaint:
          return await this._submitMediaComplaint(params, signer);

        case GovernanceRequestType.EcosystemProposal:
          return await this._submitEcosystemProposal(params, signer);

        case GovernanceRequestType.DisputeArbitration:
          return await this._submitDisputeArbitration(params, signer);

        default:
          throw new Error(`æœªçŸ¥çš„æ²»ç†è¯·æ±‚ç±»å‹: ${params}`);
      }
    } catch (error) {
      console.error('æäº¤æ²»ç†è¯·æ±‚å¤±è´¥:', error);
      return {
        success: false,
        error: error.message || 'æœªçŸ¥é”™è¯¯',
      };
    }
  }

  /**
   * æŸ¥è¯¢æ²»ç†çŠ¶æ€ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
   *
   * @param requestType è¯·æ±‚ç±»å‹
   * @param requestId è¯·æ±‚ID
   * @returns æ²»ç†çŠ¶æ€å“åº”
   */
  async getGovernanceStatus(
    requestType: GovernanceRequestType,
    requestId: number | string
  ): Promise<GovernanceStatusResponse | null> {
    try {
      switch (requestType) {
        case GovernanceRequestType.ContentAppeal:
          return await this._getContentAppealStatus(requestId);

        case GovernanceRequestType.OwnerOperationComplaint:
          return await this._getOwnerOperationComplaintStatus(requestId);

        case GovernanceRequestType.TextComplaint:
          return await this._getTextComplaintStatus(requestId);

        case GovernanceRequestType.MediaComplaint:
          return await this._getMediaComplaintStatus(requestId);

        default:
          throw new Error(`æœªçŸ¥çš„æ²»ç†è¯·æ±‚ç±»å‹: ${requestType}`);
      }
    } catch (error) {
      console.error('æŸ¥è¯¢æ²»ç†çŠ¶æ€å¤±è´¥:', error);
      return null;
    }
  }

  /**
   * è·å–ç”¨æˆ·æ‰€æœ‰æ²»ç†è¯·æ±‚
   *
   * @param account ç”¨æˆ·è´¦æˆ·åœ°å€
   * @param filterType å¯é€‰çš„ç±»å‹è¿‡æ»¤
   * @returns æ²»ç†è¯·æ±‚åˆ—è¡¨
   */
  async getUserGovernanceRequests(
    account: string,
    filterType?: GovernanceRequestType
  ): Promise<GovernanceStatusResponse[]> {
    // ä»å„ä¸ªæ¨¡å—èšåˆç”¨æˆ·çš„æ²»ç†è¯·æ±‚
    const requests: GovernanceStatusResponse[] = [];

    try {
      // 1. æŸ¥è¯¢ pallet-stardust-appeals ä¸­çš„ç”³è¯‰
      if (!filterType || filterType === GovernanceRequestType.ContentAppeal) {
        const appeals = await this._getUserAppeals(account);
        requests.push(...appeals);
      }

      // 2. æŸ¥è¯¢ pallet-deceased ä¸­çš„æŠ•è¯‰
      if (!filterType ||
          filterType === GovernanceRequestType.TextComplaint ||
          filterType === GovernanceRequestType.MediaComplaint) {
        const complaints = await this._getUserDeceasedComplaints(account);
        requests.push(...complaints);
      }

      // 3. æŸ¥è¯¢å…¶ä»–æ²»ç†æ¨¡å—ï¼ˆdemocracyã€arbitrationç­‰ï¼‰
      // ... æ ¹æ®éœ€è¦æ‰©å±•

      return requests;
    } catch (error) {
      console.error('è·å–ç”¨æˆ·æ²»ç†è¯·æ±‚å¤±è´¥:', error);
      return [];
    }
  }

  // ==================== ç§æœ‰å®ç°æ–¹æ³• ====================

  /**
   * æäº¤å†…å®¹ç”³è¯‰ï¼ˆé€šç”¨ç”³è¯‰æœºåˆ¶ï¼‰
   * è·¯ç”±åˆ°ï¼špallet-stardust-appeals::submit_appeal
   */
  private async _submitContentAppeal(
    params: ContentAppealParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    const tx = this.api.tx.stardustAppeals.submitAppeal(
      params.domain,
      params.targetId,
      params.action,
      params.reason,
      params.evidenceCid || null
    );

    return await this._sendTransaction(tx, signer);
  }

  /**
   * æäº¤æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰
   * è·¯ç”±åˆ°ï¼špallet-deceased::complain_owner_operation
   */
  private async _submitOwnerOperationComplaint(
    params: OwnerOperationComplaintParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    const tx = this.api.tx.deceased.complainOwnerOperation(
      params.operationId,
      params.reason,
      params.evidenceCid || null
    );

    return await this._sendTransaction(tx, signer);
  }

  /**
   * æäº¤Textå†…å®¹æŠ•è¯‰
   * è·¯ç”±åˆ°ï¼špallet-deceased::complain_text
   */
  private async _submitTextComplaint(
    params: TextComplaintParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    const tx = this.api.tx.deceased.complainText(
      params.textId,
      params.reason,
      params.evidenceCid || null
    );

    return await this._sendTransaction(tx, signer);
  }

  /**
   * æäº¤Mediaå†…å®¹æŠ•è¯‰
   * è·¯ç”±åˆ°ï¼špallet-deceased::complain_media
   */
  private async _submitMediaComplaint(
    params: MediaComplaintParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    const tx = this.api.tx.deceased.complainMedia(
      params.mediaId || null,
      params.albumId || null,
      params.videoCollectionId || null,
      params.reason,
      params.evidenceCid || null
    );

    return await this._sendTransaction(tx, signer);
  }

  /**
   * æäº¤ç”Ÿæ€ææ¡ˆ
   * è·¯ç”±åˆ°ï¼špallet-democracy::propose
   */
  private async _submitEcosystemProposal(
    params: EcosystemProposalParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    // å®ç°ç”Ÿæ€ææ¡ˆæäº¤é€»è¾‘
    throw new Error('ç”Ÿæ€ææ¡ˆåŠŸèƒ½å¾…å®ç°');
  }

  /**
   * æäº¤äº‰è®®ä»²è£
   * è·¯ç”±åˆ°ï¼špallet-arbitration::submit_dispute
   */
  private async _submitDisputeArbitration(
    params: DisputeArbitrationParams,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    // å®ç°ä»²è£æäº¤é€»è¾‘
    throw new Error('ä»²è£åŠŸèƒ½å¾…å®ç°');
  }

  /**
   * æŸ¥è¯¢å†…å®¹ç”³è¯‰çŠ¶æ€
   */
  private async _getContentAppealStatus(
    appealId: number | string
  ): Promise<GovernanceStatusResponse | null> {
    const appeal = await this.api.query.stardustAppeals.appeals(appealId);
    if (appeal.isNone) return null;

    const data = appeal.unwrap();
    return {
      requestType: GovernanceRequestType.ContentAppeal,
      status: this._mapAppealStatus(data.status.toString()),
      submitter: data.submitter.toString(),
      createdAt: data.createdAt.toNumber(),
      updatedAt: data.updatedAt?.toNumber() || data.createdAt.toNumber(),
      metadata: {
        domain: data.domain.toNumber(),
        targetId: data.targetId.toString(),
        action: data.action.toNumber(),
      },
    };
  }

  /**
   * æŸ¥è¯¢æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰çŠ¶æ€
   */
  private async _getOwnerOperationComplaintStatus(
    operationId: number | string
  ): Promise<GovernanceStatusResponse | null> {
    // å®ç°æŸ¥è¯¢é€»è¾‘
    throw new Error('å¾…å®ç°');
  }

  /**
   * æŸ¥è¯¢TextæŠ•è¯‰çŠ¶æ€
   */
  private async _getTextComplaintStatus(
    textId: number | string
  ): Promise<GovernanceStatusResponse | null> {
    const complaint = await this.api.query.deceased.textComplaints(textId);
    if (complaint.isNone) return null;

    const data = complaint.unwrap();
    return {
      requestType: GovernanceRequestType.TextComplaint,
      status: this._mapComplaintStatus(data.status.toString()),
      submitter: data.complainant.toString(),
      createdAt: data.created.toNumber(),
      updatedAt: data.created.toNumber(),
      metadata: {
        textId: textId.toString(),
        deposit: data.deposit.toString(),
      },
    };
  }

  /**
   * æŸ¥è¯¢MediaæŠ•è¯‰çŠ¶æ€
   */
  private async _getMediaComplaintStatus(
    mediaId: number | string
  ): Promise<GovernanceStatusResponse | null> {
    const complaint = await this.api.query.deceased.mediaComplaints(mediaId);
    if (complaint.isNone) return null;

    const data = complaint.unwrap();
    return {
      requestType: GovernanceRequestType.MediaComplaint,
      status: this._mapComplaintStatus(data.status.toString()),
      submitter: data.complainant.toString(),
      createdAt: data.created.toNumber(),
      updatedAt: data.created.toNumber(),
      metadata: {
        mediaId: mediaId.toString(),
        deposit: data.deposit.toString(),
      },
    };
  }

  /**
   * è·å–ç”¨æˆ·çš„ç”³è¯‰è®°å½•
   */
  private async _getUserAppeals(account: string): Promise<GovernanceStatusResponse[]> {
    // å®ç°æŸ¥è¯¢é€»è¾‘ï¼ˆéœ€è¦é€šè¿‡é“¾ä¸Šç´¢å¼•æˆ–äº‹ä»¶ç›‘å¬ï¼‰
    return [];
  }

  /**
   * è·å–ç”¨æˆ·çš„deceasedæ¨¡å—æŠ•è¯‰è®°å½•
   */
  private async _getUserDeceasedComplaints(account: string): Promise<GovernanceStatusResponse[]> {
    // å®ç°æŸ¥è¯¢é€»è¾‘
    return [];
  }

  /**
   * å‘é€äº¤æ˜“é€šç”¨æ–¹æ³•
   */
  private async _sendTransaction(
    tx: SubmittableExtrinsic<'promise'>,
    signer: KeyringPair
  ): Promise<GovernanceRequestResponse> {
    return new Promise((resolve) => {
      tx.signAndSend(signer, ({ status, events }) => {
        if (status.isInBlock || status.isFinalized) {
          const success = events.every(({ event }) =>
            !this.api.events.system.ExtrinsicFailed.is(event)
          );

          resolve({
            success,
            txHash: status.asInBlock.toString() || status.asFinalized.toString(),
            error: success ? undefined : 'äº¤æ˜“æ‰§è¡Œå¤±è´¥',
          });
        }
      }).catch((error) => {
        resolve({
          success: false,
          error: error.message,
        });
      });
    });
  }

  /**
   * æ˜ å°„ç”³è¯‰çŠ¶æ€åˆ°ç»Ÿä¸€çŠ¶æ€
   */
  private _mapAppealStatus(status: string): UnifiedGovernanceStatus {
    const statusMap: Record<string, UnifiedGovernanceStatus> = {
      'Submitted': UnifiedGovernanceStatus.Submitted,
      'Approved': UnifiedGovernanceStatus.Approved,
      'Rejected': UnifiedGovernanceStatus.Rejected,
      'InNoticePeriod': UnifiedGovernanceStatus.InNoticePeriod,
      'Executed': UnifiedGovernanceStatus.Executed,
      'Revoked': UnifiedGovernanceStatus.Revoked,
    };
    return statusMap[status] || UnifiedGovernanceStatus.Submitted;
  }

  /**
   * æ˜ å°„æŠ•è¯‰çŠ¶æ€åˆ°ç»Ÿä¸€çŠ¶æ€
   */
  private _mapComplaintStatus(status: string): UnifiedGovernanceStatus {
    const statusMap: Record<string, UnifiedGovernanceStatus> = {
      'Pending': UnifiedGovernanceStatus.UnderReview,
      'Resolved': UnifiedGovernanceStatus.Executed,
    };
    return statusMap[status] || UnifiedGovernanceStatus.Submitted;
  }
}

// ==================== React Hookå°è£… ====================

/**
 * React Hookï¼šä½¿ç”¨æ²»ç†æœåŠ¡
 */
export function useGovernance() {
  const { api } = useSubstrateContext();
  const governanceService = useMemo(() => new GovernanceService(api), [api]);

  return {
    submitGovernanceRequest: governanceService.submitGovernanceRequest.bind(governanceService),
    getGovernanceStatus: governanceService.getGovernanceStatus.bind(governanceService),
    getUserGovernanceRequests: governanceService.getUserGovernanceRequests.bind(governanceService),
  };
}
```

#### 2.1.3 ä½¿ç”¨ç¤ºä¾‹

```typescript
// ç¤ºä¾‹1ï¼šæäº¤å†…å®¹ç”³è¯‰
const { submitGovernanceRequest } = useGovernance();

const handleSubmitAppeal = async () => {
  const result = await submitGovernanceRequest(
    {
      type: GovernanceRequestType.ContentAppeal,
      domain: GovernanceDomain.Text,
      targetId: 123,
      action: GovernanceAction.Delete,
      reason: 'åŒ…å«ä¸å½“å†…å®¹',
      evidenceCid: 'QmXXX...',
    },
    signer
  );

  if (result.success) {
    message.success('ç”³è¯‰æäº¤æˆåŠŸï¼');
  } else {
    message.error(`ç”³è¯‰æäº¤å¤±è´¥ï¼š${result.error}`);
  }
};

// ç¤ºä¾‹2ï¼šæŸ¥è¯¢æ²»ç†çŠ¶æ€
const { getGovernanceStatus } = useGovernance();

const handleCheckStatus = async () => {
  const status = await getGovernanceStatus(
    GovernanceRequestType.ContentAppeal,
    appealId
  );

  if (status) {
    console.log('å½“å‰çŠ¶æ€ï¼š', status.status);
    console.log('æäº¤è€…ï¼š', status.submitter);
  }
};

// ç¤ºä¾‹3ï¼šè·å–ç”¨æˆ·æ‰€æœ‰æ²»ç†è¯·æ±‚
const { getUserGovernanceRequests } = useGovernance();

const handleGetMyRequests = async () => {
  const requests = await getUserGovernanceRequests(currentAccount);
  console.log('æˆ‘çš„æ²»ç†è¯·æ±‚ï¼š', requests);
};
```

#### 2.1.4 å®æ–½æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»º `governanceService.ts` æ–‡ä»¶
- [ ] å®ç°æ‰€æœ‰ç±»å‹å®šä¹‰ï¼ˆDomainã€Actionã€RequestTypeç­‰ï¼‰
- [ ] å®ç° `GovernanceService` æ ¸å¿ƒç±»
- [ ] å®ç° `submitGovernanceRequest` ç»Ÿä¸€æäº¤æ–¹æ³•
- [ ] å®ç° `getGovernanceStatus` ç»Ÿä¸€æŸ¥è¯¢æ–¹æ³•
- [ ] å®ç° `getUserGovernanceRequests` ç”¨æˆ·è¯·æ±‚èšåˆæ–¹æ³•
- [ ] å®ç°æ‰€æœ‰ç§æœ‰è·¯ç”±æ–¹æ³•ï¼ˆ`_submitContentAppeal`ç­‰ï¼‰
- [ ] å®ç°çŠ¶æ€æ˜ å°„æ–¹æ³•ï¼ˆ`_mapAppealStatus`ç­‰ï¼‰
- [ ] åˆ›å»º React Hookå°è£…ï¼ˆ`useGovernance`ï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹

---

### 2.2 æ²»ç†äº‹ä»¶æ ‡å‡†åŒ–

#### 2.2.1 ç›®æ ‡

æ ‡å‡†åŒ–æ‰€æœ‰æ²»ç†ç›¸å…³äº‹ä»¶çš„å‘½åå’Œç»“æ„ï¼Œä¾¿äºå‰ç«¯ç»Ÿä¸€ç›‘å¬å’Œå¤„ç†ï¼Œæå‡äº‹ä»¶ç›‘å¬çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

#### 2.2.2 äº‹ä»¶æ ‡å‡†åŒ–è§„èŒƒ

**å‘½åè§„èŒƒ**ï¼š
```
[Pallet][ActionObject][ActionType]
```

**ç¤ºä¾‹**ï¼š
- `StardustAppeals.AppealSubmitted` âœ…
- `StardustAppeals.AppealApproved` âœ…
- `Deceased.TextComplaintSubmitted` âœ…
- `Deceased.MediaComplaintResolved` âœ…

#### 2.2.3 æ ‡å‡†äº‹ä»¶ç»“æ„

```typescript
/**
 * ç»Ÿä¸€æ²»ç†äº‹ä»¶æ¥å£
 */
interface StandardGovernanceEvent {
  /** äº‹ä»¶åç§° */
  name: string;
  /** äº‹ä»¶æ‰€å±æ¨¡å— */
  pallet: string;
  /** äº‹ä»¶æ•°æ® */
  data: {
    /** è¯·æ±‚IDï¼ˆå¦‚æœé€‚ç”¨ï¼‰ */
    requestId?: number | string;
    /** æ“ä½œè€…è´¦æˆ· */
    actor: string;
    /** åŒºå—å· */
    blockNumber: number;
    /** åŒºå—å“ˆå¸Œ */
    blockHash: string;
    /** æ—¶é—´æˆ³ï¼ˆä¼°ç®—ï¼‰ */
    timestamp: number;
    /** äº‹ä»¶ç‰¹å®šæ•°æ® */
    metadata: Record<string, any>;
  };
}
```

#### 2.2.4 äº‹ä»¶ç›‘å¬æœåŠ¡

**æ–‡ä»¶ä½ç½®**ï¼š`stardust-dapp/src/services/governanceEventService.ts`

```typescript
import { ApiPromise } from '@polkadot/api';
import { EventRecord } from '@polkadot/types/interfaces';

/**
 * æ²»ç†äº‹ä»¶ç±»å‹æšä¸¾
 */
export enum GovernanceEventType {
  // pallet-stardust-appeals äº‹ä»¶
  AppealSubmitted = 'StardustAppeals.AppealSubmitted',
  AppealApproved = 'StardustAppeals.AppealApproved',
  AppealRejected = 'StardustAppeals.AppealRejected',
  AppealWithdrawn = 'StardustAppeals.AppealWithdrawn',
  AppealExecuted = 'StardustAppeals.AppealExecuted',

  // pallet-deceased äº‹ä»¶
  TextComplaintSubmitted = 'Deceased.TextComplaintSubmitted',
  TextComplaintResolved = 'Deceased.TextComplaintResolved',
  MediaComplaintSubmitted = 'Deceased.MediaComplaintSubmitted',
  MediaComplaintResolved = 'Deceased.MediaComplaintResolved',

  // pallet-democracy äº‹ä»¶
  ProposalSubmitted = 'Democracy.Proposed',
  VoteCast = 'Democracy.Voted',
  ProposalPassed = 'Democracy.Passed',
  ProposalNotPassed = 'Democracy.NotPassed',

  // pallet-arbitration äº‹ä»¶
  DisputeSubmitted = 'Arbitration.DisputeSubmitted',
  DisputeResolved = 'Arbitration.DisputeResolved',
}

/**
 * äº‹ä»¶ç›‘å¬å›è°ƒç±»å‹
 */
type EventCallback = (event: StandardGovernanceEvent) => void;

/**
 * æ²»ç†äº‹ä»¶ç›‘å¬æœåŠ¡
 */
export class GovernanceEventService {
  private api: ApiPromise;
  private listeners: Map<GovernanceEventType, Set<EventCallback>>;
  private unsubscribe?: () => void;

  constructor(api: ApiPromise) {
    this.api = api;
    this.listeners = new Map();
  }

  /**
   * è®¢é˜…æ²»ç†äº‹ä»¶
   *
   * @param eventType äº‹ä»¶ç±»å‹
   * @param callback å›è°ƒå‡½æ•°
   * @returns å–æ¶ˆè®¢é˜…å‡½æ•°
   */
  subscribe(eventType: GovernanceEventType, callback: EventCallback): () => void {
    if (!this.listeners.has(eventType)) {
      this.listeners.set(eventType, new Set());
    }
    this.listeners.get(eventType)!.add(callback);

    // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¢é˜…ï¼Œå¯åŠ¨å…¨å±€äº‹ä»¶ç›‘å¬
    if (!this.unsubscribe) {
      this._startListening();
    }

    // è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°
    return () => {
      const callbacks = this.listeners.get(eventType);
      if (callbacks) {
        callbacks.delete(callback);
        if (callbacks.size === 0) {
          this.listeners.delete(eventType);
        }
      }

      // å¦‚æœæ²¡æœ‰ä»»ä½•è®¢é˜…ï¼Œåœæ­¢å…¨å±€ç›‘å¬
      if (this.listeners.size === 0) {
        this._stopListening();
      }
    };
  }

  /**
   * è®¢é˜…å¤šä¸ªäº‹ä»¶ç±»å‹
   *
   * @param eventTypes äº‹ä»¶ç±»å‹æ•°ç»„
   * @param callback å›è°ƒå‡½æ•°
   * @returns å–æ¶ˆè®¢é˜…å‡½æ•°
   */
  subscribeMultiple(eventTypes: GovernanceEventType[], callback: EventCallback): () => void {
    const unsubscribes = eventTypes.map(type => this.subscribe(type, callback));
    return () => unsubscribes.forEach(unsub => unsub());
  }

  /**
   * è®¢é˜…æ‰€æœ‰æ²»ç†äº‹ä»¶
   *
   * @param callback å›è°ƒå‡½æ•°
   * @returns å–æ¶ˆè®¢é˜…å‡½æ•°
   */
  subscribeAll(callback: EventCallback): () => void {
    const allEventTypes = Object.values(GovernanceEventType);
    return this.subscribeMultiple(allEventTypes, callback);
  }

  /**
   * å¯åŠ¨å…¨å±€äº‹ä»¶ç›‘å¬
   */
  private async _startListening(): Promise<void> {
    this.unsubscribe = await this.api.query.system.events((events: EventRecord[]) => {
      events.forEach((record) => {
        const { event } = record;
        const eventName = `${event.section}.${event.method}`;

        // æŸ¥æ‰¾åŒ¹é…çš„äº‹ä»¶ç±»å‹
        const matchedType = Object.values(GovernanceEventType).find(
          type => type === eventName
        );

        if (matchedType && this.listeners.has(matchedType)) {
          const standardEvent = this._transformEvent(record);
          const callbacks = this.listeners.get(matchedType)!;
          callbacks.forEach(callback => {
            try {
              callback(standardEvent);
            } catch (error) {
              console.error('äº‹ä»¶å›è°ƒæ‰§è¡Œå¤±è´¥:', error);
            }
          });
        }
      });
    });
  }

  /**
   * åœæ­¢å…¨å±€äº‹ä»¶ç›‘å¬
   */
  private _stopListening(): void {
    if (this.unsubscribe) {
      this.unsubscribe();
      this.unsubscribe = undefined;
    }
  }

  /**
   * è½¬æ¢é“¾ä¸Šäº‹ä»¶ä¸ºæ ‡å‡†äº‹ä»¶æ ¼å¼
   */
  private _transformEvent(record: EventRecord): StandardGovernanceEvent {
    const { event, phase } = record;
    const eventName = `${event.section}.${event.method}`;

    return {
      name: eventName,
      pallet: event.section,
      data: {
        actor: event.data[0]?.toString() || 'unknown',
        blockNumber: phase.isApplyExtrinsic ? phase.asApplyExtrinsic.toNumber() : 0,
        blockHash: '', // éœ€è¦ä»å…¶ä»–åœ°æ–¹è·å–
        timestamp: Date.now(),
        metadata: this._extractEventMetadata(event),
      },
    };
  }

  /**
   * æå–äº‹ä»¶å…ƒæ•°æ®
   */
  private _extractEventMetadata(event: any): Record<string, any> {
    const metadata: Record<string, any> = {};

    event.data.forEach((data: any, index: number) => {
      metadata[`arg${index}`] = data.toString();
    });

    return metadata;
  }
}

// ==================== React Hookå°è£… ====================

/**
 * React Hookï¼šç›‘å¬æ²»ç†äº‹ä»¶
 */
export function useGovernanceEvents(
  eventTypes: GovernanceEventType | GovernanceEventType[] | 'all',
  callback: EventCallback
) {
  const { api } = useSubstrateContext();
  const eventService = useMemo(() => new GovernanceEventService(api), [api]);

  useEffect(() => {
    let unsubscribe: () => void;

    if (eventTypes === 'all') {
      unsubscribe = eventService.subscribeAll(callback);
    } else if (Array.isArray(eventTypes)) {
      unsubscribe = eventService.subscribeMultiple(eventTypes, callback);
    } else {
      unsubscribe = eventService.subscribe(eventTypes, callback);
    }

    return () => unsubscribe();
  }, [eventTypes, callback, eventService]);
}
```

#### 2.2.5 ä½¿ç”¨ç¤ºä¾‹

```typescript
// ç¤ºä¾‹1ï¼šç›‘å¬å•ä¸ªäº‹ä»¶ç±»å‹
useGovernanceEvents(GovernanceEventType.AppealSubmitted, (event) => {
  console.log('ç”³è¯‰å·²æäº¤:', event);
  message.info(`ç”¨æˆ· ${event.data.actor} æäº¤äº†ç”³è¯‰`);
});

// ç¤ºä¾‹2ï¼šç›‘å¬å¤šä¸ªäº‹ä»¶ç±»å‹
useGovernanceEvents(
  [
    GovernanceEventType.AppealSubmitted,
    GovernanceEventType.AppealApproved,
    GovernanceEventType.AppealRejected,
  ],
  (event) => {
    console.log('ç”³è¯‰çŠ¶æ€å˜æ›´:', event);
    // æ›´æ–°UIçŠ¶æ€
  }
);

// ç¤ºä¾‹3ï¼šç›‘å¬æ‰€æœ‰æ²»ç†äº‹ä»¶
useGovernanceEvents('all', (event) => {
  console.log('æ²»ç†äº‹ä»¶:', event);
  // è®°å½•åˆ°æ—¥å¿—æˆ–åˆ†æç³»ç»Ÿ
});
```

#### 2.2.6 å®æ–½æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»º `governanceEventService.ts` æ–‡ä»¶
- [ ] å®šä¹‰ `GovernanceEventType` æšä¸¾
- [ ] å®šä¹‰ `StandardGovernanceEvent` æ¥å£
- [ ] å®ç° `GovernanceEventService` æ ¸å¿ƒç±»
- [ ] å®ç° `subscribe` æ–¹æ³•
- [ ] å®ç° `subscribeMultiple` æ–¹æ³•
- [ ] å®ç° `subscribeAll` æ–¹æ³•
- [ ] å®ç°äº‹ä»¶è½¬æ¢æ–¹æ³• `_transformEvent`
- [ ] åˆ›å»º React Hookå°è£… `useGovernanceEvents`
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹

---

## 3. çŸ­æœŸå®æ–½é˜¶æ®µï¼ˆ2-4å‘¨ï¼‰

### 3.1 pallet-governance-paramsæ¨¡å—å¼€å‘

#### 3.1.1 ç›®æ ‡

åˆ›å»º `pallet-governance-params` æ¨¡å—ï¼Œé›†ä¸­ç®¡ç†æ‰€æœ‰æ²»ç†ç›¸å…³å‚æ•°ï¼Œä¾¿äºç»Ÿä¸€è°ƒæ•´å’Œå®¡è®¡ã€‚

#### 3.1.2 æŠ€æœ¯è®¾è®¡

**æ–‡ä»¶ä½ç½®**ï¼š`pallets/governance-params/src/lib.rs`

```rust
// pallets/governance-params/src/lib.rs

#![cfg_attr(not(feature = "std"), no_std)]

pub use pallet::*;

#[frame_support::pallet]
pub mod pallet {
    use frame_support::{
        pallet_prelude::*,
        traits::{Currency, ReservableCurrency},
    };
    use frame_system::pallet_prelude::*;
    use sp_runtime::traits::Zero;

    type BalanceOf<T> = <<T as Config>::Currency as Currency<<T as frame_system::Config>::AccountId>>::Balance;

    /// æŠ¼é‡‘å‚æ•°ç±»å‹
    #[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Debug)]
    pub struct DepositParams<Balance> {
        /// åŸºç¡€æŠ¼é‡‘
        pub base: Balance,
        /// æœ€å°æŠ¼é‡‘
        pub min: Balance,
        /// æœ€å¤§æŠ¼é‡‘
        pub max: Balance,
        /// æŠ¼é‡‘è®¡ç®—å› å­ï¼ˆç”¨äºåŠ¨æ€è®¡ç®—ï¼‰
        pub factor: u32,
    }

    /// æœŸé™å‚æ•°ç±»å‹ï¼ˆä»¥åŒºå—æ•°è®¡ï¼‰
    #[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Debug)]
    pub struct PeriodParams<BlockNumber> {
        /// å…¬ç¤ºæœŸï¼ˆç”³è¯‰æ‰¹å‡†åçš„å…¬ç¤ºæœŸï¼‰
        pub notice_period: BlockNumber,
        /// æŠ•ç¥¨æœŸï¼ˆææ¡ˆæŠ•ç¥¨æœŸï¼‰
        pub voting_period: BlockNumber,
        /// æ‰§è¡Œå»¶è¿Ÿï¼ˆææ¡ˆæ‰§è¡Œå»¶è¿ŸæœŸï¼‰
        pub execution_delay: BlockNumber,
        /// æŠ•è¯‰æœŸï¼ˆå†…å®¹å¯è¢«æŠ•è¯‰çš„æœŸé™ï¼‰
        pub complaint_period: BlockNumber,
    }

    /// è´¹ç‡å‚æ•°ç±»å‹ï¼ˆä»¥åƒåˆ†ä¹‹ä¸ºå•ä½ï¼‰
    #[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Debug)]
    pub struct RateParams {
        /// æŠ•è¯‰æˆåŠŸæ—¶æŠ•è¯‰äººåˆ†é…æ¯”ä¾‹ï¼ˆåƒåˆ†ä¹‹ï¼‰
        pub complainant_share: u32,
        /// æŠ•è¯‰æˆåŠŸæ—¶å§”å‘˜ä¼šåˆ†é…æ¯”ä¾‹ï¼ˆåƒåˆ†ä¹‹ï¼‰
        pub committee_share: u32,
        /// æŠ•è¯‰å¤±è´¥æ—¶æ‹¥æœ‰è€…åˆ†é…æ¯”ä¾‹ï¼ˆåƒåˆ†ä¹‹ï¼‰
        pub owner_share: u32,
    }

    /// é˜ˆå€¼å‚æ•°ç±»å‹
    #[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Debug)]
    pub struct ThresholdParams<Balance> {
        /// ææ¡ˆåˆ›å»ºé—¨æ§›ï¼ˆä»£å¸æŒæœ‰é‡ï¼‰
        pub proposal_threshold: Balance,
        /// æŠ•ç¥¨é€šè¿‡é—¨æ§›ï¼ˆç™¾åˆ†æ¯”ï¼‰
        pub voting_threshold: u32,
        /// ä»²è£è´¹ç”¨é—¨æ§›
        pub arbitration_threshold: Balance,
    }

    #[pallet::config]
    pub trait Config: frame_system::Config {
        type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
        type Currency: Currency<Self::AccountId> + ReservableCurrency<Self::AccountId>;

        /// æ²»ç†èµ·æºï¼ˆRootæˆ–å§”å‘˜ä¼šï¼‰
        type GovernanceOrigin: EnsureOrigin<Self::RuntimeOrigin>;
    }

    #[pallet::pallet]
    pub struct Pallet<T>(_);

    /// ç”³è¯‰æŠ¼é‡‘å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn appeal_deposit_params)]
    pub type AppealDepositParams<T: Config> =
        StorageValue<_, DepositParams<BalanceOf<T>>, ValueQuery>;

    /// æŠ•è¯‰æŠ¼é‡‘å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn complaint_deposit_params)]
    pub type ComplaintDepositParams<T: Config> =
        StorageValue<_, DepositParams<BalanceOf<T>>, ValueQuery>;

    /// éæ‹¥æœ‰è€…æ“ä½œæŠ¼é‡‘å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn non_owner_operation_deposit_params)]
    pub type NonOwnerOperationDepositParams<T: Config> =
        StorageValue<_, DepositParams<BalanceOf<T>>, ValueQuery>;

    /// æœŸé™å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn period_params)]
    pub type PeriodParamsStorage<T: Config> =
        StorageValue<_, PeriodParams<BlockNumberFor<T>>, ValueQuery>;

    /// è´¹ç‡å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn rate_params)]
    pub type RateParamsStorage<T: Config> =
        StorageValue<_, RateParams, ValueQuery>;

    /// é˜ˆå€¼å‚æ•°
    #[pallet::storage]
    #[pallet::getter(fn threshold_params)]
    pub type ThresholdParamsStorage<T: Config> =
        StorageValue<_, ThresholdParams<BalanceOf<T>>, ValueQuery>;

    #[pallet::event]
    #[pallet::generate_deposit(pub(super) fn deposit_event)]
    pub enum Event<T: Config> {
        /// ç”³è¯‰æŠ¼é‡‘å‚æ•°å·²æ›´æ–°
        AppealDepositParamsUpdated {
            old: DepositParams<BalanceOf<T>>,
            new: DepositParams<BalanceOf<T>>,
        },
        /// æŠ•è¯‰æŠ¼é‡‘å‚æ•°å·²æ›´æ–°
        ComplaintDepositParamsUpdated {
            old: DepositParams<BalanceOf<T>>,
            new: DepositParams<BalanceOf<T>>,
        },
        /// éæ‹¥æœ‰è€…æ“ä½œæŠ¼é‡‘å‚æ•°å·²æ›´æ–°
        NonOwnerOperationDepositParamsUpdated {
            old: DepositParams<BalanceOf<T>>,
            new: DepositParams<BalanceOf<T>>,
        },
        /// æœŸé™å‚æ•°å·²æ›´æ–°
        PeriodParamsUpdated {
            old: PeriodParams<BlockNumberFor<T>>,
            new: PeriodParams<BlockNumberFor<T>>,
        },
        /// è´¹ç‡å‚æ•°å·²æ›´æ–°
        RateParamsUpdated {
            old: RateParams,
            new: RateParams,
        },
        /// é˜ˆå€¼å‚æ•°å·²æ›´æ–°
        ThresholdParamsUpdated {
            old: ThresholdParams<BalanceOf<T>>,
            new: ThresholdParams<BalanceOf<T>>,
        },
    }

    #[pallet::error]
    pub enum Error<T> {
        /// æ— æ•ˆçš„å‚æ•°å€¼
        InvalidParams,
        /// æ— æƒé™æ“ä½œ
        NoPermission,
    }

    #[pallet::genesis_config]
    pub struct GenesisConfig<T: Config> {
        pub appeal_deposit: DepositParams<BalanceOf<T>>,
        pub complaint_deposit: DepositParams<BalanceOf<T>>,
        pub non_owner_operation_deposit: DepositParams<BalanceOf<T>>,
        pub periods: PeriodParams<BlockNumberFor<T>>,
        pub rates: RateParams,
        pub thresholds: ThresholdParams<BalanceOf<T>>,
    }

    impl<T: Config> Default for GenesisConfig<T> {
        fn default() -> Self {
            Self {
                appeal_deposit: DepositParams {
                    base: 20u32.into(),
                    min: 10u32.into(),
                    max: 100u32.into(),
                    factor: 100,
                },
                complaint_deposit: DepositParams {
                    base: 5u32.into(),
                    min: 5u32.into(),
                    max: 50u32.into(),
                    factor: 100,
                },
                non_owner_operation_deposit: DepositParams {
                    base: 2u32.into(),
                    min: 2u32.into(),
                    max: 10u32.into(),
                    factor: 100,
                },
                periods: PeriodParams {
                    notice_period: 7u32.into(),
                    voting_period: 6u32.into(),
                    execution_delay: 2u32.into(),
                    complaint_period: 30u32.into(),
                },
                rates: RateParams {
                    complainant_share: 800, // 80%
                    committee_share: 200,   // 20%
                    owner_share: 800,       // 80%
                },
                thresholds: ThresholdParams {
                    proposal_threshold: 100u32.into(),
                    voting_threshold: 51, // 51%
                    arbitration_threshold: 50u32.into(),
                },
            }
        }
    }

    #[pallet::genesis_build]
    impl<T: Config> BuildGenesisConfig for GenesisConfig<T> {
        fn build(&self) {
            AppealDepositParams::<T>::put(&self.appeal_deposit);
            ComplaintDepositParams::<T>::put(&self.complaint_deposit);
            NonOwnerOperationDepositParams::<T>::put(&self.non_owner_operation_deposit);
            PeriodParamsStorage::<T>::put(&self.periods);
            RateParamsStorage::<T>::put(&self.rates);
            ThresholdParamsStorage::<T>::put(&self.thresholds);
        }
    }

    #[pallet::call]
    impl<T: Config> Pallet<T> {
        /// æ›´æ–°ç”³è¯‰æŠ¼é‡‘å‚æ•°
        ///
        /// å‡½æ•°çº§è¯¦ç»†ä¸­æ–‡æ³¨é‡Šï¼š
        /// - ä»…æ²»ç†èµ·æºå¯è°ƒç”¨
        /// - æ›´æ–°ç”³è¯‰ç›¸å…³çš„æŠ¼é‡‘å‚æ•°
        /// - å‘å‡ºäº‹ä»¶è®°å½•å‚æ•°å˜æ›´
        #[pallet::call_index(0)]
        #[pallet::weight(10_000)]
        pub fn update_appeal_deposit_params(
            origin: OriginFor<T>,
            new_params: DepositParams<BalanceOf<T>>,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            ensure!(
                new_params.min <= new_params.base && new_params.base <= new_params.max,
                Error::<T>::InvalidParams
            );

            let old_params = AppealDepositParams::<T>::get();
            AppealDepositParams::<T>::put(&new_params);

            Self::deposit_event(Event::AppealDepositParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }

        /// æ›´æ–°æŠ•è¯‰æŠ¼é‡‘å‚æ•°
        #[pallet::call_index(1)]
        #[pallet::weight(10_000)]
        pub fn update_complaint_deposit_params(
            origin: OriginFor<T>,
            new_params: DepositParams<BalanceOf<T>>,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            ensure!(
                new_params.min <= new_params.base && new_params.base <= new_params.max,
                Error::<T>::InvalidParams
            );

            let old_params = ComplaintDepositParams::<T>::get();
            ComplaintDepositParams::<T>::put(&new_params);

            Self::deposit_event(Event::ComplaintDepositParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }

        /// æ›´æ–°éæ‹¥æœ‰è€…æ“ä½œæŠ¼é‡‘å‚æ•°
        #[pallet::call_index(2)]
        #[pallet::weight(10_000)]
        pub fn update_non_owner_operation_deposit_params(
            origin: OriginFor<T>,
            new_params: DepositParams<BalanceOf<T>>,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            ensure!(
                new_params.min <= new_params.base && new_params.base <= new_params.max,
                Error::<T>::InvalidParams
            );

            let old_params = NonOwnerOperationDepositParams::<T>::get();
            NonOwnerOperationDepositParams::<T>::put(&new_params);

            Self::deposit_event(Event::NonOwnerOperationDepositParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }

        /// æ›´æ–°æœŸé™å‚æ•°
        #[pallet::call_index(3)]
        #[pallet::weight(10_000)]
        pub fn update_period_params(
            origin: OriginFor<T>,
            new_params: PeriodParams<BlockNumberFor<T>>,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            let old_params = PeriodParamsStorage::<T>::get();
            PeriodParamsStorage::<T>::put(&new_params);

            Self::deposit_event(Event::PeriodParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }

        /// æ›´æ–°è´¹ç‡å‚æ•°
        #[pallet::call_index(4)]
        #[pallet::weight(10_000)]
        pub fn update_rate_params(
            origin: OriginFor<T>,
            new_params: RateParams,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            ensure!(
                new_params.complainant_share + new_params.committee_share <= 1000,
                Error::<T>::InvalidParams
            );

            let old_params = RateParamsStorage::<T>::get();
            RateParamsStorage::<T>::put(&new_params);

            Self::deposit_event(Event::RateParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }

        /// æ›´æ–°é˜ˆå€¼å‚æ•°
        #[pallet::call_index(5)]
        #[pallet::weight(10_000)]
        pub fn update_threshold_params(
            origin: OriginFor<T>,
            new_params: ThresholdParams<BalanceOf<T>>,
        ) -> DispatchResult {
            T::GovernanceOrigin::ensure_origin(origin)?;

            ensure!(
                new_params.voting_threshold > 0 && new_params.voting_threshold <= 100,
                Error::<T>::InvalidParams
            );

            let old_params = ThresholdParamsStorage::<T>::get();
            ThresholdParamsStorage::<T>::put(&new_params);

            Self::deposit_event(Event::ThresholdParamsUpdated {
                old: old_params,
                new: new_params,
            });

            Ok(())
        }
    }

    impl<T: Config> Pallet<T> {
        /// è·å–ç”³è¯‰åŸºç¡€æŠ¼é‡‘
        pub fn get_appeal_base_deposit() -> BalanceOf<T> {
            Self::appeal_deposit_params().base
        }

        /// è·å–æŠ•è¯‰åŸºç¡€æŠ¼é‡‘
        pub fn get_complaint_base_deposit() -> BalanceOf<T> {
            Self::complaint_deposit_params().base
        }

        /// è·å–éæ‹¥æœ‰è€…æ“ä½œåŸºç¡€æŠ¼é‡‘
        pub fn get_non_owner_operation_base_deposit() -> BalanceOf<T> {
            Self::non_owner_operation_deposit_params().base
        }

        /// è·å–å…¬ç¤ºæœŸ
        pub fn get_notice_period() -> BlockNumberFor<T> {
            Self::period_params().notice_period
        }

        /// è·å–æŠ•è¯‰æœŸ
        pub fn get_complaint_period() -> BlockNumberFor<T> {
            Self::period_params().complaint_period
        }

        /// è·å–æŠ•è¯‰äººåˆ†é…æ¯”ä¾‹
        pub fn get_complainant_share() -> u32 {
            Self::rate_params().complainant_share
        }

        /// è·å–å§”å‘˜ä¼šåˆ†é…æ¯”ä¾‹
        pub fn get_committee_share() -> u32 {
            Self::rate_params().committee_share
        }
    }
}
```

#### 3.1.3 é›†æˆåˆ°Runtime

```rust
// runtime/src/lib.rs

// æ·»åŠ åˆ° construct_runtime! å®ä¸­
GovernanceParams: pallet_governance_params,

// é…ç½®å®ç°
impl pallet_governance_params::Config for Runtime {
    type RuntimeEvent = RuntimeEvent;
    type Currency = Balances;
    type GovernanceOrigin = EnsureRoot<AccountId>;
}
```

#### 3.1.4 å…¶ä»–æ¨¡å—è¿ç§»ç¤ºä¾‹

```rust
// ä¾‹ï¼špallet-stardust-appeals è¿ç§»åˆ°ä½¿ç”¨é›†ä¸­å‚æ•°

// åŸæ¥çš„ç¡¬ç¼–ç å‚æ•°
// const BASE_DEPOSIT: Balance = 20 * UNIT;

// è¿ç§»åä» pallet-governance-params è·å–
use pallet_governance_params::Pallet as GovernanceParams;

let base_deposit = GovernanceParams::<T>::get_appeal_base_deposit();
```

#### 3.1.5 å®æ–½æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»º `pallets/governance-params` ç›®å½•
- [ ] å®ç° `lib.rs` æ ¸å¿ƒé€»è¾‘
- [ ] å®šä¹‰æ‰€æœ‰å‚æ•°ç±»å‹ï¼ˆDepositã€Periodã€Rateã€Thresholdï¼‰
- [ ] å®ç°æ‰€æœ‰Storageå­˜å‚¨é¡¹
- [ ] å®ç°æ‰€æœ‰Extrinsicè°ƒç”¨ï¼ˆupdate_*_paramsï¼‰
- [ ] å®ç°GenesisConfigåˆå§‹åŒ–
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] åˆ›å»ºREADMEæ–‡æ¡£
- [ ] é›†æˆåˆ°Runtimeé…ç½®
- [ ] è¿ç§»ç°æœ‰æ¨¡å—ä½¿ç”¨æ–°å‚æ•°ç³»ç»Ÿ
- [ ] ç¼–å†™è¿ç§»è„šæœ¬å’Œæ–‡æ¡£

---

### 3.2 æ²»ç†ä»ªè¡¨ç›˜å¼€å‘

#### 3.2.1 ç›®æ ‡

å¼€å‘æ²»ç†ä»ªè¡¨ç›˜å‰ç«¯é¡µé¢ï¼Œç»Ÿä¸€å±•ç¤ºæ‰€æœ‰æ²»ç†æ´»åŠ¨ï¼Œæå‡æ²»ç†é€æ˜åº¦å’Œå¯è§‚æµ‹æ€§ã€‚

#### 3.2.2 æŠ€æœ¯è®¾è®¡

**æ–‡ä»¶ä½ç½®**ï¼š`stardust-dapp/src/features/governance/GovernanceDashboardPage.tsx`

```typescript
import React, { useState, useEffect } from 'react';
import { Card, Tabs, Table, Tag, Statistic, Row, Col, Select, DatePicker, Button } from 'antd';
import {
  CheckCircleOutlined,
  CloseCircleOutlined,
  ClockCircleOutlined,
  LineChartOutlined,
  FileTextOutlined,
  TeamOutlined,
} from '@ant-design/icons';
import { useGovernance } from '@/services/governanceService';
import { useGovernanceEvents } from '@/services/governanceEventService';
import type { GovernanceStatusResponse, GovernanceRequestType } from '@/services/governanceService';
import type { UnifiedGovernanceStatus } from '@/services/governanceService';

/**
 * æ²»ç†ä»ªè¡¨ç›˜é¡µé¢
 */
export default function GovernanceDashboardPage() {
  const { getUserGovernanceRequests } = useGovernance();
  const [requests, setRequests] = useState<GovernanceStatusResponse[]>([]);
  const [loading, setLoading] = useState(false);
  const [filter, setFilter] = useState<{
    type?: GovernanceRequestType;
    status?: UnifiedGovernanceStatus;
  }>({});

  // åŠ è½½æ²»ç†è¯·æ±‚
  useEffect(() => {
    loadRequests();
  }, [filter]);

  const loadRequests = async () => {
    setLoading(true);
    try {
      const data = await getUserGovernanceRequests(
        currentAccount,
        filter.type
      );

      // åº”ç”¨çŠ¶æ€è¿‡æ»¤
      const filtered = filter.status
        ? data.filter(r => r.status === filter.status)
        : data;

      setRequests(filtered);
    } catch (error) {
      console.error('åŠ è½½æ²»ç†è¯·æ±‚å¤±è´¥:', error);
    } finally {
      setLoading(false);
    }
  };

  // ç›‘å¬æ²»ç†äº‹ä»¶ï¼Œå®æ—¶æ›´æ–°
  useGovernanceEvents('all', (event) => {
    console.log('æ”¶åˆ°æ²»ç†äº‹ä»¶:', event);
    loadRequests(); // é‡æ–°åŠ è½½æ•°æ®
  });

  return (
    <div className="governance-dashboard">
      <h1>æ²»ç†ä»ªè¡¨ç›˜</h1>

      {/* ç»Ÿè®¡æ¦‚è§ˆ */}
      <Row gutter={16} style={{ marginBottom: 24 }}>
        <Col span={6}>
          <Card>
            <Statistic
              title="æ€»è¯·æ±‚æ•°"
              value={requests.length}
              prefix={<FileTextOutlined />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="å¾…å®¡æ ¸"
              value={requests.filter(r => r.status === 'under_review').length}
              prefix={<ClockCircleOutlined />}
              valueStyle={{ color: '#faad14' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="å·²æ‰¹å‡†"
              value={requests.filter(r => r.status === 'approved').length}
              prefix={<CheckCircleOutlined />}
              valueStyle={{ color: '#52c41a' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="å·²é©³å›"
              value={requests.filter(r => r.status === 'rejected').length}
              prefix={<CloseCircleOutlined />}
              valueStyle={{ color: '#ff4d4f' }}
            />
          </Card>
        </Col>
      </Row>

      {/* ç­›é€‰å™¨ */}
      <Card style={{ marginBottom: 24 }}>
        <Row gutter={16}>
          <Col span={8}>
            <Select
              placeholder="è¯·æ±‚ç±»å‹"
              style={{ width: '100%' }}
              allowClear
              onChange={(value) => setFilter({ ...filter, type: value })}
            >
              <Select.Option value="content_appeal">å†…å®¹ç”³è¯‰</Select.Option>
              <Select.Option value="owner_operation_complaint">æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰</Select.Option>
              <Select.Option value="text_complaint">TextæŠ•è¯‰</Select.Option>
              <Select.Option value="media_complaint">MediaæŠ•è¯‰</Select.Option>
            </Select>
          </Col>
          <Col span={8}>
            <Select
              placeholder="çŠ¶æ€"
              style={{ width: '100%' }}
              allowClear
              onChange={(value) => setFilter({ ...filter, status: value })}
            >
              <Select.Option value="submitted">å·²æäº¤</Select.Option>
              <Select.Option value="under_review">å®¡æ ¸ä¸­</Select.Option>
              <Select.Option value="approved">å·²æ‰¹å‡†</Select.Option>
              <Select.Option value="rejected">å·²é©³å›</Select.Option>
              <Select.Option value="executed">å·²æ‰§è¡Œ</Select.Option>
            </Select>
          </Col>
          <Col span={8}>
            <Button type="primary" onClick={loadRequests}>
              åˆ·æ–°
            </Button>
          </Col>
        </Row>
      </Card>

      {/* æ²»ç†è¯·æ±‚åˆ—è¡¨ */}
      <Card>
        <Tabs defaultActiveKey="all">
          <Tabs.TabPane tab="å…¨éƒ¨è¯·æ±‚" key="all">
            <GovernanceRequestTable data={requests} loading={loading} />
          </Tabs.TabPane>
          <Tabs.TabPane tab="æˆ‘çš„ç”³è¯‰" key="appeals">
            <GovernanceRequestTable
              data={requests.filter(r => r.requestType === 'content_appeal')}
              loading={loading}
            />
          </Tabs.TabPane>
          <Tabs.TabPane tab="æˆ‘çš„æŠ•è¯‰" key="complaints">
            <GovernanceRequestTable
              data={requests.filter(r =>
                r.requestType.includes('complaint')
              )}
              loading={loading}
            />
          </Tabs.TabPane>
        </Tabs>
      </Card>
    </div>
  );
}

/**
 * æ²»ç†è¯·æ±‚è¡¨æ ¼ç»„ä»¶
 */
function GovernanceRequestTable({
  data,
  loading
}: {
  data: GovernanceStatusResponse[];
  loading: boolean;
}) {
  const columns = [
    {
      title: 'ID',
      dataIndex: 'requestId',
      key: 'requestId',
      width: 80,
    },
    {
      title: 'ç±»å‹',
      dataIndex: 'requestType',
      key: 'requestType',
      render: (type: string) => {
        const typeMap: Record<string, { text: string; color: string }> = {
          'content_appeal': { text: 'å†…å®¹ç”³è¯‰', color: 'blue' },
          'owner_operation_complaint': { text: 'æ‹¥æœ‰è€…æ“ä½œæŠ•è¯‰', color: 'orange' },
          'text_complaint': { text: 'TextæŠ•è¯‰', color: 'purple' },
          'media_complaint': { text: 'MediaæŠ•è¯‰', color: 'cyan' },
        };
        const config = typeMap[type] || { text: type, color: 'default' };
        return <Tag color={config.color}>{config.text}</Tag>;
      },
    },
    {
      title: 'çŠ¶æ€',
      dataIndex: 'status',
      key: 'status',
      render: (status: string) => {
        const statusMap: Record<string, { text: string; color: string }> = {
          'submitted': { text: 'å·²æäº¤', color: 'default' },
          'under_review': { text: 'å®¡æ ¸ä¸­', color: 'processing' },
          'approved': { text: 'å·²æ‰¹å‡†', color: 'success' },
          'rejected': { text: 'å·²é©³å›', color: 'error' },
          'in_notice_period': { text: 'å…¬ç¤ºä¸­', color: 'warning' },
          'executed': { text: 'å·²æ‰§è¡Œ', color: 'success' },
        };
        const config = statusMap[status] || { text: status, color: 'default' };
        return <Tag color={config.color}>{config.text}</Tag>;
      },
    },
    {
      title: 'æäº¤è€…',
      dataIndex: 'submitter',
      key: 'submitter',
      render: (submitter: string) => submitter.slice(0, 8) + '...',
    },
    {
      title: 'åˆ›å»ºæ—¶é—´',
      dataIndex: 'createdAt',
      key: 'createdAt',
      render: (block: number) => `åŒºå— #${block}`,
    },
    {
      title: 'æ“ä½œ',
      key: 'action',
      render: (_: any, record: GovernanceStatusResponse) => (
        <Button type="link" size="small">
          æŸ¥çœ‹è¯¦æƒ…
        </Button>
      ),
    },
  ];

  return (
    <Table
      columns={columns}
      dataSource={data}
      loading={loading}
      rowKey={(record) => `${record.requestType}-${record.createdAt}`}
      pagination={{
        pageSize: 10,
        showSizeChanger: true,
        showTotal: (total) => `å…± ${total} æ¡è®°å½•`,
      }}
    />
  );
}
```

#### 3.2.3 è·¯ç”±é…ç½®

```typescript
// stardust-dapp/src/routes.tsx

import GovernanceDashboardPage from '@/features/governance/GovernanceDashboardPage';

export const routes = [
  // ... å…¶ä»–è·¯ç”±
  {
    path: '/governance/dashboard',
    element: <GovernanceDashboardPage />,
    name: 'æ²»ç†ä»ªè¡¨ç›˜',
  },
];
```

#### 3.2.4 å®æ–½æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»º `GovernanceDashboardPage.tsx` ç»„ä»¶
- [ ] å®ç°ç»Ÿè®¡æ¦‚è§ˆå¡ç‰‡
- [ ] å®ç°ç­›é€‰å™¨åŠŸèƒ½
- [ ] å®ç°æ²»ç†è¯·æ±‚è¡¨æ ¼
- [ ] å®ç°Tabåˆ†ç±»è§†å›¾
- [ ] é›†æˆ `useGovernance` Hook
- [ ] é›†æˆ `useGovernanceEvents` Hookå®ç°å®æ—¶æ›´æ–°
- [ ] æ·»åŠ è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½
- [ ] æ·»åŠ å¯¼å‡ºåŠŸèƒ½
- [ ] æ·»åŠ å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™ä½¿ç”¨æ–‡æ¡£

---

## 4. å®æ–½æ•ˆæœè¯„ä¼°

### 4.1 é¢„æœŸæ”¶ç›Š

| ç»´åº¦ | å®æ–½å‰ | å®æ–½å | æ”¹å–„ç¨‹åº¦ |
|------|--------|--------|----------|
| **å‰ç«¯è°ƒç”¨å¤æ‚åº¦** | éœ€äº†è§£7+æ¨¡å—æ¥å£ | ç»Ÿä¸€APIå°è£… | â¬‡ï¸ 70% |
| **äº‹ä»¶ç›‘å¬éš¾åº¦** | åˆ†æ•£åœ¨å„æ¨¡å— | æ ‡å‡†åŒ–ç»Ÿä¸€ç›‘å¬ | â¬‡ï¸ 60% |
| **å‚æ•°ç®¡ç†** | åˆ†æ•£ç¡¬ç¼–ç  | é›†ä¸­åŠ¨æ€ç®¡ç† | â¬†ï¸ 80% |
| **æ²»ç†é€æ˜åº¦** | æ— ç»Ÿä¸€è§†å›¾ | ä»ªè¡¨ç›˜å¯è§†åŒ– | â¬†ï¸ 90% |
| **å¼€å‘æ•ˆç‡** | é«˜å­¦ä¹ æˆæœ¬ | ä½å­¦ä¹ æ›²çº¿ | â¬†ï¸ 50% |
| **æ¶æ„è€¦åˆåº¦** | ä½ | ä½ï¼ˆä¿æŒä¸å˜ï¼‰ | âœ… æ— å½±å“ |

### 4.2 æˆåŠŸæŒ‡æ ‡

- âœ… **å‰ç«¯ä»£ç ç®€åŒ–**ï¼šæ²»ç†ç›¸å…³ä»£ç è¡Œæ•°å‡å°‘40%+
- âœ… **å¼€å‘æ—¶é—´ç¼©çŸ­**ï¼šæ–°åŠŸèƒ½å¼€å‘æ—¶é—´å‡å°‘30%+
- âœ… **å‚æ•°è°ƒæ•´æ•ˆç‡**ï¼šä»éœ€è¦runtimeå‡çº§æ”¹ä¸ºé“¾ä¸Šæ²»ç†æŠ•ç¥¨ï¼ˆä»æ•°å¤©é™è‡³æ•°å°æ—¶ï¼‰
- âœ… **æ²»ç†å¯è§‚æµ‹æ€§**ï¼š100%æ²»ç†æ´»åŠ¨å¯åœ¨ä»ªè¡¨ç›˜æŸ¥çœ‹
- âœ… **é›¶æ¶æ„ç ´å**ï¼šä¿æŒæ‰€æœ‰æ¨¡å—ç‹¬ç«‹æ€§ï¼Œæ— å‘åå…¼å®¹æ€§é—®é¢˜

### 4.3 é£é™©è¯„ä¼°

| é£é™© | çº§åˆ« | åº”å¯¹æªæ–½ |
|------|------|----------|
| å‰ç«¯å°è£…é€»è¾‘é”™è¯¯ | ğŸŸ¡ ä¸­ | å®Œå–„å•å…ƒæµ‹è¯• + Code Review |
| å‚æ•°è¿ç§»é—æ¼ | ğŸŸ¡ ä¸­ | åˆ¶å®šè¿ç§»æ¸…å• + é€æ¨¡å—éªŒè¯ |
| äº‹ä»¶ç›‘å¬æ€§èƒ½é—®é¢˜ | ğŸŸ¢ ä½ | ä½¿ç”¨äº‹ä»¶è¿‡æ»¤ + æ‰¹å¤„ç†ä¼˜åŒ– |
| ä»ªè¡¨ç›˜æ•°æ®åŠ è½½æ…¢ | ğŸŸ¢ ä½ | ä½¿ç”¨Subsquidç´¢å¼•å±‚ + ç¼“å­˜ |

---

## 5. é™„å½•ï¼šä¸æ¨èæ–¹æ¡ˆåˆ†æ

### 5.1 ç»Ÿä¸€æ²»ç†åè°ƒæ¨¡å—æ–¹æ¡ˆï¼ˆpallet-unified-governanceï¼‰

#### ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ

1. **è¿åSubstrateæ¨¡å—ç‹¬ç«‹æ€§åŸåˆ™**
   - Substrate/FRAMEæ¶æ„å¼ºè°ƒæ¨¡å—ä½è€¦åˆ
   - åè°ƒæ¨¡å—éœ€è¦æ·±åº¦è€¦åˆ7+ç°æœ‰æ¨¡å—
   - è¿èƒŒ"æ¯ä¸ªpalletåªåšä¸€ä»¶äº‹"çš„è®¾è®¡å“²å­¦

2. **å‘åå…¼å®¹æ€§å™©æ¢¦**
   - éœ€ä¿®æ”¹æ‰€æœ‰ç°æœ‰æ¨¡å—çš„æ¥å£
   - éœ€è¿ç§»æ‰€æœ‰å†å²æ•°æ®
   - éœ€åè°ƒæ‰€æœ‰ä¾èµ–æ¨¡å—çš„å‡çº§

3. **å¼€å‘å’Œç»´æŠ¤æˆæœ¬é«˜**
   - åˆå§‹å¼€å‘ï¼š3-4å‘¨
   - æŒç»­ç»´æŠ¤ï¼šæ¯æ¬¡æ¨¡å—å˜æ›´éƒ½éœ€åŒæ­¥æ›´æ–°
   - æµ‹è¯•æˆæœ¬ï¼šéœ€è¦†ç›–æ‰€æœ‰æ¨¡å—ç»„åˆ

4. **æ”¶ç›Šä¸æ˜æ˜¾**
   - ä¸»è¦æ”¶ç›Šåœ¨å‰ç«¯è°ƒç”¨ç®€åŒ–
   - ä½†åŒæ ·çš„æ•ˆæœå¯é€šè¿‡å‰ç«¯å°è£…å®ç°
   - åç«¯ç»Ÿä¸€å¸¦æ¥çš„æ”¶ç›Šä¸è¶³ä»¥æŠµæ¶ˆæˆæœ¬

#### æ›¿ä»£æ–¹æ¡ˆä¼˜åŠ¿

**å‰ç«¯ç»Ÿä¸€APIå°è£…æ–¹æ¡ˆ**ï¼š
- âœ… é›¶æ¶æ„ç ´å
- âœ… å¿«é€Ÿå®æ–½ï¼ˆ1å‘¨ï¼‰
- âœ… ä½ç»´æŠ¤æˆæœ¬
- âœ… çµæ´»æ‰©å±•
- âœ… ç¬¦åˆSubstrateæœ€ä½³å®è·µ

### 5.2 å†³ç­–æµç¨‹å›¾

```
æ˜¯å¦éœ€è¦åç«¯ç»Ÿä¸€æ²»ç†åè°ƒï¼Ÿ
â”‚
â”œâ”€â†’ æ˜¯å¦è¿åæ¨¡å—ç‹¬ç«‹æ€§ï¼Ÿ
â”‚   â”œâ”€â†’ æ˜¯ âŒ ä¸æ¨è
â”‚   â””â”€â†’ å¦ â†’ ç»§ç»­è¯„ä¼°
â”‚
â”œâ”€â†’ æ˜¯å¦æœ‰å‘åå…¼å®¹æ€§é—®é¢˜ï¼Ÿ
â”‚   â”œâ”€â†’ æ˜¯ âŒ ä¸æ¨è
â”‚   â””â”€â†’ å¦ â†’ ç»§ç»­è¯„ä¼°
â”‚
â”œâ”€â†’ æ”¶ç›Šæ˜¯å¦å¤§äºæˆæœ¬ï¼Ÿ
â”‚   â”œâ”€â†’ å¦ âŒ ä¸æ¨è
â”‚   â””â”€â†’ æ˜¯ â†’ ç»§ç»­è¯„ä¼°
â”‚
â””â”€â†’ æ˜¯å¦æœ‰æ›´ç®€å•çš„æ›¿ä»£æ–¹æ¡ˆï¼Ÿ
    â”œâ”€â†’ æ˜¯ âœ… ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆï¼ˆå‰ç«¯å°è£…ï¼‰
    â””â”€â†’ å¦ â†’ å¯è€ƒè™‘å®æ–½
```

---

## 6. æ€»ç»“

### 6.1 æ ¸å¿ƒåŸåˆ™

1. **æ¶æ„ä¼˜å…ˆ**ï¼šä¿æŒæ¨¡å—ä½è€¦åˆï¼Œç¬¦åˆSubstrateæœ€ä½³å®è·µ
2. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**ï¼šé€šè¿‡å‰ç«¯ä¼˜åŒ–æå‡å¼€å‘å’Œç”¨æˆ·ä½“éªŒ
3. **æ¸è¿›å¼ä¼˜åŒ–**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œå¿«é€ŸéªŒè¯ï¼ŒæŒç»­æ”¹è¿›
4. **æˆæœ¬æ•ˆç›Šå¹³è¡¡**ï¼šé€‰æ‹©æ”¶ç›Šæœ€å¤§ã€æˆæœ¬æœ€ä½çš„æ–¹æ¡ˆ

### 6.2 å®æ–½æ—¶é—´çº¿

```
Week 1: å‰ç«¯ç»Ÿä¸€æ²»ç†APIå°è£… + æ²»ç†äº‹ä»¶æ ‡å‡†åŒ–
Week 2-3: pallet-governance-paramså¼€å‘ + é›†æˆ
Week 4: æ²»ç†ä»ªè¡¨ç›˜å¼€å‘ + æµ‹è¯•
Week 5: å…¨é¢æµ‹è¯• + æ–‡æ¡£å®Œå–„ + ç”Ÿäº§éƒ¨ç½²
```

### 6.3 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³è¡ŒåŠ¨ï¼ˆæœ¬å‘¨ï¼‰**ï¼š
1. åˆ›å»º `governanceService.ts` å’Œ `governanceEventService.ts`
2. å®šä¹‰æ‰€æœ‰ç±»å‹å’Œæ¥å£
3. å®ç°æ ¸å¿ƒæœåŠ¡ç±»
4. ç¼–å†™ä½¿ç”¨æ–‡æ¡£

**ä¸‹å‘¨è¡ŒåŠ¨**ï¼š
1. å¼€å§‹ `pallet-governance-params` å¼€å‘
2. å¹¶è¡Œå¼€å§‹æ²»ç†ä»ªè¡¨ç›˜UIè®¾è®¡
3. å‡†å¤‡å‚æ•°è¿ç§»æ¸…å•

**æŒç»­è¡ŒåŠ¨**ï¼š
1. æ”¶é›†ç”¨æˆ·åé¦ˆ
2. ç›‘æ§æ€§èƒ½æŒ‡æ ‡
3. æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0.0
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-20
**ç»´æŠ¤è€…**ï¼šStardust å¼€å‘å›¢é˜Ÿ
**çŠ¶æ€**ï¼šâœ… å·²æ‰¹å‡†ï¼Œå¾…å®æ–½
