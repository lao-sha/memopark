# æ‚¬èµé—®ç­”æ··åˆæ¨¡å¼è®¾è®¡æ–‡æ¡£

## æ–¹æ¡ˆB - å¤šäººå¥–åŠ±æ¨¡å¼ï¼ˆåŸºäºå åœç»“æœï¼‰

### 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿° Stardust å åœæœåŠ¡å¸‚åœºä¸­**æ‚¬èµé—®ç­”**ä¸**ä¼ ç»Ÿé—®ç­”**çš„æ··åˆæ¨¡å¼è®¾è®¡ã€‚

**æ ¸å¿ƒä¸šåŠ¡é€»è¾‘**ï¼š
- **æ‚¬èµé—®ç­”ï¼ˆBounty Interpretationï¼‰**ï¼šç”¨æˆ·è¿›è¡Œå åœï¼ˆæ¢…èŠ±æ˜“æ•°ã€å…«å­—æ’ç›˜ç­‰ï¼‰åï¼ŒåŸºäº**å åœç»“æœï¼ˆç›˜/å¦ï¼‰**å‘èµ·è§£è¯»æ‚¬èµï¼Œå¤šä½ä¸“å®¶ç«äº‰è§£ç­”
- **ä¼ ç»Ÿé—®ç­”ï¼ˆService Orderï¼‰**ï¼šç”¨æˆ·ç›´æ¥å‘æŒ‡å®šçš„å¤§å¸ˆè´­ä¹°ä¸“ä¸šè§£è¯»æœåŠ¡

é‡‡ç”¨**æ–¹æ¡ˆBï¼ˆå¤šäººå¥–åŠ±ï¼‰**ï¼Œæ”¯æŒå¤šåå›ç­”è€…è·å¾—å¥–åŠ±ï¼Œæ¿€åŠ±æ›´å¤šä¸“å®¶å‚ä¸ã€‚

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… æ‚¬èµå¿…é¡»å…³è”å·²å­˜åœ¨çš„å åœç»“æœ
- âœ… å åœç»“æœåŒ…å«å®Œæ•´çš„ç›˜/å¦æ•°æ®
- âœ… è§£è¯»è€…åŸºäºç»“æ„åŒ–æ•°æ®è¿›è¡Œè§£ç­”
- âœ… æ”¯æŒå¤šç§å åœç±»å‹ï¼ˆæ¢…èŠ±æ˜“æ•°ã€å…«å­—ã€ç´«è–‡æ–—æ•°ç­‰ï¼‰
- âœ… é˜²æ­¢æ¶æ„æ“ä½œï¼ˆå åœç»“æœæ‰€æœ‰æƒéªŒè¯ï¼‰

### 2. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    pallet-divination-market                         â”‚
â”‚                     (å åœæœåŠ¡å¸‚åœº Pallet)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    ä¼ ç»Ÿé—®ç­”æ¨¡å¼      â”‚     â”‚       æ‚¬èµé—®ç­”æ¨¡å¼               â”‚   â”‚
â”‚  â”‚  (Service Order)    â”‚     â”‚  (Bounty Interpretation)        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ 1å¯¹1 æœåŠ¡         â”‚     â”‚ â€¢ åŸºäºå åœç»“æœ                  â”‚   â”‚
â”‚  â”‚ â€¢ å›ºå®šä»·æ ¼          â”‚     â”‚ â€¢ 1å¯¹å¤š ä¼—åŒ…                    â”‚   â”‚
â”‚  â”‚ â€¢ æŒ‡å®šæä¾›è€…        â”‚     â”‚ â€¢ æ‚¬èµé‡‘é¢                      â”‚   â”‚
â”‚  â”‚ â€¢ å•ä¸€å›ç­”          â”‚     â”‚ â€¢ å¼€æ”¾å›ç­”                      â”‚   â”‚
â”‚  â”‚ â€¢ å³æ—¶ç»“ç®—          â”‚     â”‚ â€¢ å¤šç­”æ¡ˆç«äº‰                    â”‚   â”‚
â”‚  â”‚                     â”‚     â”‚ â€¢ é‡‡çº³åç»“ç®—                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â–²                           â”‚
â”‚                                          â”‚ å…³è”                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å åœç³»ç»Ÿ (Divination Pallets)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pallet-     â”‚ pallet-     â”‚ pallet-     â”‚ pallet-     â”‚ pallet-   â”‚
â”‚ meihua      â”‚ bazi        â”‚ ziwei       â”‚ daliuren    â”‚ ...       â”‚
â”‚ (æ¢…èŠ±æ˜“æ•°)   â”‚ (å…«å­—æ’ç›˜)   â”‚ (ç´«è–‡æ–—æ•°)   â”‚ (å¤§å…­å£¬)     â”‚           â”‚
â”‚             â”‚             â”‚             â”‚             â”‚           â”‚
â”‚ â€¢ èµ·å¦      â”‚ â€¢ æ’ç›˜      â”‚ â€¢ æ’ç›˜      â”‚ â€¢ èµ·è¯¾      â”‚           â”‚
â”‚ â€¢ æœ¬å¦      â”‚ â€¢ å››æŸ±      â”‚ â€¢ å‘½å®«      â”‚ â€¢ å››è¯¾      â”‚           â”‚
â”‚ â€¢ å˜å¦      â”‚ â€¢ å¤§è¿      â”‚ â€¢ åäºŒå®«    â”‚ â€¢ ä¸‰ä¼       â”‚           â”‚
â”‚ â€¢ äº’å¦      â”‚ â€¢ åç¥      â”‚ â€¢ æ˜Ÿæ›œ      â”‚ â€¢ å¤©å°†      â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ ¸å¿ƒä¸šåŠ¡æµç¨‹

#### 3.1 å®Œæ•´æµç¨‹ç¤ºä¾‹

```
ç”¨æˆ· Alice çš„å åœè§£è¯»ä¹‹æ—…ï¼š

1. èµ·å¦é˜¶æ®µ
   Alice: "æˆ‘æƒ³é—®äº‹ä¸šå‘å±•æ–¹å‘"
   æ“ä½œ: è°ƒç”¨ pallet-meihua::create_hexagram()
   ç»“æœ: ç”Ÿæˆå¦è±¡ #12345
         - æœ¬å¦: å¤©ç«åŒäºº
         - å˜å¦: å¤©æ³½å±¥
         - äº’å¦: ç¦»ä¸ºç«
         - å˜çˆ»: åˆå…­

2. å‘èµ·æ‚¬èµ
   Alice: "è¿™ä¸ªå¦è±¡æ€ä¹ˆè§£è¯»ï¼Ÿæˆ‘æ„¿æ„å‡º 500 DUST æ‚¬èµ"
   æ“ä½œ: è°ƒç”¨ pallet-divination-market::create_bounty_interpretation()
   å‚æ•°:
     - divination_type: DivinationType::Meihua
     - result_id: 12345
     - question_cid: "Qm...abc" (IPFS ä¸Šçš„é—®é¢˜æè¿°)
     - bounty_amount: 500 DUST
     - deadline: 7å¤©å

   ç³»ç»ŸéªŒè¯:
     âœ“ å¦è±¡ #12345 å­˜åœ¨
     âœ“ Alice æ˜¯å¦è±¡çš„åˆ›å»ºè€…
     âœ“ 500 DUST è½¬å…¥æ‰˜ç®¡è´¦æˆ·

3. ä¸“å®¶æŠ¢ç­”é˜¶æ®µ
   å¤§å¸ˆ Bob: æŸ¥çœ‹æ‚¬èµåˆ—è¡¨ï¼Œå‘ç° Alice çš„å¦è±¡
   æ“ä½œ: è°ƒç”¨ submit_interpretation()
   æäº¤: è§£è¯»å†…å®¹ CID "Qm...def"

   å¤§å¸ˆ Carol: ä¹Ÿæäº¤äº†è§£è¯»
   å¤§å¸ˆ Dave: ä¹Ÿæäº¤äº†è§£è¯»

   (å…±æ”¶åˆ° 8 ä¸ªè§£è¯»)

4. ç¤¾åŒºæŠ•ç¥¨ï¼ˆå¯é€‰ï¼‰
   å…¶ä»–ç”¨æˆ·ç»™å„ä¸ªè§£ç­”æŠ•ç¥¨
   Bob: 15ç¥¨
   Carol: 22ç¥¨
   Dave: 8ç¥¨
   ...

5. é‡‡çº³é˜¶æ®µ
   Alice æŸ¥çœ‹æ‰€æœ‰è§£è¯»åå†³å®š:
   æ“ä½œ: è°ƒç”¨ adopt_interpretations()
   é€‰æ‹©:
     - ç¬¬ä¸€å: Carol (æœ€ä½³ç­”æ¡ˆ)
     - ç¬¬äºŒå: Bob
     - ç¬¬ä¸‰å: Dave

6. ç»“ç®—é˜¶æ®µ
   ä»»ä½•äººè°ƒç”¨: settle_bounty()
   åˆ†é…:
     - Carol: 300 DUST (60%)
     - Bob: 75 DUST (15%)
     - Dave: 25 DUST (5%)
     - å…¶ä»–5äººå¹³åˆ†: 25 DUST (5% Ã· 5 = 5 DUST/äºº)
     - å¹³å°æ‰‹ç»­è´¹: 75 DUST (15%)
```

### 4. æ ¸å¿ƒæ•°æ®ç»“æ„

#### 4.1 æ‚¬èµè§£è¯»è¯·æ±‚ (BountyInterpretation)

```rust
/// æ‚¬èµè§£è¯»è¯·æ±‚
///
/// åŸºäºå·²å­˜åœ¨çš„å åœç»“æœå‘èµ·çš„è§£è¯»æ‚¬èµ
pub struct BountyInterpretation<AccountId, Balance, BlockNumber, MaxCidLen> {
    /// æ‚¬èµ ID
    pub id: u64,

    /// æé—®è€…è´¦æˆ·
    pub creator: AccountId,

    /// å åœç±»å‹ï¼ˆæ¢…èŠ±æ˜“æ•°ã€å…«å­—ã€å…­çˆ»ç­‰ï¼‰
    pub divination_type: DivinationType,

    /// å…³è”çš„å åœç»“æœ IDï¼ˆå¿…å¡«ï¼‰
    /// ä¾‹å¦‚: æ¢…èŠ±æ˜“æ•°çš„å¦è±¡IDã€å…«å­—æ’ç›˜çš„ID
    pub result_id: u64,

    /// é—®é¢˜æè¿° IPFS CID
    /// ç”¨æˆ·å¯ä»¥è¯¦ç»†æè¿°æƒ³é—®çš„é—®é¢˜ï¼ˆå¦‚ï¼š"äº‹ä¸šä½•æ—¶æœ‰è½¬æœº"ï¼‰
    pub question_cid: BoundedVec<u8, MaxCidLen>,

    /// æ‚¬èµé‡‘é¢
    pub bounty_amount: Balance,

    /// æˆªæ­¢åŒºå—
    pub deadline: BlockNumber,

    /// æœ€å°å›ç­”æ•°ï¼ˆè¾¾åˆ°åå¯å…³é—­ï¼‰
    pub min_answers: u8,

    /// æœ€å¤§å›ç­”æ•°
    pub max_answers: u8,

    /// çŠ¶æ€
    pub status: BountyStatus,

    /// è¢«é‡‡çº³çš„ç­”æ¡ˆ IDï¼ˆç¬¬ä¸€åï¼‰
    pub adopted_answer_id: Option<u64>,

    /// ç¬¬äºŒåç­”æ¡ˆ ID
    pub second_place_id: Option<u64>,

    /// ç¬¬ä¸‰åç­”æ¡ˆ ID
    pub third_place_id: Option<u64>,

    /// å½“å‰å›ç­”æ•°é‡
    pub answer_count: u32,

    /// å¥–åŠ±åˆ†é…æ–¹æ¡ˆ
    pub reward_distribution: RewardDistribution,

    /// æ“…é•¿é¢†åŸŸï¼ˆç”¨äºåŒ¹é…å›ç­”è€…ï¼‰
    pub specialty: Option<Specialty>,

    /// æ˜¯å¦ä»…é™è®¤è¯æä¾›è€…å›ç­”
    pub certified_only: bool,

    /// æ˜¯å¦å…è®¸ç¤¾åŒºæŠ•ç¥¨
    pub allow_voting: bool,

    /// æ€»æŠ•ç¥¨æ•°
    pub total_votes: u32,

    /// åˆ›å»ºæ—¶é—´
    pub created_at: BlockNumber,
}
```

#### 4.2 å åœç±»å‹æšä¸¾ (DivinationType)

```rust
/// æ”¯æŒçš„å åœç±»å‹
#[derive(Clone, Copy, Debug, PartialEq, Eq, Encode, Decode, TypeInfo, MaxEncodedLen)]
pub enum DivinationType {
    /// æ¢…èŠ±æ˜“æ•°
    /// ç»“æœåŒ…å«: æœ¬å¦ã€å˜å¦ã€äº’å¦ã€å˜çˆ»
    Meihua,

    /// å…«å­—æ’ç›˜
    /// ç»“æœåŒ…å«: å››æŸ±ã€å¤§è¿ã€äº”è¡Œå¼ºåº¦ã€åç¥
    BaZi,

    /// ç´«è–‡æ–—æ•°
    /// ç»“æœåŒ…å«: å‘½å®«ã€åäºŒå®«ã€æ˜Ÿæ›œ
    ZiWei,

    /// å¤§å…­å£¬
    /// ç»“æœåŒ…å«: å››è¯¾ã€ä¸‰ä¼ ã€å¤©å°†
    DaLiuRen,

    /// å°å…­å£¬
    /// ç»“æœåŒ…å«: é€Ÿæ–­ç»“æœ
    XiaoLiuRen,

    /// å¥‡é—¨éç”²
    /// ç»“æœåŒ…å«: ä¹å®«ã€å…«é—¨ã€å¤©å¹²
    QiMen,
}
```

#### 4.3 æ‚¬èµè§£è¯»å›ç­” (BountyAnswer)

```rust
/// æ‚¬èµè§£è¯»å›ç­”
pub struct BountyAnswer<AccountId, Balance, BlockNumber, MaxCidLen> {
    /// å›ç­” ID
    pub id: u64,

    /// æ‰€å±æ‚¬èµ ID
    pub bounty_id: u64,

    /// å›ç­”è€…è´¦æˆ·
    pub answerer: AccountId,

    /// å›ç­”å†…å®¹ IPFS CID
    /// è§£è¯»å†…å®¹åº”è¯¥åŸºäºå åœç»“æœçš„æ•°æ®è¿›è¡Œåˆ†æ
    pub answer_cid: BoundedVec<u8, MaxCidLen>,

    /// çŠ¶æ€
    pub status: BountyAnswerStatus,

    /// è·å¾—ç¥¨æ•°
    pub votes: u32,

    /// è·å¾—å¥–åŠ±é‡‘é¢
    pub reward_amount: Balance,

    /// æäº¤æ—¶é—´
    pub submitted_at: BlockNumber,

    /// æ˜¯å¦ä¸ºè®¤è¯æä¾›è€…
    pub is_certified: bool,

    /// å›ç­”è€…çš„æä¾›è€…ç­‰çº§
    pub provider_tier: Option<ProviderTier>,
}
```

#### 4.4 å¥–åŠ±åˆ†é…æ–¹æ¡ˆ (RewardDistribution)

```rust
/// å¥–åŠ±åˆ†é…æ–¹æ¡ˆ
///
/// æ‰€æœ‰æ¯”ä¾‹ä½¿ç”¨åŸºç‚¹è¡¨ç¤ºï¼ˆ1 åŸºç‚¹ = 0.01%ï¼‰
/// æ€»å’Œå¿…é¡»ç­‰äº 10000ï¼ˆå³ 100%ï¼‰
pub struct RewardDistribution {
    /// ç¬¬ä¸€åå¥–åŠ±æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œ6000 = 60%ï¼‰
    pub first_place: u16,

    /// ç¬¬äºŒåå¥–åŠ±æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œ1500 = 15%ï¼‰
    pub second_place: u16,

    /// ç¬¬ä¸‰åå¥–åŠ±æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œ500 = 5%ï¼‰
    pub third_place: u16,

    /// å¹³å°æ‰‹ç»­è´¹æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œ1500 = 15%ï¼‰
    pub platform_fee: u16,

    /// å‚ä¸å¥–æ€»æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œ500 = 5%ï¼‰
    pub participation_pool: u16,
}

impl Default for RewardDistribution {
    fn default() -> Self {
        Self {
            first_place: 6000,      // 60%
            second_place: 1500,     // 15%
            third_place: 500,       // 5%
            platform_fee: 1500,     // 15%
            participation_pool: 500, // 5%
        }
    }
}
```

**é»˜è®¤åˆ†é…æ¯”ä¾‹ï¼š**

| å¥–åŠ±ç±»å‹ | æ¯”ä¾‹ | è¯´æ˜ |
|---------|------|------|
| ç¬¬ä¸€åï¼ˆè¢«é‡‡çº³ï¼‰| 60% | æœ€ä½³ç­”æ¡ˆè·å¾—è€… |
| ç¬¬äºŒå | 15% | ä¼˜ç§€ç­”æ¡ˆ |
| ç¬¬ä¸‰å | 5% | ä¼˜ç§€ç­”æ¡ˆ |
| å¹³å°æ‰‹ç»­è´¹ | 15% | å¹³å°æ”¶å…¥ |
| å‚ä¸å¥–æ±  | 5% | å…¶ä»–å›ç­”è€…å¹³åˆ† |

### 5. çŠ¶æ€æœºè®¾è®¡

#### 5.1 æ‚¬èµçŠ¶æ€ (BountyStatus)

```
                  åˆ›å»ºæ‚¬èµï¼ˆåŸºäºå åœç»“æœï¼‰
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Open â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚                â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
         â”‚    â”‚          â”‚          â”‚     â”‚
         â”‚    â–¼          â–¼          â–¼     â”‚
         â”‚ Cancelled  Closed    Expired   â”‚
         â”‚ (å–æ¶ˆ)    (å…³é—­)     (è¿‡æœŸ)    â”‚
         â”‚              â”‚                 â”‚
         â”‚              â–¼                 â”‚
         â”‚           Adopted              â”‚
         â”‚          (å·²é‡‡çº³)              â”‚
         â”‚              â”‚                 â”‚
         â”‚              â–¼                 â”‚
         â”‚           Settled              â”‚
         â”‚          (å·²ç»“ç®—)              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€è¯´æ˜ï¼š**

| çŠ¶æ€ | è¯´æ˜ | å¯è½¬æ¢åˆ° |
|------|------|---------|
| Open | å¼€æ”¾æ¥å—å›ç­” | Closed, Cancelled, Expired |
| Closed | åœæ­¢æ¥å—å›ç­”ï¼Œç­‰å¾…é‡‡çº³ | Adopted |
| Adopted | å·²é€‰æ‹©å‰ä¸‰åï¼Œç­‰å¾…ç»“ç®— | Settled |
| Settled | å¥–åŠ±å·²åˆ†é…å®Œæˆ | (ç»ˆæ€) |
| Cancelled | æé—®è€…å–æ¶ˆï¼ˆæ— å›ç­”æ—¶ï¼‰ | (ç»ˆæ€) |
| Expired | è¶…æ—¶ä¸”æ— å›ç­”ï¼Œå·²é€€æ¬¾ | (ç»ˆæ€) |

#### 5.2 æ‚¬èµå›ç­”çŠ¶æ€ (BountyAnswerStatus)

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| Pending | ç­‰å¾…å®¡æ ¸/æŠ•ç¥¨ |
| Adopted | è¢«é‡‡çº³ä¸ºæœ€ä½³ç­”æ¡ˆï¼ˆç¬¬ä¸€åï¼‰ |
| Selected | å…¥é€‰ä¼˜ç§€ç­”æ¡ˆï¼ˆç¬¬äºŒ/ä¸‰åï¼‰ |
| Participated | è·å¾—å‚ä¸å¥–åŠ± |
| Rejected | æœªå…¥é€‰ |

### 6. æ ¸å¿ƒ Extrinsicsï¼ˆå¤–éƒ¨è°ƒç”¨ï¼‰

#### 6.1 åˆ›å»ºæ‚¬èµè§£è¯»

```rust
/// åˆ›å»ºæ‚¬èµè§£è¯»è¯·æ±‚
///
/// # å‚æ•°
/// - `divination_type`: å åœç±»å‹
/// - `result_id`: å åœç»“æœIDï¼ˆå¿…é¡»å·²å­˜åœ¨ï¼‰
/// - `question_cid`: é—®é¢˜æè¿°çš„ IPFS CID
/// - `bounty_amount`: æ‚¬èµé‡‘é¢
/// - `deadline`: æˆªæ­¢åŒºå—
/// - `min_answers`: æœ€å°å›ç­”æ•°
/// - `max_answers`: æœ€å¤§å›ç­”æ•°
/// - `specialty`: æ“…é•¿é¢†åŸŸï¼ˆå¯é€‰ï¼‰
/// - `certified_only`: æ˜¯å¦ä»…é™è®¤è¯è€…
/// - `allow_voting`: æ˜¯å¦å…è®¸ç¤¾åŒºæŠ•ç¥¨
///
/// # éªŒè¯
/// 1. å åœç»“æœå¿…é¡»å­˜åœ¨
/// 2. è°ƒç”¨è€…å¿…é¡»æ˜¯å åœç»“æœçš„åˆ›å»ºè€…
/// 3. æ‚¬èµé‡‘é¢ >= æœ€ä½æœåŠ¡ä»·æ ¼
/// 4. æˆªæ­¢æ—¶é—´ > å½“å‰åŒºå—
///
/// # ç¤ºä¾‹
/// ```ignore
/// // Alice ä¸ºè‡ªå·±çš„æ¢…èŠ±æ˜“æ•°å¦è±¡ #12345 å‘èµ·æ‚¬èµ
/// DivinationMarket::create_bounty_interpretation(
///     origin,
///     DivinationType::Meihua,
///     12345,  // å¦è±¡ID
///     b"Qm...abc".to_vec(),  // é—®é¢˜æè¿°CID
///     500 * DUST,
///     current_block + 7 * DAYS_IN_BLOCKS,
///     3,  // è‡³å°‘3ä¸ªå›ç­”
///     20, // æœ€å¤š20ä¸ªå›ç­”
///     Some(Specialty::Career),  // äº‹ä¸šç±»
///     false,  // å…è®¸éè®¤è¯è€…
///     true,   // å…è®¸æŠ•ç¥¨
/// )?;
/// ```
pub fn create_bounty_interpretation(
    origin: OriginFor<T>,
    divination_type: DivinationType,
    result_id: u64,
    question_cid: Vec<u8>,
    bounty_amount: BalanceOf<T>,
    deadline: BlockNumberFor<T>,
    min_answers: u8,
    max_answers: u8,
    specialty: Option<Specialty>,
    certified_only: bool,
    allow_voting: bool,
) -> DispatchResult
```

**æµç¨‹ï¼š**
1. éªŒè¯è°ƒç”¨è€…ç­¾å
2. **éªŒè¯å åœç»“æœå­˜åœ¨**ï¼ˆé€šè¿‡ `DivinationProvider` traitï¼‰
3. **éªŒè¯è°ƒç”¨è€…æ˜¯å åœç»“æœçš„åˆ›å»ºè€…**
4. éªŒè¯æ‚¬èµé‡‘é¢ >= æœ€ä½æœåŠ¡ä»·æ ¼
5. éªŒè¯æˆªæ­¢æ—¶é—´ > å½“å‰åŒºå—
6. è½¬è´¦æ‚¬èµé‡‘åˆ°å¹³å°æ‰˜ç®¡è´¦æˆ·ï¼ˆPalletId æ´¾ç”Ÿè´¦æˆ·ï¼‰
7. åˆ›å»ºæ‚¬èµè®°å½•
8. æ›´æ–°ç”¨æˆ·æ‚¬èµç´¢å¼•
9. æ›´æ–°ç»Ÿè®¡æ•°æ®
10. è§¦å‘ `BountyCreated` äº‹ä»¶

**é”™è¯¯å¤„ç†ï¼š**
- `DivinationResultNotFound`: å åœç»“æœä¸å­˜åœ¨
- `NotResultCreator`: ä¸æ˜¯å åœç»“æœçš„åˆ›å»ºè€…
- `BountyAmountTooLow`: æ‚¬èµé‡‘é¢è¿‡ä½
- `InvalidBountyDeadline`: æˆªæ­¢æ—¶é—´æ— æ•ˆ
- `InsufficientBalance`: ä½™é¢ä¸è¶³

#### 6.2 æäº¤æ‚¬èµè§£è¯»

```rust
/// æäº¤æ‚¬èµè§£è¯»
///
/// # å‚æ•°
/// - `bounty_id`: æ‚¬èµID
/// - `answer_cid`: è§£è¯»å†…å®¹çš„ IPFS CID
///
/// # éªŒè¯
/// 1. æ‚¬èµçŠ¶æ€ä¸º Open
/// 2. æœªè¶…è¿‡æˆªæ­¢æ—¶é—´
/// 3. ä¸æ˜¯è‡ªå·±çš„æ‚¬èµ
/// 4. å›ç­”æ•°æœªè¾¾ä¸Šé™
/// 5. æœªé‡å¤å›ç­”
/// 6. è®¤è¯è¦æ±‚ï¼ˆå¦‚æœè®¾ç½®ï¼‰
///
/// # ç¤ºä¾‹
/// ```ignore
/// // Bob æäº¤è§£è¯»
/// DivinationMarket::submit_interpretation(
///     origin,
///     12345,  // æ‚¬èµID
///     b"Qm...def".to_vec(),  // è§£è¯»å†…å®¹CID
/// )?;
/// ```
pub fn submit_interpretation(
    origin: OriginFor<T>,
    bounty_id: u64,
    answer_cid: Vec<u8>,
) -> DispatchResult
```

**æµç¨‹ï¼š**
1. éªŒè¯æ‚¬èµçŠ¶æ€ä¸º Open
2. éªŒè¯æœªè¶…è¿‡æˆªæ­¢æ—¶é—´
3. éªŒè¯ä¸æ˜¯è‡ªå·±çš„æ‚¬èµ
4. éªŒè¯å›ç­”æ•°æœªè¾¾ä¸Šé™
5. éªŒè¯æœªé‡å¤å›ç­”
6. éªŒè¯è®¤è¯è¦æ±‚ï¼ˆå¦‚æœè®¾ç½® `certified_only`ï¼‰
7. åˆ›å»ºå›ç­”è®°å½•
8. æ›´æ–°ç›¸å…³ç´¢å¼•
9. è§¦å‘ `InterpretationSubmitted` äº‹ä»¶

#### 6.3 ç¤¾åŒºæŠ•ç¥¨

```rust
/// ä¸ºè§£è¯»æŠ•ç¥¨
///
/// # å‚æ•°
/// - `bounty_id`: æ‚¬èµID
/// - `answer_id`: å›ç­”ID
pub fn vote_interpretation(
    origin: OriginFor<T>,
    bounty_id: u64,
    answer_id: u64,
) -> DispatchResult
```

**æµç¨‹ï¼š**
1. éªŒè¯æ‚¬èµå…è®¸æŠ•ç¥¨
2. éªŒè¯çŠ¶æ€ä¸º Open æˆ– Closed
3. éªŒè¯ç­”æ¡ˆå­˜åœ¨ä¸”å±äºè¯¥æ‚¬èµ
4. éªŒè¯æœªé‡å¤æŠ•ç¥¨
5. è®°å½•æŠ•ç¥¨
6. æ›´æ–°ç­”æ¡ˆç¥¨æ•°
7. è§¦å‘ `InterpretationVoted` äº‹ä»¶

#### 6.4 é‡‡çº³è§£è¯»

```rust
/// é‡‡çº³è§£è¯»ï¼ˆé€‰æ‹©å‰ä¸‰åï¼‰
///
/// # å‚æ•°
/// - `bounty_id`: æ‚¬èµID
/// - `first_place`: ç¬¬ä¸€åç­”æ¡ˆID
/// - `second_place`: ç¬¬äºŒåç­”æ¡ˆIDï¼ˆå¯é€‰ï¼‰
/// - `third_place`: ç¬¬ä¸‰åç­”æ¡ˆIDï¼ˆå¯é€‰ï¼‰
///
/// # æƒé™
/// ä»…æ‚¬èµåˆ›å»ºè€…å¯è°ƒç”¨
pub fn adopt_interpretations(
    origin: OriginFor<T>,
    bounty_id: u64,
    first_place: u64,
    second_place: Option<u64>,
    third_place: Option<u64>,
) -> DispatchResult
```

**æµç¨‹ï¼š**
1. éªŒè¯æ˜¯æ‚¬èµåˆ›å»ºè€…
2. éªŒè¯çŠ¶æ€ä¸º Open æˆ– Closed
3. éªŒè¯ç­”æ¡ˆå­˜åœ¨ä¸”å±äºè¯¥æ‚¬èµ
4. éªŒè¯ç­”æ¡ˆä¸é‡å¤
5. æ›´æ–°æ‚¬èµçŠ¶æ€ä¸º Adopted
6. æ›´æ–°ç­”æ¡ˆçŠ¶æ€
7. è§¦å‘ `InterpretationsAdopted` äº‹ä»¶

#### 6.5 ç»“ç®—å¥–åŠ±

```rust
/// ç»“ç®—å¥–åŠ±
///
/// # å‚æ•°
/// - `bounty_id`: æ‚¬èµID
///
/// # æƒé™
/// ä»»ä½•äººéƒ½å¯è°ƒç”¨ï¼ˆå·²é‡‡çº³çŠ¶æ€ï¼‰
pub fn settle_bounty(
    origin: OriginFor<T>,
    bounty_id: u64,
) -> DispatchResult
```

**æµç¨‹ï¼š**
1. éªŒè¯çŠ¶æ€ä¸º Adopted
2. è®¡ç®—å„åæ¬¡å¥–åŠ±é‡‘é¢
3. å‘æ”¾ç¬¬ä¸€åå¥–åŠ±ï¼ˆ60%ï¼‰
4. å‘æ”¾ç¬¬äºŒåå¥–åŠ±ï¼ˆ15%ï¼Œå¦‚æœå­˜åœ¨ï¼‰
5. å‘æ”¾ç¬¬ä¸‰åå¥–åŠ±ï¼ˆ5%ï¼Œå¦‚æœå­˜åœ¨ï¼‰
6. è®¡ç®—å¹¶å‘æ”¾å‚ä¸å¥–ï¼ˆ5% å¹³åˆ†ç»™å…¶ä»–å›ç­”è€…ï¼‰
7. ä¿ç•™å¹³å°æ‰‹ç»­è´¹ï¼ˆ15%ï¼‰
8. æ›´æ–°æ‚¬èµçŠ¶æ€ä¸º Settled
9. æ›´æ–°ç»Ÿè®¡æ•°æ®
10. è§¦å‘ `BountySettled` å’Œ `BountyRewardPaid` äº‹ä»¶

### 7. DivinationProvider Trait

ä¸ºäº†æ”¯æŒå¤šç§å åœç±»å‹ï¼Œå®šä¹‰ç»Ÿä¸€çš„ Provider traitï¼š

```rust
/// å åœç»“æœæä¾›è€… Trait
///
/// å„å åœ Pallet éœ€è¦å®ç°æ­¤ trait ä»¥ä¾¿å¸‚åœº Pallet æŸ¥è¯¢å åœç»“æœ
pub trait DivinationProvider<AccountId> {
    /// éªŒè¯å åœç»“æœæ˜¯å¦å­˜åœ¨
    ///
    /// # å‚æ•°
    /// - `divination_type`: å åœç±»å‹
    /// - `result_id`: ç»“æœID
    ///
    /// # è¿”å›
    /// - `true`: ç»“æœå­˜åœ¨
    /// - `false`: ç»“æœä¸å­˜åœ¨
    fn result_exists(
        divination_type: DivinationType,
        result_id: u64,
    ) -> bool;

    /// è·å–å åœç»“æœçš„åˆ›å»ºè€…
    ///
    /// # å‚æ•°
    /// - `divination_type`: å åœç±»å‹
    /// - `result_id`: ç»“æœID
    ///
    /// # è¿”å›
    /// - `Some(AccountId)`: åˆ›å»ºè€…è´¦æˆ·
    /// - `None`: ç»“æœä¸å­˜åœ¨
    fn result_creator(
        divination_type: DivinationType,
        result_id: u64,
    ) -> Option<AccountId>;

    /// è·å–å åœç»“æœçš„ç¨€æœ‰åº¦æ•°æ®ï¼ˆç”¨äº NFTï¼‰
    ///
    /// # å‚æ•°
    /// - `divination_type`: å åœç±»å‹
    /// - `result_id`: ç»“æœID
    ///
    /// # è¿”å›
    /// - `Some(RarityInput)`: ç¨€æœ‰åº¦è¾“å…¥æ•°æ®
    /// - `None`: ç»“æœä¸å­˜åœ¨
    fn rarity_data(
        divination_type: DivinationType,
        result_id: u64,
    ) -> Option<RarityInput>;
}
```

**Runtime å®ç°ç¤ºä¾‹ï¼š**

```rust
// runtime/src/configs/divination.rs

pub struct StardustDivinationProvider;

impl DivinationProvider<AccountId> for StardustDivinationProvider {
    fn result_exists(divination_type: DivinationType, result_id: u64) -> bool {
        match divination_type {
            DivinationType::Meihua => {
                Meihua::hexagrams(result_id).is_some()
            },
            DivinationType::BaZi => {
                // éœ€è¦æŸ¥è¯¢è´¦æˆ·æ˜ å°„
                // æš‚æ—¶è¿”å› falseï¼Œéœ€è¦é‡æ„ BaZi å­˜å‚¨ç»“æ„
                false
            },
            DivinationType::ZiWei => {
                ZiWei::charts(result_id).is_some()
            },
            _ => false,
        }
    }

    fn result_creator(divination_type: DivinationType, result_id: u64) -> Option<AccountId> {
        match divination_type {
            DivinationType::Meihua => {
                Meihua::hexagrams(result_id)
                    .map(|h| h.ben_gua.diviner)
            },
            DivinationType::ZiWei => {
                ZiWei::charts(result_id)
                    .map(|c| c.owner)
            },
            _ => None,
        }
    }

    fn rarity_data(divination_type: DivinationType, result_id: u64) -> Option<RarityInput> {
        match divination_type {
            DivinationType::Meihua => {
                Meihua::hexagrams(result_id).map(|h| {
                    let is_pure = h.ben_gua.shang_gua == h.ben_gua.xia_gua;
                    RarityInput {
                        primary_score: if is_pure { 80 } else { 30 },
                        secondary_score: 10,
                        is_special_date: false,
                        is_special_combination: is_pure,
                        custom_factors: [0, 0, 0, 0],
                    }
                })
            },
            _ => None,
        }
    }
}
```

### 8. å­˜å‚¨ç»“æ„

```rust
// ================================
// æ‚¬èµè§£è¯»ç›¸å…³å­˜å‚¨
// ================================

/// ä¸‹ä¸€ä¸ªæ‚¬èµID
#[pallet::storage]
pub type NextBountyId<T> = StorageValue<_, u64, ValueQuery>;

/// ä¸‹ä¸€ä¸ªè§£è¯»ID
#[pallet::storage]
pub type NextInterpretationId<T> = StorageValue<_, u64, ValueQuery>;

/// æ‚¬èµè§£è¯»å­˜å‚¨
#[pallet::storage]
#[pallet::getter(fn bounty_interpretations)]
pub type BountyInterpretations<T: Config> =
    StorageMap<_, Blake2_128Concat, u64, BountyInterpretationOf<T>>;

/// æ‚¬èµè§£è¯»å›ç­”å­˜å‚¨
#[pallet::storage]
#[pallet::getter(fn interpretations)]
pub type Interpretations<T: Config> =
    StorageMap<_, Blake2_128Concat, u64, BountyAnswerOf<T>>;

/// æ‚¬èµçš„å›ç­”åˆ—è¡¨ç´¢å¼•
#[pallet::storage]
pub type BountyInterpretationIds<T: Config> =
    StorageMap<_, Blake2_128Concat, u64, BoundedVec<u64, ConstU32<100>>, ValueQuery>;

/// ç”¨æˆ·åˆ›å»ºçš„æ‚¬èµç´¢å¼•
#[pallet::storage]
pub type UserBounties<T: Config> =
    StorageMap<_, Blake2_128Concat, T::AccountId, BoundedVec<u64, ConstU32<500>>, ValueQuery>;

/// ç”¨æˆ·æäº¤çš„è§£è¯»ç´¢å¼•
#[pallet::storage]
pub type UserInterpretations<T: Config> =
    StorageMap<_, Blake2_128Concat, T::AccountId, BoundedVec<u64, ConstU32<1000>>, ValueQuery>;

/// æ‚¬èµæŠ•ç¥¨è®°å½•
#[pallet::storage]
pub type BountyVotes<T: Config> = StorageDoubleMap<
    _, Blake2_128Concat, u64,           // bounty_id
    Blake2_128Concat, T::AccountId,     // voter
    BountyVoteOf<T>
>;

/// æ‚¬èµç»Ÿè®¡
#[pallet::storage]
pub type BountyStatistics<T: Config> =
    StorageValue<_, BountyStats<BalanceOf<T>>, ValueQuery>;

// ================================
// å åœç»“æœç´¢å¼•ï¼ˆæ–°å¢ï¼‰
// ================================

/// å åœç»“æœå…³è”çš„æ‚¬èµåˆ—è¡¨
///
/// ä¸€ä¸ªå åœç»“æœå¯èƒ½è¢«åˆ›å»ºå¤šæ¬¡æ‚¬èµï¼ˆåŒä¸€ä¸ªç›˜å¯ä»¥é—®ä¸åŒçš„é—®é¢˜ï¼‰
#[pallet::storage]
pub type DivinationResultBounties<T: Config> = StorageDoubleMap<
    _, Blake2_128Concat, DivinationType,  // divination_type
    Blake2_128Concat, u64,                // result_id
    BoundedVec<u64, ConstU32<50>>,        // bounty_ids
    ValueQuery
>;
```

### 9. äº‹ä»¶å®šä¹‰

```rust
#[pallet::event]
#[pallet::generate_deposit(pub(super) fn deposit_event)]
pub enum Event<T: Config> {
    /// æ‚¬èµè§£è¯»å·²åˆ›å»º
    /// [bounty_id, creator, divination_type, result_id, bounty_amount, deadline]
    BountyCreated {
        bounty_id: u64,
        creator: T::AccountId,
        divination_type: DivinationType,
        result_id: u64,
        bounty_amount: BalanceOf<T>,
        deadline: BlockNumberFor<T>,
    },

    /// è§£è¯»å·²æäº¤
    /// [interpretation_id, bounty_id, answerer]
    InterpretationSubmitted {
        interpretation_id: u64,
        bounty_id: u64,
        answerer: T::AccountId,
    },

    /// æ‚¬èµå·²å…³é—­
    /// [bounty_id]
    BountyClosed {
        bounty_id: u64,
    },

    /// è§£è¯»å·²è¢«æŠ•ç¥¨
    /// [bounty_id, interpretation_id, voter]
    InterpretationVoted {
        bounty_id: u64,
        interpretation_id: u64,
        voter: T::AccountId,
    },

    /// è§£è¯»å·²é‡‡çº³
    /// [bounty_id, first_place, second_place, third_place]
    InterpretationsAdopted {
        bounty_id: u64,
        first_place: u64,
        second_place: Option<u64>,
        third_place: Option<u64>,
    },

    /// æ‚¬èµå·²ç»“ç®—
    /// [bounty_id, total_distributed, platform_fee, participant_count]
    BountySettled {
        bounty_id: u64,
        total_distributed: BalanceOf<T>,
        platform_fee: BalanceOf<T>,
        participant_count: u32,
    },

    /// æ‚¬èµå¥–åŠ±å·²å‘æ”¾
    /// [bounty_id, recipient, amount, rank]
    BountyRewardPaid {
        bounty_id: u64,
        recipient: T::AccountId,
        amount: BalanceOf<T>,
        rank: u8, // 1=ç¬¬ä¸€å, 2=ç¬¬äºŒå, 3=ç¬¬ä¸‰å, 0=å‚ä¸å¥–
    },

    /// æ‚¬èµå·²å–æ¶ˆ
    /// [bounty_id, refund_amount]
    BountyCancelled {
        bounty_id: u64,
        refund_amount: BalanceOf<T>,
    },

    /// æ‚¬èµå·²è¿‡æœŸ
    /// [bounty_id, refund_amount]
    BountyExpired {
        bounty_id: u64,
        refund_amount: BalanceOf<T>,
    },
}
```

### 10. é”™è¯¯ç±»å‹

```rust
#[pallet::error]
pub enum Error<T> {
    // ================================
    // å åœç»“æœç›¸å…³é”™è¯¯
    // ================================

    /// å åœç»“æœä¸å­˜åœ¨
    DivinationResultNotFound,

    /// ä¸æ˜¯å åœç»“æœçš„åˆ›å»ºè€…
    NotResultCreator,

    // ================================
    // æ‚¬èµç›¸å…³é”™è¯¯
    // ================================

    /// æ‚¬èµä¸å­˜åœ¨
    BountyNotFound,

    /// æ‚¬èµä¸æ˜¯å¼€æ”¾çŠ¶æ€
    BountyNotOpen,

    /// æ‚¬èµå·²å…³é—­
    BountyAlreadyClosed,

    /// æ‚¬èµé‡‘é¢è¿‡ä½
    BountyAmountTooLow,

    /// æ‚¬èµå·²è¿‡æˆªæ­¢æ—¶é—´
    BountyDeadlinePassed,

    /// æ‚¬èµæˆªæ­¢æ—¶é—´æ— æ•ˆ
    InvalidBountyDeadline,

    /// æ‚¬èµå·²è¢«é‡‡çº³
    BountyAlreadyAdopted,

    /// æ‚¬èµå·²ç»“ç®—
    BountyAlreadySettled,

    /// æ‚¬èµä¸èƒ½å–æ¶ˆï¼ˆå·²æœ‰å›ç­”ï¼‰
    BountyCannotCancel,

    /// æ‚¬èµæœªè¿‡æœŸ
    BountyNotExpired,

    /// æ‚¬èµåˆ—è¡¨å·²æ»¡
    BountyListFull,

    // ================================
    // è§£è¯»ç›¸å…³é”™è¯¯
    // ================================

    /// è§£è¯»ä¸å­˜åœ¨
    InterpretationNotFound,

    /// ä¸èƒ½å›ç­”è‡ªå·±çš„æ‚¬èµ
    CannotAnswerOwnBounty,

    /// å·²ç»å›ç­”è¿‡è¯¥æ‚¬èµ
    AlreadyAnswered,

    /// æ‚¬èµå›ç­”æ•°å·²è¾¾ä¸Šé™
    BountyAnswerLimitReached,

    /// å›ç­”æ•°ä¸è¶³ä»¥é‡‡çº³
    NotEnoughAnswers,

    /// ä»…é™è®¤è¯æä¾›è€…
    CertifiedProviderOnly,

    // ================================
    // æŠ•ç¥¨ç›¸å…³é”™è¯¯
    // ================================

    /// å·²æŠ•ç¥¨
    AlreadyVoted,

    // ================================
    // å¥–åŠ±ç›¸å…³é”™è¯¯
    // ================================

    /// å¥–åŠ±åˆ†é…æ¯”ä¾‹æ— æ•ˆ
    InvalidRewardDistribution,

    // ================================
    // æƒé™ç›¸å…³é”™è¯¯
    // ================================

    /// ä¸æ˜¯æ‚¬èµåˆ›å»ºè€…
    NotBountyCreator,
}
```

### 11. ä¼ ç»Ÿé—®ç­” vs æ‚¬èµé—®ç­”å¯¹æ¯”

| ç‰¹æ€§ | ä¼ ç»Ÿé—®ç­” (Service Order) | æ‚¬èµé—®ç­” (Bounty Interpretation) |
|------|--------------------------|----------------------------------|
| **æœåŠ¡æ¨¡å¼** | 1å¯¹1 æŒ‡å®šæä¾›è€… | 1å¯¹å¤š ä¼—åŒ…æ¨¡å¼ |
| **å‰ç½®æ¡ä»¶** | æ— ï¼ˆç›´æ¥è´­ä¹°æœåŠ¡ï¼‰ | **å¿…é¡»å…ˆæœ‰å åœç»“æœ** |
| **æ•°æ®æ¥æº** | ç”¨æˆ·è‡ªè¡Œæä¾›é—®é¢˜ | **åŸºäºç»“æ„åŒ–çš„å åœæ•°æ®** |
| **å®šä»·æ–¹å¼** | å›ºå®šå¥—é¤ä»·æ ¼ | è‡ªå®šä¹‰æ‚¬èµé‡‘é¢ |
| **å›ç­”è€…** | å•ä¸€æŒ‡å®šæä¾›è€… | å¤šäººç«äº‰å›ç­” |
| **å›ç­”æ•°é‡** | 1ä¸ª | æœ€å¤š100ä¸ª |
| **å¥–åŠ±åˆ†é…** | 100%ç»™æä¾›è€…ï¼ˆæ‰£é™¤å¹³å°è´¹ï¼‰ | å¤šäººåˆ†å±‚å¥–åŠ± |
| **ç»“ç®—æ—¶æœº** | æäº¤è§£è¯»åå³æ—¶ç»“ç®— | é‡‡çº³åç»Ÿä¸€ç»“ç®— |
| **é€‚ç”¨åœºæ™¯** | éœ€è¦ä¸“ä¸šæ·±åº¦è§£è¯» | å¸Œæœ›è·å¾—å¤šè§’åº¦è§è§£ |
| **è¿½é—®æœºåˆ¶** | æ”¯æŒå¥—é¤å†…è¿½é—® | ä¸æ”¯æŒè¿½é—® |
| **æŠ•ç¥¨åŠŸèƒ½** | ä¸æ”¯æŒ | å¯é€‰ç¤¾åŒºæŠ•ç¥¨ |
| **éšç§æ€§** | è¾ƒé«˜ï¼ˆä¸€å¯¹ä¸€ï¼‰ | è¾ƒä½ï¼ˆå…¬å¼€æ‚¬èµï¼‰ |

### 12. ç»æµæ¨¡å‹

#### 12.1 å¥–åŠ±åˆ†é…ç¤ºä¾‹

å‡è®¾æ‚¬èµé‡‘é¢ä¸º 1000 DUSTï¼š

| åæ¬¡ | æ¯”ä¾‹ | é‡‘é¢ | è¯´æ˜ |
|------|------|------|------|
| ç¬¬ä¸€å | 60% | 600 DUST | è¢«é‡‡çº³çš„æœ€ä½³ç­”æ¡ˆ |
| ç¬¬äºŒå | 15% | 150 DUST | ä¼˜ç§€ç­”æ¡ˆ |
| ç¬¬ä¸‰å | 5% | 50 DUST | ä¼˜ç§€ç­”æ¡ˆ |
| å¹³å° | 15% | 150 DUST | å¹³å°æ‰‹ç»­è´¹ |
| å‚ä¸å¥– | 5% | 50 DUST | å…¶ä»–å›ç­”è€…å¹³åˆ† |

#### 12.2 å‚ä¸å¥–è®¡ç®—

å¦‚æœæœ‰ 7 ä¸ªå›ç­”è€…ï¼ˆé™¤å»å‰ä¸‰åè¿˜æœ‰ 4 äººï¼‰ï¼š
- å‚ä¸å¥–æ± ï¼š50 DUST
- æ¯äººè·å¾—ï¼š50 / 4 = 12.5 DUST

#### 12.3 åŠ¨æ€è°ƒæ•´ï¼ˆå¯é€‰æ‰©å±•ï¼‰

æœªæ¥å¯æ”¯æŒæé—®è€…è‡ªå®šä¹‰åˆ†é…æ¯”ä¾‹ï¼š

```rust
pub struct CustomRewardDistribution {
    pub first_place: u16,      // 40%-80%
    pub second_place: u16,     // 0%-30%
    pub third_place: u16,      // 0%-10%
    pub platform_fee: u16,     // å›ºå®š 15%
    pub participation_pool: u16, // å‰©ä½™éƒ¨åˆ†
}
```

### 13. ä½¿ç”¨åœºæ™¯

#### 13.1 ä¼ ç»Ÿé—®ç­”é€‚ç”¨åœºæ™¯

- éœ€è¦ä¸“ä¸šæ·±åº¦è§£è¯»ï¼ˆå¦‚å…«å­—å‘½ç›˜å…¨é¢åˆ†æï¼‰
- å¸Œæœ›æŒ‡å®šç‰¹å®šå¤§å¸ˆè§£è¯»
- éœ€è¦è¿½é—®å’Œäº’åŠ¨
- å¯¹éšç§è¦æ±‚é«˜
- **æ²¡æœ‰å åœç»“æœï¼Œéœ€è¦å¤§å¸ˆä»é›¶å¼€å§‹åˆ†æ**

#### 13.2 æ‚¬èµé—®ç­”é€‚ç”¨åœºæ™¯

- **å·²ç»è·å¾—å åœç»“æœï¼ˆç›˜/å¦ï¼‰**
- å¸Œæœ›è·å¾—å¤šè§’åº¦è§£è¯»
- æƒ³çœ‹çœ‹ä¸åŒå¤§å¸ˆçš„è§è§£
- é—®é¢˜æ¯”è¾ƒé€šç”¨
- æ„¿æ„å…¬å¼€é—®é¢˜å†…å®¹
- é¢„ç®—æœ‰é™ä½†å¸Œæœ›å¸å¼•æ›´å¤šå›ç­”
- **æƒ³è¦ä¼—åŒ…æ™ºæ…§ï¼Œå¯¹æ¯”ä¸åŒæµæ´¾çš„è§£è¯»**

#### 13.3 å®é™…æ¡ˆä¾‹

**æ¡ˆä¾‹1ï¼šäº‹ä¸šæ–¹å‘å’¨è¯¢**

```
åœºæ™¯: Alice æƒ³é—®äº‹ä¸šå‘å±•æ–¹å‘

ä¼ ç»Ÿé—®ç­”æ¨¡å¼:
1. Alice æ‰¾åˆ°å£ç¢‘å¥½çš„æå¤§å¸ˆ
2. è´­ä¹°æå¤§å¸ˆçš„"äº‹ä¸šå’¨è¯¢"å¥—é¤ï¼ˆ300 DUSTï¼‰
3. æå¤§å¸ˆä¸º Alice èµ·å¦ã€æ’ç›˜å¹¶è§£è¯»
4. æä¾›ä¸€å¯¹ä¸€æ·±åº¦åˆ†æå’Œå»ºè®®
5. æ”¯æŒ 3 æ¬¡è¿½é—®

æ‚¬èµé—®ç­”æ¨¡å¼:
1. Alice è‡ªå·±å…ˆèµ·å¦ï¼ˆè°ƒç”¨ pallet-meihuaï¼‰
   -> è·å¾—å¦è±¡: å¤©ç«åŒäººå˜å¤©æ³½å±¥
2. åŸºäºå¦è±¡å‘èµ·æ‚¬èµï¼ˆ500 DUSTï¼‰
3. 5 ä½å¤§å¸ˆæä¾›è§£è¯»ï¼ˆä¸åŒæµæ´¾ã€ä¸åŒè§’åº¦ï¼‰
4. Alice å¯¹æ¯”æ‰€æœ‰è§£è¯»ï¼Œé€‰æ‹©æœ€æ»¡æ„çš„
5. è·å¾—æ›´å…¨é¢çš„è§†è§’
```

**æ¡ˆä¾‹2ï¼šå…«å­—åˆå©š**

```
åœºæ™¯: Bob å’Œ Carol æƒ³çœ‹å…«å­—åˆå©š

ä¼ ç»Ÿé—®ç­”æ¨¡å¼:
1. Bob æä¾›ä¸¤äººç”Ÿè¾°å…«å­—
2. ç‹å¤§å¸ˆæ’ç›˜å¹¶åˆ†æåˆå©š
3. æä¾›è¯¦ç»†çš„åˆå©šæŠ¥å‘Š
4. ä¸€å¯¹ä¸€éšç§ä¿æŠ¤

æ‚¬èµé—®ç­”æ¨¡å¼:
1. Bob å…ˆåˆ†åˆ«æ’ç›˜ï¼ˆè°ƒç”¨ pallet-baziï¼‰
   -> è·å¾—ä¸¤ä»½å…«å­—æ’ç›˜ç»“æœ
2. åŸºäºä¸¤ä»½æ’ç›˜å‘èµ·æ‚¬èµ
3. å¤šä½å¤§å¸ˆæä¾›åˆå©šåˆ†æ
4. å…¬å¼€æ‚¬èµï¼Œéšç§æ€§è¾ƒä½
5. ä½†å¯ä»¥çœ‹åˆ°æ›´å¤šæµæ´¾çš„è§‚ç‚¹
```

### 14. å‰ç«¯äº¤äº’è®¾è®¡

#### 14.1 åˆ›å»ºæ‚¬èµé¡µé¢ï¼ˆé‡æ–°è®¾è®¡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        åŸºäºå åœç»“æœåˆ›å»ºæ‚¬èµ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ é€‰æ‹©å åœç»“æœ:                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [ğŸ“Š] æ¢…èŠ±æ˜“æ•° #12345              â”‚ â”‚
â”‚ â”‚      å¤©ç«åŒäºº â†’ å¤©æ³½å±¥             â”‚ â”‚
â”‚ â”‚      åˆ›å»ºæ—¶é—´: 2025-01-15          â”‚ â”‚
â”‚ â”‚                          [é€‰æ‹©] âœ“  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ [ğŸ”®] å…«å­—æ’ç›˜ #456                â”‚ â”‚
â”‚ â”‚      è¾›å¯ åºšå¯… ç”²å­ ä¹™ä¸‘           â”‚ â”‚
â”‚ â”‚      åˆ›å»ºæ—¶é—´: 2025-01-10          â”‚ â”‚
â”‚ â”‚                          [é€‰æ‹©]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ é—®é¢˜æè¿°:                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¿™ä¸ªå¦è±¡æ˜¾ç¤ºæˆ‘äº‹ä¸šæ–¹å‘æ˜¯å¦æœ‰å˜åŒ–ï¼Ÿ â”‚ â”‚
â”‚ â”‚ ä½•æ—¶æœ‰è½¬æœºï¼Ÿéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ æ‚¬èµé‡‘é¢: [    500    ] DUST           â”‚
â”‚                                        â”‚
â”‚ æˆªæ­¢æ—¶é—´: [   7å¤©å   ] â–¼              â”‚
â”‚                                        â”‚
â”‚ é«˜çº§é€‰é¡¹:                              â”‚
â”‚ â˜ ä»…é™è®¤è¯å¤§å¸ˆå›ç­”                     â”‚
â”‚ â˜‘ å…è®¸ç¤¾åŒºæŠ•ç¥¨                         â”‚
â”‚                                        â”‚
â”‚         [ å‘å¸ƒæ‚¬èµ ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®äº¤äº’ï¼š**
1. ç”¨æˆ·å¿…é¡»å…ˆé€‰æ‹©ä¸€ä¸ªå·²å­˜åœ¨çš„å åœç»“æœ
2. ç³»ç»Ÿæ˜¾ç¤ºå åœç»“æœçš„æ‘˜è¦ä¿¡æ¯
3. ç”¨æˆ·è¡¥å……å…·ä½“é—®é¢˜æè¿°ï¼ˆåŸºäºå åœç»“æœï¼‰

#### 14.2 æ‚¬èµè¯¦æƒ…é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‚¬èµè¯¦æƒ… #12345                 [Open] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ å åœç»“æœ:                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç±»å‹: æ¢…èŠ±æ˜“æ•°                     â”‚ â”‚
â”‚ â”‚ ç»“æœID: #98765                     â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ æœ¬å¦: å¤©ç«åŒäºº (ä¸Šå¦:ä¹¾ ä¸‹å¦:ç¦»)   â”‚ â”‚
â”‚ â”‚ å˜å¦: å¤©æ³½å±¥ (ä¸Šå¦:ä¹¾ ä¸‹å¦:å…‘)     â”‚ â”‚
â”‚ â”‚ äº’å¦: ç¦»ä¸ºç«                       â”‚ â”‚
â”‚ â”‚ å˜çˆ»: åˆå…­                         â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚              [æŸ¥çœ‹å®Œæ•´å¦è±¡]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ æé—®è€…: Alice                          â”‚
â”‚ æ‚¬èµé‡‘é¢: 500 DUST                     â”‚
â”‚ é—®é¢˜æè¿°: "è¿™ä¸ªå¦è±¡æ˜¾ç¤ºæˆ‘äº‹ä¸šæ–¹å‘..." â”‚
â”‚ æˆªæ­¢æ—¶é—´: å‰©ä½™ 5å¤© 12å°æ—¶              â”‚
â”‚ å›ç­”æ•°: 8/20                           â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è§£è¯»åˆ—è¡¨                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‘¤ æå¤§å¸ˆ [è®¤è¯] [â­â­â­â­â­]        â”‚ â”‚
â”‚ â”‚ ç¥¨æ•°: 22ç¥¨                         â”‚ â”‚
â”‚ â”‚ "ä»å¦è±¡æ¥çœ‹ï¼Œå¤©ç«åŒäººå˜å¤©æ³½å±¥..."  â”‚ â”‚
â”‚ â”‚                      [æŸ¥çœ‹è¯¦æƒ…]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‘¤ ç‹å¸ˆå‚… [è®¤è¯] [â­â­â­â­]          â”‚ â”‚
â”‚ â”‚ ç¥¨æ•°: 15ç¥¨                         â”‚ â”‚
â”‚ â”‚ "æ­¤å¦ä¸Šä¹¾ä¸‹ç¦»ï¼Œä¹¾ä¸ºå¤©ä¸ºå¥..."      â”‚ â”‚
â”‚ â”‚                      [æŸ¥çœ‹è¯¦æƒ…]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚         [ æäº¤æˆ‘çš„è§£è¯» ]               â”‚
â”‚    (ä»…é™è®¤è¯å¤§å¸ˆå¯è§æ­¤æŒ‰é’®)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®äº¤äº’ï¼š**
1. æ˜¾ç¤ºå®Œæ•´çš„å åœç»“æœæ•°æ®
2. ç”¨æˆ·å¯ä»¥ç‚¹å‡»æŸ¥çœ‹å åœç»“æœçš„è¯¦ç»†ç•Œé¢
3. è§£è¯»è€…å¯ä»¥çœ‹åˆ°å®Œæ•´çš„ç›˜/å¦æ•°æ®

#### 14.3 æäº¤è§£è¯»é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æäº¤è§£è¯»                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ å åœç»“æœ: æ¢…èŠ±æ˜“æ•° #98765              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æœ¬å¦: å¤©ç«åŒäºº                     â”‚ â”‚
â”‚ â”‚ å˜å¦: å¤©æ³½å±¥                       â”‚ â”‚
â”‚ â”‚ äº’å¦: ç¦»ä¸ºç«                       â”‚ â”‚
â”‚ â”‚ å˜çˆ»: åˆå…­                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ æé—®è€…é—®é¢˜: "è¿™ä¸ªå¦è±¡æ˜¾ç¤ºæˆ‘äº‹ä¸š..."   â”‚
â”‚                                        â”‚
â”‚ æˆ‘çš„è§£è¯»:                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä»å¦è±¡æ¥çœ‹:                        â”‚ â”‚
â”‚ â”‚ 1. æœ¬å¦å¤©ç«åŒäººï¼Œä¸Šå¦ä¹¾å¤©ï¼Œä¸‹å¦ç¦» â”‚ â”‚
â”‚ â”‚    ç«ï¼Œè±¡å¾å¿—åŒé“åˆã€å›¢ç»“åä½œ...   â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ 2. å˜çˆ»åˆå…­ï¼Œä»åŒäººå¦å˜ä¸ºå±¥å¦ï¼Œ   â”‚ â”‚
â”‚ â”‚    è¡¨ç¤ºäº‹ä¸šéœ€è¦è°¨æ…å‰è¡Œ...         â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ 3. äº’å¦ç¦»ä¸ºç«ï¼Œä¸»äº‹ä¸šè¿åŠ¿æ—ºç››...   â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ ç»¼åˆå»ºè®®ï¼š                         â”‚ â”‚
â”‚ â”‚ - æ—¶æœºï¼šå®œåœ¨æ˜¥å­£ï¼ˆå¯…å¯æœˆï¼‰è¡ŒåŠ¨     â”‚ â”‚
â”‚ â”‚ - æ–¹å‘ï¼šä¸œå—æ–¹å‘æœ‰åˆ©               â”‚ â”‚
â”‚ â”‚ - æ³¨æ„ï¼šéœ€é˜²å°äººï¼Œä¿æŒä½è°ƒ         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚         [ æäº¤è§£è¯» ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®äº¤äº’ï¼š**
1. è§£è¯»è€…å¯ä»¥çœ‹åˆ°å®Œæ•´çš„å åœæ•°æ®
2. é¼“åŠ±åŸºäºæ•°æ®è¿›è¡Œä¸“ä¸šåˆ†æ
3. æä¾›å‚è€ƒæ¨¡æ¿ï¼ˆå¯é€‰ï¼‰

### 15. å®‰å…¨è€ƒè™‘

#### 15.1 å åœç»“æœéªŒè¯

1. **æ‰€æœ‰æƒéªŒè¯**ï¼š
   ```rust
   // éªŒè¯è°ƒç”¨è€…æ˜¯å åœç»“æœçš„åˆ›å»ºè€…
   let creator = T::DivinationProvider::result_creator(divination_type, result_id)
       .ok_or(Error::<T>::DivinationResultNotFound)?;

   ensure!(creator == who, Error::<T>::NotResultCreator);
   ```

2. **å­˜åœ¨æ€§éªŒè¯**ï¼š
   ```rust
   // éªŒè¯å åœç»“æœå­˜åœ¨
   ensure!(
       T::DivinationProvider::result_exists(divination_type, result_id),
       Error::<T>::DivinationResultNotFound
   );
   ```

3. **é˜²æ­¢ä¼ªé€ **ï¼š
   - å åœç»“æœIDå¿…é¡»ä»å¯¹åº”çš„å åœ Pallet ä¸­æŸ¥è¯¢
   - ä¸èƒ½é€šè¿‡éšæ„è¾“å…¥IDç»•è¿‡éªŒè¯

#### 15.2 èµ„é‡‘å®‰å…¨

1. **æ‰˜ç®¡æœºåˆ¶**ï¼šæ‚¬èµé‡‘åœ¨åˆ›å»ºæ—¶å³è½¬å…¥å¹³å°æ‰˜ç®¡è´¦æˆ·ï¼ˆPalletId æ´¾ç”Ÿï¼‰
2. **åŸå­ç»“ç®—**ï¼šå¥–åŠ±åˆ†é…åœ¨å•ä¸ªäº¤æ˜“ä¸­å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š
3. **è¶…æ—¶é€€æ¬¾**ï¼šè¿‡æœŸæ— å›ç­”è‡ªåŠ¨é€€æ¬¾

#### 15.3 é˜²ä½œå¼Š

1. **é˜²åˆ·ç¥¨**ï¼šæ¯ä¸ªè´¦æˆ·åªèƒ½æŠ•ä¸€ç¥¨
2. **é˜²è‡ªç­”**ï¼šç¦æ­¢å›ç­”è‡ªå·±çš„æ‚¬èµ
3. **é˜²é‡å¤**ï¼šæ¯äººåªèƒ½æäº¤ä¸€ä¸ªå›ç­”
4. **é˜²æ¶æ„å–æ¶ˆ**ï¼šæœ‰å›ç­”åä¸èƒ½å–æ¶ˆæ‚¬èµ

#### 15.4 è®¤è¯æœºåˆ¶

```rust
/// æä¾›è€…è®¤è¯çŠ¶æ€ï¼ˆé¢„ç•™ï¼‰
pub enum ProviderStatus {
    /// æœªè®¤è¯
    Unverified,
    /// å·²è®¤è¯
    Verified,
    /// é«˜çº§è®¤è¯
    Premium,
    /// å¤§å¸ˆè®¤è¯
    Master,
}
```

### 16. æ‰©å±•æ–¹å‘

#### 16.1 çŸ­æœŸæ‰©å±•ï¼ˆPhase 1ï¼‰

1. **åŠ¨æ€å¥–åŠ±æ¯”ä¾‹**ï¼šå…è®¸æé—®è€…è‡ªå®šä¹‰åˆ†é…æ¯”ä¾‹
   ```rust
   pub fn create_bounty_with_custom_reward(
       // ... å…¶ä»–å‚æ•°
       custom_distribution: RewardDistribution,
   ) -> DispatchResult
   ```

2. **åŠ æƒæŠ•ç¥¨**ï¼šæ ¹æ®æŠ•ç¥¨è€…ç­‰çº§åŠ æƒç¥¨æ•°
   ```rust
   pub struct WeightedVote {
       pub voter: AccountId,
       pub weight: u32,  // 1=æ™®é€šç”¨æˆ·, 2=è®¤è¯ç”¨æˆ·, 3=å¤§å¸ˆ
   }
   ```

3. **åŒ¿åæ‚¬èµ**ï¼šæ”¯æŒåŒ¿åæé—®ï¼ˆå åœç»“æœå¯è§ï¼Œä½†æé—®è€…åŒ¿åï¼‰

#### 16.2 ä¸­æœŸæ‰©å±•ï¼ˆPhase 2ï¼‰

1. **è¿½é—®æœºåˆ¶**ï¼šä¸ºæ‚¬èµé—®ç­”æ·»åŠ æœ‰é™æ¬¡æ•°çš„è¿½é—®åŠŸèƒ½
2. **å›ç­”æ‰“èµ**ï¼šæ”¯æŒå¯¹ä¼˜ç§€å›ç­”é¢å¤–æ‰“èµ
3. **æ™ºèƒ½æ¨è**ï¼šæ ¹æ®ä¸“é•¿è‡ªåŠ¨æ¨èæ‚¬èµç»™åˆé€‚çš„æä¾›è€…
4. **è§£è¯»æ¨¡æ¿**ï¼šä¸ºä¸åŒå åœç±»å‹æä¾›è§£è¯»æ¨¡æ¿

#### 16.3 é•¿æœŸæ‰©å±•ï¼ˆPhase 3ï¼‰

1. **AIè¾…åŠ©**ï¼šé›†æˆ pallet-divination-ai æä¾›å‚è€ƒè§£è¯»
2. **è§£è¯»è´¨é‡è¯„åˆ†**ï¼šå»ºç«‹è§£è¯»è´¨é‡è¯„ä¼°ç³»ç»Ÿ
3. **æµæ´¾æ ‡ç­¾**ï¼šæ”¯æŒæ ‡æ³¨ä¸åŒæµæ´¾ï¼ˆæ¢…èŠ±å¿ƒæ˜“ã€äº¬æˆ¿æ˜“å­¦ç­‰ï¼‰
4. **å†å²å›æº¯**ï¼šæŸ¥çœ‹åŒä¸€å åœç»“æœçš„æ‰€æœ‰æ‚¬èµè®°å½•

### 17. ä¸å…¶ä»–æ¨¡å—çš„é›†æˆ

#### 17.1 å åœç³»ç»Ÿé›†æˆ

```
pallet-meihua (æ¢…èŠ±æ˜“æ•°)
    â†“ æä¾›å¦è±¡æ•°æ®
pallet-divination-market
    â†“ æä¾›è§£è¯»å¸‚åœº
pallet-divination-nft
    â†“ é“¸é€ ç¨€æœ‰å¦è±¡ NFT
```

#### 17.2 æ¨èç³»ç»Ÿé›†æˆ

```
ç”¨æˆ· A å‘èµ·æ‚¬èµ
    â†“
æ¨èäºº B é‚€è¯·çš„å¤§å¸ˆ C æä¾›è§£è¯»
    â†“
ç»“ç®—æ—¶è§¦å‘ pallet-memo-affiliate
    â†“
B è·å¾— C æ”¶å…¥çš„æ¨èä½£é‡‘
```

#### 17.3 æ•°æ®ç´¢å¼•é›†æˆ

```
Subsquid (stardust-squid)
    â†“ ç´¢å¼•é“¾ä¸Šæ•°æ®
æä¾›æŸ¥è¯¢ API:
- çƒ­é—¨æ‚¬èµæ’è¡Œ
- å¤§å¸ˆè§£è¯»ç»Ÿè®¡
- å åœç»“æœæµè§ˆ
- æ‚¬èµå†å²è®°å½•
```

### 18. æ€§èƒ½ä¼˜åŒ–

#### 18.1 å­˜å‚¨ä¼˜åŒ–

1. **IPFS å­˜å‚¨**ï¼šè§£è¯»å†…å®¹å­˜å‚¨åœ¨ IPFSï¼Œé“¾ä¸Šä»…å­˜ CID
2. **æœ‰ç•Œé›†åˆ**ï¼šä½¿ç”¨ `BoundedVec` é™åˆ¶åˆ—è¡¨å¤§å°
3. **ç´¢å¼•ç»“æ„**ï¼šå»ºç«‹å¤šå±‚ç´¢å¼•åŠ é€ŸæŸ¥è¯¢

#### 18.2 è®¡ç®—ä¼˜åŒ–

1. **å»¶è¿Ÿç»“ç®—**ï¼šç»“ç®—é€»è¾‘åœ¨é“¾ä¸‹è®¡ç®—ï¼Œé“¾ä¸Šä»…éªŒè¯
2. **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æŠ•ç¥¨ã€æ‰¹é‡æŸ¥è¯¢
3. **ç¼“å­˜æœºåˆ¶**ï¼šå‰ç«¯ç¼“å­˜çƒ­é—¨æ‚¬èµå’Œå åœç»“æœ

### 19. æµ‹è¯•ç­–ç•¥

#### 19.1 å•å…ƒæµ‹è¯•

```rust
#[test]
fn test_create_bounty_with_valid_divination_result() {
    new_test_ext().execute_with(|| {
        // 1. åˆ›å»ºæ¢…èŠ±æ˜“æ•°å¦è±¡
        assert_ok!(Meihua::create_hexagram(/* ... */));

        // 2. åŸºäºå¦è±¡åˆ›å»ºæ‚¬èµ
        assert_ok!(DivinationMarket::create_bounty_interpretation(
            Origin::signed(ALICE),
            DivinationType::Meihua,
            1,  // hexagram_id
            b"Qm...".to_vec(),
            500 * DUST,
            100,  // deadline
            3, 20,
            None, false, true,
        ));

        // 3. éªŒè¯æ‚¬èµåˆ›å»ºæˆåŠŸ
        let bounty = BountyInterpretations::<Test>::get(1).unwrap();
        assert_eq!(bounty.result_id, 1);
        assert_eq!(bounty.divination_type, DivinationType::Meihua);
    });
}

#[test]
fn test_cannot_create_bounty_for_others_divination() {
    new_test_ext().execute_with(|| {
        // 1. Alice åˆ›å»ºå¦è±¡
        assert_ok!(Meihua::create_hexagram(Origin::signed(ALICE), /* ... */));

        // 2. Bob å°è¯•åŸºäº Alice çš„å¦è±¡åˆ›å»ºæ‚¬èµï¼ˆåº”è¯¥å¤±è´¥ï¼‰
        assert_noop!(
            DivinationMarket::create_bounty_interpretation(
                Origin::signed(BOB),
                DivinationType::Meihua,
                1,
                /* ... */
            ),
            Error::<Test>::NotResultCreator
        );
    });
}
```

#### 19.2 é›†æˆæµ‹è¯•

1. å®Œæ•´æ‚¬èµæµç¨‹æµ‹è¯•ï¼ˆåˆ›å»º-å›ç­”-æŠ•ç¥¨-é‡‡çº³-ç»“ç®—ï¼‰
2. å¤šç§å åœç±»å‹æµ‹è¯•
3. è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆæœ€å¤§å›ç­”æ•°ã€æˆªæ­¢æ—¶é—´ç­‰ï¼‰
4. å¼‚å¸¸æƒ…å†µæµ‹è¯•ï¼ˆå åœç»“æœä¸å­˜åœ¨ã€ä½™é¢ä¸è¶³ç­‰ï¼‰

#### 19.3 å‹åŠ›æµ‹è¯•

1. å¤§é‡æ‚¬èµå¹¶å‘åˆ›å»º
2. å¤§é‡è§£è¯»å¹¶å‘æäº¤
3. å¤§é‡æŠ•ç¥¨å¹¶å‘å¤„ç†

### 20. æ–‡æ¡£æ›´æ–°è®¡åˆ’

#### 20.1 éœ€è¦æ›´æ–°çš„æ–‡æ¡£

| æ–‡æ¡£ | æ›´æ–°å†…å®¹ |
|------|---------|
| `pallets/divination/common/README.md` | è¡¥å…… `DivinationProvider` trait è¯´æ˜ |
| `pallets/divination/meihua/README.md` | è¯´æ˜å¦‚ä½•è¢«å¸‚åœºæ¨¡å—è°ƒç”¨ |
| `pallets/divination/bazi/README.md` | è¯´æ˜å¦‚ä½•è¢«å¸‚åœºæ¨¡å—è°ƒç”¨ |
| `runtime/README.md` | è¡¥å……å¸‚åœºæ¨¡å—çš„é…ç½®è¯´æ˜ |
| `docs/architecture.md` | è¡¥å……å åœç³»ç»Ÿä¸å¸‚åœºæ¨¡å—çš„æ¶æ„å›¾ |

#### 20.2 éœ€è¦åˆ›å»ºçš„æ–‡æ¡£

1. `docs/bounty-interpretation-guide.md`: æ‚¬èµè§£è¯»ç”¨æˆ·æŒ‡å—
2. `docs/divination-provider-impl.md`: DivinationProvider å®ç°æŒ‡å—
3. `docs/frontend-integration.md`: å‰ç«¯é›†æˆæŒ‡å—
4. `docs/subsquid-schema.md`: Subsquid æ•°æ®æ¨¡å‹è®¾è®¡

### 21. ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `pallets/divination/market/src/lib.rs` | å¸‚åœº Pallet ä¸»æ¨¡å— |
| `pallets/divination/market/src/types.rs` | æ•°æ®ç±»å‹å®šä¹‰ |
| `pallets/divination/market/src/bounty.rs` | æ‚¬èµé—®ç­”é€»è¾‘ |
| `pallets/divination/market/src/tests.rs` | å•å…ƒæµ‹è¯• |
| `pallets/divination/common/src/lib.rs` | å…¬å…±æ¨¡å—ï¼ˆDivinationProvider traitï¼‰ |
| `pallets/divination/meihua/src/lib.rs` | æ¢…èŠ±æ˜“æ•°æ¨¡å— |
| `pallets/divination/bazi/src/lib.rs` | å…«å­—æ’ç›˜æ¨¡å— |
| `runtime/src/configs/divination.rs` | Runtime é…ç½® |
| `stardust-dapp/src/pages/Bounty*.tsx` | å‰ç«¯æ‚¬èµé¡µé¢ |
| `stardust-squid/src/model/*.ts` | Subsquid æ•°æ®æ¨¡å‹ |

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0
**æ›´æ–°æ—¥æœŸ**ï¼š2025-12-02
**ä½œè€…**ï¼šClaude Code
**é‡è¦å˜æ›´**ï¼šæ˜ç¡®æ‚¬èµé—®ç­”åŸºäºå åœç»“æœï¼Œè¡¥å…… DivinationProvider trait å’Œå®Œæ•´ä¸šåŠ¡æµç¨‹
