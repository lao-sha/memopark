# Phase 7.1 - æµ‹è¯•ç°çŠ¶æ€»ç»“

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**è¯Šæ–­æ—¶é—´**: 2025-10-29  
**çŠ¶æ€**: âš ï¸ å‘ç°å…¨å±€é—®é¢˜

---

## ğŸ” å…¨å±€è¯Šæ–­ç»“æœ

### æµ‹è¯•æ–‡ä»¶ç°çŠ¶

æ ¹æ®æ‰«æç»“æœï¼Œå„ Pallet çš„æµ‹è¯•æ–‡ä»¶å­˜åœ¨æƒ…å†µï¼š

| Pallet | mock.rs | tests.rs | çŠ¶æ€ |
|--------|---------|----------|------|
| **Trading** | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ğŸŸ¡ éœ€è¡¥å……å®ç° |
| **Credit** | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ğŸŸ¡ éœ€è¡¥å……å®ç° |
| **Deceased** | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ğŸŸ¡ éœ€è¡¥å……å®ç° |
| **Memorial** | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ğŸŸ¡ éœ€è¡¥å……å®ç° |
| **Affiliate** | âŒ ä¸å­˜åœ¨ | âŒ ä¸å­˜åœ¨ | ğŸ”´ éœ€ä»é›¶åˆ›å»º |
| **Membership** | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ğŸŸ¡ éœ€è¡¥å……å®ç° |

**ğŸ“Š ç»Ÿè®¡**ï¼š
- âœ… æœ‰æµ‹è¯•æ¡†æ¶ï¼š5/6 (83%)
- âŒ æ— æµ‹è¯•æ¡†æ¶ï¼š1/6 (17%)
- ğŸŸ¢ æƒ…å†µè‰¯å¥½ï¼

---

## ğŸ“Š é—®é¢˜ä¸¥é‡æ€§è¯„ä¼°

### ğŸŸ¢ å¥½æ¶ˆæ¯
- âœ… **5/6 æ ¸å¿ƒ Pallet å·²æœ‰æµ‹è¯•æ¡†æ¶**ï¼ˆTrading, Credit, Deceased, Memorial, Membershipï¼‰
- âœ… **Mock Runtime å·²é…ç½®**ï¼ˆéœ€è¦éªŒè¯å®Œæ•´æ€§ï¼‰
- âœ… **æµ‹è¯•æ–‡ä»¶ç»“æ„å·²å°±ç»ª**

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜
- ğŸŸ¡ æµ‹è¯•ç”¨ä¾‹å¤§å¤šä¸º TODO å ä½ç¬¦ï¼Œéœ€è¦å®ç°
- ğŸŸ¡ æµ‹è¯•è¦†ç›–ç‡éœ€è¦éªŒè¯
- ğŸŸ¡ ä¾èµ–å…³ç³»éœ€è¦æ£€æŸ¥

### ğŸ”´ éœ€è¦è§£å†³
- ğŸ”´ **Affiliate** pallet å®Œå…¨ç¼ºå°‘æµ‹è¯•æ¡†æ¶ï¼ˆåˆšæ•´åˆå®Œæˆï¼‰

---

## ğŸ’¡ è°ƒæ•´åçš„æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šä»é›¶å¼€å§‹ï¼Œé€ä¸ªå‡»ç ´ï¼ˆæ¨èï¼‰â­â­â­

**ç­–ç•¥**ï¼šé€‰æ‹©ä¾èµ–æœ€å°‘çš„ Palletï¼Œä»å¤´åˆ›å»ºå®Œæ•´çš„æµ‹è¯•ã€‚

**ä¼˜å…ˆçº§æ’åº**ï¼ˆæŒ‰ä¾èµ–å¤æ‚åº¦ï¼‰ï¼š
1. **Deceased** - ä¾èµ–æœ€å°‘ï¼ˆä»… frame_system, balancesï¼‰
2. **Credit** - ä¾èµ–å°‘ï¼ˆä»…åŸºç¡€ palletï¼‰
3. **Affiliate** - ä¸­ç­‰ä¾èµ–ï¼ˆéœ€è¦ Currencyï¼‰
4. **Memorial** - ä¸­ç­‰ä¾èµ–ï¼ˆéœ€è¦ Deceased, IPFSï¼‰
5. **Trading** - ä¾èµ–æœ€å¤šï¼ˆéœ€è¦ Pricing, Escrow, Creditï¼‰

**å®æ–½è®¡åˆ’**ï¼š

#### Phase 7.1.1 - Deceased æµ‹è¯•ï¼ˆDay 1, 4hï¼‰
```rust
// 1. åˆ›å»º mock.rs (2h)
pallets/deceased/src/mock.rs
- frame_system::Config
- pallet_balances::Config
- pallet_deceased::Config

// 2. åˆ›å»º tests.rs (2h)
âœ… test_create_deceased_success
âœ… test_create_deceased_unauthorized
âœ… test_update_deceased_success
âœ… test_update_deceased_not_found
âœ… test_delete_deceased_success
âœ… test_pin_to_ipfs
... å…± 10+ æµ‹è¯•ç”¨ä¾‹
```

#### Phase 7.1.2 - Credit æµ‹è¯•ï¼ˆDay 2, 4hï¼‰
```rust
// 1. åˆ›å»º mock.rs (2h)
pallets/credit/src/mock.rs
- frame_system::Config
- pallet_balances::Config
- pallet_credit::Config

// 2. åˆ›å»º tests.rs (2h)
âœ… test_buyer_credit_flow
âœ… test_buyer_breach_record
âœ… test_maker_credit_flow
âœ… test_maker_breach_record
âœ… test_credit_level_upgrade
... å…± 15+ æµ‹è¯•ç”¨ä¾‹
```

#### Phase 7.1.3 - Affiliate æµ‹è¯•ï¼ˆDay 3-4, 8hï¼‰
```rust
// 1. åˆ›å»º mock.rs (3h)
pallets/affiliate/src/mock.rs
- frame_system::Config
- pallet_balances::Config
- pallet_affiliate::Config
- MembershipProvider Mock

// 2. åˆ›å»º tests.rs (5h)
âœ… test_bind_sponsor_success
âœ… test_bind_sponsor_cycle_detection
âœ… test_claim_code_success
âœ… test_instant_distribution
âœ… test_weekly_accumulation
âœ… test_weekly_settlement
âœ… test_hybrid_mode
... å…± 30+ æµ‹è¯•ç”¨ä¾‹
```

#### Phase 7.1.4 - Memorial æµ‹è¯•ï¼ˆDay 5-6, 6hï¼‰
```rust
// 1. æ›´æ–° mock.rs (2h)
pallets/memorial/src/mock.rs
- ä¾èµ– Deceased
- ä¾èµ– IPFS
- TargetControl Mock

// 2. åˆ›å»º tests.rs (4h)
âœ… test_create_sacrifice
âœ… test_offer_success
âœ… test_offer_by_sacrifice
âœ… test_route_distribution
... å…± 25+ æµ‹è¯•ç”¨ä¾‹
```

#### Phase 7.1.5 - Trading æµ‹è¯•ï¼ˆDay 7-10, 12hï¼‰
```rust
// 1. è¡¥å……å®Œæ•´ mock.rs (6h)
pallets/trading/src/mock.rs
- ä¾èµ– Pricing
- ä¾èµ– Escrow
- ä¾èµ– Credit
- Mock é€‚é…å™¨

// 2. å®ç° tests.rs (6h)
âœ… å®ç°ç°æœ‰ 8 ä¸ª TODO
âœ… è¡¥å…… 12+ ä¸ªæ–°æµ‹è¯•
... å…± 20+ æµ‹è¯•ç”¨ä¾‹
```

---

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨é›†æˆæµ‹è¯•ï¼ˆå¿«é€Ÿä½†ä¸ç†æƒ³ï¼‰

**ç­–ç•¥**ï¼šåœ¨ Runtime å±‚é¢è¿›è¡Œæµ‹è¯•ï¼Œè·³è¿‡å•å…ƒæµ‹è¯•ã€‚

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€é…ç½® Mock
- âœ… ä½¿ç”¨çœŸå®çš„ pallet ä¾èµ–
- âœ… æ›´æ¥è¿‘çœŸå®ç¯å¢ƒ

**åŠ£åŠ¿**ï¼š
- âŒ è¿è¡Œæ…¢
- âŒ è°ƒè¯•å›°éš¾
- âŒ ä¸ç¬¦åˆæµ‹è¯•æœ€ä½³å®è·µ

---

### æ–¹æ¡ˆ Cï¼šå‹ç¼©æµ‹è¯•èŒƒå›´ï¼ˆåº”æ€¥æ–¹æ¡ˆï¼‰

**ç­–ç•¥**ï¼šåªæµ‹è¯•æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œæ”¾å¼ƒå…¨é¢è¦†ç›–ã€‚

**æµ‹è¯•ä¼˜å…ˆçº§**ï¼š
1. ğŸ”´ P0ï¼ˆå¿…æµ‹ï¼‰ï¼šèµ„é‡‘å®‰å…¨ç›¸å…³ï¼ˆOTCæ‰˜ç®¡ã€æ¡¥æ¥å…‘æ¢ã€èµ„é‡‘è·¯ç”±ï¼‰
2. ğŸŸ¡ P1ï¼ˆé‡è¦ï¼‰ï¼šä¿¡ç”¨ç³»ç»Ÿã€æ¨èå…³ç³»
3. ğŸŸ¢ P2ï¼ˆæ¬¡è¦ï¼‰ï¼šè¾…åŠ©åŠŸèƒ½ã€æŸ¥è¯¢åŠŸèƒ½

**é¢„æœŸè¦†ç›–ç‡**ï¼š40-50%ï¼ˆè€Œé 80%ï¼‰

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### æ¨èè·¯å¾„ï¼šæ–¹æ¡ˆ Aï¼ˆä»é›¶å¼€å§‹ï¼Œé€ä¸ªå‡»ç ´ï¼‰

**ç†ç”±**ï¼š
1. âœ… è™½ç„¶è€—æ—¶ï¼Œä½†ä¸€æ­¥åˆ°ä½
2. âœ… å»ºç«‹å®Œæ•´çš„æµ‹è¯•ä½“ç³»
3. âœ… ä¸ºåç»­ç»´æŠ¤æ‰“å¥½åŸºç¡€
4. âœ… ç¬¦åˆæœ€ä½³å®è·µ

**æ—¶é—´è§„åˆ’**ï¼š
- **Week 1**: Deceased + Credit æµ‹è¯•ï¼ˆ2å¤©ï¼‰
- **Week 2**: Affiliate + Memorial æµ‹è¯•ï¼ˆ4å¤©ï¼‰
- **Week 3**: Trading æµ‹è¯• + è¡¥å……å®Œå–„ï¼ˆ4å¤©ï¼‰

**é¢„æœŸæˆæœ**ï¼š
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- âœ… 100+ æµ‹è¯•ç”¨ä¾‹
- âœ… å®Œæ•´çš„ Mock Runtime
- âœ… æµ‹è¯•æ–‡æ¡£å’ŒæŠ¥å‘Š

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

### é€‰é¡¹ Aï¼šå¯åŠ¨ Deceased æµ‹è¯•ï¼ˆæ¨èï¼‰â­â­â­
**ä¼˜åŠ¿**ï¼š
- âœ… ä¾èµ–æœ€å°‘ï¼Œæœ€å®¹æ˜“å¼€å§‹
- âœ… å¿«é€Ÿè·å¾—ç¬¬ä¸€ä¸ªæˆæœ
- âœ… ä¸ºåç»­æµ‹è¯•å»ºç«‹æ¨¡æ¿

**ç«‹å³è¡ŒåŠ¨**ï¼š
```bash
# 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
mkdir -p pallets/deceased/src
touch pallets/deceased/src/mock.rs
touch pallets/deceased/src/tests.rs

# 2. å¼€å§‹ç¼–å†™ Mock Runtime
vim pallets/deceased/src/mock.rs
```

---

### é€‰é¡¹ Bï¼šå¯åŠ¨ Credit æµ‹è¯•
**ä¼˜åŠ¿**ï¼š
- âœ… Credit åˆšå®Œæˆæ•´åˆ
- âœ… ä¾èµ–è¾ƒå°‘

---

### é€‰é¡¹ Cï¼šå¯åŠ¨ Affiliate æµ‹è¯•
**ä¼˜åŠ¿**ï¼š
- âœ… Affiliate åˆšå®Œæˆæ•´åˆ
- âœ… éœ€è¦éªŒè¯æ ¸å¿ƒé€»è¾‘

---

### é€‰é¡¹ Dï¼šé‡‡ç”¨æ–¹æ¡ˆ Cï¼ˆå‹ç¼©èŒƒå›´ï¼‰
**ä¼˜åŠ¿**ï¼š
- âœ… å¿«é€Ÿè¾¾åˆ°åŸºæœ¬è¦†ç›–ç‡
- âœ… èšç„¦æœ€æ ¸å¿ƒåŠŸèƒ½

---

### é€‰é¡¹ Eï¼šæš‚åœï¼Œé‡æ–°è¯„ä¼° Phase 7 è§„åˆ’
**ç†ç”±**ï¼š
- âœ… é‡æ–°è¯„ä¼°æ—¶é—´å’Œèµ„æº
- âœ… è°ƒæ•´æµ‹è¯•ç­–ç•¥
- âœ… å¯»æ±‚å›¢é˜Ÿæ”¯æŒ

---

## ğŸ“Š èµ„æºéœ€æ±‚

**äººåŠ›**ï¼š
- 2-3 åå¼€å‘å·¥ç¨‹å¸ˆ
- å…¨èŒæŠ•å…¥ 1.5-2 å‘¨

**å·¥å…·**ï¼š
- âœ… `cargo test`
- âœ… `cargo tarpaulin`ï¼ˆè¦†ç›–ç‡å·¥å…·ï¼‰
- âœ… CI/CD é›†æˆ

**äº§å‡º**ï¼š
- âœ… 5 ä¸ª pallet çš„å®Œæ•´å•å…ƒæµ‹è¯•
- âœ… 100+ æµ‹è¯•ç”¨ä¾‹
- âœ… æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
- âœ… æµ‹è¯•æ–‡æ¡£

---

## ğŸ“ æ€»ç»“

**å½“å‰çŠ¶å†µ**ï¼šå‡ ä¹æ‰€æœ‰ Pallet éƒ½ç¼ºå°‘å•å…ƒæµ‹è¯•ï¼Œéœ€è¦ä»é›¶å¼€å§‹ã€‚

**æ¨èæ–¹æ¡ˆ**ï¼šé‡‡ç”¨æ–¹æ¡ˆ Aï¼Œä» Deceased å¼€å§‹ï¼Œé€ä¸ªå‡»ç ´ã€‚

**é¢„è®¡è€—æ—¶**ï¼š1.5-2 å‘¨ï¼ˆç¬¦åˆåŸè®¡åˆ’ï¼‰

**å…³é”®æˆåŠŸå› ç´ **ï¼š
1. âœ… é€‰æ‹©æ­£ç¡®çš„èµ·ç‚¹ï¼ˆDeceasedï¼‰
2. âœ… å»ºç«‹å¯å¤ç”¨çš„æµ‹è¯•æ¨¡æ¿
3. âœ… æŒç»­è·Ÿè¸ªè¿›åº¦
4. âœ… å¿«é€Ÿè¿­ä»£åé¦ˆ

---

**ä¸‹ä¸€æ­¥**ï¼šç­‰å¾…æ‚¨çš„å†³ç­–ï¼ˆé€‰é¡¹ A/B/C/D/Eï¼‰

**æ–‡æ¡£ç»“æŸ**

