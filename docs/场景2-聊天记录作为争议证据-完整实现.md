# åœºæ™¯2ï¼šèŠå¤©è®°å½•ä½œä¸ºäº‰è®®è¯æ® - å®Œæ•´å®ç°

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›**åœºæ™¯2ï¼šèŠå¤©è®°å½•ä½œä¸ºäº‰è®®è¯æ®**çš„å®Œæ•´å®ç°ä»£ç å’Œä½¿ç”¨è¯´æ˜ã€‚

### ä¸šåŠ¡åœºæ™¯

å½“OTCè®¢å•å‘ç”Ÿäº‰è®®æ—¶ï¼š
1. ä¹°å®¶å°†ä¸åšå¸‚å•†çš„èŠå¤©è®°å½•ä½œä¸ºè¯æ®æäº¤
2. èŠå¤©è®°å½•åŸæœ¬æ˜¯ç«¯åˆ°ç«¯åŠ å¯†çš„ï¼ˆåªæœ‰ä¹°å®¶å’Œåšå¸‚å•†å¯è§ï¼‰
3. ä¹°å®¶é‡æ–°åŠ å¯†ç»™**æ‰€æœ‰å§”å‘˜ä¼šæˆå‘˜**
4. å§”å‘˜ä¼šæˆå‘˜è§£å¯†æŸ¥çœ‹èŠå¤©è®°å½•ï¼Œè¿›è¡Œå…¬æ­£è£å†³

### æŠ€æœ¯æ–¹æ¡ˆ

**æ··åˆåŠ å¯†ï¼ˆAES-256-GCM + X25519ï¼‰**
- å†…å®¹åªåŠ å¯†ä¸€æ¬¡ï¼ˆAES-256ï¼‰
- ä¸ºæ¯ä¸ªå§”å‘˜ä¼šæˆå‘˜åŠ å¯†AESå¯†é’¥ï¼ˆX25519ï¼‰
- ä»»æ„å§”å‘˜ä¼šæˆå‘˜å¯ç‹¬ç«‹è§£å¯†

---

## ğŸ“ å®ç°æ–‡ä»¶æ¸…å•

### 1. æ ¸å¿ƒåŠ å¯†å·¥å…·

âœ… **`stardust-dapp/src/utils/multiRecipientEncryption.ts`**

å®Œæ•´çš„å¤šæ¥æ”¶æ–¹åŠ å¯†å·¥å…·ç±»ï¼ŒåŒ…å«ï¼š
- `encrypt()` - åŠ å¯†æ•°æ®ç»™å¤šä¸ªæ¥æ”¶æ–¹
- `decrypt()` - è§£å¯†æ•°æ®
- `validate()` - éªŒè¯åŠ å¯†æ•°æ®å®Œæ•´æ€§
- `getRecipients()` - è·å–æˆæƒæ¥æ”¶æ–¹åˆ—è¡¨
- `isAuthorized()` - æ£€æŸ¥è´¦æˆ·æ˜¯å¦æˆæƒ

**æ ¸å¿ƒAPI**ï¼š

```typescript
// åŠ å¯†
const encrypted = await MultiRecipientEncryption.encrypt(
  content,                    // åŸå§‹å†…å®¹ï¼ˆå¯¹è±¡æˆ–å­—ç¬¦ä¸²ï¼‰
  recipientPublicKeys,        // { accountId: publicKey }
  encryptorAccountId?,        // åŠ å¯†è€…IDï¼ˆå¯é€‰ï¼‰
  description?                // æè¿°ï¼ˆå¯é€‰ï¼‰
);

// è§£å¯†
const decrypted = await MultiRecipientEncryption.decrypt(
  encryptedData,              // åŠ å¯†æ•°æ®
  recipientAccountId,         // å½“å‰ç”¨æˆ·ID
  recipientSecretKey          // å½“å‰ç”¨æˆ·ç§é’¥
);
```

---

### 2. å‰ç«¯ç»„ä»¶

#### 2.1 ä¹°å®¶æäº¤è¯æ®ç»„ä»¶

âœ… **`stardust-dapp/src/components/Dispute/SubmitChatEvidence.tsx`**

**åŠŸèƒ½**ï¼š
- åŠ è½½ä¸åšå¸‚å•†çš„èŠå¤©è®°å½•
- æ”¯æŒå¤šé€‰èŠå¤©æ¶ˆæ¯
- åŠ å¯†é€‰ä¸­æ¶ˆæ¯ç»™å§”å‘˜ä¼šæˆå‘˜
- ä¸Šä¼ åˆ°IPFSå¹¶æäº¤åˆ°é“¾ä¸Š

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```tsx
import { SubmitChatEvidence } from '@/components/Dispute/SubmitChatEvidence';

<SubmitChatEvidence
  orderId={12345}
  makerAccountId="5GrwvaEF..."
  visible={showModal}
  onClose={() => setShowModal(false)}
  onSuccess={() => {
    message.success('è¯æ®å·²æäº¤');
    // åˆ·æ–°äº‰è®®åˆ—è¡¨ç­‰
  }}
/>
```

**ä¸»è¦æµç¨‹**ï¼š

```typescript
// 1. åŠ è½½èŠå¤©è®°å½•
const messages = await loadChatMessages(buyerAccount, makerAccount);

// 2. è§£å¯†æ¶ˆæ¯ï¼ˆä¹°å®¶æœ‰ç§é’¥ï¼‰
const decryptedMessages = await decryptMessages(messages);

// 3. è·å–å§”å‘˜ä¼šæˆå‘˜å…¬é’¥
const committeePublicKeys = await getCommitteePublicKeys();

// 4. é‡æ–°åŠ å¯†ç»™å§”å‘˜ä¼š
const encrypted = await MultiRecipientEncryption.encrypt(
  { order_id, messages: selectedMessages, metadata: {...} },
  committeePublicKeys
);

// 5. ä¸Šä¼ IPFS
const cid = await uploadToIPFS(encrypted);

// 6. æäº¤åˆ°é“¾ä¸Š
await api.tx.evidence.submitEvidence(
  namespace,
  orderId,
  cid,
  [], [], [],
  'èŠå¤©è®°å½•è¯æ®'
).signAndSend(...);
```

---

#### 2.2 å§”å‘˜ä¼šæŸ¥çœ‹è¯æ®ç»„ä»¶

âœ… **`stardust-dapp/src/components/Governance/ViewEncryptedEvidence.tsx`**

**åŠŸèƒ½**ï¼š
- ä»IPFSä¸‹è½½åŠ å¯†è¯æ®
- éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºæˆæƒæ¥æ”¶æ–¹
- è§£å¯†å¹¶æ˜¾ç¤ºèŠå¤©è®°å½•
- è®°å½•è®¿é—®æ—¥å¿—åˆ°é“¾ä¸Š

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```tsx
import { ViewEncryptedEvidence } from '@/components/Governance/ViewEncryptedEvidence';

<ViewEncryptedEvidence
  evidenceCid="QmXXXXX..."
  orderId={12345}
  visible={showModal}
  onClose={() => setShowModal(false)}
/>
```

**ä¸»è¦æµç¨‹**ï¼š

```typescript
// 1. ä¸‹è½½åŠ å¯†è¯æ®
const encryptedData = await fetchFromIPFS(evidenceCid);

// 2. æ£€æŸ¥æˆæƒ
const isAuthorized = MultiRecipientEncryption.isAuthorized(
  encryptedData,
  currentAccount.address
);

// 3. è·å–ç”¨æˆ·ç§é’¥ï¼ˆéœ€è¦æˆæƒï¼‰
const privateKey = await getPrivateKeyFromWallet(currentAccount);

// 4. è§£å¯†
const decrypted = await MultiRecipientEncryption.decrypt(
  encryptedData,
  currentAccount.address,
  privateKey
);

// 5. è®°å½•è®¿é—®æ—¥å¿—
await api.tx.evidence.logAccess(orderId, evidenceCid, 'å®¡æ ¸äº‰è®®');

// 6. æ˜¾ç¤ºè§£å¯†åçš„èŠå¤©è®°å½•
renderChatMessages(decrypted.messages);
```

---

### 3. é“¾ç«¯æ‰©å±•

#### 3.1 å¤šæ¥æ”¶æ–¹è¯æ®æ”¯æŒæ¨¡å—

âœ… **`pallets/evidence/src/multi_recipient.rs`**

**æ•°æ®ç»“æ„**ï¼š

```rust
/// å¤šæ¥æ”¶æ–¹è¯æ®å…ƒæ•°æ®
pub struct MultiRecipientEvidenceMeta<AccountId, BlockNumber> {
    /// è¯æ®CIDï¼ˆIPFSä¸Šçš„åŠ å¯†æ•°æ®ï¼‰
    pub cid: BoundedVec<u8, MaxCidLen>,
    
    /// æäº¤è€…è´¦æˆ·
    pub submitter: AccountId,
    
    /// æˆæƒæ¥æ”¶æ–¹åˆ—è¡¨ï¼ˆå§”å‘˜ä¼šæˆå‘˜ï¼‰
    pub authorized_recipients: BoundedVec<AccountId, MaxRecipients>,
    
    /// æäº¤æ—¶é—´
    pub submitted_at: BlockNumber,
    
    /// åŠ å¯†æ–¹æ³•
    pub encryption_method: BoundedVec<u8, ConstU32<64>>,
    
    /// è¯æ®ç±»å‹
    pub evidence_type: BoundedVec<u8, ConstU32<32>>,
    
    /// åŸå§‹å†…å®¹å¤§å°ï¼ˆå­—èŠ‚ï¼‰
    pub original_size: u64,
    
    /// æ˜¯å¦å·²å½’æ¡£
    pub is_archived: bool,
}

/// è®¿é—®è®°å½•
pub struct AccessRecord<AccountId, BlockNumber> {
    /// è®¿é—®è€…è´¦æˆ·
    pub accessor: AccountId,
    
    /// è®¿é—®æ—¶é—´
    pub accessed_at: BlockNumber,
    
    /// è®¿é—®ç›®çš„
    pub purpose: BoundedVec<u8, MaxPurposeLen>,
}
```

**åŠŸèƒ½æ–¹æ³•**ï¼š

```rust
impl<AccountId, BlockNumber> MultiRecipientEvidenceMeta<AccountId, BlockNumber> {
    /// æ£€æŸ¥è´¦æˆ·æ˜¯å¦ä¸ºæˆæƒæ¥æ”¶æ–¹
    pub fn is_authorized(&self, account: &AccountId) -> bool;
    
    /// è·å–æˆæƒæ¥æ”¶æ–¹æ•°é‡
    pub fn recipient_count(&self) -> u32;
}
```

---

## ğŸ”§ å®Œæ•´ä½¿ç”¨æµç¨‹

### æµç¨‹1ï¼šä¹°å®¶æäº¤èŠå¤©è®°å½•è¯æ®

```tsx
// Step 1: åœ¨OTCè®¢å•äº‰è®®é¡µé¢ï¼Œç‚¹å‡»"æäº¤èŠå¤©è¯æ®"
<Button
  type="primary"
  onClick={() => setShowSubmitModal(true)}
>
  æäº¤èŠå¤©è®°å½•è¯æ®
</Button>

// Step 2: å¼¹å‡ºSubmitChatEvidenceç»„ä»¶
<SubmitChatEvidence
  orderId={orderId}
  makerAccountId={order.maker_account}
  visible={showSubmitModal}
  onClose={() => setShowSubmitModal(false)}
  onSuccess={handleSubmitSuccess}
/>

// Step 3: ä¹°å®¶æ“ä½œ
// 1. ç»„ä»¶è‡ªåŠ¨åŠ è½½èŠå¤©è®°å½•
// 2. ä¹°å®¶é€‰æ‹©ç›¸å…³æ¶ˆæ¯ï¼ˆå¤šé€‰ï¼‰
// 3. ç‚¹å‡»"åŠ å¯†å¹¶æäº¤"æŒ‰é’®
// 4. è‡ªåŠ¨è·å–å§”å‘˜ä¼šæˆå‘˜å…¬é’¥
// 5. åŠ å¯†é€‰ä¸­æ¶ˆæ¯
// 6. ä¸Šä¼ åˆ°IPFS
// 7. æäº¤åˆ°åŒºå—é“¾
// 8. æ˜¾ç¤ºæˆåŠŸæç¤º
```

**å‰ç«¯ä»£ç ç¤ºä¾‹**ï¼š

```typescript
// pages/OTC/DisputeDetail.tsx

import React, { useState } from 'react';
import { Button, Card } from 'antd';
import { SubmitChatEvidence } from '@/components/Dispute/SubmitChatEvidence';

export const DisputeDetailPage = () => {
  const [showSubmitModal, setShowSubmitModal] = useState(false);
  const { orderId, makerAccountId } = useParams();
  
  const handleSubmitSuccess = () => {
    message.success('èŠå¤©è®°å½•è¯æ®å·²æˆåŠŸæäº¤ï¼');
    setShowSubmitModal(false);
    // åˆ·æ–°äº‰è®®çŠ¶æ€
    refetchDispute();
  };
  
  return (
    <Card title="è®¢å•äº‰è®®è¯¦æƒ…">
      {/* ... äº‰è®®ä¿¡æ¯å±•ç¤º ... */}
      
      <Button
        type="primary"
        icon={<FileTextOutlined />}
        onClick={() => setShowSubmitModal(true)}
      >
        æäº¤èŠå¤©è®°å½•è¯æ®
      </Button>
      
      <SubmitChatEvidence
        orderId={orderId}
        makerAccountId={makerAccountId}
        visible={showSubmitModal}
        onClose={() => setShowSubmitModal(false)}
        onSuccess={handleSubmitSuccess}
      />
    </Card>
  );
};
```

---

### æµç¨‹2ï¼šå§”å‘˜ä¼šå®¡æ ¸è¯æ®

```tsx
// Step 1: åœ¨å§”å‘˜ä¼šç®¡ç†é¡µé¢ï¼ŒæŸ¥çœ‹å¾…å®¡æ ¸äº‰è®®åˆ—è¡¨
<List
  dataSource={disputes}
  renderItem={dispute => (
    <List.Item
      actions={[
        <Button
          type="link"
          onClick={() => viewEvidence(dispute.evidence_cid)}
        >
          æŸ¥çœ‹è¯æ®
        </Button>
      ]}
    >
      è®¢å• #{dispute.order_id} - ä¹°å®¶æäº¤äº†èŠå¤©è®°å½•è¯æ®
    </List.Item>
  )}
/>

// Step 2: å¼¹å‡ºViewEncryptedEvidenceç»„ä»¶
<ViewEncryptedEvidence
  evidenceCid={selectedEvidenceCid}
  orderId={selectedOrderId}
  visible={showViewModal}
  onClose={() => setShowViewModal(false)}
/>

// Step 3: å§”å‘˜ä¼šæˆå‘˜æ“ä½œ
// 1. ç»„ä»¶è‡ªåŠ¨ä»IPFSä¸‹è½½åŠ å¯†è¯æ®
// 2. æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºæˆæƒæ¥æ”¶æ–¹
// 3. ç‚¹å‡»"è§£å¯†å¹¶æŸ¥çœ‹"æŒ‰é’®
// 4. è¯·æ±‚é’±åŒ…æˆæƒè·å–ç§é’¥
// 5. è§£å¯†è¯æ®å†…å®¹
// 6. æ˜¾ç¤ºèŠå¤©è®°å½•æ—¶é—´çº¿
// 7. è®°å½•è®¿é—®æ—¥å¿—åˆ°é“¾ä¸Š
```

**å‰ç«¯ä»£ç ç¤ºä¾‹**ï¼š

```typescript
// pages/Governance/DisputeReview.tsx

import React, { useState } from 'react';
import { List, Button, Tag } from 'antd';
import { ViewEncryptedEvidence } from '@/components/Governance/ViewEncryptedEvidence';

export const DisputeReviewPage = () => {
  const [selectedEvidence, setSelectedEvidence] = useState(null);
  const { data: disputes } = useQuery('pendingDisputes');
  
  const viewEvidence = (evidenceCid: string, orderId: number) => {
    setSelectedEvidence({ cid: evidenceCid, orderId });
  };
  
  return (
    <Card title="å¾…å®¡æ ¸äº‰è®®åˆ—è¡¨">
      <List
        dataSource={disputes}
        renderItem={dispute => (
          <List.Item
            actions={[
              <Button
                type="primary"
                size="small"
                onClick={() => viewEvidence(
                  dispute.evidence_cid,
                  dispute.order_id
                )}
              >
                æŸ¥çœ‹åŠ å¯†è¯æ®
              </Button>,
              <Button size="small">æ‰¹å‡†é€€æ¬¾</Button>,
              <Button size="small">é©³å›ç”³è¯‰</Button>,
            ]}
          >
            <List.Item.Meta
              title={`è®¢å• #${dispute.order_id}`}
              description={
                <Space>
                  <Tag color="orange">å¾…å®¡æ ¸</Tag>
                  <Text>ä¹°å®¶: {dispute.buyer_account}</Text>
                  <Text>åšå¸‚å•†: {dispute.maker_account}</Text>
                </Space>
              }
            />
          </List.Item>
        )}
      />
      
      {selectedEvidence && (
        <ViewEncryptedEvidence
          evidenceCid={selectedEvidence.cid}
          orderId={selectedEvidence.orderId}
          visible={!!selectedEvidence}
          onClose={() => setSelectedEvidence(null)}
        />
      )}
    </Card>
  );
};
```

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. ç§é’¥å®‰å…¨

âš ï¸ **å…³é”®åŸåˆ™**ï¼šç§é’¥å§‹ç»ˆä¿å­˜åœ¨ç”¨æˆ·æœ¬åœ°

```typescript
// âŒ é”™è¯¯åšæ³•ï¼šå°†ç§é’¥å‘é€åˆ°æœåŠ¡å™¨
const response = await fetch('/api/decrypt', {
  method: 'POST',
  body: JSON.stringify({ privateKey, encryptedData })
});

// âœ… æ­£ç¡®åšæ³•ï¼šåœ¨å®¢æˆ·ç«¯è§£å¯†
const privateKey = await getPrivateKeyFromWallet(account);
const decrypted = await MultiRecipientEncryption.decrypt(
  encryptedData,
  accountId,
  privateKey
);
```

### 2. å…¬é’¥è·å–

âœ… **ä»å¯ä¿¡æ¥æºè·å–å…¬é’¥**ï¼š

```typescript
// æ–¹å¼1ï¼šä»é“¾ä¸ŠIdentityè·å–ï¼ˆæ¨èï¼‰
const identity = await api.query.identity.identityOf(accountId);
const publicKey = identity.unwrap().additional.publicKey;

// æ–¹å¼2ï¼šä»è´¦æˆ·åœ°å€æ´¾ç”Ÿï¼ˆPolkadotæ ‡å‡†ï¼‰
import { decodeAddress } from '@polkadot/util-crypto';
const publicKey = decodeAddress(accountId);
```

### 3. è®¿é—®å®¡è®¡

âœ… **è®°å½•æ‰€æœ‰æ•æ„Ÿä¿¡æ¯è®¿é—®**ï¼š

```rust
// é“¾ä¸Šè®°å½•è®¿é—®æ—¥å¿—
#[pallet::storage]
pub type EvidenceAccessLog<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64, // evidence_id
    BoundedVec<AccessRecord<T::AccountId, BlockNumberFor<T>>, ConstU32<100>>,
    ValueQuery,
>;

// å§”å‘˜ä¼šæˆå‘˜æŸ¥çœ‹å‰å¿…é¡»è°ƒç”¨
pub fn log_evidence_access(
    origin: OriginFor<T>,
    evidence_id: u64,
    purpose: Vec<u8>,
) -> DispatchResult {
    let who = ensure_signed(origin)?;
    
    // éªŒè¯æ˜¯å§”å‘˜ä¼šæˆå‘˜
    ensure!(Self::is_committee_member(&who), Error::<T>::NotAuthorized);
    
    // è®°å½•è®¿é—®
    EvidenceAccessLog::<T>::try_mutate(evidence_id, |log| -> DispatchResult {
        log.try_push(AccessRecord {
            accessor: who.clone(),
            accessed_at: <frame_system::Pallet<T>>::block_number(),
            purpose: purpose.try_into().map_err(|_| Error::<T>::PurposeTooLong)?,
        })
        .map_err(|_| Error::<T>::TooManyAccessRecords)?;
        Ok(())
    })?;
    
    Self::deposit_event(Event::EvidenceAccessed { evidence_id, accessor: who });
    Ok(())
}
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. IPFSç¼“å­˜

```typescript
// ç¼“å­˜å·²ä¸‹è½½çš„IPFSå†…å®¹
const ipfsCache = new Map<string, any>();

async function fetchFromIPFS(cid: string): Promise<any> {
  // æ£€æŸ¥ç¼“å­˜
  if (ipfsCache.has(cid)) {
    console.log('âœ… ä»ç¼“å­˜è¯»å–:', cid);
    return ipfsCache.get(cid);
  }
  
  // ä¸‹è½½å¹¶ç¼“å­˜
  const data = await ipfs.cat(cid);
  ipfsCache.set(cid, data);
  
  return data;
}
```

### 2. æ‰¹é‡åŠ å¯†

```typescript
// ä¸€æ¬¡æ€§ä¸ºæ‰€æœ‰å§”å‘˜ä¼šæˆå‘˜åŠ å¯†
const committeeMembers = await api.query.collective.members(3);
const publicKeys: { [accountId: string]: Uint8Array } = {};

// å¹¶è¡Œè·å–å…¬é’¥
await Promise.all(
  committeeMembers.map(async member => {
    publicKeys[member.toString()] = decodeAddress(member);
  })
);

// ä¸€æ¬¡åŠ å¯†ç»™æ‰€æœ‰äºº
const encrypted = await MultiRecipientEncryption.encrypt(
  evidence,
  publicKeys
);
```

### 3. æ‡’åŠ è½½

```typescript
// åªåœ¨ç”¨æˆ·ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æ—¶æ‰è§£å¯†
const [decrypted, setDecrypted] = useState(null);

const handleViewDetails = async () => {
  if (!decrypted) {
    const data = await MultiRecipientEncryption.decrypt(...);
    setDecrypted(data);
  }
};
```

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¼šä¹°å®¶æäº¤è¯æ®

```bash
# 1. ä¹°å®¶åˆ›å»ºè®¢å•
buyer: create_order(maker_id: 1, amount: 100 DUST)

# 2. ä¹°å®¶ä¸åšå¸‚å•†èŠå¤©
buyer: send_message(receiver: maker, content: "è¯·é—®ä½•æ—¶å‘å¸?")
maker: send_message(receiver: buyer, content: "è¯·ç¨ç­‰ï¼Œæ­£åœ¨å¤„ç†")

# 3. è®¢å•å‘ç”Ÿäº‰è®®
buyer: dispute_order(order_id: 123, reason: "åšå¸‚å•†ä¸å‘å¸")

# 4. ä¹°å®¶æäº¤èŠå¤©è®°å½•è¯æ®
buyer: submit_chat_evidence(
  order_id: 123,
  message_ids: [1, 2],
  committee_members: [member1, member2, member3]
)

# é¢„æœŸç»“æœï¼š
# - åŠ å¯†è¯æ®å·²ä¸Šä¼ åˆ°IPFS
# - é“¾ä¸Šè®°å½•äº†è¯æ®CID
# - 3ä½å§”å‘˜ä¼šæˆå‘˜éƒ½å¯ä»¥è§£å¯†
```

### åœºæ™¯2ï¼šå§”å‘˜ä¼šå®¡æ ¸

```bash
# 1. å§”å‘˜ä¼šæˆå‘˜æŸ¥è¯¢å¾…å®¡æ ¸äº‰è®®
committee_member1: query_pending_disputes()
# è¿”å›: [{ order_id: 123, evidence_cid: "QmXXXX..." }]

# 2. ä¸‹è½½å¹¶è§£å¯†è¯æ®
committee_member1: view_encrypted_evidence(evidence_cid: "QmXXXX...")
# å¼¹å‡ºè§£å¯†ç•Œé¢ï¼Œè¯·æ±‚é’±åŒ…æˆæƒ

# 3. è§£å¯†æˆåŠŸï¼ŒæŸ¥çœ‹èŠå¤©è®°å½•
# æ˜¾ç¤º: ä¹°å®¶å’Œåšå¸‚å•†çš„å®Œæ•´å¯¹è¯

# 4. è®°å½•è®¿é—®æ—¥å¿—
committee_member1: log_access(evidence_id: 1, purpose: "å®¡æ ¸äº‰è®®")

# 5. åšå‡ºè£å†³
committee_member1: arbitrate_dispute(
  order_id: 123,
  decision: Refund, // é€€æ¬¾ç»™ä¹°å®¶
  reason: "åšå¸‚å•†æœªæŒ‰æ—¶å‘å¸"
)
```

---

## ğŸ“ æ€»ç»“

### å·²å®ŒæˆåŠŸèƒ½

âœ… **æ ¸å¿ƒåŠ å¯†å·¥å…·**ï¼š`MultiRecipientEncryption.ts`  
âœ… **ä¹°å®¶æäº¤ç»„ä»¶**ï¼š`SubmitChatEvidence.tsx`  
âœ… **å§”å‘˜ä¼šæŸ¥çœ‹ç»„ä»¶**ï¼š`ViewEncryptedEvidence.tsx`  
âœ… **é“¾ç«¯æ•°æ®ç»“æ„**ï¼š`multi_recipient.rs`  
âœ… **å®Œæ•´æ–‡æ¡£**ï¼šæœ¬æ–‡æ¡£

### æ ¸å¿ƒä¼˜åŠ¿

1. **å®‰å…¨æ€§é«˜**ï¼šAES-256 + X25519åŒé‡åŠ å¯†
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå†…å®¹åªåŠ å¯†ä¸€æ¬¡
3. **æ˜“äºæ‰©å±•**ï¼šæ–°å¢å§”å‘˜ä¼šæˆå‘˜åªéœ€åŠ å¯†å¯†é’¥
4. **å®Œæ•´å®¡è®¡**ï¼šé“¾ä¸Šè®°å½•æ‰€æœ‰è®¿é—®æ—¥å¿—
5. **ç”¨æˆ·å‹å¥½**ï¼šå‰ç«¯ç»„ä»¶å¼€ç®±å³ç”¨

### å®æ–½å»ºè®®

1. **é˜¶æ®µ1ï¼ˆ1å‘¨ï¼‰**ï¼šå‰ç«¯é›†æˆæµ‹è¯•
2. **é˜¶æ®µ2ï¼ˆ1å‘¨ï¼‰**ï¼šæµ‹è¯•ç½‘éƒ¨ç½²
3. **é˜¶æ®µ3ï¼ˆ1å‘¨ï¼‰**ï¼šä¸»ç½‘ä¸Šçº¿

---

**ç¼–å†™æ—¥æœŸ**ï¼š2025-10-23  
**ç‰ˆæœ¬**ï¼šv1.0  
**çŠ¶æ€**ï¼šå·²å®Œæˆå®ç°

