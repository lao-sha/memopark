# Pallet AI Strategy æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾› `pallet-ai-strategy` çš„å®Œæ•´æµ‹è¯•æµç¨‹ã€‚

## âœ… å‰ç½®æ¡ä»¶

### 1. é“¾ç«¯å·²å¯åŠ¨

ç¡®ä¿å¼€å‘é“¾æ­£åœ¨è¿è¡Œï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
./target/release/solochain-template-node --dev
```

æˆ–è€…å¦‚æœä½¿ç”¨ tmp æ•°æ®åº“ï¼š

```bash
./target/release/solochain-template-node --dev --tmp
```

**éªŒè¯é“¾ç«¯è¿è¡ŒçŠ¶æ€ï¼š**

```bash
# æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦ç›‘å¬
netstat -tuln | grep 9944
# æˆ–
lsof -i :9944
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
tcp   0   0 127.0.0.1:9944   0.0.0.0:*   LISTEN
```

### 2. å®‰è£…æµ‹è¯•ä¾èµ–

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm install
```

è¿™ä¼šå®‰è£…ï¼š
- `@polkadot/api`: Polkadot.js API
- `@polkadot/util-crypto`: åŠ å¯†å·¥å…·

## ğŸ§ª è¿è¡Œæµ‹è¯•

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ npm è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
npm run test:ai-strategy
```

### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œ

```bash
node test-ai-strategy.js
```

## ğŸ“Š æµ‹è¯•å†…å®¹

æµ‹è¯•è„šæœ¬ä¼šæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

### 1. è¿æ¥åˆ°é“¾ âœ…
- è¿æ¥åˆ° `ws://127.0.0.1:9944`
- è·å–é“¾ä¿¡æ¯ï¼ˆåç§°ã€ç‰ˆæœ¬ï¼‰

### 2. å‡†å¤‡æµ‹è¯•è´¦æˆ· âœ…
- ä½¿ç”¨å¼€å‘é“¾é»˜è®¤è´¦æˆ· `//Alice`
- æŸ¥è¯¢è´¦æˆ·ä½™é¢

### 3. åˆ›å»ºAIç­–ç•¥ âœ…
- ç­–ç•¥åç§°: "BTC ç½‘æ ¼ç­–ç•¥"
- äº¤æ˜“å¯¹: BTC-USD
- AIæ¨¡å‹: Ensemble (é›†æˆæ¨¡å‹)
- ç­–ç•¥ç±»å‹: Grid (ç½‘æ ¼äº¤æ˜“)
- ç½®ä¿¡åº¦é˜ˆå€¼: 60%
- ç½‘æ ¼èŒƒå›´: $40,000 - $50,000
- ç½‘æ ¼å±‚æ•°: 10å±‚

### 4. æŸ¥è¯¢ç­–ç•¥è¯¦æƒ… âœ…
- æ ¹æ®ç­–ç•¥IDæŸ¥è¯¢å®Œæ•´é…ç½®
- æ˜¾ç¤ºAIé…ç½®ã€é£æ§å‚æ•°ç­‰

### 5. æŸ¥è¯¢ç”¨æˆ·ç­–ç•¥åˆ—è¡¨ âœ…
- æŸ¥è¯¢ Alice æ‹¥æœ‰çš„æ‰€æœ‰ç­–ç•¥

### 6. æš‚åœç­–ç•¥ âœ…
- æµ‹è¯• `toggle_strategy(strategy_id, false)`

### 7. é‡æ–°å¯ç”¨ç­–ç•¥ âœ…
- æµ‹è¯• `toggle_strategy(strategy_id, true)`

### 8. æ›´æ–°AIé…ç½® âœ…
- å°†ä¸»æ¨¡å‹ä» Ensemble æ”¹ä¸º GPT-4
- æé«˜ç½®ä¿¡åº¦é˜ˆå€¼åˆ° 70%

### 9. æŸ¥è¯¢ä¿¡å·å†å² âœ…
- æŸ¥è¯¢ç­–ç•¥çš„AIä¿¡å·è®°å½•
- æ˜¾ç¤ºæœ€è¿‘5æ¡ä¿¡å·ï¼ˆå¦‚æœæœ‰ï¼‰

### 10. ç›‘å¬äº‹ä»¶ âœ…
- ç›‘å¬ `AISignalGenerated` äº‹ä»¶
- ç›‘å¬ `TradeExecuted` äº‹ä»¶
- æŒç»­10ç§’

## ğŸ“ˆ é¢„æœŸè¾“å‡º

### æˆåŠŸè¾“å‡ºç¤ºä¾‹

```
ğŸš€ å¼€å§‹æµ‹è¯• Pallet AI Strategy...

================================================================================
  æ­¥éª¤ 1: è¿æ¥åˆ°é“¾
================================================================================

âœ… æˆåŠŸè¿æ¥åˆ°é“¾
   é“¾åç§°: Development
   èŠ‚ç‚¹ç‰ˆæœ¬: 4.0.0-dev
   èŠ‚ç‚¹åç§°: Substrate Node

================================================================================
  æ­¥éª¤ 2: å‡†å¤‡æµ‹è¯•è´¦æˆ·
================================================================================

âœ… æµ‹è¯•è´¦æˆ·: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
   ä½™é¢: 1.0000 kUnit

================================================================================
  æ­¥éª¤ 3: åˆ›å»ºAIç­–ç•¥
================================================================================

ğŸ“ ç­–ç•¥é…ç½®:
   åç§°: "BTC ç½‘æ ¼ç­–ç•¥"
   äº¤æ˜“å¯¹: BTC-USD
   AIæ¨¡å‹: Ensemble
   ç­–ç•¥ç±»å‹: Grid (ç½‘æ ¼)
   ç½®ä¿¡åº¦é˜ˆå€¼: 60%
   ç½‘æ ¼èŒƒå›´: $40,000 - $50,000
   ç½‘æ ¼å±‚æ•°: 10

â³ æäº¤äº¤æ˜“...
âœ… äº¤æ˜“å·²æ‰“åŒ…åˆ°åŒºå—: 0x1234...

ğŸ‰ ç­–ç•¥åˆ›å»ºæˆåŠŸ!
   ç­–ç•¥ID: 0
   æ‰€æœ‰è€…: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
   AIæ¨¡å‹: Ensemble
   ç­–ç•¥ç±»å‹: Grid

...ï¼ˆåç»­æ­¥éª¤ï¼‰...

================================================================================
  æµ‹è¯•å®Œæˆæ€»ç»“
================================================================================

âœ… æ‰€æœ‰æµ‹è¯•å·²å®Œæˆï¼

å·²æµ‹è¯•çš„åŠŸèƒ½:
  âœ“ åˆ›å»ºAIç­–ç•¥
  âœ“ æŸ¥è¯¢ç­–ç•¥è¯¦æƒ…
  âœ“ æŸ¥è¯¢ç”¨æˆ·ç­–ç•¥åˆ—è¡¨
  âœ“ æš‚åœç­–ç•¥
  âœ“ å¯ç”¨ç­–ç•¥
  âœ“ æ›´æ–°AIé…ç½®
  âœ“ æŸ¥è¯¢ä¿¡å·å†å²
  âœ“ ç›‘å¬äº‹ä»¶

ğŸ’¡ åç»­æ­¥éª¤:
  1. é…ç½®AIæ¨ç†æœåŠ¡ (ai-inference-service)
  2. OCWä¼šè‡ªåŠ¨è°ƒç”¨AIæœåŠ¡ç”Ÿæˆä¿¡å·
  3. åœ¨Hyperliquid DEXä¸Šæ‰§è¡Œäº¤æ˜“
  4. æŸ¥çœ‹ç­–ç•¥è¡¨ç°æŒ‡æ ‡

ğŸ“ åˆ›å»ºçš„ç­–ç•¥ID: 0
   ä½ å¯ä»¥ä½¿ç”¨æ­¤IDç»§ç»­æµ‹è¯•å…¶ä»–åŠŸèƒ½
```

## ğŸ” æ‰‹åŠ¨æµ‹è¯•ï¼ˆä½¿ç”¨ Polkadot.js Appsï¼‰

å¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨æµè§ˆå™¨ç•Œé¢æµ‹è¯•ï¼š

### 1. æ‰“å¼€ Polkadot.js Apps

è®¿é—®ï¼šhttps://polkadot.js.org/apps/

### 2. è¿æ¥åˆ°æœ¬åœ°èŠ‚ç‚¹

- ç‚¹å‡»å·¦ä¸Šè§’ç½‘ç»œé€‰æ‹©
- é€‰æ‹© "Development" -> "Local Node"
- è¿æ¥åˆ° `ws://127.0.0.1:9944`

### 3. åˆ›å»ºAIç­–ç•¥

å¯¼èˆªåˆ°: **Developer** -> **Extrinsics**

é€‰æ‹©ï¼š
- **using the selected account**: Alice
- **submit the following extrinsic**: `aiStrategy` -> `createAiStrategy`

å¡«å†™å‚æ•°ï¼ˆå‚è€ƒæµ‹è¯•è„šæœ¬ä¸­çš„é…ç½®ï¼‰

### 4. æŸ¥è¯¢ç­–ç•¥

å¯¼èˆªåˆ°: **Developer** -> **Chain State**

é€‰æ‹©ï¼š
- **selected state query**: `aiStrategy` -> `aIStrategies(u64)`
- è¾“å…¥ç­–ç•¥ID: 0

ç‚¹å‡» **+** æŸ¥è¯¢

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: è¿æ¥å¤±è´¥

**é”™è¯¯**: `Error: connect ECONNREFUSED 127.0.0.1:9944`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥é“¾ç«¯æ˜¯å¦è¿è¡Œ: `ps aux | grep solochain-template-node`
2. é‡å¯é“¾ç«¯: `./target/release/solochain-template-node --dev --tmp`

### é—®é¢˜2: äº¤æ˜“å¤±è´¥

**é”™è¯¯**: `1010: Invalid Transaction: Inability to pay some fees`

**è§£å†³æ–¹æ¡ˆ**:
- Alice è´¦æˆ·ä½™é¢ä¸è¶³ï¼ˆå¼€å‘é“¾ä¸€èˆ¬ä¸ä¼šå‡ºç°ï¼‰
- æ£€æŸ¥é“¾ç«¯æ˜¯å¦æ­£ç¡®æ„å»º

### é—®é¢˜3: Pallet ä¸å­˜åœ¨

**é”™è¯¯**: `api.tx.aiStrategy is undefined`

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ `pallet-ai-strategy` å·²åœ¨ runtime ä¸­é›†æˆ
2. æ£€æŸ¥ `runtime/src/configs/mod.rs` ä¸­æ˜¯å¦é…ç½®äº† AI Strategy

### é—®é¢˜4: OCW æ²¡æœ‰ç”Ÿæˆä¿¡å·

**è¯´æ˜**: OCW éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰ä¼šç”Ÿæˆä¿¡å·ï¼š
1. ç­–ç•¥çŠ¶æ€ä¸º Active
2. æ¯10ä¸ªåŒºå—æ‰§è¡Œä¸€æ¬¡
3. AIæ¨ç†æœåŠ¡æ­£å¸¸è¿è¡Œ

**éªŒè¯OCWè¿è¡Œ**:
```bash
# æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—
tail -f /path/to/node.log | grep "OCW"
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
```
ğŸ¤– OCW started at block 10
ğŸ¤– OCW started at block 20
...
```

## ğŸ“š ä¸‹ä¸€æ­¥

å®ŒæˆåŸºç¡€æµ‹è¯•åï¼Œä½ å¯ä»¥ï¼š

1. **é…ç½®AIæ¨ç†æœåŠ¡**
   - å‚è€ƒ: `docs/AIæ¨ç†æœåŠ¡å®ç°æ–¹æ¡ˆ.md`
   - è®¾ç½® DeepSeek API æˆ–æœ¬åœ°æ¨¡å‹

2. **æµ‹è¯•å®Œæ•´äº¤æ˜“æµç¨‹**
   - OCW è‡ªåŠ¨è°ƒç”¨ AI æœåŠ¡
   - ç”Ÿæˆäº¤æ˜“ä¿¡å·
   - æ‰§è¡Œ Hyperliquid äº¤æ˜“

3. **å¼€å‘å‰ç«¯ç•Œé¢**
   - å‚è€ƒ: `docs/AIäº¤æ˜“ç³»ç»Ÿå‰ç«¯è®¾è®¡æ–¹æ¡ˆ.md`
   - åˆ›å»ºç­–ç•¥ç®¡ç†ç•Œé¢
   - æ˜¾ç¤ºä¿¡å·å†å²å’Œè¡¨ç°æŒ‡æ ‡

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Pallet AI Strategy README](../pallets/ai-strategy/README.md)
- [AIé©±åŠ¨çš„Substrate-Hyperliquidè‡ªåŠ¨åŒ–äº¤æ˜“ç³»ç»Ÿç»¼åˆæ–¹æ¡ˆ](./AIé©±åŠ¨çš„Substrate-Hyperliquidè‡ªåŠ¨åŒ–äº¤æ˜“ç³»ç»Ÿç»¼åˆæ–¹æ¡ˆ.md)
- [AIæ¨ç†æœåŠ¡å®ç°æ–¹æ¡ˆ](./AIæ¨ç†æœåŠ¡å®ç°æ–¹æ¡ˆ.md)
- [AIäº¤æ˜“ç³»ç»Ÿå‰ç«¯è®¾è®¡æ–¹æ¡ˆ](./AIäº¤æ˜“ç³»ç»Ÿå‰ç«¯è®¾è®¡æ–¹æ¡ˆ.md)

---

*æ–‡æ¡£æ›´æ–°æ—¶é—´: 2025-11-04*

