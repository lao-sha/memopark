# æŠ¼é‡‘ä¸ç”³è¯‰æ²»ç†ç³»ç»Ÿ - å®Œæ•´è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–¹æ¡ˆåŸºäºå‰æœŸæ·±åº¦åˆ†æï¼Œæ•´åˆæ‰€æœ‰è®¨è®ºç»“æœï¼Œæä¾›å®Œæ•´çš„ã€å¯è½åœ°çš„æŠ¼é‡‘å’Œç”³è¯‰æ²»ç†ç³»ç»Ÿè®¾è®¡ã€‚

**ç›¸å…³åˆ†ææ–‡æ¡£**ï¼š
1. `é€šè¿‡æŠ•è¯‰å¯æ›´æ”¹å­—æ®µåˆ†ææŠ¥å‘Š.md` - æŠ•è¯‰æœºåˆ¶ç°çŠ¶åˆ†æ
2. `ç”³è¯‰æŠ¼é‡‘æ”¹è¿›éœ€æ±‚-å¯è¡Œæ€§åˆ†æ.md` - ä¸‰é¡¹æ”¹è¿›éœ€æ±‚åˆ†æ
3. `æŠ¼é‡‘ç®¡ç†æ¨¡å—æ¶æ„æ·±åº¦åˆ†æ.md` - æ¶æ„æ·±åº¦åˆ†æ
4. `é€šç”¨æŠ¼é‡‘æ¨¡å—-æ¸è¿›å¼å®æ–½æ–¹æ¡ˆ.md` - å®æ–½ç­–ç•¥
5. `æŠ¼é‡‘æ¨¡å—é›†æˆæ–¹æ¡ˆ-æ·±åº¦å¯¹æ¯”åˆ†æ.md` - æ¨¡å—åˆ†ç¦»vsé›†æˆ
6. `æ¨¡å—å‘½ååˆ†æ-content-governanceé‡å‘½åæ–¹æ¡ˆ.md` - å‘½åä¼˜åŒ–
7. `content-governanceæŠ•è¯‰ç®¡ç†èƒ½åŠ›åˆ†æ.md` - åŠŸèƒ½åˆ†æ

**æ–‡æ¡£ç»“æ„**ï¼š
- [æ€»ä½“æ¶æ„](#æ€»ä½“æ¶æ„)
- [æ ¸å¿ƒæ¨¡å—è®¾è®¡](#æ ¸å¿ƒæ¨¡å—è®¾è®¡)
- [æ•°æ®ç»“æ„è®¾è®¡](#æ•°æ®ç»“æ„è®¾è®¡)
- [æ¥å£è®¾è®¡](#æ¥å£è®¾è®¡)
- [å‰ç«¯è®¾è®¡](#å‰ç«¯è®¾è®¡)
- [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
- [æµ‹è¯•æ–¹æ¡ˆ](#æµ‹è¯•æ–¹æ¡ˆ)

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

### ä¸šåŠ¡ç›®æ ‡

1. **ç»Ÿä¸€æŠ¼é‡‘ç®¡ç†** - æ‰€æœ‰éœ€è¦æŠ¼é‡‘çš„åœºæ™¯ç»Ÿä¸€ç®¡ç†ï¼Œé¿å…é‡å¤ä»£ç 
2. **åŠ¨æ€å®šä»·** - æŠ¼é‡‘ä¸ç¾å…ƒé”šå®šï¼Œæ ¹æ®å®æ—¶æ±‡ç‡åŠ¨æ€è®¡ç®—
3. **é€šç”¨ç”³è¯‰ç³»ç»Ÿ** - æ”¯æŒå¤šåŸŸï¼ˆå¢“åœ°ã€é€è€…ã€ä¾›å¥‰å“ã€åª’ä½“ã€æ–‡æœ¬ã€æœªæ¥åŠŸèƒ½ï¼‰
4. **å§”å‘˜ä¼šæ²»ç†** - ç”³è¯‰ç”±å§”å‘˜ä¼šå®¡æ‰¹ï¼Œå…¬ç¤ºæœŸä¿æŠ¤
5. **è‡ªåŠ¨æ‰§è¡Œ** - æ‰¹å‡†çš„ç”³è¯‰è‡ªåŠ¨è·¯ç”±æ‰§è¡Œ
6. **é€æ˜å¯è¿½æº¯** - æ‰€æœ‰æ“ä½œé“¾ä¸Šè®°å½•ï¼Œå¯æŸ¥è¯¢å®¡è®¡

### æŠ€æœ¯ç›®æ ‡

1. **é«˜å†…èšä½è€¦åˆ** - æŠ¼é‡‘ç®¡ç†ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»
2. **å¯æ‰©å±•æ€§** - è½»æ¾æ”¯æŒæ–°åŸŸã€æ–°æ“ä½œ
3. **å¯ç»´æŠ¤æ€§** - ä»£ç æ¸…æ™°ã€æ–‡æ¡£å®Œå–„
4. **é«˜æ€§èƒ½** - ä½gasæ¶ˆè€—ï¼Œé«˜å¹¶å‘æ”¯æŒ
5. **å®‰å…¨æ€§** - é˜²æ­¢æ¶æ„ç”³è¯‰ã€DoSæ”»å‡»
6. **ç”¨æˆ·å‹å¥½** - å‰ç«¯ä½“éªŒæµç•…ï¼Œæ˜“äºç†è§£

---

## ğŸ—ï¸ æ€»ä½“æ¶æ„

### åˆ†å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ç”³è¯‰ä¸­å¿ƒ    â”‚  â”‚  æŠ¼é‡‘ç®¡ç†    â”‚  â”‚  æ²»ç†ä»ªè¡¨æ¿  â”‚      â”‚
â”‚  â”‚  /appeals    â”‚  â”‚  /deposits   â”‚  â”‚  /governance â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ APIè°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é“¾ç«¯Runtimeå±‚                           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              æ ¸å¿ƒæ²»ç†æ¨¡å—ï¼ˆé‡å‘½åï¼‰                      â”‚ â”‚
â”‚  â”‚         pallet-stardust-appeals                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ç”³è¯‰æµç¨‹ç®¡ç†                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - æäº¤ç”³è¯‰ (submit_appeal)                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - å®¡æ‰¹ç”³è¯‰ (approve_appeal)                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - é©³å›ç”³è¯‰ (reject_appeal)                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - æ’¤å›ç”³è¯‰ (withdraw_appeal)                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - è‡ªåŠ¨æ‰§è¡Œ (on_initialize)                       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ è¾…åŠ©åŠŸèƒ½                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - é™é¢‘æ§åˆ¶ (Rate Limiting)                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - å…¬ç¤ºæœŸç®¡ç† (Notice Period)                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - æ‰§è¡Œé˜Ÿåˆ— (Execution Queue)                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - å¤±è´¥é‡è¯• (Retry Logic)                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - åº”ç­”è‡ªåŠ¨å¦å†³ (Auto Dismiss)                    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â†“ ä¾èµ–                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           åŸºç¡€è®¾æ–½æ¨¡å—ï¼ˆæ–°å¢ï¼‰                          â”‚ â”‚
â”‚  â”‚         pallet-deposits                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ æŠ¼é‡‘ç®¡ç†                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - å†»ç»“æŠ¼é‡‘ (reserve_deposit)                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - é‡Šæ”¾æŠ¼é‡‘ (release_deposit)                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - ç½šæ²¡æŠ¼é‡‘ (slash_deposit)                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - æŸ¥è¯¢æŠ¼é‡‘ (query_deposits)                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ åŠ¨æ€å®šä»·ç­–ç•¥                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - USDé”šå®šè®¡ç®—                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - é›†æˆpallet-pricing                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ - åŸŸ/æ“ä½œå·®å¼‚åŒ–å®šä»·                              â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â†“ æ‰§è¡Œè·¯ç”±                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            ä¸šåŠ¡æ¨¡å—å±‚ï¼ˆæ—¢æœ‰æ¨¡å—ï¼‰                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚  â”‚ stardust-grave   â”‚  â”‚ deceased     â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ å¢“åœ°ç®¡ç†     â”‚  â”‚ é€è€…æ¡£æ¡ˆ     â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ - gov_*æ¥å£  â”‚  â”‚ - gov_*æ¥å£  â”‚                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚  â”‚deceased-text â”‚  â”‚deceased-mediaâ”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ æ–‡æœ¬ç®¡ç†     â”‚  â”‚ åª’ä½“ç®¡ç†     â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ - gov_*æ¥å£  â”‚  â”‚ - gov_*æ¥å£  â”‚                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚  â”‚memo-offeringsâ”‚  â”‚ æœªæ¥æ¨¡å—...  â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ ä¾›å¥‰å“ç®¡ç†   â”‚  â”‚              â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚ - gov_*æ¥å£  â”‚  â”‚              â”‚                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ å®šä»·æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     è¾…åŠ©æœåŠ¡å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚pallet-pricingâ”‚  â”‚pallet-        â”‚  â”‚pallet-       â”‚      â”‚
â”‚  â”‚åŠ¨æ€å®šä»·      â”‚  â”‚collective    â”‚  â”‚treasury      â”‚      â”‚
â”‚  â”‚DUST/USDæ±‡ç‡  â”‚  â”‚å§”å‘˜ä¼š        â”‚  â”‚å›½åº“          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

#### 1. èŒè´£åˆ†ç¦» â­â­â­â­â­

```
æŠ¼é‡‘åŸŸï¼ˆDeposit Domainï¼‰
â”œâ”€ å…³æ³¨ç‚¹ï¼šå†»ç»“ã€é‡Šæ”¾ã€ç½šæ²¡
â”œâ”€ å˜æ›´é©±åŠ¨ï¼šç»æµæ¨¡å‹ã€å­˜å‚¨æˆæœ¬
â””â”€ å®ç°ï¼špallet-deposits

æ²»ç†åŸŸï¼ˆGovernance Domainï¼‰
â”œâ”€ å…³æ³¨ç‚¹ï¼šæäº¤ã€å®¡æ‰¹ã€æ‰§è¡Œ
â”œâ”€ å˜æ›´é©±åŠ¨ï¼šæ²»ç†è§„åˆ™ã€æµç¨‹ä¼˜åŒ–
â””â”€ å®ç°ï¼špallet-stardust-appeals

ä¸šåŠ¡åŸŸï¼ˆBusiness Domainï¼‰
â”œâ”€ å…³æ³¨ç‚¹ï¼šå…·ä½“ä¸šåŠ¡é€»è¾‘
â”œâ”€ å˜æ›´é©±åŠ¨ï¼šä¸šåŠ¡éœ€æ±‚
â””â”€ å®ç°ï¼šstardust-grave, deceasedç­‰
```

**å¥½å¤„**ï¼š
- âœ… ä¿®æ”¹æŠ¼é‡‘ç­–ç•¥ä¸å½±å“æ²»ç†æµç¨‹
- âœ… ä¿®æ”¹æ²»ç†è§„åˆ™ä¸å½±å“æŠ¼é‡‘é€»è¾‘
- âœ… æ–°å¢ä¸šåŠ¡æ¨¡å—æ— éœ€é‡å¤å®ç°æŠ¼é‡‘

#### 2. é€šç”¨åŒ–è®¾è®¡ â­â­â­â­â­

**Domain/Actionç¼–ç ç³»ç»Ÿ**ï¼š

```rust
// åŸŸç¼–ç ï¼ˆå¯æ‰©å±•ï¼‰
1 = grave        // å¢“åœ°
2 = deceased     // é€è€…æ¡£æ¡ˆ
3 = offerings    // ä¾›å¥‰å“
4 = deceased-media   // åª’ä½“
5 = deceased-text    // æ–‡æœ¬
6 = pet-game     // æœªæ¥ï¼šå® ç‰©æ¸¸æˆ
7 = market       // æœªæ¥ï¼šå¸‚åœº

// æ“ä½œç¼–ç ï¼ˆæ¯ä¸ªåŸŸè‡ªå®šä¹‰ï¼‰
grave (1):
  10 = clear_cover      // æ¸…ç©ºå°é¢
  11 = transfer_owner   // è½¬è®©æ‰€æœ‰æƒ
  12 = set_restricted   // è®¾ç½®é™åˆ¶

deceased (2):
  1 = set_visibility   // è®¾ç½®å¯è§æ€§
  2 = clear_main_image // æ¸…ç©ºä¸»å›¾
  3 = set_main_image   // è®¾ç½®ä¸»å›¾
  4 = transfer_owner   // è½¬è®©æ‰€æœ‰æƒ
```

**å¥½å¤„**ï¼š
- âœ… æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç å³å¯æ”¯æŒæ–°åŸŸ
- âœ… é€šè¿‡Runtimeé…ç½®è·¯ç”±è§„åˆ™
- âœ… å‰ç«¯å¯ä»¥åŠ¨æ€æ¸²æŸ“ç”³è¯‰ç±»å‹

#### 3. åŠ¨æ€å®šä»·ç­–ç•¥ â­â­â­â­â­

**ç¾å…ƒé”šå®š**ï¼š

```rust
// åŸºå‡†ï¼š$10 USD
æŠ¼é‡‘ = $10 / (MEMOå½“å‰ä»·æ ¼) Ã— å€æ•°

å€æ•°ç”±domain/actionå†³å®šï¼š
- ä½é£é™©æ“ä½œï¼š1.0Ã— ï¼ˆå¦‚ï¼šè®¾ç½®å¯è§æ€§ï¼‰
- ä¸­é£é™©æ“ä½œï¼š1.5Ã— ï¼ˆå¦‚ï¼šåˆ é™¤æ–‡æœ¬ï¼‰
- é«˜é£é™©æ“ä½œï¼š2.0Ã— ï¼ˆå¦‚ï¼šè½¬è®©æ‰€æœ‰æƒï¼‰
```

**å®æ—¶å®šä»·**ï¼š
```
pallet-pricingï¼ˆOTC/Bridgeèšåˆï¼‰
    â†“ æä¾›MEMO/USDä»·æ ¼
pallet-depositsï¼ˆåŠ¨æ€è®¡ç®—ï¼‰
    â†“ è¿”å›æŠ¼é‡‘é‡‘é¢
pallet-stardust-appealsï¼ˆä½¿ç”¨æŠ¼é‡‘ï¼‰
```

**å¥½å¤„**ï¼š
- âœ… æŠ¼é‡‘ä»·å€¼ç¨³å®šï¼ˆä¸å—å¸ä»·æ³¢åŠ¨å½±å“ï¼‰
- âœ… é£é™©å·®å¼‚åŒ–å®šä»·
- âœ… çµæ´»è°ƒæ•´ç­–ç•¥

---

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### æ¨¡å—1ï¼špallet-depositsï¼ˆé€šç”¨æŠ¼é‡‘ç®¡ç†ï¼‰

#### èŒè´£å®šä½

**æ ¸å¿ƒèŒè´£**ï¼šæä¾›é€šç”¨çš„æŠ¼é‡‘å†»ç»“ã€é‡Šæ”¾ã€ç½šæ²¡æœåŠ¡

**æœåŠ¡å¯¹è±¡**ï¼š
- pallet-stardust-appealsï¼ˆç”³è¯‰æŠ¼é‡‘ï¼‰
- pallet-memo-offeringsï¼ˆå®¡æ ¸æŠ¼é‡‘ï¼‰
- pallet-deceased-textï¼ˆæŠ•è¯‰æŠ¼é‡‘ï¼‰
- pallet-deceased-mediaï¼ˆæŠ•è¯‰æŠ¼é‡‘ï¼‰
- æœªæ¥æ‰€æœ‰éœ€è¦æŠ¼é‡‘çš„ç”¨æˆ·æ¨¡å—

**ä¸è´Ÿè´£**ï¼š
- âŒ ä¸ç®¡ç†ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ç”³è¯‰å®¡æ‰¹ï¼‰
- âŒ ä¸å…³å¿ƒæŠ¼é‡‘ç”¨é€”ï¼ˆä»…è®°å½•ç”¨é€”ç¼–ç ï¼‰
- âŒ ä¸æ‰§è¡Œæ²»ç†æµç¨‹

#### æ•°æ®ç»“æ„

```rust
// pallets/deposits/src/lib.rs

/// æŠ¼é‡‘ç”¨é€”æšä¸¾
#[derive(Encode, Decode, Clone, TypeInfo, MaxEncodedLen)]
pub enum DepositPurpose {
    /// ç”³è¯‰æŠ¼é‡‘
    Appeal {
        appeal_id: u64,
        domain: u8,
        target: u64,
        action: u8,
    },
    /// ä¾›å¥‰å“å®¡æ ¸æŠ¼é‡‘
    OfferingReview {
        offering_id: u64,
        kind_code: u8,
    },
    /// æ–‡æœ¬æŠ•è¯‰æŠ¼é‡‘
    TextComplaint {
        text_id: u64,
        complaint_type: u8,
    },
    /// åª’ä½“æŠ•è¯‰æŠ¼é‡‘
    MediaComplaint {
        media_id: u64,
        complaint_type: u8,
    },
    /// è‡ªå®šä¹‰ç”¨é€”ï¼ˆé¢„ç•™æ‰©å±•ï¼‰
    Custom {
        pallet_name: BoundedVec<u8, ConstU32<32>>,
        purpose_id: u64,
        metadata: BoundedVec<u8, ConstU32<128>>,
    },
}

/// æŠ¼é‡‘çŠ¶æ€
#[derive(Encode, Decode, Clone, TypeInfo, MaxEncodedLen)]
pub enum DepositStatus {
    Reserved,                      // å·²å†»ç»“
    Released,                      // å·²é‡Šæ”¾ï¼ˆå…¨é¢é€€å›ï¼‰
    Slashed,                       // å·²ç½šæ²¡ï¼ˆå…¨éƒ¨ï¼‰
    PartiallySlashed { amount: Balance },  // éƒ¨åˆ†ç½šæ²¡
}

/// æŠ¼é‡‘è®°å½•
#[derive(Encode, Decode, Clone, TypeInfo, MaxEncodedLen)]
pub struct DepositRecord<AccountId, Balance, BlockNumber> {
    pub who: AccountId,            // æŠ¼é‡‘æä¾›è€…
    pub amount: Balance,           // æŠ¼é‡‘é‡‘é¢
    pub purpose: DepositPurpose,   // æŠ¼é‡‘ç”¨é€”
    pub reserved_at: BlockNumber,  // å†»ç»“æ—¶é—´
    pub status: DepositStatus,     // å½“å‰çŠ¶æ€
    pub released_at: Option<BlockNumber>,  // é‡Šæ”¾æ—¶é—´
    pub slashed_at: Option<BlockNumber>,   // ç½šæ²¡æ—¶é—´
}

/// å­˜å‚¨ç»“æ„
#[pallet::storage]
pub type NextDepositId<T> = StorageValue<_, u64, ValueQuery>;

#[pallet::storage]
pub type Deposits<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64,  // deposit_id
    DepositRecord<T::AccountId, BalanceOf<T>, BlockNumberFor<T>>,
>;

#[pallet::storage]
pub type DepositsByAccount<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    BoundedVec<u64, T::MaxDepositsPerAccount>,
    ValueQuery,
>;
```

#### æ ¸å¿ƒæ¥å£

```rust
impl<T: Config> Pallet<T> {
    /// å†»ç»“æŠ¼é‡‘
    /// 
    /// å‚æ•°ï¼š
    /// - origin: æŠ¼é‡‘æä¾›è€…
    /// - purpose: æŠ¼é‡‘ç”¨é€”
    /// - amount: æŠ¼é‡‘é‡‘é¢
    /// 
    /// è¿”å›ï¼š
    /// - deposit_id: æŠ¼é‡‘è®°å½•ID
    pub fn reserve_deposit(
        origin: OriginFor<T>,
        purpose: DepositPurpose,
        amount: BalanceOf<T>,
    ) -> Result<u64, DispatchError> {
        let who = ensure_signed(origin)?;
        
        // 1. å†»ç»“ä½™é¢
        T::Currency::reserve(&who, amount)?;
        
        // 2. åˆ›å»ºè®°å½•
        let deposit_id = NextDepositId::<T>::get();
        let record = DepositRecord {
            who: who.clone(),
            amount,
            purpose: purpose.clone(),
            reserved_at: <frame_system::Pallet<T>>::block_number(),
            status: DepositStatus::Reserved,
            released_at: None,
            slashed_at: None,
        };
        
        Deposits::<T>::insert(deposit_id, record);
        NextDepositId::<T>::put(deposit_id + 1);
        
        // 3. å»ºç«‹ç´¢å¼•
        DepositsByAccount::<T>::mutate(&who, |ids| {
            let _ = ids.try_push(deposit_id);
        });
        
        Self::deposit_event(Event::DepositReserved {
            deposit_id,
            who,
            amount,
            purpose,
        });
        
        Ok(deposit_id)
    }
    
    /// é‡Šæ”¾æŠ¼é‡‘ï¼ˆå…¨é¢é€€å›ï¼‰
    /// 
    /// æƒé™ï¼šRootæˆ–æˆæƒOrigin
    #[pallet::call_index(1)]
    #[pallet::weight(10_000)]
    pub fn release_deposit(
        origin: OriginFor<T>,
        deposit_id: u64,
    ) -> DispatchResult {
        T::ReleaseOrigin::ensure_origin(origin)?;
        
        Deposits::<T>::try_mutate(deposit_id, |record| -> DispatchResult {
            let rec = record.as_mut().ok_or(Error::<T>::DepositNotFound)?;
            ensure!(
                rec.status == DepositStatus::Reserved,
                Error::<T>::InvalidStatus
            );
            
            // é‡Šæ”¾æŠ¼é‡‘
            T::Currency::unreserve(&rec.who, rec.amount);
            rec.status = DepositStatus::Released;
            rec.released_at = Some(<frame_system::Pallet<T>>::block_number());
            
            Self::deposit_event(Event::DepositReleased {
                deposit_id,
                who: rec.who.clone(),
                amount: rec.amount,
            });
            
            Ok(())
        })
    }
    
    /// ç½šæ²¡æŠ¼é‡‘ï¼ˆå…¨éƒ¨æˆ–éƒ¨åˆ†ï¼‰
    /// 
    /// å‚æ•°ï¼š
    /// - deposit_id: æŠ¼é‡‘ID
    /// - slash_ratio: ç½šæ²¡æ¯”ä¾‹ï¼ˆPerbill, 0-100%ï¼‰
    /// - beneficiary: ç½šæ²¡é‡‘é¢æ¥æ”¶è€…ï¼ˆé€šå¸¸æ˜¯å›½åº“ï¼‰
    /// 
    /// æƒé™ï¼šRootæˆ–æˆæƒOrigin
    #[pallet::call_index(2)]
    #[pallet::weight(10_000)]
    pub fn slash_deposit(
        origin: OriginFor<T>,
        deposit_id: u64,
        slash_ratio: Perbill,
        beneficiary: T::AccountId,
    ) -> DispatchResult {
        T::SlashOrigin::ensure_origin(origin)?;
        
        Deposits::<T>::try_mutate(deposit_id, |record| -> DispatchResult {
            let rec = record.as_mut().ok_or(Error::<T>::DepositNotFound)?;
            ensure!(
                rec.status == DepositStatus::Reserved,
                Error::<T>::InvalidStatus
            );
            
            // è®¡ç®—ç½šæ²¡é‡‘é¢
            let slash_amount = slash_ratio * rec.amount;
            let refund_amount = rec.amount - slash_amount;
            
            // 1. é‡Šæ”¾æŠ¼é‡‘
            T::Currency::unreserve(&rec.who, rec.amount);
            
            // 2. ç½šæ²¡éƒ¨åˆ†è½¬è´¦ç»™beneficiary
            if !slash_amount.is_zero() {
                T::Currency::transfer(
                    &rec.who,
                    &beneficiary,
                    slash_amount,
                    ExistenceRequirement::KeepAlive,
                )?;
            }
            
            // 3. æ›´æ–°çŠ¶æ€
            rec.status = if refund_amount.is_zero() {
                DepositStatus::Slashed
            } else {
                DepositStatus::PartiallySlashed { amount: slash_amount }
            };
            rec.slashed_at = Some(<frame_system::Pallet<T>>::block_number());
            
            Self::deposit_event(Event::DepositSlashed {
                deposit_id,
                who: rec.who.clone(),
                slashed: slash_amount,
                refunded: refund_amount,
                beneficiary,
            });
            
            Ok(())
        })
    }
}
```

#### åŠ¨æ€å®šä»·ç­–ç•¥

```rust
/// åŠ¨æ€æŠ¼é‡‘ç­–ç•¥Trait
pub trait DepositPolicy {
    type AccountId;
    type Balance;
    
    /// è®¡ç®—æŠ¼é‡‘é‡‘é¢
    /// 
    /// å‚æ•°ï¼š
    /// - who: æŠ¼é‡‘æä¾›è€…ï¼ˆå¯ç”¨äºç”¨æˆ·çº§å·®å¼‚åŒ–ï¼‰
    /// - purpose: æŠ¼é‡‘ç”¨é€”
    /// 
    /// è¿”å›ï¼š
    /// - Some(amount): è®¡ç®—çš„æŠ¼é‡‘é‡‘é¢
    /// - None: æ— æ³•è®¡ç®—ï¼ˆå›é€€åˆ°å›ºå®šæŠ¼é‡‘ï¼‰
    fn calc_deposit(
        who: &Self::AccountId,
        purpose: &DepositPurpose,
    ) -> Option<Self::Balance>;
}

/// USDé”šå®šæŠ¼é‡‘ç­–ç•¥å®ç°
pub struct UsdAnchoredDepositPolicy;

impl DepositPolicy for UsdAnchoredDepositPolicy {
    type AccountId = AccountId;
    type Balance = Balance;
    
    fn calc_deposit(
        _who: &AccountId,
        purpose: &DepositPurpose,
    ) -> Option<Balance> {
        // 1. è·å–MEMO/USDä»·æ ¼
        let memo_price_usd = pallet_pricing::Pallet::<Runtime>::get_memo_price_usd()?;
        // memo_price_usdç²¾åº¦ï¼š10^6 (USDTç²¾åº¦)
        
        // 2. åŸºå‡†æŠ¼é‡‘ï¼š$10 USD
        let base_usd = 10_000_000u64;  // $10 with 6 decimals
        
        // 3. æ ¹æ®ç”¨é€”ç¡®å®šå€æ•°
        let multiplier = match purpose {
            DepositPurpose::Appeal { domain, action, .. } => {
                match (domain, action) {
                    // graveåŸŸ
                    (1, 10) => 100,  // æ¸…ç©ºå°é¢: 1.0Ã—
                    (1, 11) => 200,  // è½¬è®©æ‰€æœ‰æƒ: 2.0Ã—
                    (1, 12) => 100,  // è®¾ç½®é™åˆ¶: 1.0Ã—
                    
                    // deceasedåŸŸ
                    (2, 1) => 100,   // è®¾ç½®å¯è§æ€§: 1.0Ã—
                    (2, 2) => 150,   // æ¸…ç©ºä¸»å›¾: 1.5Ã—
                    (2, 4) => 200,   // è½¬è®©æ‰€æœ‰æƒ: 2.0Ã—
                    
                    // deceased-mediaåŸŸ
                    (4, 30) => 100,  // éšè—åª’ä½“: 1.0Ã—
                    (4, 31) => 150,  // æ›¿æ¢URI: 1.5Ã—
                    (4, 32) => 150,  // å†»ç»“è§†é¢‘é›†: 1.5Ã—
                    
                    // deceased-textåŸŸ
                    (5, 20) => 150,  // åˆ é™¤ç”Ÿå¹³: 1.5Ã—
                    (5, 21) => 150,  // åˆ é™¤æ‚¼è¯: 1.5Ã—
                    (5, 22) => 100,  // ç¼–è¾‘ç”Ÿå¹³: 1.0Ã—
                    (5, 23) => 100,  // ç¼–è¾‘æ‚¼è¯: 1.0Ã—
                    
                    // é»˜è®¤
                    _ => 100,  // 1.0Ã—
                }
            },
            DepositPurpose::OfferingReview { kind_code, .. } => {
                // ä¾›å¥‰å“å®¡æ ¸ï¼šæ ¹æ®ç±»å‹å·®å¼‚åŒ–
                match kind_code {
                    1 => 100,  // æ™®é€šä¾›å¥‰å“: 1.0Ã—
                    2 => 150,  // ç‰¹æ®Šä¾›å¥‰å“: 1.5Ã—
                    _ => 100,
                }
            },
            DepositPurpose::TextComplaint { .. } => 100,  // 1.0Ã—
            DepositPurpose::MediaComplaint { .. } => 100, // 1.0Ã—
            DepositPurpose::Custom { .. } => 100,  // 1.0Ã—
        };
        
        // 4. è®¡ç®—MEMOæ•°é‡
        // memo_amount = ($10 USD / memo_price_usd) Ã— multiplier / 100
        // MEMOç²¾åº¦ï¼š10^12
        let memo_amount = (base_usd as u128)
            .saturating_mul(1_000_000u128)  // è½¬ä¸ºMEMOç²¾åº¦
            .saturating_mul(multiplier as u128)
            .saturating_div(memo_price_usd as u128)
            .saturating_div(100);
        
        Some(memo_amount)
    }
}
```

---

### æ¨¡å—2ï¼špallet-stardust-appealsï¼ˆç”³è¯‰æ²»ç†ï¼‰

#### é‡å‘½åè¯´æ˜

**æ—§åç§°**ï¼š`pallet-memo-content-governance`
**æ–°åç§°**ï¼š`pallet-stardust-appeals`

**åŸå› **ï¼š
- âœ… "appeals"æ›´å‡†ç¡®ï¼ˆå¤„ç†å¤šåŸŸç”³è¯‰ï¼Œéä»…é™å†…å®¹ï¼‰
- âœ… ç¬¦åˆSubstrateå‘½åä¹ æƒ¯
- âœ… å‰åç«¯æ›´æ˜“ç†è§£
- âœ… æ‰©å±•æ€§æ›´å¥½ï¼ˆæ”¯æŒæœªæ¥æ¸¸æˆã€å¸‚åœºç­‰éå†…å®¹åŸŸï¼‰

#### èŒè´£å®šä½

**æ ¸å¿ƒèŒè´£**ï¼šç®¡ç†ç”³è¯‰çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

**æµç¨‹**ï¼š
```
æäº¤ç”³è¯‰ â†’ å§”å‘˜ä¼šå®¡æ‰¹ â†’ å…¬ç¤ºæœŸ â†’ è‡ªåŠ¨æ‰§è¡Œ â†’ ç»“æœåé¦ˆ
         â†“               â†“
       æŠ¼é‡‘å†»ç»“        æŠ¼é‡‘é‡Šæ”¾/ç½šæ²¡
```

**ä¾èµ–**ï¼š
- `pallet-deposits` - æŠ¼é‡‘ç®¡ç†
- `pallet-pricing` - åŠ¨æ€å®šä»·
- `pallet-collective` - å§”å‘˜ä¼šæ²»ç†
- `pallet-treasury` - å›½åº“ï¼ˆç½šæ²¡æ¥æ”¶ï¼‰

#### æ•°æ®ç»“æ„

```rust
// pallets/stardust-appeals/src/lib.rs

/// ç”³è¯‰è®°å½•
#[derive(Encode, Decode, Clone, TypeInfo, MaxEncodedLen)]
pub struct Appeal<AccountId, BlockNumber> {
    /// ç”³è¯‰äºº
    pub who: AccountId,
    
    /// ç›®æ ‡åŸŸï¼ˆ1=grave, 2=deceased, 3=offerings...ï¼‰
    pub domain: u8,
    
    /// ç›®æ ‡å¯¹è±¡ID
    pub target: u64,
    
    /// æ“ä½œç±»å‹ï¼ˆæ¯ä¸ªåŸŸè‡ªå®šä¹‰ï¼‰
    pub action: u8,
    
    /// ç†ç”±CIDï¼ˆIPFSï¼‰
    pub reason_cid: BoundedVec<u8, ConstU32<128>>,
    
    /// è¯æ®CIDï¼ˆIPFSï¼‰
    pub evidence_cid: BoundedVec<u8, ConstU32<128>>,
    
    /// æŠ¼é‡‘IDï¼ˆå…³è”åˆ°pallet-depositsï¼‰
    pub deposit_id: u64,
    
    /// çŠ¶æ€
    /// 0=submitted, 1=approved, 2=rejected, 3=withdrawn,
    /// 4=executed, 5=retry_exhausted, 6=auto_dismissed
    pub status: u8,
    
    /// å…¬ç¤ºæœŸåˆ°æœŸå—é«˜ï¼ˆæ‰¹å‡†åè®¾ç½®ï¼‰
    pub execute_at: Option<BlockNumber>,
    
    /// æ‰¹å‡†æ—¶é—´ï¼ˆç”¨äº"åº”ç­”è‡ªåŠ¨å¦å†³"åˆ¤æ–­ï¼‰
    pub approved_at: Option<BlockNumber>,
    
    /// æ–°æ‰€æœ‰è€…ï¼ˆä»…ç”¨äºè½¬è®©æ“ä½œï¼‰
    pub new_owner: Option<AccountId>,
}

/// å­˜å‚¨ç»“æ„
#[pallet::storage]
pub type NextAppealId<T> = StorageValue<_, u64, ValueQuery>;

#[pallet::storage]
pub type Appeals<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64,
    Appeal<T::AccountId, BlockNumberFor<T>>,
>;

#[pallet::storage]
pub type AppealsByAccount<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    BoundedVec<u64, ConstU32<100>>,
    ValueQuery,
>;

/// æ‰§è¡Œé˜Ÿåˆ—ï¼ˆæŒ‰å—å·ç´¢å¼•ï¼‰
#[pallet::storage]
pub type QueueByBlock<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    BlockNumberFor<T>,
    BoundedVec<u64, T::MaxExecPerBlock>,
>;

/// é™é¢‘çª—å£
#[pallet::storage]
pub type RateLimitWindows<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    WindowInfo<BlockNumberFor<T>>,
    ValueQuery,
>;
```

#### æ ¸å¿ƒæ¥å£

```rust
impl<T: Config> Pallet<T> {
    /// æäº¤ç”³è¯‰
    /// 
    /// æµç¨‹ï¼š
    /// 1. é™é¢‘æ£€æŸ¥
    /// 2. è®¡ç®—åŠ¨æ€æŠ¼é‡‘
    /// 3. é€šè¿‡pallet-depositså†»ç»“æŠ¼é‡‘
    /// 4. åˆ›å»ºç”³è¯‰è®°å½•
    #[pallet::call_index(0)]
    #[pallet::weight(100_000)]
    pub fn submit_appeal(
        origin: OriginFor<T>,
        domain: u8,
        target: u64,
        action: u8,
        reason_cid: BoundedVec<u8, ConstU32<128>>,
        evidence_cid: BoundedVec<u8, ConstU32<128>>,
    ) -> DispatchResult {
        let who = ensure_signed(origin)?;
        
        // 1. é™é¢‘æ£€æŸ¥
        Self::check_rate_limit(&who)?;
        
        // 2. è®¡ç®—åŠ¨æ€æŠ¼é‡‘
        let purpose = DepositPurpose::Appeal {
            appeal_id: NextAppealId::<T>::get(),
            domain,
            target,
            action,
        };
        let deposit_amount = T::DepositPolicy::calc_deposit(&who, &purpose)
            .unwrap_or(T::FallbackDeposit::get());
        
        // 3. å†»ç»“æŠ¼é‡‘ï¼ˆè°ƒç”¨pallet-depositsï¼‰
        let deposit_id = pallet_deposits::Pallet::<T>::reserve_deposit(
            who.clone(),
            purpose,
            deposit_amount,
        )?;
        
        // 4. åˆ›å»ºç”³è¯‰è®°å½•
        let appeal_id = NextAppealId::<T>::get();
        let appeal = Appeal {
            who: who.clone(),
            domain,
            target,
            action,
            reason_cid,
            evidence_cid,
            deposit_id,
            status: 0,  // submitted
            execute_at: None,
            approved_at: None,
            new_owner: None,
        };
        
        Appeals::<T>::insert(appeal_id, appeal);
        NextAppealId::<T>::put(appeal_id + 1);
        
        // 5. å»ºç«‹ç´¢å¼•
        AppealsByAccount::<T>::mutate(&who, |ids| {
            let _ = ids.try_push(appeal_id);
        });
        
        // 6. æ›´æ–°é™é¢‘çª—å£
        Self::update_rate_limit(&who)?;
        
        Self::deposit_event(Event::AppealSubmitted {
            appeal_id,
            who,
            domain,
            target,
            action,
            deposit_amount,
        });
        
        Ok(())
    }
    
    /// æ‰¹å‡†ç”³è¯‰
    /// 
    /// æƒé™ï¼šå§”å‘˜ä¼šæˆ–Root
    /// æµç¨‹ï¼š
    /// 1. æ£€æŸ¥ç”³è¯‰çŠ¶æ€
    /// 2. è®¾ç½®å…¬ç¤ºæœŸ
    /// 3. å…¥æ‰§è¡Œé˜Ÿåˆ—
    #[pallet::call_index(1)]
    #[pallet::weight(50_000)]
    pub fn approve_appeal(
        origin: OriginFor<T>,
        appeal_id: u64,
        notice_blocks: Option<BlockNumberFor<T>>,
    ) -> DispatchResult {
        T::GovernanceOrigin::ensure_origin(origin)?;
        
        Appeals::<T>::try_mutate(appeal_id, |maybe_appeal| -> DispatchResult {
            let appeal = maybe_appeal.as_mut().ok_or(Error::<T>::NotFound)?;
            ensure!(appeal.status == 0, Error::<T>::InvalidStatus);
            
            // è®¾ç½®å…¬ç¤ºæœŸ
            let current_block = <frame_system::Pallet<T>>::block_number();
            let notice = notice_blocks.unwrap_or(T::DefaultNoticeBlocks::get());
            let execute_at = current_block + notice;
            
            appeal.status = 1;  // approved
            appeal.approved_at = Some(current_block);
            appeal.execute_at = Some(execute_at);
            
            // å…¥æ‰§è¡Œé˜Ÿåˆ—
            QueueByBlock::<T>::mutate(execute_at, |queue| {
                if let Some(q) = queue {
                    let _ = q.try_push(appeal_id);
                } else {
                    let mut new_queue = BoundedVec::default();
                    let _ = new_queue.try_push(appeal_id);
                    *queue = Some(new_queue);
                }
            });
            
            Self::deposit_event(Event::AppealApproved {
                appeal_id,
                execute_at,
            });
            
            Ok(())
        })
    }
    
    /// é©³å›ç”³è¯‰
    /// 
    /// æƒé™ï¼šå§”å‘˜ä¼šæˆ–Root
    /// æµç¨‹ï¼š
    /// 1. æ£€æŸ¥ç”³è¯‰çŠ¶æ€
    /// 2. ç½šæ²¡æŠ¼é‡‘ï¼ˆé€šè¿‡pallet-depositsï¼‰
    /// 3. æ›´æ–°çŠ¶æ€
    #[pallet::call_index(2)]
    #[pallet::weight(50_000)]
    pub fn reject_appeal(
        origin: OriginFor<T>,
        appeal_id: u64,
    ) -> DispatchResult {
        T::GovernanceOrigin::ensure_origin(origin)?;
        
        Appeals::<T>::try_mutate(appeal_id, |maybe_appeal| -> DispatchResult {
            let appeal = maybe_appeal.as_mut().ok_or(Error::<T>::NotFound)?;
            ensure!(appeal.status == 0, Error::<T>::InvalidStatus);
            
            // ç½šæ²¡æŠ¼é‡‘ï¼ˆ30%ï¼‰
            let slash_ratio = Perbill::from_percent(30);
            pallet_deposits::Pallet::<T>::slash_deposit(
                frame_system::RawOrigin::Root.into(),
                appeal.deposit_id,
                slash_ratio,
                T::TreasuryAccount::get(),
            )?;
            
            appeal.status = 2;  // rejected
            
            Self::deposit_event(Event::AppealRejected {
                appeal_id,
                slash_ratio,
            });
            
            Ok(())
        })
    }
    
    /// æ’¤å›ç”³è¯‰
    /// 
    /// æµç¨‹ï¼š
    /// 1. æ£€æŸ¥ç”³è¯‰äººæƒé™
    /// 2. ç½šæ²¡æŠ¼é‡‘ï¼ˆ10%ï¼‰
    /// 3. æ›´æ–°çŠ¶æ€
    #[pallet::call_index(3)]
    #[pallet::weight(50_000)]
    pub fn withdraw_appeal(
        origin: OriginFor<T>,
        appeal_id: u64,
    ) -> DispatchResult {
        let who = ensure_signed(origin)?;
        
        Appeals::<T>::try_mutate(appeal_id, |maybe_appeal| -> DispatchResult {
            let appeal = maybe_appeal.as_mut().ok_or(Error::<T>::NotFound)?;
            ensure!(appeal.who == who, Error::<T>::NotOwner)?;
            ensure!(appeal.status == 0, Error::<T>::InvalidStatus);
            
            // ç½šæ²¡æŠ¼é‡‘ï¼ˆ10%ï¼‰
            let slash_ratio = Perbill::from_percent(10);
            pallet_deposits::Pallet::<T>::slash_deposit(
                frame_system::RawOrigin::Root.into(),
                appeal.deposit_id,
                slash_ratio,
                T::TreasuryAccount::get(),
            )?;
            
            appeal.status = 3;  // withdrawn
            
            Self::deposit_event(Event::AppealWithdrawn {
                appeal_id,
                slash_ratio,
            });
            
            Ok(())
        })
    }
}

/// è‡ªåŠ¨æ‰§è¡Œé€»è¾‘
impl<T: Config> Hooks<BlockNumberFor<T>> for Pallet<T> {
    fn on_initialize(n: BlockNumberFor<T>) -> Weight {
        // å–å‡ºæœ¬å—å¾…æ‰§è¡Œçš„ç”³è¯‰
        if let Some(queue) = QueueByBlock::<T>::take(n) {
            for appeal_id in queue {
                if let Some(appeal) = Appeals::<T>::get(appeal_id) {
                    // åº”ç­”è‡ªåŠ¨å¦å†³æ£€æŸ¥
                    if Self::should_auto_dismiss(&appeal) {
                        Self::auto_dismiss_appeal(appeal_id);
                        continue;
                    }
                    
                    // æ‰§è¡Œç”³è¯‰
                    match T::Router::execute(&appeal.who, appeal.domain, appeal.target, appeal.action) {
                        Ok(_) => {
                            // æˆåŠŸï¼šé‡Šæ”¾æŠ¼é‡‘
                            let _ = pallet_deposits::Pallet::<T>::release_deposit(
                                frame_system::RawOrigin::Root.into(),
                                appeal.deposit_id,
                            );
                            
                            Appeals::<T>::mutate(appeal_id, |a| {
                                if let Some(ap) = a {
                                    ap.status = 4;  // executed
                                }
                            });
                            
                            Self::deposit_event(Event::AppealExecuted { appeal_id });
                        },
                        Err(e) => {
                            // å¤±è´¥ï¼šè®¡åˆ’é‡è¯•
                            Self::schedule_retry(appeal_id);
                        }
                    }
                }
            }
        }
        
        Weight::from_parts(0, 0)
    }
}
```

---

ç”±äºè¾“å‡ºé•¿åº¦é™åˆ¶ï¼Œæˆ‘å°†æ–¹æ¡ˆåˆ†ä¸ºå¤šä¸ªæ–‡æ¡£ã€‚è®©æˆ‘ç»§ç»­åˆ›å»ºå…¶ä»–éƒ¨åˆ†ï¼š

