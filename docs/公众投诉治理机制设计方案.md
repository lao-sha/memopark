# å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ

## æ‰§è¡Œæ‘˜è¦

æœ¬æ–¹æ¡ˆè®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶ï¼Œç”¨äºå¤„ç†å¢“åœ°ã€é™µå›­ã€é€è€…å†…å®¹ä¸­çš„éæ³•ä¿¡æ¯ã€‚è¯¥æœºåˆ¶åŸºäºç°æœ‰çš„ç”³è¯‰ç³»ç»Ÿ(`pallet-stardust-appeals`)ã€ä»²è£ç³»ç»Ÿ(`pallet-arbitration`)å’Œè¯æ®ç³»ç»Ÿ(`pallet-evidence`)ï¼Œæä¾›äº†ä»å†…å®¹ä¸¾æŠ¥ã€å®¡æ ¸ã€å¤„ç½šåˆ°ç”³è¯‰çš„å®Œæ•´æ²»ç†æµç¨‹ï¼Œæ—¢ä¿æŠ¤äº†å…¬ä¼—åˆ©ç›Šï¼Œä¹Ÿä¿éšœäº†å†…å®¹åˆ›å»ºè€…çš„åˆæ³•æƒç›Šã€‚

## 1. é—®é¢˜èƒŒæ™¯åˆ†æ

### 1.1 éæ³•å†…å®¹é£é™©

åœ¨çºªå¿µå›­åŒºç³»ç»Ÿä¸­ï¼Œç”¨æˆ·å¯èƒ½ä¸Šä¼ ä»¥ä¸‹ç±»å‹çš„éæ³•å†…å®¹ï¼š

#### ğŸš« ä¸¥é‡è¿æ³•å†…å®¹
- **è™šå‡èº«ä»½ä¿¡æ¯**: å†’ç”¨ä»–äººèº«ä»½åˆ›å»ºè™šå‡é€è€…æ¡£æ¡ˆ
- **è¯½è°¤è¯¬é™·**: æ¶æ„ä¸­ä¼¤ã€æ•£å¸ƒä¸å®ä¿¡æ¯æŸå®³ä»–äººåèª‰
- **è¿æ³•çŠ¯ç½ªä¿¡æ¯**: æ¶‰åŠæš´åŠ›ã€ææ€–ä¸»ä¹‰ã€éæ³•ç»„ç»‡ç­‰å†…å®¹
- **ä¾µæƒå†…å®¹**: æœªç»æˆæƒä½¿ç”¨ä»–äººç…§ç‰‡ã€æ–‡å­—ã€éŸ³é¢‘ç­‰

#### âš ï¸ ä¸å½“å†…å®¹
- **å•†ä¸šå¹¿å‘Š**: åœ¨çºªå¿µå†…å®¹ä¸­æ¤å…¥å•†ä¸šä¿¡æ¯
- **æ”¿æ²»å®£ä¼ **: åˆ©ç”¨çºªå¿µå¹³å°è¿›è¡Œæ”¿æ²»æ´»åŠ¨
- **è¿·ä¿¡é‚ªæ•™**: ä¼ æ’­å°å»ºè¿·ä¿¡ã€é‚ªæ•™æ€æƒ³
- **ä½ä¿—å†…å®¹**: ä¸ç¬¦åˆçºªå¿µåœºæ‰€åº„ä¸¥æ€§çš„å†…å®¹

#### ğŸ” è¾¹ç•Œæ¨¡ç³Šå†…å®¹
- **äº‰è®®æ€§å†å²äººç‰©**: å¯¹å†å²äººç‰©è¯„ä»·å­˜åœ¨åˆ†æ­§
- **å®—æ•™ä¿¡ä»°å†²çª**: ä¸åŒå®—æ•™èƒŒæ™¯çš„çºªå¿µæ–¹å¼å·®å¼‚
- **æ–‡åŒ–ä»·å€¼è§‚å†²çª**: ä¸åŒæ–‡åŒ–èƒŒæ™¯çš„ä»·å€¼è§‚å·®å¼‚

### 1.2 å½“å‰ç³»ç»Ÿèƒ½åŠ›

åŸºäºä»£ç åˆ†æï¼Œå½“å‰ç³»ç»Ÿå·²å…·å¤‡ä»¥ä¸‹åŸºç¡€èƒ½åŠ›ï¼š

#### ç°æœ‰ç»„ä»¶
- **ç”³è¯‰ç³»ç»Ÿ**: æ”¯æŒå¤šåŸŸç”³è¯‰ï¼ˆå¢“åœ°ã€é€è€…ã€åª’ä½“ç­‰ï¼‰
- **è¯æ®ç®¡ç†**: ç»Ÿä¸€çš„è¯æ®å­˜å‚¨å’Œå¼•ç”¨æœºåˆ¶
- **ä»²è£æ¡†æ¶**: åŒå‘æŠ¼é‡‘ã€å¤šæ–¹å‚ä¸çš„äº‰è®®è§£å†³
- **æ²»ç†å§”å‘˜ä¼š**: å†…å®¹å®¡æ ¸å’Œå†³ç­–æœºæ„

#### æŠ€æœ¯åŸºç¡€
```rust
// å½“å‰æ”¯æŒçš„ç”³è¯‰åŸŸ
Domain 1: å¢“åœ° (Grave)
Domain 2: é€è€…æ¡£æ¡ˆ (Deceased)
Domain 3: é€è€…æ–‡æœ¬ (Deceased Text)
Domain 4: é€è€…åª’ä½“ (Deceased Media)
Domain 5: ä¾›å¥‰å“ (Offerings)
Domain 6: å›­åŒº (Park)

// å½“å‰æ”¯æŒçš„æ“ä½œç±»å‹
Action 1: è®¾ç½®å¯è§æ€§
Action 4: è½¬ç§»æ‰€æœ‰æƒ
Action 20: ç§»é™¤æ‚¼è¯
// ... æ›´å¤šæ“ä½œ
```

## 2. å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```mermaid
graph TD
    A[å…¬ä¼—å‘ç°éæ³•å†…å®¹] --> B[æäº¤æŠ•è¯‰ç”³è¯·]
    B --> C[ç³»ç»Ÿåˆæ­¥ç­›é€‰]
    C --> D{å†…å®¹ç±»åˆ«åˆ¤æ–­}

    D -->|ä¸¥é‡è¿æ³•| E[ç´§æ€¥å¤„ç†é€šé“]
    D -->|ä¸€èˆ¬è¿è§„| F[æ ‡å‡†å¤„ç†æµç¨‹]
    D -->|è¾¹ç•Œæ¨¡ç³Š| G[ä¸“å®¶è¯„è®®æµç¨‹]

    E --> H[ç«‹å³ä¸‹çº¿+å†»ç»“]
    F --> I[å§”å‘˜ä¼šå®¡æ ¸]
    G --> J[ä¸“å®¶å§”å‘˜ä¼šè¯„è®®]

    H --> K[7æ—¥å…¬ç¤ºæœŸ]
    I --> L{å®¡æ ¸ç»“æœ}
    J --> M[ä¸“å®¶æ„è§]

    L -->|é€šè¿‡| N[æ‰§è¡Œå¤„ç½š]
    L -->|é©³å›| O[ç»´æŒç°çŠ¶]
    M --> P[å§”å‘˜ä¼šæœ€ç»ˆå†³è®®]

    N --> Q[å†…å®¹ä¸‹çº¿/åˆ é™¤]
    O --> R[æŠ•è¯‰ç»“æŸ]
    P --> S[æ‰§è¡Œä¸“å®¶å»ºè®®]

    Q --> T[å½“äº‹äººç”³è¯‰æœŸ]
    T --> U{æ˜¯å¦ç”³è¯‰}
    U -->|æ˜¯| V[äºŒçº§ä»²è£]
    U -->|å¦| W[å¤„ç½šç”Ÿæ•ˆ]
```

### 2.2 æŠ•è¯‰åˆ†ç±»ä½“ç³»

#### 2.2.1 æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†çº§

```rust
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum ComplaintSeverity {
    /// ç´§æ€¥ï¼šä¸¥é‡è¿æ³•ï¼Œéœ€è¦ç«‹å³å¤„ç†
    Critical = 1,
    /// é‡è¦ï¼šæ˜æ˜¾è¿è§„ï¼Œéœ€è¦å¿«é€Ÿå¤„ç†
    Major = 2,
    /// ä¸€èˆ¬ï¼šç–‘ä¼¼è¿è§„ï¼Œéœ€è¦å®¡æ ¸ç¡®è®¤
    Minor = 3,
    /// è¾¹ç•Œï¼šå­˜åœ¨äº‰è®®ï¼Œéœ€è¦ä¸“å®¶è¯„è®®
    Disputed = 4,
}

#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum ComplaintType {
    /// èº«ä»½é€ å‡
    FakeIdentity,
    /// è¯½è°¤è¯¬é™·
    Defamation,
    /// ä¾µçŠ¯ç‰ˆæƒ
    CopyrightViolation,
    /// å•†ä¸šå¹¿å‘Š
    CommercialAd,
    /// æ”¿æ²»å®£ä¼ 
    PoliticalPropaganda,
    /// è¿·ä¿¡é‚ªæ•™
    Superstition,
    /// ä½ä¿—å†…å®¹
    InappropriateContent,
    /// å…¶ä»–è¿è§„
    Other,
}
```

#### 2.2.2 å¤„ç†æ—¶æ•ˆè¦æ±‚

```rust
#[pallet::constant]
pub struct ComplaintTimeframes;

impl ComplaintTimeframes {
    /// ç´§æ€¥æŠ•è¯‰å¤„ç†æ—¶é™ï¼ˆ2å°æ—¶ï¼‰
    pub const CRITICAL_RESPONSE_HOURS: u32 = 2;
    /// é‡è¦æŠ•è¯‰å¤„ç†æ—¶é™ï¼ˆ24å°æ—¶ï¼‰
    pub const MAJOR_RESPONSE_HOURS: u32 = 24;
    /// ä¸€èˆ¬æŠ•è¯‰å¤„ç†æ—¶é™ï¼ˆ72å°æ—¶ï¼‰
    pub const MINOR_RESPONSE_HOURS: u32 = 72;
    /// äº‰è®®æŠ•è¯‰å¤„ç†æ—¶é™ï¼ˆ7å¤©ï¼‰
    pub const DISPUTED_RESPONSE_DAYS: u32 = 7;
    /// å…¬ç¤ºæœŸæ—¶é•¿ï¼ˆ7å¤©ï¼‰
    pub const PUBLIC_NOTICE_DAYS: u32 = 7;
    /// ç”³è¯‰æœŸæ—¶é•¿ï¼ˆ15å¤©ï¼‰
    pub const APPEAL_PERIOD_DAYS: u32 = 15;
}
```

### 2.3 æŠ•è¯‰æäº¤æœºåˆ¶

#### 2.3.1 æŠ•è¯‰å…¥å£è®¾è®¡

```rust
#[pallet::call_index(30)]
#[pallet::weight(T::WeightInfo::submit_public_complaint())]
pub fn submit_public_complaint(
    origin: OriginFor<T>,
    /// æŠ•è¯‰ç›®æ ‡åŸŸ (1=Grave, 2=Deceased, ç­‰)
    target_domain: u8,
    /// ç›®æ ‡ID (grave_id, deceased_id, ç­‰)
    target_id: u64,
    /// è¿è§„ç±»å‹
    complaint_type: ComplaintType,
    /// ä¸¥é‡ç¨‹åº¦ï¼ˆç³»ç»Ÿæ ¹æ®ç±»å‹è‡ªåŠ¨åˆ¤æ–­ï¼Œç”¨æˆ·å¯ä»¥å»ºè®®ï¼‰
    suggested_severity: Option<ComplaintSeverity>,
    /// æŠ•è¯‰ç†ç”±æè¿°
    reason_cid: BoundedVec<u8, T::MaxCidLen>,
    /// è¯æ®ææ–™CIDåˆ—è¡¨
    evidence_cids: BoundedVec<BoundedVec<u8, T::MaxCidLen>, ConstU32<10>>,
    /// è”ç³»æ–¹å¼ï¼ˆåŠ å¯†å­˜å‚¨ï¼Œä»…å®¡æ ¸äººå‘˜å¯è§ï¼‰
    contact_info: Option<BoundedVec<u8, T::MaxContactLen>>,
) -> DispatchResult {
    let complainant = ensure_signed(origin)?;

    // 1. åŸºç¡€éªŒè¯
    ensure!(!reason_cid.is_empty(), Error::<T>::ReasonRequired);
    ensure!(!evidence_cids.is_empty(), Error::<T>::EvidenceRequired);

    // 2. é™é¢‘æ£€æŸ¥ï¼ˆé˜²æ­¢æ¶æ„æŠ•è¯‰ï¼‰
    Self::check_complaint_frequency(&complainant)?;

    // 3. è‡ªåŠ¨åˆ†çº§ï¼ˆåŸºäºæŠ•è¯‰ç±»å‹å’Œå†…å®¹åˆ†æï¼‰
    let severity = Self::determine_complaint_severity(
        complaint_type.clone(),
        suggested_severity,
        &target_domain,
        target_id,
    )?;

    // 4. è®¡ç®—æŠ¼é‡‘ï¼ˆæ ¹æ®ä¸¥é‡ç¨‹åº¦è°ƒæ•´ï¼‰
    let deposit = Self::calc_complaint_deposit(severity.clone())?;

    // 5. é”å®šæŠ¼é‡‘
    T::Fungible::hold(
        &T::RuntimeHoldReason::from(HoldReason::Complaint),
        &complainant,
        deposit,
    )?;

    // 6. åˆ›å»ºæŠ•è¯‰è®°å½•
    let complaint_id = Self::create_complaint_record(
        complainant.clone(),
        target_domain,
        target_id,
        complaint_type,
        severity.clone(),
        reason_cid,
        evidence_cids,
        contact_info,
        deposit,
    )?;

    // 7. è§¦å‘è‡ªåŠ¨å¤„ç†æµç¨‹
    Self::trigger_complaint_processing(complaint_id, severity)?;

    Self::deposit_event(Event::PublicComplaintSubmitted {
        complaint_id,
        complainant,
        target_domain,
        target_id,
        complaint_type,
        severity,
    });

    Ok(())
}
```

#### 2.3.2 æ™ºèƒ½åˆ†çº§ç®—æ³•

```rust
impl<T: Config> Pallet<T> {
    /// æ™ºèƒ½ç¡®å®šæŠ•è¯‰ä¸¥é‡ç¨‹åº¦
    fn determine_complaint_severity(
        complaint_type: ComplaintType,
        suggested: Option<ComplaintSeverity>,
        domain: &u8,
        target_id: u64,
    ) -> Result<ComplaintSeverity, Error<T>> {

        // åŸºç¡€åˆ†çº§è§„åˆ™
        let base_severity = match complaint_type {
            ComplaintType::FakeIdentity => ComplaintSeverity::Critical,
            ComplaintType::Defamation => ComplaintSeverity::Major,
            ComplaintType::CopyrightViolation => ComplaintSeverity::Major,
            ComplaintType::CommercialAd => ComplaintSeverity::Minor,
            ComplaintType::PoliticalPropaganda => ComplaintSeverity::Minor,
            ComplaintType::Superstition => ComplaintSeverity::Minor,
            ComplaintType::InappropriateContent => ComplaintSeverity::Minor,
            ComplaintType::Other => ComplaintSeverity::Minor,
        };

        // å†…å®¹å½±å“åŠ›è°ƒæ•´
        let content_influence = Self::assess_content_influence(*domain, target_id)?;
        let adjusted_severity = match (base_severity, content_influence) {
            // é«˜å½±å“åŠ›å†…å®¹å‡çº§å¤„ç†
            (ComplaintSeverity::Minor, InfluenceLevel::High) => ComplaintSeverity::Major,
            (ComplaintSeverity::Major, InfluenceLevel::High) => ComplaintSeverity::Critical,
            // ä½å½±å“åŠ›å†…å®¹å¯ä»¥é™çº§
            (ComplaintSeverity::Major, InfluenceLevel::Low) => ComplaintSeverity::Minor,
            // å…¶ä»–æƒ…å†µä¿æŒåŸçº§åˆ«
            (severity, _) => severity,
        };

        // å†å²è®°å½•è°ƒæ•´
        let target_history = Self::get_violation_history(*domain, target_id)?;
        let final_severity = if target_history.violation_count > 3 {
            // ç´¯çŠ¯å‡çº§å¤„ç†
            match adjusted_severity {
                ComplaintSeverity::Minor => ComplaintSeverity::Major,
                ComplaintSeverity::Major => ComplaintSeverity::Critical,
                other => other,
            }
        } else {
            adjusted_severity
        };

        Ok(final_severity)
    }

    /// è¯„ä¼°å†…å®¹å½±å“åŠ›
    fn assess_content_influence(
        domain: u8,
        target_id: u64,
    ) -> Result<InfluenceLevel, Error<T>> {
        match domain {
            1 => {
                // å¢“åœ°å½±å“åŠ›ï¼šåŸºäºè®¿é—®é‡ã€ä¾›å¥‰æ•°ã€å…³æ³¨åº¦
                let grave_stats = T::GraveStatsProvider::get_stats(target_id)?;
                Ok(match grave_stats.total_visitors {
                    n if n > 10000 => InfluenceLevel::High,
                    n if n > 1000 => InfluenceLevel::Medium,
                    _ => InfluenceLevel::Low,
                })
            },
            2 => {
                // é€è€…æ¡£æ¡ˆå½±å“åŠ›ï¼šåŸºäºçŸ¥ååº¦ã€åª’ä½“å…³æ³¨ç­‰
                let deceased_profile = T::DeceasedProfileProvider::get_profile(target_id)?;
                Ok(Self::calculate_deceased_influence(&deceased_profile))
            },
            _ => Ok(InfluenceLevel::Low),
        }
    }
}

#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub enum InfluenceLevel {
    Low,
    Medium,
    High,
}
```

### 2.4 å®¡æ ¸å¤„ç†æµç¨‹

#### 2.4.1 ç´§æ€¥å¤„ç†é€šé“

```rust
/// ç´§æ€¥æŠ•è¯‰è‡ªåŠ¨å¤„ç†
fn handle_critical_complaint(complaint_id: u64) -> DispatchResult {
    let complaint = Complaints::<T>::get(complaint_id)
        .ok_or(Error::<T>::ComplaintNotFound)?;

    // 1. ç«‹å³æ ‡è®°å†…å®¹ä¸º"å®¡æ ¸ä¸­"çŠ¶æ€
    Self::set_content_under_review(
        complaint.target_domain,
        complaint.target_id,
        true,
    )?;

    // 2. è‡ªåŠ¨é™åˆ¶å†…å®¹å¯è§æ€§ï¼ˆä»…åˆ›å»ºè€…å¯è§ï¼‰
    T::ContentVisibilityController::set_visibility(
        complaint.target_domain,
        complaint.target_id,
        VisibilityLevel::Private,
    )?;

    // 3. é€šçŸ¥ç´§æ€¥å“åº”å›¢é˜Ÿ
    Self::notify_emergency_team(complaint_id)?;

    // 4. è®¾ç½®åŠ é€Ÿå®¡æ ¸æ—¶é—´è¡¨
    let review_deadline = Self::current_block() + T::CriticalReviewBlocks::get();
    ComplaintSchedule::<T>::insert(complaint_id, review_deadline);

    // 5. è®°å½•ç´§æ€¥å¤„ç†æ—¥å¿—
    Self::deposit_event(Event::EmergencyActionTaken {
        complaint_id,
        action: EmergencyAction::ContentHidden,
        reviewer: Self::get_system_account(),
    });

    Ok(())
}
```

#### 2.4.2 å§”å‘˜ä¼šå®¡æ ¸æµç¨‹

```rust
#[pallet::call_index(31)]
#[pallet::weight(T::WeightInfo::committee_review_complaint())]
pub fn committee_review_complaint(
    origin: OriginFor<T>,
    complaint_id: u64,
    decision: ReviewDecision,
    reasoning: BoundedVec<u8, T::MaxReasoningLen>,
    recommended_action: Option<PunishmentAction>,
) -> DispatchResult {
    // 1. éªŒè¯å®¡æ ¸æƒé™
    let reviewer = ensure_signed(origin)?;
    ensure!(
        T::CommitteeManager::is_active_member(&reviewer),
        Error::<T>::NotCommitteeMember
    );

    // 2. æ£€æŸ¥æ˜¯å¦å·²å®¡æ ¸
    ensure!(
        !ReviewRecords::<T>::contains_key(complaint_id, &reviewer),
        Error::<T>::AlreadyReviewed
    );

    let mut complaint = Complaints::<T>::get(complaint_id)
        .ok_or(Error::<T>::ComplaintNotFound)?;

    // 3. è®°å½•ä¸ªäººå®¡æ ¸æ„è§
    let review_record = ReviewRecord {
        reviewer: reviewer.clone(),
        decision: decision.clone(),
        reasoning: reasoning.clone(),
        recommended_action: recommended_action.clone(),
        reviewed_at: Self::current_block(),
    };

    ReviewRecords::<T>::insert(complaint_id, &reviewer, review_record);

    // 4. æ›´æ–°æŠ•è¯‰ç»Ÿè®¡
    complaint.reviews_received += 1;
    match decision {
        ReviewDecision::Uphold => complaint.uphold_votes += 1,
        ReviewDecision::Reject => complaint.reject_votes += 1,
        ReviewDecision::NeedMoreInfo => complaint.info_requests += 1,
    }

    // 5. æ£€æŸ¥æ˜¯å¦è¾¾åˆ°å†³è®®æ¡ä»¶
    if Self::has_sufficient_reviews(complaint_id) {
        let final_decision = Self::calculate_committee_consensus(complaint_id)?;
        Self::execute_committee_decision(complaint_id, final_decision)?;
    }

    Complaints::<T>::insert(complaint_id, complaint);

    Self::deposit_event(Event::CommitteeReviewSubmitted {
        complaint_id,
        reviewer,
        decision,
    });

    Ok(())
}

/// è®¡ç®—å§”å‘˜ä¼šå…±è¯†
fn calculate_committee_consensus(complaint_id: u64) -> Result<CommitteeDecision, Error<T>> {
    let complaint = Complaints::<T>::get(complaint_id)
        .ok_or(Error::<T>::ComplaintNotFound)?;

    let total_votes = complaint.uphold_votes + complaint.reject_votes;
    let uphold_percentage = (complaint.uphold_votes * 100) / total_votes;

    let decision = match uphold_percentage {
        p if p >= 67 => CommitteeDecision::StrongUphold,  // 2/3å¤šæ•°æ”¯æŒ
        p if p >= 51 => CommitteeDecision::WeakUphold,    // ç®€å•å¤šæ•°æ”¯æŒ
        p if p <= 33 => CommitteeDecision::StrongReject,  // 2/3å¤šæ•°åå¯¹
        _ => CommitteeDecision::WeakReject,                // ç®€å•å¤šæ•°åå¯¹
    };

    Ok(decision)
}
```

#### 2.4.3 ä¸“å®¶è¯„è®®æœºåˆ¶

```rust
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum ExpertDomain {
    /// æ³•å¾‹ä¸“å®¶
    Legal,
    /// æ–‡åŒ–ä¸“å®¶
    Cultural,
    /// å®—æ•™ä¸“å®¶
    Religious,
    /// å†å²ä¸“å®¶
    Historical,
    /// å¿ƒç†å­¦ä¸“å®¶
    Psychological,
    /// æŠ€æœ¯ä¸“å®¶
    Technical,
}

/// ä¸“å®¶è¯„è®®æµç¨‹
#[pallet::call_index(32)]
pub fn expert_evaluation(
    origin: OriginFor<T>,
    complaint_id: u64,
    expert_domain: ExpertDomain,
    evaluation: ExpertEvaluation,
    confidence_level: u8,  // 1-100
) -> DispatchResult {
    let expert = ensure_signed(origin)?;

    // éªŒè¯ä¸“å®¶èµ„æ ¼
    ensure!(
        T::ExpertRegistry::is_qualified_expert(&expert, &expert_domain),
        Error::<T>::NotQualifiedExpert
    );

    // æ£€æŸ¥åˆ©ç›Šå†²çª
    ensure!(
        !Self::has_conflict_of_interest(&expert, complaint_id)?,
        Error::<T>::ConflictOfInterest
    );

    let evaluation_record = ExpertEvaluationRecord {
        expert: expert.clone(),
        domain: expert_domain,
        evaluation,
        confidence_level,
        evaluation_date: Self::current_block(),
        reasoning: evaluation.reasoning.clone(),
    };

    // å­˜å‚¨ä¸“å®¶æ„è§
    ExpertEvaluations::<T>::insert(complaint_id, &expert, evaluation_record);

    // æ£€æŸ¥æ˜¯å¦æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¸“å®¶æ„è§
    if Self::has_sufficient_expert_opinions(complaint_id) {
        let expert_consensus = Self::synthesize_expert_opinions(complaint_id)?;
        Self::forward_to_final_review(complaint_id, expert_consensus)?;
    }

    Self::deposit_event(Event::ExpertEvaluationSubmitted {
        complaint_id,
        expert,
        domain: expert_domain,
        confidence: confidence_level,
    });

    Ok(())
}
```

### 2.5 å¤„ç½šæ‰§è¡Œæœºåˆ¶

#### 2.5.1 å¤„ç½šç­‰çº§ä½“ç³»

```rust
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum PunishmentLevel {
    /// è­¦å‘Šï¼ˆè®°å½•åœ¨æ¡ˆï¼Œæ— å®è´¨å½±å“ï¼‰
    Warning,
    /// å†…å®¹éšè—ï¼ˆè®¾ä¸ºç§æœ‰ï¼Œä»…åˆ›å»ºè€…å¯è§ï¼‰
    ContentHidden,
    /// å†…å®¹åˆ é™¤ï¼ˆå½»åº•ç§»é™¤ï¼Œä¸å¯æ¢å¤ï¼‰
    ContentDeleted,
    /// è´¦æˆ·é™åˆ¶ï¼ˆé™åˆ¶åˆ›å»ºæ–°å†…å®¹ï¼‰
    AccountRestricted(u32), // é™åˆ¶å¤©æ•°
    /// è´¦æˆ·å°ç¦ï¼ˆå®Œå…¨ç¦æ­¢è®¿é—®ï¼‰
    AccountBanned(u32), // å°ç¦å¤©æ•°
    /// æ°¸ä¹…å°ç¦
    PermanentBan,
}

#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct PunishmentAction {
    /// å¤„ç½šç­‰çº§
    pub level: PunishmentLevel,
    /// ç”Ÿæ•ˆæ—¶é—´
    pub effective_date: BlockNumber,
    /// æŒç»­æ—¶é—´ï¼ˆå¯¹äºä¸´æ—¶å¤„ç½šï¼‰
    pub duration: Option<BlockNumber>,
    /// å¤„ç½šç†ç”±
    pub reason: BoundedVec<u8, ConstU32<512>>,
    /// æ˜¯å¦å¯ç”³è¯‰
    pub appealable: bool,
}

/// æ‰§è¡Œå¤„ç½šå†³å®š
fn execute_punishment(
    target_domain: u8,
    target_id: u64,
    owner: &T::AccountId,
    punishment: PunishmentAction,
) -> DispatchResult {
    match punishment.level {
        PunishmentLevel::Warning => {
            // è®°å½•è­¦å‘Šï¼Œå‘é€é€šçŸ¥
            Self::record_warning(target_domain, target_id, owner, &punishment)?;
            Self::notify_owner(owner, NotificationType::Warning, &punishment.reason)?;
        },

        PunishmentLevel::ContentHidden => {
            // éšè—å†…å®¹
            T::ContentVisibilityController::set_visibility(
                target_domain,
                target_id,
                VisibilityLevel::Private,
            )?;
            Self::record_punishment(target_domain, target_id, owner, &punishment)?;
        },

        PunishmentLevel::ContentDeleted => {
            // åˆ é™¤å†…å®¹ï¼ˆéœ€è¦å¤‡ä»½ç”¨äºç”³è¯‰ï¼‰
            Self::backup_content_for_appeal(target_domain, target_id)?;
            T::ContentManager::delete_content(target_domain, target_id)?;
            Self::record_punishment(target_domain, target_id, owner, &punishment)?;
        },

        PunishmentLevel::AccountRestricted(days) => {
            // é™åˆ¶è´¦æˆ·åˆ›å»ºæƒé™
            let until_block = Self::current_block() +
                T::BlocksPerDay::get() * days.into();
            T::AccountManager::restrict_account(owner, until_block)?;
            Self::record_punishment(target_domain, target_id, owner, &punishment)?;
        },

        PunishmentLevel::AccountBanned(days) => {
            // å°ç¦è´¦æˆ·
            let until_block = Self::current_block() +
                T::BlocksPerDay::get() * days.into();
            T::AccountManager::ban_account(owner, until_block)?;
            Self::record_punishment(target_domain, target_id, owner, &punishment)?;
        },

        PunishmentLevel::PermanentBan => {
            // æ°¸ä¹…å°ç¦
            T::AccountManager::permanent_ban(owner)?;
            Self::record_punishment(target_domain, target_id, owner, &punishment)?;
        },
    }

    // å‘é€å¤„ç½šé€šçŸ¥
    Self::notify_punishment_executed(target_domain, target_id, owner, &punishment)?;

    Ok(())
}
```

#### 2.5.2 å¤„ç½šå†³å®šé€»è¾‘

```rust
/// æ ¹æ®è¿è§„ç±»å‹å’Œå†å²è®°å½•ç¡®å®šå¤„ç½šç­‰çº§
fn determine_punishment_level(
    complaint_type: ComplaintType,
    content_influence: InfluenceLevel,
    violation_history: &ViolationHistory,
    committee_consensus: CommitteeDecision,
) -> PunishmentAction {

    // åŸºç¡€å¤„ç½šç­‰çº§
    let base_level = match complaint_type {
        ComplaintType::FakeIdentity => PunishmentLevel::ContentDeleted,
        ComplaintType::Defamation => PunishmentLevel::ContentHidden,
        ComplaintType::CopyrightViolation => PunishmentLevel::ContentDeleted,
        ComplaintType::CommercialAd => PunishmentLevel::ContentHidden,
        ComplaintType::PoliticalPropaganda => PunishmentLevel::Warning,
        ComplaintType::Superstition => PunishmentLevel::Warning,
        ComplaintType::InappropriateContent => PunishmentLevel::ContentHidden,
        ComplaintType::Other => PunishmentLevel::Warning,
    };

    // æ ¹æ®å§”å‘˜ä¼šå…±è¯†è°ƒæ•´
    let consensus_adjusted = match (base_level, committee_consensus) {
        (level, CommitteeDecision::StrongUphold) => level, // ä¿æŒåŸåˆ¤
        (PunishmentLevel::ContentDeleted, CommitteeDecision::WeakUphold) =>
            PunishmentLevel::ContentHidden, // é™çº§
        (PunishmentLevel::ContentHidden, CommitteeDecision::WeakUphold) =>
            PunishmentLevel::Warning, // é™çº§
        (level, CommitteeDecision::WeakReject) =>
            PunishmentLevel::Warning, // å¤§å¹…é™çº§
        (_, CommitteeDecision::StrongReject) => return Self::create_dismissal(), // é©³å›
    };

    // æ ¹æ®å†å²è®°å½•å‡çº§
    let history_adjusted = match (consensus_adjusted, violation_history.violation_count) {
        (PunishmentLevel::Warning, count) if count >= 3 =>
            PunishmentLevel::ContentHidden,
        (PunishmentLevel::ContentHidden, count) if count >= 3 =>
            PunishmentLevel::AccountRestricted(7), // é™åˆ¶7å¤©
        (PunishmentLevel::ContentDeleted, count) if count >= 3 =>
            PunishmentLevel::AccountRestricted(30), // é™åˆ¶30å¤©
        (level, count) if count >= 5 =>
            PunishmentLevel::AccountBanned(30), // å°ç¦30å¤©
        (level, count) if count >= 10 =>
            PunishmentLevel::PermanentBan, // æ°¸ä¹…å°ç¦
        (level, _) => level,
    };

    // æ ¹æ®å†…å®¹å½±å“åŠ›è°ƒæ•´
    let final_level = match (history_adjusted, content_influence) {
        (PunishmentLevel::Warning, InfluenceLevel::High) =>
            PunishmentLevel::ContentHidden,
        (PunishmentLevel::ContentHidden, InfluenceLevel::High) =>
            PunishmentLevel::ContentDeleted,
        (level, _) => level,
    };

    PunishmentAction {
        level: final_level,
        effective_date: Self::current_block(),
        duration: Self::get_punishment_duration(&final_level),
        reason: Self::generate_punishment_reason(&complaint_type, &committee_consensus),
        appealable: matches!(final_level,
            PunishmentLevel::ContentHidden |
            PunishmentLevel::ContentDeleted |
            PunishmentLevel::AccountRestricted(_) |
            PunishmentLevel::AccountBanned(_)
        ),
    }
}
```

### 2.6 ç”³è¯‰æ•‘æµæœºåˆ¶

#### 2.6.1 ç”³è¯‰æƒåˆ©ä¿æŠ¤

```rust
/// è¢«å¤„ç½šæ–¹ç”³è¯‰å¤„ç½šå†³å®š
#[pallet::call_index(33)]
#[pallet::weight(T::WeightInfo::appeal_punishment())]
pub fn appeal_punishment(
    origin: OriginFor<T>,
    original_complaint_id: u64,
    appeal_reason: BoundedVec<u8, T::MaxAppealReasonLen>,
    new_evidence: Option<BoundedVec<BoundedVec<u8, T::MaxCidLen>, ConstU32<5>>>,
    request_hearing: bool,
) -> DispatchResult {
    let appellant = ensure_signed(origin)?;

    // 1. éªŒè¯ç”³è¯‰èµ„æ ¼
    let punishment_record = PunishmentRecords::<T>::get(original_complaint_id)
        .ok_or(Error::<T>::PunishmentNotFound)?;
    ensure!(punishment_record.target_owner == appellant, Error::<T>::NotTargetOwner);
    ensure!(punishment_record.action.appealable, Error::<T>::NotAppealable);

    // 2. æ£€æŸ¥ç”³è¯‰æœŸé™
    let appeal_deadline = punishment_record.effective_date + T::AppealPeriodBlocks::get();
    ensure!(Self::current_block() <= appeal_deadline, Error::<T>::AppealDeadlineExpired);

    // 3. æ£€æŸ¥æ˜¯å¦å·²ç”³è¯‰
    ensure!(
        !Appeals::<T>::contains_key(original_complaint_id),
        Error::<T>::AlreadyAppealed
    );

    // 4. é”å®šç”³è¯‰æŠ¼é‡‘
    let appeal_deposit = T::AppealDeposit::get();
    T::Fungible::hold(
        &T::RuntimeHoldReason::from(HoldReason::Appeal),
        &appellant,
        appeal_deposit,
    )?;

    // 5. åˆ›å»ºç”³è¯‰è®°å½•
    let appeal_record = AppealRecord {
        appellant: appellant.clone(),
        original_complaint_id,
        appeal_reason: appeal_reason.clone(),
        new_evidence,
        request_hearing,
        submitted_at: Self::current_block(),
        status: AppealStatus::Submitted,
        assigned_judge: None,
    };

    let appeal_id = NextAppealId::<T>::mutate(|id| {
        let current = *id;
        *id = id.saturating_add(1);
        current
    });

    Appeals::<T>::insert(appeal_id, appeal_record);

    // 6. æš‚åœå¤„ç½šæ‰§è¡Œï¼ˆå¯¹äºå¯æš‚åœçš„å¤„ç½šï¼‰
    if Self::is_suspendable_punishment(&punishment_record.action.level) {
        Self::suspend_punishment_execution(original_complaint_id)?;
    }

    // 7. åˆ†é…å®¡ç†æ³•å®˜æˆ–ä¸“å®¶ç»„
    if request_hearing {
        Self::assign_appeal_hearing(appeal_id)?;
    } else {
        Self::assign_appeal_reviewer(appeal_id)?;
    }

    Self::deposit_event(Event::PunishmentAppealed {
        appeal_id,
        original_complaint_id,
        appellant,
        request_hearing,
    });

    Ok(())
}
```

#### 2.6.2 äºŒçº§ä»²è£æœºåˆ¶

```rust
/// é«˜çº§åˆ«ç”³è¯‰å®¡ç†ï¼ˆä¸“å®¶ç»„æˆ–ä»²è£åº­ï¼‰
#[pallet::call_index(34)]
pub fn conduct_appeal_hearing(
    origin: OriginFor<T>,
    appeal_id: u64,
    hearing_decision: HearingDecision,
    detailed_reasoning: BoundedVec<u8, T::MaxHearingReasonLen>,
    compensation_recommended: Option<Balance>,
) -> DispatchResult {
    // ç¡®ä¿åªæœ‰æŒ‡å®šçš„å®¡ç†æ³•å®˜å¯ä»¥æ‰§è¡Œ
    let judge = ensure_signed(origin)?;
    let appeal = Appeals::<T>::get(appeal_id).ok_or(Error::<T>::AppealNotFound)?;

    ensure!(
        appeal.assigned_judge == Some(judge.clone()),
        Error::<T>::NotAuthorizedJudge
    );

    ensure!(
        appeal.status == AppealStatus::InHearing,
        Error::<T>::InvalidAppealStatus
    );

    // æ‰§è¡Œç”³è¯‰å†³å®š
    match hearing_decision {
        HearingDecision::UpoldOriginal => {
            // ç»´æŒåŸåˆ¤
            Self::finalize_original_punishment(appeal.original_complaint_id)?;
            Self::forfeit_appeal_deposit(&appeal.appellant)?;
        },

        HearingDecision::OverturnCompletely => {
            // å®Œå…¨æ¨ç¿»åŸåˆ¤
            Self::reverse_punishment(appeal.original_complaint_id)?;
            Self::return_appeal_deposit(&appeal.appellant)?;

            // å¯èƒ½çš„è¡¥å¿
            if let Some(compensation) = compensation_recommended {
                Self::award_compensation(&appeal.appellant, compensation)?;
            }
        },

        HearingDecision::ModifyPunishment(new_punishment) => {
            // ä¿®æ”¹å¤„ç½š
            Self::modify_punishment(appeal.original_complaint_id, new_punishment)?;
            Self::return_appeal_deposit(&appeal.appellant)?;
        },

        HearingDecision::DismissWithPrejudice => {
            // é©³å›ç”³è¯‰ä¸”ä¸å…è®¸å†æ¬¡ç”³è¯‰
            Self::finalize_original_punishment(appeal.original_complaint_id)?;
            Self::forfeit_appeal_deposit(&appeal.appellant)?;
            Self::blacklist_further_appeals(appeal.original_complaint_id)?;
        },
    }

    // æ›´æ–°ç”³è¯‰çŠ¶æ€
    Appeals::<T>::mutate(appeal_id, |maybe_appeal| {
        if let Some(appeal_record) = maybe_appeal {
            appeal_record.status = AppealStatus::Resolved;
        }
    });

    Self::deposit_event(Event::AppealHearingCompleted {
        appeal_id,
        judge,
        decision: hearing_decision.clone(),
    });

    Ok(())
}
```

### 2.7 é˜²æŠ¤æœºåˆ¶è®¾è®¡

#### 2.7.1 é˜²æ¶æ„æŠ•è¯‰æœºåˆ¶

```rust
/// æŠ•è¯‰é™é¢‘æ§åˆ¶
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Default)]
pub struct ComplaintLimits<BlockNumber> {
    /// æ¯æ—¥æŠ•è¯‰é™åˆ¶
    pub daily_limit: u32,
    /// å½“æ—¥å·²æŠ•è¯‰æ•°é‡
    pub daily_count: u32,
    /// å½“å‰æ—¥æœŸï¼ˆå—ï¼‰
    pub current_day: BlockNumber,
    /// å†å²æˆåŠŸç‡
    pub success_rate: u32,
    /// ä¿¡èª‰è¯„åˆ†
    pub reputation_score: u32,
}

impl<T: Config> Pallet<T> {
    /// æ£€æŸ¥æŠ•è¯‰é¢‘ç‡é™åˆ¶
    fn check_complaint_frequency(who: &T::AccountId) -> DispatchResult {
        let current_block = Self::current_block();
        let current_day = current_block / T::BlocksPerDay::get();

        ComplaintLimits::<T>::mutate(who, |limits| {
            // é‡ç½®æ¯æ—¥è®¡æ•°
            if limits.current_day != current_day {
                limits.current_day = current_day;
                limits.daily_count = 0;
            }

            // æ ¹æ®ä¿¡èª‰è¯„åˆ†åŠ¨æ€è°ƒæ•´é™åˆ¶
            let adjusted_limit = Self::calc_dynamic_complaint_limit(limits.reputation_score);

            ensure!(limits.daily_count < adjusted_limit, Error::<T>::DailyLimitExceeded);

            limits.daily_count += 1;
            Ok(())
        })
    }

    /// æ ¹æ®ç”¨æˆ·ä¿¡èª‰åŠ¨æ€è°ƒæ•´æŠ•è¯‰é™åˆ¶
    fn calc_dynamic_complaint_limit(reputation_score: u32) -> u32 {
        match reputation_score {
            score if score >= 90 => 10,  // é«˜ä¿¡èª‰ç”¨æˆ·ï¼šæ¯æ—¥10æ¬¡
            score if score >= 70 => 5,   // ä¸­ç­‰ä¿¡èª‰ï¼šæ¯æ—¥5æ¬¡
            score if score >= 50 => 3,   // ä¸€èˆ¬ä¿¡èª‰ï¼šæ¯æ—¥3æ¬¡
            score if score >= 20 => 1,   // ä½ä¿¡èª‰ï¼šæ¯æ—¥1æ¬¡
            _ => 0,                      // æä½ä¿¡èª‰ï¼šç¦æ­¢æŠ•è¯‰
        }
    }

    /// æ£€æµ‹æ¶æ„æŠ•è¯‰æ¨¡å¼
    fn detect_malicious_complaint_pattern(
        complainant: &T::AccountId,
        target_domain: u8,
        target_id: u64,
    ) -> Result<bool, Error<T>> {
        // 1. æ£€æŸ¥æ˜¯å¦é¢‘ç¹æŠ•è¯‰åŒä¸€ç›®æ ‡
        let same_target_count = ComplaintHistory::<T>::iter_prefix((complainant, target_domain, target_id))
            .count();
        if same_target_count >= 3 {
            return Ok(true); // å¯èƒ½å­˜åœ¨æ¶æ„éªšæ‰°
        }

        // 2. æ£€æŸ¥æŠ•è¯‰æˆåŠŸç‡å¼‚å¸¸
        let user_stats = ComplaintLimits::<T>::get(complainant);
        if user_stats.success_rate < 20 && user_stats.daily_count > 5 {
            return Ok(true); // å¤§é‡æ— æ•ˆæŠ•è¯‰
        }

        // 3. æ£€æŸ¥æŠ•è¯‰ç›®æ ‡åˆ›å»ºè€…æ˜¯å¦ä¸ºè‡ªå·±
        let target_owner = T::ContentOwnerProvider::get_owner(target_domain, target_id)?;
        if target_owner == *complainant {
            return Ok(true); // è‡ªæˆ‘æŠ•è¯‰ï¼ˆå¯èƒ½æ˜¯åˆ·å¥–åŠ±ï¼‰
        }

        // 4. æ£€æŸ¥æ˜¯å¦ä¸ç›®æ ‡åˆ›å»ºè€…å­˜åœ¨å…³è”
        if T::IdentityProvider::are_related(complainant, &target_owner) {
            return Ok(true); // å…³è”è´¦æˆ·æŠ•è¯‰
        }

        Ok(false)
    }
}
```

#### 2.7.2 æŠ•è¯‰è´¨é‡è¯„ä¼°

```rust
/// æŠ•è¯‰è´¨é‡è¯„åˆ†ç³»ç»Ÿ
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct ComplaintQualityScore {
    /// è¯æ®å……åˆ†æ€§è¯„åˆ† (1-10)
    pub evidence_score: u8,
    /// ç†ç”±æ¸…æ™°åº¦è¯„åˆ† (1-10)
    pub reasoning_score: u8,
    /// åˆ†ç±»å‡†ç¡®æ€§è¯„åˆ† (1-10)
    pub categorization_score: u8,
    /// æ³•å¾‹ä¾æ®è¯„åˆ† (1-10)
    pub legal_basis_score: u8,
    /// ç»¼åˆè´¨é‡è¯„åˆ†
    pub overall_score: u8,
}

impl<T: Config> Pallet<T> {
    /// è‡ªåŠ¨è¯„ä¼°æŠ•è¯‰è´¨é‡
    fn assess_complaint_quality(
        complaint_type: &ComplaintType,
        reason_cid: &BoundedVec<u8, T::MaxCidLen>,
        evidence_cids: &BoundedVec<BoundedVec<u8, T::MaxCidLen>, ConstU32<10>>,
        target_domain: u8,
        target_id: u64,
    ) -> Result<ComplaintQualityScore, Error<T>> {

        // 1. è¯„ä¼°è¯æ®å……åˆ†æ€§
        let evidence_score = Self::evaluate_evidence_sufficiency(evidence_cids)?;

        // 2. è¯„ä¼°ç†ç”±æ¸…æ™°åº¦ï¼ˆéœ€è¦AIåˆ†ææˆ–äººå·¥é¢„å¤„ç†ï¼‰
        let reasoning_score = Self::evaluate_reasoning_clarity(reason_cid)?;

        // 3. è¯„ä¼°åˆ†ç±»å‡†ç¡®æ€§ï¼ˆåŸºäºå†…å®¹åˆ†æï¼‰
        let categorization_score = Self::evaluate_categorization_accuracy(
            complaint_type, target_domain, target_id
        )?;

        // 4. è¯„ä¼°æ³•å¾‹ä¾æ®ï¼ˆåŸºäºé¢„è®¾è§„åˆ™åº“ï¼‰
        let legal_basis_score = Self::evaluate_legal_basis(complaint_type)?;

        // 5. è®¡ç®—ç»¼åˆè¯„åˆ†
        let overall_score = (evidence_score + reasoning_score +
                           categorization_score + legal_basis_score) / 4;

        Ok(ComplaintQualityScore {
            evidence_score,
            reasoning_score,
            categorization_score,
            legal_basis_score,
            overall_score,
        })
    }

    /// åŸºäºæŠ•è¯‰è´¨é‡è°ƒæ•´å¤„ç†ä¼˜å…ˆçº§
    fn adjust_processing_priority(
        base_severity: ComplaintSeverity,
        quality_score: &ComplaintQualityScore,
        complainant_reputation: u32,
    ) -> (ComplaintSeverity, u32) {

        let priority_boost = match (quality_score.overall_score, complainant_reputation) {
            // é«˜è´¨é‡æŠ•è¯‰ + é«˜ä¿¡èª‰ç”¨æˆ· = æœ€é«˜ä¼˜å…ˆçº§
            (score, rep) if score >= 8 && rep >= 80 => 2,
            // ä¸­ç­‰è´¨é‡æŠ•è¯‰ + ä¸­ç­‰ä¿¡èª‰ç”¨æˆ· = æ­£å¸¸ä¼˜å…ˆçº§
            (score, rep) if score >= 6 && rep >= 50 => 1,
            // ä½è´¨é‡æŠ•è¯‰ = é™ä½ä¼˜å…ˆçº§
            (score, _) if score < 4 => -1,
            _ => 0,
        };

        let adjusted_severity = match (base_severity, priority_boost) {
            (ComplaintSeverity::Critical, boost) if boost >= 2 => ComplaintSeverity::Critical,
            (ComplaintSeverity::Major, boost) if boost >= 1 => ComplaintSeverity::Critical,
            (ComplaintSeverity::Minor, boost) if boost >= 2 => ComplaintSeverity::Major,
            (severity, boost) if boost < 0 => {
                // é™çº§å¤„ç†
                match severity {
                    ComplaintSeverity::Major => ComplaintSeverity::Minor,
                    ComplaintSeverity::Minor => ComplaintSeverity::Disputed,
                    other => other,
                }
            },
            (severity, _) => severity,
        };

        // è®¡ç®—æ•°å€¼ä¼˜å…ˆçº§ï¼ˆç”¨äºé˜Ÿåˆ—æ’åºï¼‰
        let priority_score = match adjusted_severity {
            ComplaintSeverity::Critical => 100,
            ComplaintSeverity::Major => 75,
            ComplaintSeverity::Minor => 50,
            ComplaintSeverity::Disputed => 25,
        } + priority_boost * 5;

        (adjusted_severity, priority_score as u32)
    }
}
```

### 2.8 æ¿€åŠ±æœºåˆ¶è®¾è®¡

#### 2.8.1 æŠ•è¯‰è€…å¥–åŠ±æœºåˆ¶

```rust
/// æŠ•è¯‰å¥–åŠ±è®¡ç®—
fn calculate_complainant_reward(
    complaint_type: ComplaintType,
    quality_score: ComplaintQualityScore,
    committee_consensus: CommitteeDecision,
    content_influence: InfluenceLevel,
) -> Balance {
    // åŸºç¡€å¥–åŠ±ï¼ˆæ ¹æ®è¿è§„ä¸¥é‡ç¨‹åº¦ï¼‰
    let base_reward = match complaint_type {
        ComplaintType::FakeIdentity => T::BaseReward::get() * 5u32.into(),
        ComplaintType::Defamation => T::BaseReward::get() * 3u32.into(),
        ComplaintType::CopyrightViolation => T::BaseReward::get() * 4u32.into(),
        ComplaintType::CommercialAd => T::BaseReward::get() * 2u32.into(),
        ComplaintType::PoliticalPropaganda => T::BaseReward::get() * 2u32.into(),
        ComplaintType::Superstition => T::BaseReward::get() * 1u32.into(),
        ComplaintType::InappropriateContent => T::BaseReward::get() * 2u32.into(),
        ComplaintType::Other => T::BaseReward::get() * 1u32.into(),
    };

    // è´¨é‡åŠ æˆï¼ˆ10%-50%ï¼‰
    let quality_multiplier = Perbill::from_percent(
        10 + (quality_score.overall_score as u32) * 4
    );

    // å…±è¯†å¼ºåº¦åŠ æˆ
    let consensus_multiplier = match committee_consensus {
        CommitteeDecision::StrongUphold => Perbill::from_percent(150),
        CommitteeDecision::WeakUphold => Perbill::from_percent(120),
        CommitteeDecision::WeakReject => Perbill::from_percent(50),
        CommitteeDecision::StrongReject => Perbill::from_percent(0), // æ— å¥–åŠ±
    };

    // å†…å®¹å½±å“åŠ›åŠ æˆ
    let influence_multiplier = match content_influence {
        InfluenceLevel::High => Perbill::from_percent(200),
        InfluenceLevel::Medium => Perbill::from_percent(150),
        InfluenceLevel::Low => Perbill::from_percent(100),
    };

    // è®¡ç®—æœ€ç»ˆå¥–åŠ±
    let quality_adjusted = quality_multiplier.mul_floor(base_reward);
    let consensus_adjusted = consensus_multiplier.mul_floor(quality_adjusted);
    influence_multiplier.mul_floor(consensus_adjusted)
}

/// åˆ†å‘æŠ•è¯‰å¥–åŠ±
fn distribute_complaint_rewards(complaint_id: u64) -> DispatchResult {
    let complaint = Complaints::<T>::get(complaint_id)
        .ok_or(Error::<T>::ComplaintNotFound)?;

    let reward_amount = Self::calculate_complainant_reward(
        complaint.complaint_type.clone(),
        complaint.quality_score.clone(),
        complaint.committee_decision.clone(),
        complaint.content_influence.clone(),
    );

    // ä»å›½åº“è½¬è´¦ç»™æŠ•è¯‰è€…
    T::Fungible::transfer(
        &T::TreasuryAccount::get(),
        &complaint.complainant,
        reward_amount,
        frame_support::traits::tokens::Preservation::Preserve,
    )?;

    // è¿”è¿˜æŠ¼é‡‘
    T::Fungible::release(
        &T::RuntimeHoldReason::from(HoldReason::Complaint),
        &complaint.complainant,
        complaint.deposit,
        frame_support::traits::tokens::Precision::Exact,
    )?;

    // æ›´æ–°æŠ•è¯‰è€…ä¿¡èª‰å’Œç»Ÿè®¡
    Self::update_complainant_reputation(&complaint.complainant, true)?;

    Self::deposit_event(Event::ComplaintRewardDistributed {
        complaint_id,
        complainant: complaint.complainant,
        reward_amount,
    });

    Ok(())
}
```

#### 2.8.2 å§”å‘˜ä¼šæˆå‘˜å¥–åŠ±

```rust
/// å§”å‘˜ä¼šæˆå‘˜å·¥ä½œé‡ç»Ÿè®¡
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen, Default)]
pub struct CommitteeWorkStats<BlockNumber> {
    /// æœ¬æœˆå®¡æ ¸æ¡ˆä»¶æ•°
    pub cases_reviewed: u32,
    /// å®¡æ ¸å‡†ç¡®ç‡ï¼ˆåŸºäºäºŒçº§å¤æ ¸ï¼‰
    pub accuracy_rate: u32,
    /// å¹³å‡å“åº”æ—¶é—´ï¼ˆå—ï¼‰
    pub avg_response_time: BlockNumber,
    /// è´¨é‡è¯„åˆ†ï¼ˆåŸºäºæ¡ˆä¾‹å¤æŸ¥ï¼‰
    pub quality_score: u32,
    /// æœ¬æœˆå·¥ä½œå¼€å§‹æ—¶é—´
    pub month_start: BlockNumber,
}

/// å§”å‘˜ä¼šæœˆåº¦å¥–åŠ±åˆ†é…
#[pallet::call_index(40)]
#[pallet::weight(T::WeightInfo::distribute_committee_rewards())]
pub fn distribute_committee_rewards(origin: OriginFor<T>) -> DispatchResult {
    // åªå…è®¸æ²»ç†æˆ–è‡ªåŠ¨åŒ–ç³»ç»Ÿè°ƒç”¨
    T::GovernanceOrigin::ensure_origin(origin)?;

    let current_block = Self::current_block();
    let total_reward_pool = T::MonthlyCommitteeRewardPool::get();

    // æ”¶é›†æ‰€æœ‰æ´»è·ƒå§”å‘˜ä¼šæˆå‘˜çš„å·¥ä½œç»Ÿè®¡
    let mut member_performances = Vec::new();
    let mut total_weighted_work = 0u32;

    for member in T::CommitteeManager::get_active_members().iter() {
        let stats = CommitteeWorkStats::<T>::get(member);

        // è®¡ç®—åŠ æƒå·¥ä½œé‡
        let weighted_work = Self::calculate_weighted_workload(&stats);
        total_weighted_work += weighted_work;

        member_performances.push((member.clone(), stats, weighted_work));
    }

    // æŒ‰åŠ æƒå·¥ä½œé‡åˆ†é…å¥–åŠ±
    for (member, stats, weighted_work) in member_performances {
        if weighted_work > 0 {
            let member_share = Perbill::from_rational(weighted_work, total_weighted_work);
            let reward_amount = member_share.mul_floor(total_reward_pool);

            // å‘æ”¾å¥–åŠ±
            T::Fungible::transfer(
                &T::TreasuryAccount::get(),
                &member,
                reward_amount,
                frame_support::traits::tokens::Preservation::Preserve,
            )?;

            Self::deposit_event(Event::CommitteeRewardDistributed {
                member: member.clone(),
                reward_amount,
                cases_reviewed: stats.cases_reviewed,
                quality_score: stats.quality_score,
            });
        }

        // é‡ç½®æœˆåº¦ç»Ÿè®¡
        CommitteeWorkStats::<T>::remove(&member);
    }

    Ok(())
}

/// è®¡ç®—å§”å‘˜ä¼šæˆå‘˜åŠ æƒå·¥ä½œé‡
fn calculate_weighted_workload(stats: &CommitteeWorkStats<BlockNumber>) -> u32 {
    let base_work = stats.cases_reviewed;

    // è´¨é‡åŠ æˆ (80-120%)
    let quality_multiplier = 80 + (stats.quality_score * 40 / 100);

    // å‡†ç¡®ç‡åŠ æˆ (50-150%)
    let accuracy_multiplier = 50 + stats.accuracy_rate;

    // å“åº”é€Ÿåº¦åŠ æˆï¼ˆå“åº”è¶Šå¿«åŠ æˆè¶Šé«˜ï¼‰
    let speed_multiplier = if stats.avg_response_time <= T::FastResponseThreshold::get() {
        120 // å¿«é€Ÿå“åº”ï¼š+20%
    } else if stats.avg_response_time <= T::NormalResponseThreshold::get() {
        100 // æ­£å¸¸å“åº”ï¼šæ— åŠ æˆ
    } else {
        80  // æ…¢é€Ÿå“åº”ï¼š-20%
    };

    // ç»¼åˆè®¡ç®—åŠ æƒå·¥ä½œé‡
    let weighted_base = (base_work * quality_multiplier) / 100;
    let accuracy_adjusted = (weighted_base * accuracy_multiplier) / 100;
    (accuracy_adjusted * speed_multiplier) / 100
}
```

## 3. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 3.1 å­˜å‚¨ç»“æ„è®¾è®¡

```rust
/// æŠ•è¯‰è®°å½•ä¸»å­˜å‚¨
#[pallet::storage]
pub type Complaints<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64, // complaint_id
    ComplaintRecord<T::AccountId, T::Balance, BlockNumberFor<T>>,
    OptionQuery,
>;

/// æŠ•è¯‰è®¡æ•°å™¨
#[pallet::storage]
pub type NextComplaintId<T: Config> = StorageValue<_, u64, ValueQuery>;

/// æŒ‰ç›®æ ‡ç´¢å¼•æŠ•è¯‰
#[pallet::storage]
pub type ComplaintsByTarget<T: Config> = StorageDoubleMap<
    _,
    Blake2_128Concat,
    (u8, u64), // (domain, target_id)
    Blake2_128Concat,
    u64, // complaint_id
    (),
    OptionQuery,
>;

/// æŒ‰æŠ•è¯‰è€…ç´¢å¼•
#[pallet::storage]
pub type ComplaintsByComplainant<T: Config> = StorageDoubleMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    Blake2_128Concat,
    u64, // complaint_id
    (),
    OptionQuery,
>;

/// æŒ‰çŠ¶æ€ç´¢å¼•æŠ•è¯‰
#[pallet::storage]
pub type ComplaintsByStatus<T: Config> = StorageDoubleMap<
    _,
    Blake2_128Concat,
    ComplaintStatus,
    Blake2_128Concat,
    u64, // complaint_id
    (),
    OptionQuery,
>;

/// å¤„ç½šè®°å½•å­˜å‚¨
#[pallet::storage]
pub type PunishmentRecords<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    u64, // complaint_id
    PunishmentRecord<T::AccountId, BlockNumberFor<T>>,
    OptionQuery,
>;

/// è¿è§„å†å²ç»Ÿè®¡
#[pallet::storage]
pub type ViolationHistory<T: Config> = StorageDoubleMap<
    _,
    Blake2_128Concat,
    (u8, u64), // (domain, target_id)
    Blake2_128Concat,
    T::AccountId, // owner
    ViolationStats<BlockNumberFor<T>>,
    ValueQuery,
>;

/// æŠ•è¯‰é™åˆ¶å­˜å‚¨
#[pallet::storage]
pub type ComplaintLimits<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    ComplaintLimitInfo<BlockNumberFor<T>>,
    ValueQuery,
>;
```

### 3.2 äº‹ä»¶å®šä¹‰

```rust
#[pallet::event]
#[pallet::generate_deposit(pub(super) fn deposit_event)]
pub enum Event<T: Config> {
    /// å…¬ä¼—æŠ•è¯‰å·²æäº¤
    PublicComplaintSubmitted {
        complaint_id: u64,
        complainant: T::AccountId,
        target_domain: u8,
        target_id: u64,
        complaint_type: ComplaintType,
        severity: ComplaintSeverity,
    },

    /// ç´§æ€¥è¡ŒåŠ¨å·²é‡‡å–
    EmergencyActionTaken {
        complaint_id: u64,
        action: EmergencyAction,
        reviewer: T::AccountId,
    },

    /// å§”å‘˜ä¼šå®¡æ ¸å·²æäº¤
    CommitteeReviewSubmitted {
        complaint_id: u64,
        reviewer: T::AccountId,
        decision: ReviewDecision,
    },

    /// ä¸“å®¶è¯„è®®å·²æäº¤
    ExpertEvaluationSubmitted {
        complaint_id: u64,
        expert: T::AccountId,
        domain: ExpertDomain,
        confidence: u8,
    },

    /// æŠ•è¯‰å¤„ç†å®Œæˆ
    ComplaintProcessed {
        complaint_id: u64,
        final_decision: ProcessingResult,
        punishment_applied: Option<PunishmentAction>,
    },

    /// æŠ•è¯‰å¥–åŠ±å·²åˆ†å‘
    ComplaintRewardDistributed {
        complaint_id: u64,
        complainant: T::AccountId,
        reward_amount: T::Balance,
    },

    /// å§”å‘˜ä¼šå¥–åŠ±å·²åˆ†å‘
    CommitteeRewardDistributed {
        member: T::AccountId,
        reward_amount: T::Balance,
        cases_reviewed: u32,
        quality_score: u32,
    },

    /// å¤„ç½šå·²ç”³è¯‰
    PunishmentAppealed {
        appeal_id: u64,
        original_complaint_id: u64,
        appellant: T::AccountId,
        request_hearing: bool,
    },

    /// ç”³è¯‰å¬è¯ä¼šå·²å®Œæˆ
    AppealHearingCompleted {
        appeal_id: u64,
        judge: T::AccountId,
        decision: HearingDecision,
    },

    /// æ¶æ„æŠ•è¯‰æ£€æµ‹åˆ°
    MaliciousComplaintDetected {
        complainant: T::AccountId,
        complaint_id: u64,
        reason: MaliciousReason,
    },
}
```

### 3.3 æƒé™æ§åˆ¶æ¥å£

```rust
/// å§”å‘˜ä¼šç®¡ç†æ¥å£
pub trait CommitteeManager<AccountId> {
    /// è·å–æ´»è·ƒå§”å‘˜ä¼šæˆå‘˜åˆ—è¡¨
    fn get_active_members() -> Vec<AccountId>;

    /// æ£€æŸ¥æ˜¯å¦ä¸ºæ´»è·ƒå§”å‘˜ä¼šæˆå‘˜
    fn is_active_member(who: &AccountId) -> bool;

    /// è·å–å§”å‘˜ä¼šæŠ•ç¥¨æƒé‡
    fn get_voting_weight(who: &AccountId) -> u32;

    /// æ£€æŸ¥å§”å‘˜ä¼šæˆå‘˜ä¸“ä¸šé¢†åŸŸ
    fn get_expertise_domains(who: &AccountId) -> Vec<ExpertDomain>;
}

/// ä¸“å®¶æ³¨å†Œæ¥å£
pub trait ExpertRegistry<AccountId> {
    /// æ£€æŸ¥æ˜¯å¦ä¸ºè®¤è¯ä¸“å®¶
    fn is_qualified_expert(who: &AccountId, domain: &ExpertDomain) -> bool;

    /// è·å–ä¸“å®¶è®¤è¯ç­‰çº§
    fn get_expert_level(who: &AccountId, domain: &ExpertDomain) -> Option<u8>;

    /// è·å–ä¸“å®¶å†å²å‡†ç¡®ç‡
    fn get_expert_accuracy(who: &AccountId) -> u32;

    /// æ£€æŸ¥ä¸“å®¶æ˜¯å¦å­˜åœ¨åˆ©ç›Šå†²çª
    fn has_conflict_of_interest(who: &AccountId, case_id: u64) -> bool;
}

/// å†…å®¹ç®¡ç†æ¥å£
pub trait ContentManager<AccountId> {
    /// è·å–å†…å®¹æ‰€æœ‰è€…
    fn get_content_owner(domain: u8, target_id: u64) -> Result<AccountId, DispatchError>;

    /// è®¾ç½®å†…å®¹å¯è§æ€§
    fn set_content_visibility(
        domain: u8,
        target_id: u64,
        visibility: VisibilityLevel,
    ) -> DispatchResult;

    /// åˆ é™¤å†…å®¹
    fn delete_content(domain: u8, target_id: u64) -> DispatchResult;

    /// å¤‡ä»½å†…å®¹ï¼ˆç”¨äºç”³è¯‰ï¼‰
    fn backup_content(domain: u8, target_id: u64) -> Result<Vec<u8>, DispatchError>;

    /// æ¢å¤å†…å®¹
    fn restore_content(domain: u8, target_id: u64, backup_data: Vec<u8>) -> DispatchResult;
}

/// è´¦æˆ·ç®¡ç†æ¥å£
pub trait AccountManager<AccountId, BlockNumber> {
    /// é™åˆ¶è´¦æˆ·åŠŸèƒ½
    fn restrict_account(who: &AccountId, until: BlockNumber) -> DispatchResult;

    /// å°ç¦è´¦æˆ·
    fn ban_account(who: &AccountId, until: BlockNumber) -> DispatchResult;

    /// æ°¸ä¹…å°ç¦è´¦æˆ·
    fn permanent_ban(who: &AccountId) -> DispatchResult;

    /// æ£€æŸ¥è´¦æˆ·çŠ¶æ€
    fn get_account_status(who: &AccountId) -> AccountStatus;
}
```

## 4. å®æ–½è®¡åˆ’

### 4.1 åˆ†é˜¶æ®µå®æ–½ç­–ç•¥

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æŠ•è¯‰ç³»ç»Ÿï¼ˆ4å‘¨ï¼‰

**ç›®æ ‡**: å»ºç«‹åŸºæœ¬çš„å…¬ä¼—æŠ•è¯‰æäº¤å’Œå¤„ç†æœºåˆ¶

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°`pallet-public-complaints`æ ¸å¿ƒåŠŸèƒ½
- [ ] è®¾è®¡æŠ•è¯‰åˆ†ç±»å’Œä¸¥é‡ç¨‹åº¦åˆ¤æ–­é€»è¾‘
- [ ] å®ç°åŸºç¡€çš„å§”å‘˜ä¼šå®¡æ ¸æµç¨‹
- [ ] é…ç½®åŸºæœ¬çš„å¤„ç½šæ‰§è¡Œæœºåˆ¶
- [ ] éƒ¨ç½²æµ‹è¯•ç½‘éªŒè¯

**æŠ€æœ¯è¦æ±‚**:
```rust
// æœ€å°å¯è¡Œå®ç°
- submit_public_complaint()
- committee_review_complaint()
- execute_punishment()
- appeal_punishment()
```

**æˆåŠŸæ ‡å‡†**:
- ç”¨æˆ·å¯ä»¥æˆåŠŸæäº¤æŠ•è¯‰
- å§”å‘˜ä¼šå¯ä»¥æ­£å¸¸å®¡æ ¸å’ŒæŠ•ç¥¨
- å¤„ç½šå¯ä»¥æ­£ç¡®æ‰§è¡Œ
- è¢«å¤„ç½šæ–¹å¯ä»¥è¿›è¡Œç”³è¯‰

#### ç¬¬äºŒé˜¶æ®µï¼šæ™ºèƒ½åŒ–å’Œé˜²æŠ¤ï¼ˆ6å‘¨ï¼‰

**ç›®æ ‡**: å¢å¼ºç³»ç»Ÿæ™ºèƒ½åŒ–ç¨‹åº¦å’Œé˜²æŠ¤èƒ½åŠ›

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°æ™ºèƒ½åˆ†çº§å’Œä¼˜å…ˆçº§è°ƒæ•´
- [ ] éƒ¨ç½²æ¶æ„æŠ•è¯‰æ£€æµ‹æœºåˆ¶
- [ ] å»ºç«‹æŠ•è¯‰è´¨é‡è¯„ä¼°ç³»ç»Ÿ
- [ ] å®ç°åŠ¨æ€é™é¢‘æ§åˆ¶
- [ ] æ·»åŠ ä¸“å®¶è¯„è®®æµç¨‹
- [ ] å®Œå–„ç”³è¯‰å’ŒäºŒçº§ä»²è£

**æŠ€æœ¯è¦æ±‚**:
```rust
// æ™ºèƒ½åŒ–åŠŸèƒ½
- determine_complaint_severity()
- detect_malicious_complaint_pattern()
- assess_complaint_quality()
- expert_evaluation()
- conduct_appeal_hearing()
```

**æˆåŠŸæ ‡å‡†**:
- æ¶æ„æŠ•è¯‰æ£€å‡ºç‡ > 90%
- æŠ•è¯‰è´¨é‡è¯„ä¼°å‡†ç¡®ç‡ > 85%
- å®¡æ ¸æ•ˆç‡æå‡ > 40%
- ç”³è¯‰æ»¡æ„åº¦ > 80%

#### ç¬¬ä¸‰é˜¶æ®µï¼šå¥–åŠ±å’Œä¼˜åŒ–ï¼ˆ4å‘¨ï¼‰

**ç›®æ ‡**: å»ºç«‹å®Œæ•´çš„æ¿€åŠ±æœºåˆ¶å’Œæ€§èƒ½ä¼˜åŒ–

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°æŠ•è¯‰è€…å¥–åŠ±æœºåˆ¶
- [ ] å»ºç«‹å§”å‘˜ä¼šæˆå‘˜ç»©æ•ˆè€ƒæ ¸
- [ ] ä¼˜åŒ–å­˜å‚¨å’ŒæŸ¥è¯¢æ€§èƒ½
- [ ] å®Œå–„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
- [ ] è¿›è¡Œå…¨é¢å®‰å…¨å®¡è®¡
- [ ] å‡†å¤‡ä¸»ç½‘éƒ¨ç½²

**æŠ€æœ¯è¦æ±‚**:
```rust
// å¥–åŠ±å’Œä¼˜åŒ–
- calculate_complainant_reward()
- distribute_committee_rewards()
- optimize_storage_queries()
- implement_monitoring_alerts()
```

**æˆåŠŸæ ‡å‡†**:
- æŠ•è¯‰å‚ä¸åº¦æå‡ > 50%
- å§”å‘˜ä¼šæ´»è·ƒåº¦æå‡ > 30%
- ç³»ç»Ÿå“åº”æ—¶é—´ < 2ç§’
- å®‰å…¨å®¡è®¡é€šè¿‡ç‡ 100%

### 4.2 èµ„æºé…ç½®

#### 4.2.1 å¼€å‘å›¢é˜Ÿé…ç½®

**æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ** (4äºº):
- **æŠ€æœ¯è´Ÿè´£äºº** (1äºº): ç³»ç»Ÿæ¶æ„è®¾è®¡å’Œæ ¸å¿ƒé€»è¾‘å®ç°
- **Substrateå¼€å‘å·¥ç¨‹å¸ˆ** (2äºº): Palletå¼€å‘å’ŒRuntimeé›†æˆ
- **å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ** (1äºº): ç”¨æˆ·ç•Œé¢å’Œäº¤äº’è®¾è®¡

**ä¸“å®¶é¡¾é—®å›¢é˜Ÿ** (3äºº):
- **æ³•å¾‹é¡¾é—®** (1äºº): æŠ•è¯‰åˆ†ç±»å’Œå¤„ç½šæ ‡å‡†è®¾è®¡
- **æ²»ç†ä¸“å®¶** (1äºº): æ²»ç†æµç¨‹è®¾è®¡å’Œä¼˜åŒ–å»ºè®®
- **å®‰å…¨ä¸“å®¶** (1äºº): å®‰å…¨å®¡è®¡å’Œé£é™©è¯„ä¼°

#### 4.2.2 ç¡¬ä»¶å’Œç¯å¢ƒé…ç½®

**å¼€å‘ç¯å¢ƒ**:
- æµ‹è¯•ç½‘èŠ‚ç‚¹: 4æ ¸CPU, 8GB RAM, 100GB SSD
- å¼€å‘æœåŠ¡å™¨: 8æ ¸CPU, 16GB RAM, 500GB SSD
- å‰ç«¯å¼€å‘ç¯å¢ƒ: æ ‡å‡†å¼€å‘æœºå™¨é…ç½®

**æµ‹è¯•ç¯å¢ƒ**:
- å¤šèŠ‚ç‚¹æµ‹è¯•ç½‘: 3ä¸ªéªŒè¯èŠ‚ç‚¹ + 2ä¸ªå…¨èŠ‚ç‚¹
- å‹åŠ›æµ‹è¯•ç¯å¢ƒ: æ¨¡æ‹Ÿ1000+ç”¨æˆ·å¹¶å‘æ“ä½œ
- å®‰å…¨æµ‹è¯•ç¯å¢ƒ: éš”ç¦»çš„å®‰å…¨æµ‹è¯•ä¸“ç”¨ç½‘ç»œ

### 4.3 é¢„ç®—ä¼°ç®—

#### 4.3.1 å¼€å‘æˆæœ¬

**äººåŠ›æˆæœ¬** (14å‘¨):
- æŠ€æœ¯è´Ÿè´£äºº: $15,000/æœˆ Ã— 3.5æœˆ = $52,500
- Substrateå¼€å‘ (Ã—2): $12,000/æœˆ Ã— 3.5æœˆ Ã— 2 = $84,000
- å‰ç«¯å¼€å‘: $10,000/æœˆ Ã— 3.5æœˆ = $35,000
- ä¸“å®¶é¡¾é—®è´¹: $20,000 (ä¸€æ¬¡æ€§)
- **å°è®¡**: $191,500

**åŸºç¡€è®¾æ–½æˆæœ¬** (6ä¸ªæœˆ):
- äº‘æœåŠ¡å™¨æˆæœ¬: $2,000/æœˆ Ã— 6æœˆ = $12,000
- ç¬¬ä¸‰æ–¹æœåŠ¡è´¹: $1,000/æœˆ Ã— 6æœˆ = $6,000
- å®‰å…¨å®¡è®¡è´¹ç”¨: $15,000 (ä¸€æ¬¡æ€§)
- **å°è®¡**: $33,000

**æ€»å¼€å‘æˆæœ¬**: $224,500

#### 4.3.2 è¿è¥æˆæœ¬

**åˆå§‹å¥–åŠ±æ± ** (6ä¸ªæœˆ):
- æŠ•è¯‰è€…å¥–åŠ±æ± : 500,000 DUST (ä¼°å€¼$50,000)
- å§”å‘˜ä¼šå¥–åŠ±æ± : 300,000 DUST (ä¼°å€¼$30,000)
- åº”æ€¥å¤„ç†åŸºé‡‘: 200,000 DUST (ä¼°å€¼$20,000)
- **å°è®¡**: $100,000

**æŒç»­è¿è¥æˆæœ¬** (æ¯æœˆ):
- å§”å‘˜ä¼šæˆå‘˜æ´¥è´´: $5,000/æœˆ
- ä¸“å®¶é¡¾é—®è´¹: $2,000/æœˆ
- ç³»ç»Ÿç»´æŠ¤è´¹: $1,000/æœˆ
- **å°è®¡**: $8,000/æœˆ

### 4.4 é£é™©ç®¡æ§

#### 4.4.1 æŠ€æœ¯é£é™©

**é£é™©**: Substrateå‡çº§å…¼å®¹æ€§é—®é¢˜
**æ¦‚ç‡**: ä¸­ç­‰
**å½±å“**: é«˜
**ç¼“è§£æªæ–½**:
- å¯†åˆ‡å…³æ³¨Substrateç‰ˆæœ¬æ›´æ–°
- ä¿æŒä»£ç çš„å‘å‰å…¼å®¹æ€§
- å»ºç«‹ç‰ˆæœ¬å›é€€æ–¹æ¡ˆ

**é£é™©**: æ€§èƒ½ç“¶é¢ˆå¯¼è‡´ç³»ç»Ÿå“åº”ç¼“æ…¢
**æ¦‚ç‡**: ä¸­ç­‰
**å½±å“**: ä¸­ç­‰
**ç¼“è§£æªæ–½**:
- è¿›è¡Œå……åˆ†çš„å‹åŠ›æµ‹è¯•
- å®æ–½æ•°æ®åº“ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥
- è®¾è®¡å¯æ‰©å±•çš„æ¶æ„

#### 4.4.2 æ²»ç†é£é™©

**é£é™©**: å§”å‘˜ä¼šæˆå‘˜è…è´¥æˆ–ä¸²é€š
**æ¦‚ç‡**: ä½
**å½±å“**: é«˜
**ç¼“è§£æªæ–½**:
- å»ºç«‹è½®æ¢æœºåˆ¶å’Œåˆ©ç›Šå†²çªæ£€æŸ¥
- å®æ–½å¤šçº§å®¡æ ¸å’ŒæŠ½æŸ¥æœºåˆ¶
- è®¾ç½®ä¸¾æŠ¥å¥–åŠ±å’Œæƒ©ç½šæœºåˆ¶

**é£é™©**: æ¶æ„æŠ•è¯‰æ”»å‡»ç³»ç»Ÿèµ„æº
**æ¦‚ç‡**: é«˜
**å½±å“**: ä¸­ç­‰
**ç¼“è§£æªæ–½**:
- éƒ¨ç½²å¤šå±‚é˜²æŠ¤æœºåˆ¶
- å®æ–½åŠ¨æ€é™é¢‘å’Œè´¨é‡è¯„ä¼°
- å»ºç«‹å¿«é€Ÿå“åº”æœºåˆ¶

#### 4.4.3 æ³•å¾‹é£é™©

**é£é™©**: å¤„ç½šå†³å®šé¢ä¸´æ³•å¾‹æŒ‘æˆ˜
**æ¦‚ç‡**: ä¸­ç­‰
**å½±å“**: é«˜
**ç¼“è§£æªæ–½**:
- ç¡®ä¿æ‰€æœ‰è§„åˆ™ç¬¦åˆå½“åœ°æ³•å¾‹
- å»ºç«‹å®Œå–„çš„ç”³è¯‰å’Œæ•‘æµæœºåˆ¶
- å®šæœŸè¿›è¡Œæ³•å¾‹åˆè§„å®¡æŸ¥

## 5. ç›‘æ§å’Œè¯„ä¼°

### 5.1 å…³é”®æ€§èƒ½æŒ‡æ ‡

#### 5.1.1 ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡

**å“åº”æ—¶é—´**:
- æŠ•è¯‰æäº¤å“åº”æ—¶é—´ < 3ç§’
- å§”å‘˜ä¼šå®¡æ ¸ç•Œé¢åŠ è½½æ—¶é—´ < 2ç§’
- å¤„ç½šæ‰§è¡Œæ—¶é—´ < 5ç§’

**ååé‡**:
- æ¯æ—¥æŠ•è¯‰å¤„ç†èƒ½åŠ› > 1000ä»¶
- å¹¶å‘ç”¨æˆ·æ”¯æŒ > 500äºº
- é«˜å³°æ—¶æ®µå“åº”ç¨³å®šæ€§ > 99%

#### 5.1.2 æ²»ç†æ•ˆæœæŒ‡æ ‡

**æŠ•è¯‰è´¨é‡**:
- æŠ•è¯‰æˆåŠŸç‡: 60-80%
- å¹³å‡å¤„ç†æ—¶é—´ < 48å°æ—¶
- ç”³è¯‰ç‡ < 15%

**ç”¨æˆ·æ»¡æ„åº¦**:
- æŠ•è¯‰è€…æ»¡æ„åº¦ > 75%
- è¢«æŠ•è¯‰è€…æ»¡æ„åº¦ > 60%
- å§”å‘˜ä¼šæˆå‘˜æ»¡æ„åº¦ > 80%

#### 5.1.3 å®‰å…¨æŒ‡æ ‡

**æ¶æ„è¡Œä¸ºæ£€æµ‹**:
- æ¶æ„æŠ•è¯‰æ£€å‡ºç‡ > 90%
- è¯¯æŠ¥ç‡ < 5%
- å“åº”æ—¶é—´ < 1å°æ—¶

**ç³»ç»Ÿå®‰å…¨**:
- å®‰å…¨æ¼æ´æ•°é‡ = 0
- æ•°æ®æ³„éœ²äº‹ä»¶ = 0
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.5%

### 5.2 ç›‘æ§ç³»ç»Ÿè®¾è®¡

#### 5.2.1 å®æ—¶ç›‘æ§é¢æ¿

```rust
/// ç³»ç»Ÿç›‘æ§æŒ‡æ ‡æ”¶é›†
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo)]
pub struct SystemMetrics {
    /// å®æ—¶ç»Ÿè®¡
    pub active_complaints: u32,
    pub pending_reviews: u32,
    pub daily_submissions: u32,
    pub average_processing_time: u32,

    /// æ€§èƒ½æŒ‡æ ‡
    pub response_time_ms: u32,
    pub success_rate_percent: u8,
    pub error_rate_percent: u8,

    /// èµ„æºä½¿ç”¨
    pub storage_usage_mb: u32,
    pub cpu_usage_percent: u8,
    pub memory_usage_mb: u32,
}

/// è‡ªåŠ¨å‘Šè­¦è§„åˆ™
impl<T: Config> Pallet<T> {
    /// æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€
    fn check_system_health() -> Vec<Alert> {
        let mut alerts = Vec::new();
        let metrics = Self::collect_current_metrics();

        // æ€§èƒ½å‘Šè­¦
        if metrics.response_time_ms > 5000 {
            alerts.push(Alert::PerformanceIssue(
                "Response time exceeds 5 seconds".into()
            ));
        }

        // ç§¯å‹å‘Šè­¦
        if metrics.pending_reviews > 100 {
            alerts.push(Alert::BacklogWarning(
                format!("Pending reviews: {}", metrics.pending_reviews)
            ));
        }

        // é”™è¯¯ç‡å‘Šè­¦
        if metrics.error_rate_percent > 5 {
            alerts.push(Alert::HighErrorRate(
                format!("Error rate: {}%", metrics.error_rate_percent)
            ));
        }

        // èµ„æºå‘Šè­¦
        if metrics.storage_usage_mb > 10000 {
            alerts.push(Alert::StorageWarning(
                format!("Storage usage: {} MB", metrics.storage_usage_mb)
            ));
        }

        alerts
    }

    /// å®šæœŸæ‰§è¡Œå¥åº·æ£€æŸ¥
    fn periodic_health_check() -> Weight {
        let alerts = Self::check_system_health();

        for alert in alerts {
            Self::handle_system_alert(alert);
        }

        T::WeightInfo::periodic_health_check()
    }
}
```

#### 5.2.2 æ•°æ®åˆ†æå’ŒæŠ¥å‘Š

**æ¯æ—¥æŠ¥å‘Šå†…å®¹**:
- æŠ•è¯‰æäº¤æ•°é‡å’Œç±»å‹åˆ†å¸ƒ
- å§”å‘˜ä¼šå®¡æ ¸æ•ˆç‡ç»Ÿè®¡
- å¤„ç½šæ‰§è¡Œæƒ…å†µæ±‡æ€»
- ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡è¶‹åŠ¿

**æ¯å‘¨æŠ¥å‘Šå†…å®¹**:
- æŠ•è¯‰è´¨é‡è¶‹åŠ¿åˆ†æ
- æ¶æ„è¡Œä¸ºæ£€æµ‹æ€»ç»“
- ç”¨æˆ·æ»¡æ„åº¦è°ƒæŸ¥ç»“æœ
- ç³»ç»Ÿä¼˜åŒ–å»ºè®®

**æ¯æœˆæŠ¥å‘Šå†…å®¹**:
- æ²»ç†æ•ˆæœç»¼åˆè¯„ä¼°
- å¥–åŠ±æœºåˆ¶è¿è¡Œåˆ†æ
- æ³•å¾‹åˆè§„æ£€æŸ¥æŠ¥å‘Š
- ä¸‹æœˆæ”¹è¿›è®¡åˆ’

## 6. ç»“è®ºå’Œå»ºè®®

### 6.1 å¯è¡Œæ€§ç»“è®º

**æŠ€æœ¯å¯è¡Œæ€§**: â­â­â­â­â­ (5/5)
- åŸºäºæˆç†Ÿçš„Substrateæ¡†æ¶ï¼ŒæŠ€æœ¯å®ç°å®Œå…¨å¯è¡Œ
- ç°æœ‰çš„ç”³è¯‰ã€ä»²è£ã€è¯æ®ç³»ç»Ÿæä¾›äº†è‰¯å¥½åŸºç¡€
- æ™ºèƒ½åŒ–åŠŸèƒ½å¯ä»¥é€æ­¥ä¼˜åŒ–å®Œå–„

**ç»æµå¯è¡Œæ€§**: â­â­â­â­âš¬ (4/5)
- åˆå§‹æŠ•èµ„é€‚ä¸­ï¼Œçº¦25ä¸‡ç¾å…ƒ
- å¥–åŠ±æœºåˆ¶é€šè¿‡ç½šæ²¡èµ„é‡‘è‡ªç»™è‡ªè¶³
- é•¿æœŸè¿è¥æˆæœ¬å¯æ§

**æ²»ç†å¯è¡Œæ€§**: â­â­â­â­âš¬ (4/5)
- å¤šå±‚æ¬¡å®¡æ ¸æœºåˆ¶ä¿è¯å†³ç­–è´¨é‡
- ç”³è¯‰æ•‘æµæœºåˆ¶ä¿éšœå½“äº‹äººæƒåˆ©
- éœ€è¦å»ºç«‹æˆç†Ÿçš„å§”å‘˜ä¼šå’Œä¸“å®¶ä½“ç³»

**æ³•å¾‹åˆè§„æ€§**: â­â­â­âš¬âš¬ (3/5)
- éœ€è¦æ ¹æ®å…·ä½“æ³•åŸŸè¿›è¡Œè°ƒæ•´
- ç¨‹åºæ­£ä¹‰å’Œå®ä½“æ­£ä¹‰éœ€è¦å¹³è¡¡
- å»ºè®®å’¨è¯¢ä¸“ä¸šæ³•å¾‹é¡¾é—®

### 6.2 æ ¸å¿ƒå»ºè®®

#### 6.2.1 çŸ­æœŸå»ºè®®ï¼ˆ1-3ä¸ªæœˆï¼‰

1. **å»ºç«‹æ³•å¾‹åˆè§„æ¡†æ¶**
   - è˜è¯·ä¸“ä¸šæ³•å¾‹é¡¾é—®å›¢é˜Ÿ
   - åˆ¶å®šè¯¦ç»†çš„æŠ•è¯‰å¤„ç†è§„åˆ™
   - ç¡®ä¿ç¬¦åˆå½“åœ°æ³•å¾‹æ³•è§„

2. **ç»„å»ºä¸“ä¸šæ²»ç†å›¢é˜Ÿ**
   - æ‹›å‹Ÿæœ‰ç»éªŒçš„å§”å‘˜ä¼šæˆå‘˜
   - å»ºç«‹ä¸“å®¶åº“å’Œè½®æ¢æœºåˆ¶
   - åˆ¶å®šåŸ¹è®­å’Œè€ƒæ ¸æ ‡å‡†

3. **å®Œå–„æŠ€æœ¯æ¶æ„è®¾è®¡**
   - è¯¦ç»†è®¾è®¡ç³»ç»Ÿæ¥å£å’Œæ•°æ®ç»“æ„
   - åˆ¶å®šå¼€å‘è§„èŒƒå’Œæµ‹è¯•æ ‡å‡†
   - å»ºç«‹æŒç»­é›†æˆå’Œéƒ¨ç½²æµç¨‹

#### 6.2.2 ä¸­æœŸå»ºè®®ï¼ˆ3-6ä¸ªæœˆï¼‰

1. **åˆ†é˜¶æ®µå®æ–½ç³»ç»ŸåŠŸèƒ½**
   - å…ˆå®ç°åŸºç¡€æŠ•è¯‰å’Œå®¡æ ¸åŠŸèƒ½
   - é€æ­¥å¢åŠ æ™ºèƒ½åŒ–å’Œé˜²æŠ¤æœºåˆ¶
   - æœ€åå®Œå–„å¥–åŠ±å’Œä¼˜åŒ–åŠŸèƒ½

2. **å»ºç«‹è¿è¥æ”¯æ’‘ä½“ç³»**
   - åˆ¶å®šè¯¦ç»†çš„æ“ä½œæ‰‹å†Œ
   - å»ºç«‹å®¢æœå’Œæ”¯æŒä½“ç³»
   - å®æ–½ç”¨æˆ·æ•™è‚²å’ŒåŸ¹è®­è®¡åˆ’

3. **æŒç»­ç›‘æ§å’Œä¼˜åŒ–**
   - å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
   - å®šæœŸåˆ†ææ•°æ®å’Œæ”¶é›†åé¦ˆ
   - æ ¹æ®å®é™…è¿è¥æƒ…å†µè°ƒæ•´å‚æ•°

#### 6.2.3 é•¿æœŸå»ºè®®ï¼ˆ6-12ä¸ªæœˆï¼‰

1. **å›½é™…åŒ–å’Œæ ‡å‡†åŒ–**
   - æ”¯æŒå¤šè¯­è¨€å’Œå¤šæ³•åŸŸ
   - å»ºç«‹è¡Œä¸šæ ‡å‡†å’Œæœ€ä½³å®è·µ
   - ä¸å…¶ä»–å¹³å°å»ºç«‹äº’æ“ä½œæ€§

2. **AIå’Œè‡ªåŠ¨åŒ–å¢å¼º**
   - å¼•å…¥æœºå™¨å­¦ä¹ æé«˜æ£€æµ‹å‡†ç¡®ç‡
   - å®ç°æ™ºèƒ½åŒ–çš„åˆ†ç±»å’Œæ¨è
   - å»ºç«‹è‡ªé€‚åº”çš„å‚æ•°è°ƒæ•´æœºåˆ¶

3. **ç”Ÿæ€ç³»ç»Ÿå»ºè®¾**
   - å»ºç«‹ç¬¬ä¸‰æ–¹å¼€å‘è€…ç¤¾åŒº
   - æ”¯æŒæ’ä»¶å’Œæ‰©å±•æœºåˆ¶
   - æ„å»ºå®Œæ•´çš„æ²»ç†ç”Ÿæ€

### 6.3 é£é™©æç¤º

1. **æ³•å¾‹é£é™©**: åŠ¡å¿…ç¡®ä¿ç³»ç»Ÿç¬¦åˆå½“åœ°æ³•å¾‹æ³•è§„ï¼Œå»ºè®®åœ¨å®æ–½å‰è¿›è¡Œä¸“ä¸šçš„æ³•å¾‹åˆè§„å®¡æŸ¥ã€‚

2. **æ²»ç†é£é™©**: å§”å‘˜ä¼šå’Œä¸“å®¶çš„é€‰æ‹©å’Œç®¡ç†è‡³å…³é‡è¦ï¼Œéœ€è¦å»ºç«‹ä¸¥æ ¼çš„åˆ©ç›Šå†²çªé¿å…æœºåˆ¶ã€‚

3. **æŠ€æœ¯é£é™©**: æ™ºèƒ½åŒ–åŠŸèƒ½çš„å‡†ç¡®æ€§éœ€è¦å¤§é‡æµ‹è¯•å’Œè°ƒä¼˜ï¼Œå»ºè®®é‡‡ç”¨æ¸è¿›å¼éƒ¨ç½²ç­–ç•¥ã€‚

4. **ç»æµé£é™©**: å¥–åŠ±æœºåˆ¶çš„å¯æŒç»­æ€§ä¾èµ–äºç³»ç»Ÿçš„å¥åº·è¿è¡Œï¼Œéœ€è¦å»ºç«‹é£é™©å‡†å¤‡é‡‘ã€‚

### 6.4 æˆåŠŸå…³é”®å› ç´ 

1. **ä¸“ä¸šå›¢é˜Ÿ**: æŠ€æœ¯å›¢é˜Ÿã€æ³•å¾‹å›¢é˜Ÿã€æ²»ç†å›¢é˜Ÿçš„ä¸“ä¸šæ€§æ˜¯æˆåŠŸçš„åŸºç¡€
2. **ç¤¾åŒºæ”¯æŒ**: ç”¨æˆ·å’Œç¤¾åŒºçš„ç†è§£å’Œæ”¯æŒæ˜¯ç³»ç»Ÿè¿è¡Œçš„å…³é”®
3. **æŒç»­ä¼˜åŒ–**: æ ¹æ®å®é™…è¿è¥æƒ…å†µä¸æ–­è°ƒæ•´å’Œä¼˜åŒ–æ˜¯é•¿æœŸæˆåŠŸçš„ä¿éšœ
4. **é€æ˜åº¦**: ä¿æŒå†³ç­–è¿‡ç¨‹çš„é€æ˜åº¦å’Œå¯é—®è´£æ€§æ˜¯è·å¾—ä¿¡ä»»çš„å‰æ

é€šè¿‡è°¨æ…çš„è§„åˆ’å’Œå®æ–½ï¼Œè¿™å¥—å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶æœ‰æœ›æˆä¸ºåŒºå—é“¾æ²»ç†é¢†åŸŸçš„æ ‡æ†æ¡ˆä¾‹ï¼Œä¸ºå»ä¸­å¿ƒåŒ–å¹³å°çš„å†…å®¹æ²»ç†æä¾›å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-14
**ä½œè€…**: Claude Code Analysis
**çŠ¶æ€**: å¾…å®¡æ ¸å®æ–½