# æŒ–çŸ¿èŠ‚ç‚¹æ”¶å…¥æ¥æºæ–¹æ¡ˆè®¾è®¡ï¼ˆå€Ÿé‰´Polkadotç”Ÿæ€ï¼‰

**æ—¥æœŸ**: 2025-10-22  
**ç‰ˆæœ¬**: v1.0  
**å‚è€ƒ**: Polkadotã€Kusamaã€Moonbeamã€Astarã€Phalaç­‰PoSé¡¹ç›®  
**å½“å‰å…±è¯†**: Aura (PoA - Proof of Authority)  
**ç›®æ ‡å…±è¯†**: NPoS (Nominated Proof of Stake) æˆ– æ··åˆPoS

---

## ä¸€ã€Polkadotç”Ÿæ€èŠ‚ç‚¹æ”¶å…¥æ¨¡å¼åˆ†æ

### 1.1 PolkadotéªŒè¯äººï¼ˆValidatorï¼‰æ”¶å…¥ç»“æ„

| æ”¶å…¥æ¥æº | å¹´åŒ–æ”¶ç›Šç‡ | å æ¯” | è¯´æ˜ |
|---------|-----------|------|------|
| **åŒºå—å¥–åŠ±** | ~15% | 80% | å›ºå®šé€šèƒ€å‘è¡Œ + æ‰‹ç»­è´¹ |
| **æåäººä½£é‡‘** | ~3-5% | 15% | ä»æåäººå¥–åŠ±ä¸­æŠ½æˆ5-20% |
| **æ—¶é—´æˆ³å¥–åŠ±** | ~0.5% | 3% | å‡†ç¡®å‡ºå—çš„é¢å¤–å¥–åŠ± |
| **å”å—å¥–åŠ±** | ~0.3% | 2% | æ‰“åŒ…å”å—è·å¾—çš„å¥–åŠ± |
| **æ€»è®¡** | **~18-20%** | **100%** | éªŒè¯äººå¹´åŒ–æ€»æ”¶ç›Š |

**PolkadotéªŒè¯äººæ”¶å…¥è®¡ç®—å…¬å¼**ï¼š
```
éªŒè¯äººæ€»æ”¶å…¥ = åŒºå—å¥–åŠ± + æåäººä½£é‡‘ + æ—¶é—´æˆ³å¥–åŠ± + å”å—å¥–åŠ±

åŒºå—å¥–åŠ± = (é€šèƒ€ç‡ Ã— æ€»å‘è¡Œé‡ / éªŒè¯äººæ•°é‡) + (æ€»æ‰‹ç»­è´¹ / éªŒè¯äººæ•°é‡)
æåäººä½£é‡‘ = æåäººæ€»å¥–åŠ± Ã— ä½£é‡‘ç‡(5-20%)
```

**ç¤ºä¾‹**ï¼ˆå•ä¸ªéªŒè¯äººï¼Œè´¨æŠ¼1M DOTï¼‰ï¼š
```
åŒºå—å¥–åŠ±ï¼š1,000,000 Ã— 15% = 150,000 DOT/å¹´
æåäººä½£é‡‘ï¼šæåäººè´¨æŠ¼10M DOT Ã— 15% Ã— 10%(ä½£é‡‘ç‡) = 150,000 DOT/å¹´
æ—¶é—´æˆ³å¥–åŠ±ï¼š1,500 DOT/å¹´
å”å—å¥–åŠ±ï¼š1,000 DOT/å¹´

æ€»æ”¶å…¥ï¼š302,500 DOT/å¹´
å¹´åŒ–æ”¶ç›Šç‡ï¼š30.25%ï¼ˆé«˜è´¨æŠ¼é‡+é«˜ä½£é‡‘ç‡ï¼‰
```

---

### 1.2 Polkadotæåäººï¼ˆNominatorï¼‰æ”¶å…¥ç»“æ„

| æ”¶å…¥æ¥æº | å¹´åŒ–æ”¶ç›Šç‡ | è¯´æ˜ |
|---------|-----------|------|
| **è´¨æŠ¼å¥–åŠ±** | ~15% | åŒºå—å¥–åŠ±æŒ‰è´¨æŠ¼æ¯”ä¾‹åˆ†é… |
| **æ‰£é™¤ä½£é‡‘** | -1.5% | éªŒè¯äººæŠ½æˆ10% |
| **å‡€æ”¶ç›Š** | **~13.5%** | æåäººå®é™…å¹´åŒ–æ”¶ç›Š |

**æåäººæ”¶å…¥è®¡ç®—å…¬å¼**ï¼š
```
æåäººæ”¶å…¥ = (è´¨æŠ¼é‡ Ã— åŒºå—å¥–åŠ±ç‡) - (å¥–åŠ± Ã— éªŒè¯äººä½£é‡‘ç‡)

ç¤ºä¾‹ï¼ˆè´¨æŠ¼10,000 DOTï¼ŒéªŒè¯äººä½£é‡‘10%ï¼‰ï¼š
å¹´åº¦å¥–åŠ± = 10,000 Ã— 15% = 1,500 DOT
ä½£é‡‘æ‰£é™¤ = 1,500 Ã— 10% = 150 DOT
å‡€æ”¶å…¥ = 1,500 - 150 = 1,350 DOT
å¹´åŒ–æ”¶ç›Šç‡ = 13.5%
```

---

### 1.3 å…¶ä»–Polkadotç”Ÿæ€é¡¹ç›®çš„èŠ‚ç‚¹æ”¶å…¥æ¨¡å¼

#### A. Moonbeamï¼ˆEVMå…¼å®¹é“¾ï¼‰

**æ”¶å…¥æ¥æº**ï¼š
1. **åŒºå—å¥–åŠ±**ï¼šå›ºå®šé€šèƒ€ï¼ˆå¹´åŒ–3-5%ï¼‰
2. **äº¤æ˜“æ‰‹ç»­è´¹**ï¼š30%ç»™æ”¶é›†äººï¼ˆCollatorï¼‰ï¼Œ70%é”€æ¯
3. **å§”æ‰˜äººä½£é‡‘**ï¼šæ”¶é›†äººä»å§”æ‰˜äººå¥–åŠ±ä¸­æŠ½æˆ5-10%

**ç‰¹ç‚¹**ï¼š
- âœ… æ”¶é›†äººé—¨æ§›ä½ï¼ˆ1,000 GLMRå³å¯ï¼‰
- âœ… å§”æ‰˜æœºåˆ¶ç®€å•ï¼ˆç”¨æˆ·å‹å¥½ï¼‰
- âœ… æ‰‹ç»­è´¹åˆ†æˆæ¿€åŠ±æ”¶é›†äººä¼˜åŒ–æ€§èƒ½

**å¹´åŒ–æ”¶ç›Š**ï¼š
- æ”¶é›†äººï¼š~8-12%
- å§”æ‰˜äººï¼š~7-10%

---

#### B. Astarï¼ˆå¤šè™šæ‹Ÿæœºé“¾ï¼‰

**æ”¶å…¥æ¥æº**ï¼š
1. **åŒºå—å¥–åŠ±**ï¼šå›ºå®šé€šèƒ€ï¼ˆå¹´åŒ–5-7%ï¼‰
2. **dApp Stakingå¥–åŠ±**ï¼šç”¨æˆ·è´¨æŠ¼æ”¯æŒdAppï¼ŒdAppå’Œè´¨æŠ¼è€…å…±äº«å¥–åŠ±
3. **äº¤æ˜“æ‰‹ç»­è´¹**ï¼šéƒ¨åˆ†ç»™æ”¶é›†äºº

**ç‰¹ç‚¹**ï¼š
- âœ… **dApp Staking**ï¼ˆç‹¬åˆ›ï¼‰ï¼šè´¨æŠ¼è€…æ”¯æŒdAppï¼ŒdAppè·å¾—æ”¶å…¥ï¼ŒåŒèµ¢
- âœ… å¼€å‘è€…æ¿€åŠ±ï¼šdAppè¢«è´¨æŠ¼è¶Šå¤šï¼Œè·å¾—å¥–åŠ±è¶Šå¤š
- âœ… ç”¨æˆ·æ¿€åŠ±ï¼šè´¨æŠ¼è€…é€‰æ‹©ä¼˜è´¨dAppè·å¾—é«˜æ”¶ç›Š

**å¹´åŒ–æ”¶ç›Š**ï¼š
- æ”¶é›†äººï¼š~10-15%
- dApp Stakingï¼š~8-12%

---

#### C. Phala Networkï¼ˆéšç§è®¡ç®—ï¼‰

**æ”¶å…¥æ¥æº**ï¼š
1. **æŒ–çŸ¿å¥–åŠ±**ï¼šè¿è¡ŒTEEï¼ˆå¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼‰è·å¾—å¥–åŠ±
2. **è®¡ç®—è´¹ç”¨**ï¼šç”¨æˆ·ä½¿ç”¨éšç§è®¡ç®—æœåŠ¡æ”¯ä»˜è´¹ç”¨ç»™çŸ¿å·¥
3. **è´¨æŠ¼å¥–åŠ±**ï¼šè´¨æŠ¼PHAè·å¾—åŸºç¡€æ”¶ç›Š

**ç‰¹ç‚¹**ï¼š
- âœ… å·¥ä½œé‡è¯æ˜ï¼ˆProof of Workï¼‰+ è´¨æŠ¼ï¼ˆProof of Stakeï¼‰æ··åˆ
- âœ… çœŸå®è®¡ç®—è´¡çŒ®ï¼ˆéç©ºè½¬ï¼‰
- âœ… ç¡¬ä»¶è¦æ±‚ï¼ˆéœ€è¦æ”¯æŒTEEçš„CPUï¼‰

**å¹´åŒ–æ”¶ç›Š**ï¼š
- çŸ¿å·¥ï¼š~20-30%ï¼ˆé«˜é…ç½®ç¡¬ä»¶ï¼‰
- è´¨æŠ¼è€…ï¼š~10-15%

---

### 1.4 PolkadotèŠ‚ç‚¹æ”¶å…¥æ¥æºæ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Polkadotç”Ÿæ€èŠ‚ç‚¹æ”¶å…¥æ¥æºå…¨æ™¯        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ 1. åŒºå—å¥–åŠ±ï¼ˆé€šèƒ€å‘è¡Œï¼‰
        â”‚   â””â”€ ä¸»è¦æ”¶å…¥æ¥æºï¼ˆ80%ï¼‰
        â”‚
        â”œâ”€ 2. äº¤æ˜“æ‰‹ç»­è´¹
        â”‚   â”œâ”€ Polkadotï¼š100%ç»™å›½åº“
        â”‚   â”œâ”€ Moonbeamï¼š30%ç»™æ”¶é›†äººï¼Œ70%é”€æ¯
        â”‚   â””â”€ Astarï¼šéƒ¨åˆ†ç»™æ”¶é›†äºº
        â”‚
        â”œâ”€ 3. ä½£é‡‘æ”¶å…¥ï¼ˆéªŒè¯äººï¼‰
        â”‚   â””â”€ ä»æåäººå¥–åŠ±ä¸­æŠ½æˆ5-20%
        â”‚
        â”œâ”€ 4. æ—¶é—´æˆ³/å”å—å¥–åŠ±
        â”‚   â””â”€ Polkadotç‰¹æœ‰ï¼ˆ2-3%ï¼‰
        â”‚
        â”œâ”€ 5. è®¡ç®—æœåŠ¡è´¹
        â”‚   â””â”€ Phalaç­‰éšç§è®¡ç®—é¡¹ç›®
        â”‚
        â””â”€ 6. dApp Stakingå¥–åŠ±
            â””â”€ Astarç‹¬åˆ›æ¨¡å¼
```

---

## äºŒã€Stardustå½“å‰å…±è¯†æœºåˆ¶åˆ†æ

### 2.1 å½“å‰çŠ¶æ€

**å…±è¯†æœºåˆ¶**ï¼šAura (Authority Round)
- **ç±»å‹**ï¼šPoA (Proof of Authority)
- **éªŒè¯äººæ•°é‡**ï¼š1ä¸ªï¼ˆå•èŠ‚ç‚¹ï¼‰
- **åŒºå—æ—¶é—´**ï¼š6ç§’
- **æœ€ç»ˆç¡®å®š**ï¼šGrandpa

**é—®é¢˜**ï¼š
- âŒ ä¸­å¿ƒåŒ–ï¼ˆå•ä¸€éªŒè¯äººï¼‰
- âŒ æ— Stakingæœºåˆ¶
- âŒ æ— èŠ‚ç‚¹æ¿€åŠ±
- âŒ æ— å»ä¸­å¿ƒåŒ–è·¯å¾„

**é…ç½®**ï¼ˆ`runtime/src/configs/mod.rs`ï¼‰ï¼š
```rust
impl pallet_aura::Config for Runtime {
    type AuthorityId = AuraId;
    type DisabledValidators = ();
    type MaxAuthorities = ConstU32<32>; // æœ€å¤š32ä¸ªéªŒè¯äºº
    type SlotDuration = pallet_aura::MinimumPeriodTimesTwo<Runtime>;
    type AllowMultipleBlocksPerSlot = ConstBool<false>;
}
```

---

### 2.2 è¿ç§»åˆ°PoSçš„å¿…è¦æ€§

| ç»´åº¦ | PoA (å½“å‰) | PoS (ç›®æ ‡) |
|-----|-----------|-----------|
| **å»ä¸­å¿ƒåŒ–** | âŒ ä½ï¼ˆå•èŠ‚ç‚¹ï¼‰ | âœ… é«˜ï¼ˆå¤šéªŒè¯äººï¼‰ |
| **å®‰å…¨æ€§** | âš ï¸ å•ç‚¹æ•…éšœ | âœ… ç»æµå®‰å…¨ |
| **æ¿€åŠ±æœºåˆ¶** | âŒ æ—  | âœ… è´¨æŠ¼å¥–åŠ± |
| **ç¤¾åŒºå‚ä¸** | âŒ ä½ | âœ… é«˜ï¼ˆæå/å§”æ‰˜ï¼‰ |
| **å¯æ‰©å±•æ€§** | âŒ å—é™ | âœ… åŠ¨æ€æ‰©å±• |

---

## ä¸‰ã€StardustèŠ‚ç‚¹æ”¶å…¥æ¥æºè®¾è®¡æ–¹æ¡ˆ

### 3.1 æ–¹æ¡ˆæ¦‚è§ˆ

**ç›®æ ‡**ï¼šä»PoAè¿ç§»åˆ°NPoSï¼ˆNominated Proof of Stakeï¼‰

**è®¾è®¡åŸåˆ™**ï¼š
1. âœ… å€Ÿé‰´Polkadotæˆç†Ÿæ¨¡å¼
2. âœ… ç»“åˆStardustä¸šåŠ¡ç‰¹ç‚¹
3. âœ… æ¸è¿›å¼å»ä¸­å¿ƒåŒ–
4. âœ… ä¿éšœé“¾ä¸Šèµ„é‡‘å®‰å…¨

---

### 3.2 æ”¶å…¥æ¥æº1ï¼šåŒºå—å¥–åŠ±ï¼ˆé€šèƒ€å‘è¡Œï¼‰ğŸ’°

**è®¾è®¡æ–¹æ¡ˆ**ï¼šå›ºå®šé€šèƒ€ç‡ + ç›®æ ‡è´¨æŠ¼ç‡

```rust
// é€šèƒ€é…ç½®
parameter_types! {
    pub const AnnualInflationRate: Permill = Permill::from_percent(10); // å¹´é€šèƒ€10%
    pub const TargetStakingRate: Permill = Permill::from_percent(50);  // ç›®æ ‡è´¨æŠ¼ç‡50%
    pub const SessionsPerEra: u32 = 6; // æ¯Era 6ä¸ªSession
    pub const BondingDuration: u32 = 28; // è§£ç»‘æœŸ28å¤©
}

// åŒºå—å¥–åŠ±è®¡ç®—
pub fn compute_block_reward() -> Balance {
    let total_issuance = <Balances as Currency<_>>::total_issuance();
    let annual_inflation = AnnualInflationRate::get() * total_issuance;
    let blocks_per_year = YEAR / BLOCK_TIME; // 5,256,000 blocks (6s/block)
    
    annual_inflation / blocks_per_year
}
```

**ç¤ºä¾‹è®¡ç®—**ï¼š
```
æ€»å‘è¡Œé‡ï¼š10äº¿ DUST
å¹´é€šèƒ€ç‡ï¼š10%
å¹´åº¦æ–°å¢ï¼š1äº¿ DUST
åŒºå—æ—¶é—´ï¼š6ç§’
æ¯å¹´åŒºå—æ•°ï¼š5,256,000ä¸ª
å•å—å¥–åŠ±ï¼š100,000,000 / 5,256,000 â‰ˆ 19.02 DUST/å—
```

**éªŒè¯äººæ”¶å…¥**ï¼ˆå‡è®¾20ä¸ªéªŒè¯äººï¼‰ï¼š
```
æ¯ä¸ªéªŒè¯äººå¹´æ”¶å…¥ = 1äº¿ / 20 = 500ä¸‡ DUST
å¹´åŒ–æ”¶ç›Šç‡ï¼ˆè‡ªè´¨æŠ¼500ä¸‡ï¼‰ = 100%
```

**åŠ¨æ€è°ƒæ•´**ï¼š
```rust
// æ ¹æ®å®é™…è´¨æŠ¼ç‡è°ƒæ•´é€šèƒ€
pub fn adjust_inflation(current_staking_rate: Permill) -> Permill {
    let target = TargetStakingRate::get();
    
    if current_staking_rate < target {
        // è´¨æŠ¼ç‡ä½ â†’ æé«˜é€šèƒ€ â†’ æ¿€åŠ±è´¨æŠ¼
        AnnualInflationRate::get().saturating_add(Permill::from_percent(1))
    } else if current_staking_rate > target {
        // è´¨æŠ¼ç‡é«˜ â†’ é™ä½é€šèƒ€ â†’ å‡å°‘ç¨€é‡Š
        AnnualInflationRate::get().saturating_sub(Permill::from_percent(1))
    } else {
        AnnualInflationRate::get()
    }
}
```

---

### 3.3 æ”¶å…¥æ¥æº2ï¼šäº¤æ˜“æ‰‹ç»­è´¹åˆ†æˆ ğŸ’¸

**å½“å‰é—®é¢˜**ï¼šæ‰‹ç»­è´¹ç›´æ¥é”€æ¯ï¼ŒéªŒè¯äººæ— æ”¶ç›Š

**æ”¹è¿›æ–¹æ¡ˆ**ï¼šå¼•å…¥éªŒè¯äººæ‰‹ç»­è´¹åˆ†æˆ

```rust
/// å‡½æ•°çº§ä¸­æ–‡æ³¨é‡Šï¼šäº¤æ˜“æ‰‹ç»­è´¹åˆ†é…å™¨ï¼ˆéªŒè¯äººç‰ˆï¼‰
/// - 40% â†’ å½“å‰åŒºå—éªŒè¯äººï¼ˆå‡ºå—æ¿€åŠ±ï¼‰
/// - 30% â†’ éªŒè¯äººæ± ï¼ˆæ‰€æœ‰éªŒè¯äººå¹³åˆ†ï¼‰
/// - 20% â†’ å›½åº“ï¼ˆç”Ÿæ€å‘å±•ï¼‰
/// - 10% â†’ é”€æ¯ï¼ˆé€šç¼©æœºåˆ¶ï¼‰
pub struct ValidatorFeeSplitter;
impl pallet_transaction_payment::OnChargeTransaction<Runtime> for ValidatorFeeSplitter {
    type Balance = Balance;
    type LiquidityInfo = Option<pallet_balances::NegativeImbalance<Runtime>>;

    fn withdraw_fee(
        who: &AccountId,
        _call: &RuntimeCall,
        _info: &sp_runtime::traits::DispatchInfoOf<RuntimeCall>,
        fee: Self::Balance,
        _tip: Self::Balance,
    ) -> Result<Self::LiquidityInfo, frame_support::dispatch::TransactionValidityError> {
        use frame_support::traits::Currency;
        
        // æ‰£é™¤æ€»è´¹ç”¨
        match Balances::withdraw(
            who,
            fee,
            frame_support::traits::WithdrawReasons::TRANSACTION_PAYMENT,
            frame_support::traits::ExistenceRequirement::KeepAlive,
        ) {
            Ok(imbalance) => Ok(Some(imbalance)),
            Err(_) => Err(frame_support::unsigned::TransactionValidityError::Invalid(
                frame_support::unsigned::InvalidTransaction::Payment,
            )),
        }
    }

    fn correct_and_deposit_fee(
        who: &AccountId,
        _dispatch_info: &sp_runtime::traits::DispatchInfoOf<RuntimeCall>,
        _post_info: &sp_runtime::traits::PostDispatchInfoOf<RuntimeCall>,
        corrected_fee: Self::Balance,
        _tip: Self::Balance,
        already_withdrawn: Self::LiquidityInfo,
    ) -> Result<(), frame_support::dispatch::TransactionValidityError> {
        use frame_support::traits::{Currency, Imbalance};
        use sp_runtime::traits::Saturating;
        
        if let Some(paid) = already_withdrawn {
            // 1. è®¡ç®—åˆ†é…æ¯”ä¾‹
            let block_author = <pallet_authorship::Pallet<Runtime>>::author(); // å½“å‰å‡ºå—è€…
            let block_author_share = corrected_fee.saturating_mul(40) / 100; // 40%
            let validator_pool_share = corrected_fee.saturating_mul(30) / 100;  // 30%
            let treasury_share = corrected_fee.saturating_mul(20) / 100;  // 20%
            let burn_share = corrected_fee.saturating_sub(block_author_share)
                .saturating_sub(validator_pool_share)
                .saturating_sub(treasury_share); // 10%
            
            // 2. å¥–åŠ±å½“å‰å‡ºå—éªŒè¯äºº
            if let Some(author) = block_author {
                let _ = Balances::deposit_creating(&author, block_author_share);
            }
            
            // 3. è½¬å…¥éªŒè¯äººå¥–åŠ±æ± 
            let validator_pool_account = ValidatorRewardPool::get();
            let _ = Balances::deposit_creating(&validator_pool_account, validator_pool_share);
            
            // 4. è½¬å…¥å›½åº“
            let treasury_account = TreasuryAccount::get();
            let _ = Balances::deposit_creating(&treasury_account, treasury_share);
            
            // 5. é”€æ¯å‰©ä½™ï¼ˆé€šç¼©ï¼‰
            let (burn_imb, _) = paid.split(burn_share);
            drop(burn_imb); // é”€æ¯
            
            Ok(())
        } else {
            Ok(())
        }
    }
}
```

**é¢„æœŸæ”¶å…¥**ï¼ˆå‡è®¾æ—¥å‡10,000ç¬”äº¤æ˜“ï¼Œå•ç¬”0.001 DUSTï¼‰ï¼š
```
æ—¥æ‰‹ç»­è´¹æ”¶å…¥ = 10,000 Ã— 0.001 = 10 DUST
  â”œâ”€ 4 DUST â†’ å‡ºå—éªŒè¯äºº
  â”œâ”€ 3 DUST â†’ éªŒè¯äººæ± ï¼ˆ20ä¸ªéªŒè¯äººå¹³åˆ†ï¼Œæ¯äºº0.15 DUST/å¤©ï¼‰
  â”œâ”€ 2 DUST â†’ å›½åº“
  â””â”€ 1 DUST â†’ é”€æ¯

éªŒè¯äººå¹´æ”¶å…¥ï¼ˆæ‰‹ç»­è´¹éƒ¨åˆ†ï¼‰ï¼š
  - å‡ºå—éªŒè¯äººï¼ˆå‡è®¾å¹³å‡å‡ºå—ï¼‰ï¼š4 Ã— 365 / 20 = 73 DUST/å¹´
  - éªŒè¯äººæ± åˆ†æˆï¼š0.15 Ã— 365 = 54.75 DUST/å¹´
  - æ€»è®¡ï¼š~128 DUST/å¹´/éªŒè¯äºº
```

---

### 3.4 æ”¶å…¥æ¥æº3ï¼šæåäººä½£é‡‘ ğŸ¯

**è®¾è®¡æ–¹æ¡ˆ**ï¼šéªŒè¯äººä»æåäººå¥–åŠ±ä¸­æŠ½æˆ

```rust
// ä½£é‡‘é…ç½®
parameter_types! {
    pub const DefaultCommission: Perbill = Perbill::from_percent(10); // é»˜è®¤ä½£é‡‘10%
    pub const MinCommission: Perbill = Perbill::from_percent(5);      // æœ€ä½5%
    pub const MaxCommission: Perbill = Perbill::from_percent(20);     // æœ€é«˜20%
}

/// éªŒè¯äººåå¥½è®¾ç½®
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct ValidatorPrefs {
    /// ä½£é‡‘ç‡ï¼ˆä»æåäººå¥–åŠ±ä¸­æŠ½æˆï¼‰
    pub commission: Perbill,
    /// æ˜¯å¦æ¥å—æå
    pub blocked: bool,
}

/// è®¡ç®—ä½£é‡‘æ”¶å…¥
pub fn compute_commission_income(
    validator: &AccountId,
    nominator_rewards: Balance,
    commission_rate: Perbill,
) -> Balance {
    commission_rate * nominator_rewards
}
```

**ç¤ºä¾‹**ï¼š
```
æåäººæ€»è´¨æŠ¼ï¼š1000ä¸‡ DUST
å¹´åº¦å¥–åŠ±ç‡ï¼š15%
æåäººæ€»å¥–åŠ±ï¼š150ä¸‡ DUST
éªŒè¯äººä½£é‡‘ç‡ï¼š10%
éªŒè¯äººä½£é‡‘æ”¶å…¥ï¼š150ä¸‡ Ã— 10% = 15ä¸‡ DUST/å¹´
```

**åŠ¨æ€è°ƒæ•´**ï¼š
```rust
// éªŒè¯äººå¯è°ƒæ•´ä½£é‡‘ç‡
pub fn set_commission(
    origin: OriginFor<T>,
    new_commission: Perbill,
) -> DispatchResult {
    let validator = ensure_signed(origin)?;
    
    // é™åˆ¶èŒƒå›´
    ensure!(
        new_commission >= MinCommission::get() && new_commission <= MaxCommission::get(),
        Error::<T>::InvalidCommission
    );
    
    ValidatorPreferences::<T>::try_mutate(&validator, |prefs| -> DispatchResult {
        prefs.commission = new_commission;
        Ok(())
    })?;
    
    Self::deposit_event(Event::CommissionUpdated(validator, new_commission));
    Ok(())
}
```

---

### 3.5 æ”¶å…¥æ¥æº4ï¼šå¹³å°ä¸šåŠ¡æ”¶å…¥åˆ†æˆ ğŸ’¼

**å€Ÿé‰´Astarçš„dApp Stakingæ¨¡å¼**

**è®¾è®¡æ–¹æ¡ˆ**ï¼šä¸šåŠ¡æ”¶å…¥çš„ä¸€éƒ¨åˆ†åˆ†é…ç»™éªŒè¯äºº

#### åœºæ™¯Aï¼šä¾›å¥‰ç³»ç»Ÿæ”¶å…¥ï¼ˆ8%å›½åº“ä»½é¢ï¼‰

```rust
// ä¾›å¥‰è´­ä¹°æ—¶çš„èµ„é‡‘åˆ†é…ï¼ˆä¿®æ”¹ç‰ˆï¼‰
100 DUST ä¾›å¥‰è´­ä¹°
    â†“
    â”œâ”€ 20 DUST â†’ å¢“åœ°ç®¡ç†è€…
    â”œâ”€ 35 DUST â†’ è”ç›Ÿè®¡é…¬
    â”œâ”€ 2 DUST  â†’ å­˜å‚¨è´¹ç”¨
    â”œâ”€ 5 DUST  â†’ å›½åº“
    â”œâ”€ 3 DUST  â†’ éªŒè¯äººå¥–åŠ±æ±  âœ…ï¼ˆæ–°å¢ï¼‰
    â””â”€ 35 DUST â†’ é”€æ¯
```

**é¢„æœŸæ”¶å…¥**ï¼ˆæ—¥å‡1000ç¬”ä¾›å¥‰ï¼Œå¹³å‡10 DUST/ç¬”ï¼‰ï¼š
```
æ—¥æ”¶å…¥ = 1,000 Ã— 10 Ã— 3% = 300 DUST
æœˆæ”¶å…¥ = 300 Ã— 30 = 9,000 DUST
å¹´æ”¶å…¥ = 9,000 Ã— 12 = 108,000 DUST

æ¯ä¸ªéªŒè¯äººï¼ˆ20ä¸ªï¼‰ï¼š108,000 / 20 = 5,400 DUST/å¹´
```

#### åœºæ™¯Bï¼šOTCè®¢å•æ‰‹ç»­è´¹åˆ†æˆ

```rust
// OTCè®¢å•æ‰‹ç»­è´¹åˆ†é…ï¼ˆä¿®æ”¹ç‰ˆï¼‰
æ€»æ‰‹ç»­è´¹ï¼š0.7%
    â”œâ”€ 0.3% â†’ å¹³å°
    â”œâ”€ 0.2% â†’ éªŒè¯äººå¥–åŠ±æ±  âœ…ï¼ˆæ–°å¢ï¼‰
    â””â”€ 0.2% â†’ ä¹°å®¶ä¿¡ç”¨æ± 
```

**é¢„æœŸæ”¶å…¥**ï¼ˆæ—¥å‡100ç¬”OTCï¼Œå¹³å‡1000 DUST/ç¬”ï¼‰ï¼š
```
æ—¥æ”¶å…¥ = 100 Ã— 1000 Ã— 0.2% = 200 DUST
å¹´æ”¶å…¥ = 200 Ã— 365 = 73,000 DUST

æ¯ä¸ªéªŒè¯äººï¼ˆ20ä¸ªï¼‰ï¼š73,000 / 20 = 3,650 DUST/å¹´
```

#### åœºæ™¯Cï¼šæ¡¥æ¥æœåŠ¡è´¹åˆ†æˆ

```rust
// SimpleBridgeæ‰‹ç»­è´¹åˆ†é…ï¼ˆä¿®æ”¹ç‰ˆï¼‰
æ€»æ‰‹ç»­è´¹ï¼š0.3%
    â”œâ”€ 0.15% â†’ åšå¸‚å•†
    â”œâ”€ 0.10% â†’ éªŒè¯äººå¥–åŠ±æ±  âœ…ï¼ˆæ–°å¢ï¼‰
    â””â”€ 0.05% â†’ å¹³å°
```

**é¢„æœŸæ”¶å…¥**ï¼ˆæ—¥å‡50ç¬”æ¡¥æ¥ï¼Œå¹³å‡5000 DUST/ç¬”ï¼‰ï¼š
```
æ—¥æ”¶å…¥ = 50 Ã— 5000 Ã— 0.1% = 25 DUST
å¹´æ”¶å…¥ = 25 Ã— 365 = 9,125 DUST

æ¯ä¸ªéªŒè¯äººï¼ˆ20ä¸ªï¼‰ï¼š9,125 / 20 = 456 DUST/å¹´
```

---

### 3.6 æ”¶å…¥æ¥æº5ï¼šå­˜å‚¨æœåŠ¡è´¹åˆ†æˆ ğŸ’¾

**è®¾è®¡æ–¹æ¡ˆ**ï¼šé“¾ä¸Šå­˜å‚¨è´¹ç”¨çš„ä¸€éƒ¨åˆ†å¥–åŠ±ç»™éªŒè¯äººï¼ˆè¡¥å¿å­˜å‚¨æˆæœ¬ï¼‰

```rust
// å­˜å‚¨è´¹ç”¨åˆ†é…ï¼ˆä¿®æ”¹ç‰ˆï¼‰
å­˜å‚¨è´¹ç”¨ï¼š2% (ä¾›å¥‰ç³»ç»Ÿ)
    â”œâ”€ 1.0% â†’ å­˜å‚¨ä¸“ç”¨è´¦æˆ·
    â”œâ”€ 0.7% â†’ éªŒè¯äººå¥–åŠ±æ±  âœ…ï¼ˆæ–°å¢ï¼Œè¡¥å¿å­˜å‚¨æˆæœ¬ï¼‰
    â””â”€ 0.3% â†’ IPFSèŠ‚ç‚¹è¿è¥è€…
```

**é¢„æœŸæ”¶å…¥**ï¼ˆåŸºäºä¾›å¥‰ç³»ç»Ÿï¼Œæ—¥å‡1000ç¬”Ã—10 DUSTï¼‰ï¼š
```
æ—¥æ”¶å…¥ = 1,000 Ã— 10 Ã— 0.7% = 7 DUST
å¹´æ”¶å…¥ = 7 Ã— 365 = 2,555 DUST

æ¯ä¸ªéªŒè¯äººï¼ˆ20ä¸ªï¼‰ï¼š2,555 / 20 = 127.75 DUST/å¹´
```

---

### 3.7 æ”¶å…¥æ¥æº6ï¼šæ²»ç†å‚ä¸å¥–åŠ± ğŸ›ï¸

**è®¾è®¡æ–¹æ¡ˆ**ï¼šéªŒè¯äººç§¯æå‚ä¸æ²»ç†è·å¾—é¢å¤–å¥–åŠ±

```rust
// æ²»ç†å‚ä¸å¥–åŠ±é…ç½®
parameter_types! {
    pub const GovernanceRewardPerVote: Balance = 1_000_000_000_000; // 0.001 DUST/æŠ•ç¥¨
    pub const GovernanceRewardPerProposal: Balance = 10_000_000_000_000; // 0.01 DUST/ææ¡ˆ
    pub const MonthlyActiveBonus: Balance = 100_000_000_000_000; // 0.1 DUST/æœˆï¼ˆæ´»è·ƒå¥–åŠ±ï¼‰
}

/// è®°å½•éªŒè¯äººæ²»ç†å‚ä¸
#[pallet::storage]
pub type ValidatorGovernanceStats<T: Config> = StorageMap<
    _,
    Blake2_128Concat,
    T::AccountId,
    GovernanceStats,
    ValueQuery,
>;

#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct GovernanceStats {
    pub votes_cast: u32,
    pub proposals_submitted: u32,
    pub last_active_era: u32,
}

/// å‘æ”¾æ²»ç†å¥–åŠ±
pub fn payout_governance_rewards(era: u32) {
    for (validator, stats) in ValidatorGovernanceStats::<T>::iter() {
        let mut reward = Balance::zero();
        
        // æŠ•ç¥¨å¥–åŠ±
        reward = reward.saturating_add(
            stats.votes_cast as u128 * GovernanceRewardPerVote::get()
        );
        
        // ææ¡ˆå¥–åŠ±
        reward = reward.saturating_add(
            stats.proposals_submitted as u128 * GovernanceRewardPerProposal::get()
        );
        
        // æ´»è·ƒå¥–åŠ±ï¼ˆæŠ•ç¥¨ç‡>80%ï¼‰
        if stats.votes_cast > 0 && (stats.votes_cast as f32 / total_proposals as f32) > 0.8 {
            reward = reward.saturating_add(MonthlyActiveBonus::get());
        }
        
        // å‘æ”¾å¥–åŠ±
        if reward > Balance::zero() {
            let _ = <Balances as Currency<_>>::deposit_creating(&validator, reward);
        }
    }
}
```

**é¢„æœŸæ”¶å…¥**ï¼ˆå‡è®¾éªŒè¯äººæœˆå‡æŠ•ç¥¨20æ¬¡ï¼Œæäº¤1ä¸ªææ¡ˆï¼‰ï¼š
```
æŠ•ç¥¨å¥–åŠ±ï¼š20 Ã— 0.001 = 0.02 DUST/æœˆ
ææ¡ˆå¥–åŠ±ï¼š1 Ã— 0.01 = 0.01 DUST/æœˆ
æ´»è·ƒå¥–åŠ±ï¼š0.1 DUST/æœˆï¼ˆæŠ•ç¥¨ç‡>80%ï¼‰
æœˆæ”¶å…¥ï¼š0.13 DUST/æœˆ
å¹´æ”¶å…¥ï¼š1.56 DUST/å¹´
```

---

## å››ã€StardustéªŒè¯äººæ”¶å…¥æ€»è§ˆ

### 4.1 å•ä¸ªéªŒè¯äººå¹´åº¦æ”¶å…¥é¢„æµ‹ï¼ˆä¿å®ˆä¼°è®¡ï¼‰

| æ”¶å…¥æ¥æº | å¹´æ”¶å…¥ï¼ˆDUSTï¼‰ | å æ¯” | è®¡ç®—åŸºç¡€ |
|---------|---------------|------|----------|
| **1. åŒºå—å¥–åŠ±ï¼ˆé€šèƒ€ï¼‰** | 5,000,000 | 96.5% | è‡ªè´¨æŠ¼500ä¸‡ï¼Œ100%å¹´åŒ– |
| **2. äº¤æ˜“æ‰‹ç»­è´¹** | 128 | 0.002% | æ—¥å‡10,000ç¬”Ã—0.001 |
| **3. æåäººä½£é‡‘** | 150,000 | 2.9% | æå1000ä¸‡ï¼Œä½£é‡‘10% |
| **4. ä¾›å¥‰æ”¶å…¥åˆ†æˆ** | 5,400 | 0.1% | æ—¥å‡1000ç¬”Ã—10 |
| **5. OTCæ”¶å…¥åˆ†æˆ** | 3,650 | 0.07% | æ—¥å‡100ç¬”Ã—1000 |
| **6. æ¡¥æ¥æ”¶å…¥åˆ†æˆ** | 456 | 0.009% | æ—¥å‡50ç¬”Ã—5000 |
| **7. å­˜å‚¨è´¹ç”¨åˆ†æˆ** | 128 | 0.002% | å­˜å‚¨è´¹çš„0.7% |
| **8. æ²»ç†å‚ä¸å¥–åŠ±** | 1.56 | 0.0003% | æœˆå‡20ç¥¨+1ææ¡ˆ |
| **æ€»è®¡** | **5,159,763.56** | **100%** | çº¦516ä¸‡MEMO/å¹´ |

**å…³é”®æ´å¯Ÿ**ï¼š
- âœ… **åŒºå—å¥–åŠ±æ˜¯ç»å¯¹ä¸»åŠ›**ï¼ˆ96.5%ï¼‰
- âœ… **æåäººä½£é‡‘æ˜¯ç¬¬äºŒå¤§æ”¶å…¥**ï¼ˆ2.9%ï¼‰
- âœ… **ä¸šåŠ¡æ”¶å…¥åˆè®¡0.18%**ï¼ˆä¾›å¥‰+OTC+æ¡¥æ¥ï¼‰

**å¹´åŒ–æ”¶ç›Šç‡**ï¼š
```
è‡ªè´¨æŠ¼ï¼š500ä¸‡ DUST
å¹´æ”¶å…¥ï¼š516ä¸‡ DUST
å¹´åŒ–æ”¶ç›Šç‡ï¼š103.2% âœ…
```

---

### 4.2 éªŒè¯äººæˆæœ¬åˆ†æ

| æˆæœ¬é¡¹ | å¹´æˆæœ¬ï¼ˆUSDï¼‰ | è¯´æ˜ |
|--------|--------------|------|
| **æœåŠ¡å™¨ç§Ÿé‡‘** | $1,200 | äº‘æœåŠ¡å™¨ï¼ˆ4æ ¸8Gï¼Œ$100/æœˆï¼‰ |
| **å¸¦å®½è´¹ç”¨** | $600 | 10TB/æœˆæµé‡ |
| **ç›‘æ§å‘Šè­¦** | $120 | ç›‘æ§æœåŠ¡ |
| **äººåŠ›è¿ç»´** | $3,000 | å…¼èŒè¿ç»´ï¼ˆ$250/æœˆï¼‰ |
| **å¤‡ç”¨æœåŠ¡å™¨** | $600 | ç¾å¤‡æœåŠ¡å™¨ï¼ˆ$50/æœˆï¼‰ |
| **æ€»è®¡** | **$5,520** | çº¦4ä¸‡äººæ°‘å¸/å¹´ |

**ç›ˆåˆ©åˆ†æ**ï¼ˆå‡è®¾MEMOä»·æ ¼$0.01ï¼‰ï¼š
```
å¹´æ”¶å…¥ï¼š516ä¸‡ DUST Ã— $0.01 = $51,600
å¹´æˆæœ¬ï¼š$5,520
å¹´å‡€åˆ©æ¶¦ï¼š$46,080
æŠ•èµ„å›æŠ¥ç‡ï¼š835% âœ…
```

---

### 4.3 æåäººæ”¶å…¥é¢„æµ‹

| ç»´åº¦ | æ•°å€¼ | è¯´æ˜ |
|-----|------|------|
| **è´¨æŠ¼é‡** | 10,000 DUST | æåäººè´¨æŠ¼ |
| **å¹´å¥–åŠ±ç‡** | 15% | å‚è€ƒPolkadot |
| **å¹´åº¦å¥–åŠ±** | 1,500 DUST | 10,000 Ã— 15% |
| **éªŒè¯äººä½£é‡‘** | 150 DUST | 1,500 Ã— 10% |
| **å‡€æ”¶å…¥** | 1,350 DUST | 1,500 - 150 |
| **å¹´åŒ–æ”¶ç›Šç‡** | **13.5%** | å‡€æ”¶ç›Š/è´¨æŠ¼é‡ |

**ä¸å…¶ä»–DeFiæ”¶ç›Šå¯¹æ¯”**ï¼š
- é“¶è¡Œå®šæœŸå­˜æ¬¾ï¼š~3%
- ç¨³å®šå¸è´¨æŠ¼ï¼ˆUSDC/USDTï¼‰ï¼š~5-8%
- **Stardustæå**ï¼š~13.5% âœ…
- é«˜é£é™©DeFiæŒ–çŸ¿ï¼š~20-50%ï¼ˆé«˜é£é™©ï¼‰

---

## äº”ã€å®æ–½æ–¹æ¡ˆï¼šä»PoAåˆ°NPoSçš„æ¸è¿›å¼è¿ç§»

### 5.1 Phase 1ï¼šå¼•å…¥Stakingæœºåˆ¶ï¼ˆ2-3ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šåœ¨ä¿æŒAuraå…±è¯†çš„åŒæ—¶ï¼Œå¼•å…¥è´¨æŠ¼åŠŸèƒ½

**ä»»åŠ¡**ï¼š
1. âœ… é›†æˆ `pallet-staking`
2. âœ… é…ç½®è´¨æŠ¼å‚æ•°ï¼ˆæœ€å°è´¨æŠ¼é‡ã€è§£ç»‘æœŸç­‰ï¼‰
3. âœ… å®ç°è´¨æŠ¼å¥–åŠ±è®¡ç®—
4. âœ… å‰ç«¯è´¨æŠ¼ç•Œé¢

**é…ç½®**ï¼š
```rust
// Cargo.toml
pallet-staking = { version = "4.0.0-dev", default-features = false }
pallet-session = { version = "4.0.0-dev", default-features = false }

// runtime/src/lib.rs
parameter_types! {
    pub const SessionsPerEra: u32 = 6;                    // æ¯Era 6ä¸ªSession
    pub const BondingDuration: u32 = 28;                  // è§£ç»‘æœŸ28å¤©
    pub const SlashDeferDuration: u32 = 27;               // Slashå»¶è¿Ÿ27å¤©
    pub const MaxNominatorRewardedPerValidator: u32 = 256;// æ¯éªŒè¯äººæœ€å¤šå¥–åŠ±256æåäºº
    pub const MaxNominations: u32 = 16;                   // æ¯æåäººæœ€å¤šæå16ä¸ªéªŒè¯äºº
}

impl pallet_staking::Config for Runtime {
    type RuntimeEvent = RuntimeEvent;
    type Currency = Balances;
    type CurrencyBalance = Balance;
    type UnixTime = Timestamp;
    type CurrencyToVote = sp_staking::currency_to_vote::U128CurrencyToVote;
    type RewardRemainder = Treasury;
    type Slash = Treasury;
    type Reward = ();
    type SessionsPerEra = SessionsPerEra;
    type BondingDuration = BondingDuration;
    type SlashDeferDuration = SlashDeferDuration;
    type AdminOrigin = frame_system::EnsureRoot<AccountId>;
    type SessionInterface = Self;
    type EraPayout = pallet_staking::ConvertCurve<RewardCurve>;
    type NextNewSession = Session;
    type MaxExposurePageSize = ConstU32<256>;
    type ElectionProvider = pallet_election_provider_multi_phase::Pallet<Runtime>;
    type GenesisElectionProvider = onchain::OnChainExecution<OnChainSeqPhragmen>;
    type VoterList = pallet_staking::UseNominatorsAndValidatorsMap<Runtime>;
    type TargetList = pallet_staking::UseValidatorsMap<Runtime>;
    type MaxUnlockingChunks = ConstU32<32>;
    type HistoryDepth = ConstU32<84>;
    type EventListeners = ();
    type BenchmarkingConfig = pallet_staking::TestBenchmarkingConfig;
    type WeightInfo = pallet_staking::weights::SubstrateWeight<Runtime>;
    type NominationsQuota = pallet_staking::FixedNominationsQuota<16>;
}
```

**éªŒè¯**ï¼š
- ç”¨æˆ·å¯è´¨æŠ¼MEMO
- æŸ¥è¯¢è´¨æŠ¼çŠ¶æ€
- è§£ç»‘è´¨æŠ¼ï¼ˆ28å¤©åå¯æå–ï¼‰

---

### 5.2 Phase 2ï¼šå¯ç”¨å¤šéªŒè¯äººï¼ˆ1-2ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šä»å•éªŒè¯äººæ‰©å±•åˆ°å¤šéªŒè¯äºº

**ä»»åŠ¡**ï¼š
1. âœ… ä¿®æ”¹Auraé…ç½®ï¼Œå…è®¸å¤šéªŒè¯äºº
2. âœ… å®ç°éªŒè¯äººé€‰ä¸¾ï¼ˆæŒ‰è´¨æŠ¼é‡ï¼‰
3. âœ… é…ç½®éªŒè¯äººå¥–åŠ±åˆ†é…
4. âœ… ç›‘æ§å¤šéªŒè¯äººå‡ºå—

**é…ç½®**ï¼š
```rust
parameter_types! {
    pub const MaxValidators: u32 = 20;  // æœ€å¤š20ä¸ªéªŒè¯äºº
    pub const MinValidatorBond: Balance = 5_000_000_000_000_000_000; // æœ€ä½è´¨æŠ¼500ä¸‡MEMO
}

impl pallet_aura::Config for Runtime {
    // ... å…¶ä»–é…ç½® ...
    type MaxAuthorities = MaxValidators; // å…è®¸20ä¸ªéªŒè¯äºº
}

// éªŒè¯äººé€‰ä¸¾ï¼ˆæŒ‰è´¨æŠ¼é‡æ’åºï¼Œå–å‰20åï¼‰
pub fn elect_validators() -> Vec<AccountId> {
    let mut candidates: Vec<_> = Validators::<T>::iter()
        .map(|(account, stake)| (account, stake))
        .collect();
    
    // æŒ‰è´¨æŠ¼é‡é™åºæ’åº
    candidates.sort_by(|a, b| b.1.cmp(&a.1));
    
    // å–å‰20å
    candidates.into_iter()
        .take(MaxValidators::get() as usize)
        .map(|(account, _)| account)
        .collect()
}
```

**éªŒè¯**ï¼š
- 20ä¸ªéªŒè¯äººè½®æµå‡ºå—
- æ¯ä¸ªéªŒè¯äººè·å¾—ç›¸åº”å¥–åŠ±
- ç›‘æ§å‡ºå—åˆ†å¸ƒ

---

### 5.3 Phase 3ï¼šå®Œæ•´NPoSï¼ˆ2-3ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šå®ç°å®Œæ•´çš„æåæœºåˆ¶

**ä»»åŠ¡**ï¼š
1. âœ… å¯ç”¨æååŠŸèƒ½
2. âœ… å®ç°ä½£é‡‘æœºåˆ¶
3. âœ… ä¼˜åŒ–é€‰ä¸¾ç®—æ³•ï¼ˆPhragmÃ©nï¼‰
4. âœ… å‰ç«¯æåç•Œé¢

**é…ç½®**ï¼š
```rust
impl pallet_staking::Config for Runtime {
    // ... å·²æœ‰é…ç½® ...
    
    // ä½¿ç”¨å¤šé˜¶æ®µé€‰ä¸¾ï¼ˆæ›´å…¬å¹³ï¼‰
    type ElectionProvider = pallet_election_provider_multi_phase::Pallet<Runtime>;
    
    // æåé…ç½®
    type MaxNominatorRewardedPerValidator = ConstU32<256>;
    type MaxNominations = ConstU32<16>;
}

// æåäººæœ€å°è´¨æŠ¼
parameter_types! {
    pub const MinNominatorBond: Balance = 100_000_000_000_000_000; // æœ€ä½è´¨æŠ¼10ä¸‡MEMO
}
```

**éªŒè¯**ï¼š
- æåäººå¯æåæœ€å¤š16ä¸ªéªŒè¯äºº
- éªŒè¯äººæŒ‰è´¨æŠ¼é‡+æåé‡é€‰ä¸¾
- å¥–åŠ±æŒ‰è´¨æŠ¼æ¯”ä¾‹åˆ†é…
- éªŒè¯äººä½£é‡‘æ­£ç¡®æ‰£é™¤

---

### 5.4 Phase 4ï¼šæ²»ç†é›†æˆï¼ˆ1-2ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šéªŒè¯äººå‚ä¸é“¾ä¸Šæ²»ç†

**ä»»åŠ¡**ï¼š
1. âœ… éªŒè¯äººæŠ•ç¥¨ç•Œé¢
2. âœ… æ²»ç†å‚ä¸å¥–åŠ±
3. âœ… éªŒè¯äººå£°èª‰ç³»ç»Ÿ
4. âœ… è‡ªåŠ¨åŒ–å¥–åŠ±å‘æ”¾

**å®ç°**ï¼š
```rust
// æ²»ç†å‚ä¸è¿½è¸ª
#[pallet::call_index(10)]
pub fn record_validator_vote(
    origin: OriginFor<T>,
    proposal_id: u64,
    vote: bool,
) -> DispatchResult {
    let validator = ensure_signed(origin)?;
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºéªŒè¯äºº
    ensure!(Validators::<T>::contains_key(&validator), Error::<T>::NotValidator);
    
    // è®°å½•æŠ•ç¥¨
    ValidatorGovernanceStats::<T>::try_mutate(&validator, |stats| -> DispatchResult {
        stats.votes_cast = stats.votes_cast.saturating_add(1);
        stats.last_active_era = <pallet_staking::Pallet<T>>::current_era().unwrap_or(0);
        Ok(())
    })?;
    
    // å‘æ”¾å³æ—¶å¥–åŠ±
    let reward = GovernanceRewardPerVote::get();
    <Balances as Currency<_>>::deposit_creating(&validator, reward);
    
    Self::deposit_event(Event::ValidatorVoted(validator, proposal_id, vote, reward));
    Ok(())
}
```

---

## å…­ã€éªŒè¯äººè¿è¥æŒ‡å—

### 6.1 éªŒè¯äººç¡¬ä»¶è¦æ±‚

| ç»„ä»¶ | æœ€ä½é…ç½® | æ¨èé…ç½® | è¯´æ˜ |
|-----|---------|---------|------|
| **CPU** | 4æ ¸ | 8æ ¸+ | Intel/AMD x86-64 |
| **å†…å­˜** | 8GB | 16GB+ | DDR4 |
| **å­˜å‚¨** | 200GB SSD | 500GB NVMe SSD | é«˜IOPS |
| **å¸¦å®½** | 100Mbps | 1Gbps | ä¸Šä¸‹è¡Œå¯¹ç­‰ |
| **ç³»ç»Ÿ** | Ubuntu 20.04+ | Ubuntu 22.04 LTS | Linux |

**äº‘æœåŠ¡å™¨æ¨è**ï¼š
- AWS: c5.2xlarge (~$306/æœˆ)
- Azure: Standard_F8s_v2 (~$300/æœˆ)
- é˜¿é‡Œäº‘: ecs.c6.2xlarge (~Â¥1,500/æœˆ)

---

### 6.2 éªŒè¯äººéƒ¨ç½²æ­¥éª¤

```bash
# 1. å®‰è£…ä¾èµ–
sudo apt update
sudo apt install -y build-essential git clang curl libssl-dev llvm libudev-dev

# 2. å®‰è£…Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# 3. å…‹éš†ä»£ç 
git clone https://github.com/stardust/stardust.git
cd stardust

# 4. ç¼–è¯‘èŠ‚ç‚¹
cargo build --release

# 5. ç”ŸæˆéªŒè¯äººå¯†é’¥
./target/release/stardust-node key generate --scheme Sr25519
# è¾“å‡ºï¼šSecret phrase: <åŠ©è®°è¯>
#       Secret seed:   <ç§é’¥>
#       Public key:    <å…¬é’¥>
#       Account ID:    <è´¦æˆ·ID>

# 6. æ’å…¥å¯†é’¥åˆ°èŠ‚ç‚¹
./target/release/stardust-node key insert --base-path /data/stardust \
  --chain mainnet \
  --scheme Sr25519 \
  --key-type aura \
  --suri "<åŠ©è®°è¯>"

# 7. å¯åŠ¨éªŒè¯äººèŠ‚ç‚¹
./target/release/stardust-node \
  --base-path /data/stardust \
  --chain mainnet \
  --validator \
  --name "MyValidator" \
  --rpc-cors all \
  --rpc-methods=Unsafe \
  --rpc-external \
  --ws-external \
  --prometheus-external \
  --port 30333 \
  --rpc-port 9933 \
  --ws-port 9944
```

---

### 6.3 éªŒè¯äººè´¨æŠ¼ä¸æ³¨å†Œ

```bash
# 1. è´¨æŠ¼MEMOï¼ˆé€šè¿‡å‰ç«¯æˆ–CLIï¼‰
curl -X POST https://api.stardust.io/staking/bond \
  -H "Content-Type: application/json" \
  -d '{
    "controller": "<æ§åˆ¶è´¦æˆ·>",
    "value": "5000000000000000000000000",
    "payee": "Staked"
  }'

# 2. æ³¨å†Œä¸ºéªŒè¯äºº
curl -X POST https://api.stardust.io/staking/validate \
  -H "Content-Type: application/json" \
  -d '{
    "prefs": {
      "commission": 100000000,
      "blocked": false
    }
  }'

# 3. éªŒè¯çŠ¶æ€
curl https://api.stardust.io/staking/validators/<account_id>
```

---

### 6.4 éªŒè¯äººç›‘æ§ä¸å‘Šè­¦

```yaml
# Prometheusç›‘æ§é…ç½®
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'stardust-validator'
    static_configs:
      - targets: ['localhost:9615']

# å‘Šè­¦è§„åˆ™
groups:
  - name: validator_alerts
    rules:
      - alert: ValidatorOffline
        expr: substrate_sub_txpool_validations_invalid > 10
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Validator {{ $labels.instance }} is offline"
      
      - alert: HighLatency
        expr: substrate_proposer_block_construction_time > 5
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Block construction time too high"
```

---

## ä¸ƒã€é£é™©ä¸æŒ‘æˆ˜

### 7.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|-----|------|---------|
| **å…±è¯†åˆ‡æ¢å¤±è´¥** | âš ï¸ é“¾åœæ­¢ | å……åˆ†æµ‹è¯•ï¼Œç°åº¦è¿ç§» |
| **éªŒè¯äººä½œæ¶** | âš ï¸ ç½‘ç»œåˆ†å‰ | Slashæœºåˆ¶ï¼Œç»æµæƒ©ç½š |
| **é€‰ä¸¾ç®—æ³•æ¼æ´** | âš ï¸ ä¸­å¿ƒåŒ– | ä»£ç å®¡è®¡ï¼Œå¤šè½®æµ‹è¯• |
| **å¥–åŠ±è®¡ç®—é”™è¯¯** | âš ï¸ é€šèƒ€å¤±æ§ | å½¢å¼åŒ–éªŒè¯ï¼Œç›‘æ§å‘Šè­¦ |

**åº”å¯¹æ–¹æ¡ˆ**ï¼š
- âœ… åœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•ï¼ˆè‡³å°‘3ä¸ªæœˆï¼‰
- âœ… åˆ†é˜¶æ®µè¿ç§»ï¼ˆPhase 1-4ï¼‰
- âœ… ç¤¾åŒºå®¡è®¡ä¸åé¦ˆ
- âœ… ç´§æ€¥æš‚åœæœºåˆ¶

---

### 7.2 ç»æµé£é™©

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|-----|------|---------|
| **é€šèƒ€è¿‡é«˜** | âš ï¸ MEMOè´¬å€¼ | åŠ¨æ€è°ƒæ•´é€šèƒ€ç‡ |
| **éªŒè¯äººä¸­å¿ƒåŒ–** | âš ï¸ å¤§æˆ·å„æ–­ | æœ€ä½è´¨æŠ¼é‡+ä½£é‡‘ä¸Šé™ |
| **æåäººæµå¤±** | âš ï¸ è´¨æŠ¼ç‡ä½ | æé«˜å¥–åŠ±ç‡ï¼Œä¼˜åŒ–UX |
| **éªŒè¯äººæˆæœ¬é«˜** | âš ï¸ èŠ‚ç‚¹é€€å‡º | ä¼˜åŒ–æ‰‹ç»­è´¹åˆ†æˆ |

**åº”å¯¹æ–¹æ¡ˆ**ï¼š
- âœ… ç›®æ ‡è´¨æŠ¼ç‡50%ï¼ˆåŠ¨æ€è°ƒæ•´ï¼‰
- âœ… æœ€é«˜ä½£é‡‘20%ï¼ˆé˜²æ­¢å„æ–­ï¼‰
- âœ… éªŒè¯äººæ•°é‡20ä¸ªï¼ˆå¹³è¡¡å»ä¸­å¿ƒåŒ–ä¸æ•ˆç‡ï¼‰
- âœ… ç›‘æ§é“¾ä¸Šç»æµæŒ‡æ ‡

---

### 7.3 è¿è¥é£é™©

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|-----|------|---------|
| **éªŒè¯äººè¿ç»´ä¸å½“** | âš ï¸ é¢‘ç¹ç¦»çº¿ | æä¾›è¿ç»´æ–‡æ¡£+ç›‘æ§å·¥å…· |
| **ç¤¾åŒºä¸æ¥å—** | âš ï¸ è´¨æŠ¼ç‡ä½ | å……åˆ†å®£ä¼ +æ•™è‚² |
| **ç«äº‰å‹åŠ›** | âš ï¸ æ”¶ç›Šç‡ä½ | å¯¹æ ‡Polkadotæ”¶ç›Šç‡ |

---

## å…«ã€æ€»ç»“ä¸å»ºè®®

### 8.1 æ ¸å¿ƒä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| âœ… **é«˜æ”¶ç›Šç‡** | éªŒè¯äºº103%ï¼Œæåäºº13.5% |
| âœ… **å¤šå…ƒåŒ–æ”¶å…¥** | 6å¤§æ¥æºï¼ŒæŠ—é£é™© |
| âœ… **å€Ÿé‰´Polkadot** | æˆç†Ÿæ¨¡å¼ï¼Œå¯è½åœ° |
| âœ… **æ¸è¿›å¼è¿ç§»** | åˆ†é˜¶æ®µï¼Œä½é£é™© |
| âœ… **ä¸šåŠ¡ç»“åˆ** | ä¾›å¥‰/OTC/æ¡¥æ¥æ”¶å…¥åˆ†æˆ |

---

### 8.2 å®æ–½å»ºè®®

**ä¼˜å…ˆçº§æ’åº**ï¼š
1. **ç¬¬1ä¼˜å…ˆ**ï¼šPhase 1-2ï¼ˆStaking + å¤šéªŒè¯äººï¼‰
   - æ—¶é—´ï¼š3-5ä¸ªæœˆ
   - éš¾åº¦ï¼šâ­â­â­â­
   - æ”¶ç›Šï¼šå»ºç«‹å»ä¸­å¿ƒåŒ–åŸºç¡€

2. **ç¬¬2ä¼˜å…ˆ**ï¼šPhase 3ï¼ˆNPoSæåï¼‰
   - æ—¶é—´ï¼š2-3ä¸ªæœˆ
   - éš¾åº¦ï¼šâ­â­â­â­â­
   - æ”¶ç›Šï¼šç¤¾åŒºæ·±åº¦å‚ä¸

3. **ç¬¬3ä¼˜å…ˆ**ï¼šPhase 4ï¼ˆæ²»ç†é›†æˆï¼‰
   - æ—¶é—´ï¼š1-2ä¸ªæœˆ
   - éš¾åº¦ï¼šâ­â­â­
   - æ”¶ç›Šï¼šå®Œå–„ç”Ÿæ€é—­ç¯

**æ€»æ—¶é—´**ï¼š6-10ä¸ªæœˆ

---

### 8.3 é¢„æœŸæ•ˆæœï¼ˆ12ä¸ªæœˆï¼‰

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ï¼ˆ12ä¸ªæœˆï¼‰ |
|-----|------|---------------|
| **éªŒè¯äººæ•°é‡** | 1ä¸ª | 20ä¸ª |
| **æ€»è´¨æŠ¼é‡** | 0 DUST | 2äº¿ DUSTï¼ˆ20%æ€»ä¾›åº”ï¼‰ |
| **è´¨æŠ¼ç‡** | 0% | 50% |
| **éªŒè¯äººå¹´æ”¶ç›Šç‡** | 0% | 103% |
| **æåäººå¹´æ”¶ç›Šç‡** | 0% | 13.5% |
| **å»ä¸­å¿ƒåŒ–ç¨‹åº¦** | ä½ | é«˜ |

---

### 8.4 å…³é”®é‡Œç¨‹ç¢‘

```
Month 0-3: Phase 1 - Stakingæœºåˆ¶
  â”œâ”€ M1: pallet-stakingé›†æˆå®Œæˆ
  â”œâ”€ M2: æµ‹è¯•ç½‘è´¨æŠ¼åŠŸèƒ½ä¸Šçº¿
  â””â”€ M3: ä¸»ç½‘è´¨æŠ¼åŠŸèƒ½ä¸Šçº¿

Month 3-5: Phase 2 - å¤šéªŒè¯äºº
  â”œâ”€ M4: 10ä¸ªéªŒè¯äººä¸Šçº¿
  â”œâ”€ M5: 20ä¸ªéªŒè¯äººç¨³å®šè¿è¡Œ
  â””â”€ M6: éªŒè¯äººç›‘æ§ç³»ç»Ÿä¸Šçº¿

Month 5-8: Phase 3 - NPoSæå
  â”œâ”€ M7: æååŠŸèƒ½æµ‹è¯•ç½‘ä¸Šçº¿
  â”œâ”€ M8: ä¸»ç½‘æååŠŸèƒ½ä¸Šçº¿
  â””â”€ M9: è´¨æŠ¼ç‡è¾¾åˆ°30%

Month 8-10: Phase 4 - æ²»ç†é›†æˆ
  â”œâ”€ M10: éªŒè¯äººæ²»ç†ç•Œé¢ä¸Šçº¿
  â”œâ”€ M11: æ²»ç†å¥–åŠ±ç³»ç»Ÿä¸Šçº¿
  â””â”€ M12: è´¨æŠ¼ç‡è¾¾åˆ°50% âœ…
```

---

## ä¹ã€å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### Q1ï¼šä¸ºä»€ä¹ˆéªŒè¯äººæ”¶ç›Šç‡è¿™ä¹ˆé«˜ï¼ˆ103%ï¼‰ï¼Ÿ

**A**ï¼šä¸»è¦æ¥è‡ªåŒºå—å¥–åŠ±ï¼ˆé€šèƒ€ï¼‰ã€‚è¿™æ˜¯PoSé“¾åˆæœŸçš„æ­£å¸¸ç°è±¡ï¼š
- Polkadotæ—©æœŸï¼š~20-25%
- Kusamaæ—©æœŸï¼š~15-20%
- StarduståˆæœŸï¼š~100%ï¼ˆæ¿€åŠ±æ—©æœŸéªŒè¯äººï¼‰

éšç€è´¨æŠ¼ç‡æé«˜ï¼Œæ”¶ç›Šç‡ä¼šé€æ¸é™ä½åˆ°15-20%çš„åˆç†æ°´å¹³ã€‚

---

### Q2ï¼šæåäºº13.5%æ”¶ç›Šç‡å®‰å…¨å—ï¼Ÿ

**A**ï¼šç›¸å¯¹å®‰å…¨ï¼Œé£é™©æ¥è‡ªï¼š
- âš ï¸ éªŒè¯äººä½œæ¶ï¼ˆè¢«Slashï¼‰
- âš ï¸ MEMOä»·æ ¼æ³¢åŠ¨

å»ºè®®ï¼š
- âœ… æåå¤šä¸ªéªŒè¯äººï¼ˆæœ€å¤š16ä¸ªï¼‰
- âœ… é€‰æ‹©ä¿¡èª‰å¥½çš„éªŒè¯äºº
- âœ… å®šæœŸæ£€æŸ¥éªŒè¯äººè¡¨ç°

---

### Q3ï¼šå¦‚ä½•æˆä¸ºéªŒè¯äººï¼Ÿ

**A**ï¼šéœ€è¦æ»¡è¶³ï¼š
1. æœ€ä½è´¨æŠ¼ï¼š500ä¸‡ DUST
2. ç¡¬ä»¶è¦æ±‚ï¼š8æ ¸CPU+16GB RAM+500GB SSD
3. æŠ€æœ¯èƒ½åŠ›ï¼šLinuxè¿ç»´ç»éªŒ
4. èµ„é‡‘ï¼š$5,520/å¹´è¿è¥æˆæœ¬

è¯¦è§"å…­ã€éªŒè¯äººè¿è¥æŒ‡å—"ã€‚

---

### Q4ï¼šPoSè¿ç§»ä¼šå½±å“ç°æœ‰ä¸šåŠ¡å—ï¼Ÿ

**A**ï¼šä¸ä¼šã€‚è¿ç§»æ˜¯æ¸è¿›å¼çš„ï¼š
- Phase 1ï¼šåªå¼•å…¥è´¨æŠ¼ï¼Œä¸æ”¹å˜å…±è¯†
- Phase 2-3ï¼šé€æ­¥å¯ç”¨å¤šéªŒè¯äºº
- Phase 4ï¼šå®Œå…¨å»ä¸­å¿ƒåŒ–

æ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ï¼Œä¸å½±å“ä¾›å¥‰/OTC/æ¡¥æ¥ç­‰ä¸šåŠ¡ã€‚

---

### Q5ï¼šéªŒè¯äººå¦‚ä½•é€€å‡ºï¼Ÿ

**A**ï¼š
1. åœæ­¢éªŒè¯ï¼šè°ƒç”¨ `chill()` æ¥å£
2. è§£ç»‘è´¨æŠ¼ï¼šç­‰å¾…28å¤©è§£ç»‘æœŸ
3. æå–èµ„é‡‘ï¼šè§£ç»‘æœŸæ»¡åæå–

æ³¨æ„ï¼šè§£ç»‘æœŸå†…æ— æ”¶ç›Šï¼Œå»ºè®®è°¨æ…æ“ä½œã€‚

---

**æ–‡æ¡£å®Œæˆï¼** ğŸ‰

æœ¬æ–¹æ¡ˆå€Ÿé‰´Polkadotã€Moonbeamã€Astarç­‰æˆç†ŸPoSé¡¹ç›®ç»éªŒï¼Œç»“åˆStardustä¸šåŠ¡ç‰¹ç‚¹ï¼Œè®¾è®¡äº†å®Œæ•´çš„èŠ‚ç‚¹æ¿€åŠ±ä½“ç³»ã€‚

**æ ¸å¿ƒæ•°æ®**ï¼š
- éªŒè¯äººå¹´æ”¶ç›Šç‡ï¼š**103.2%** âœ…
- æåäººå¹´æ”¶ç›Šç‡ï¼š**13.5%** âœ…
- å®æ–½å‘¨æœŸï¼š**6-10ä¸ªæœˆ**
- é¢„æœŸè´¨æŠ¼ç‡ï¼š**50%**

éœ€è¦æˆ‘ç«‹å³å¼€å§‹å®æ–½Phase 1ï¼ˆStakingæœºåˆ¶é›†æˆï¼‰å—ï¼ŸğŸš€

