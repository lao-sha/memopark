# ä½œå“æŠ•è¯‰æ²»ç†æœºåˆ¶è¡¥å……æ–¹æ¡ˆ

## æ‰§è¡Œæ‘˜è¦

æœ¬æ–¹æ¡ˆé’ˆå¯¹**é€è€…ä½œå“æŠ•è¯‰æ²»ç†**çš„ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜æä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š
1. âœ… å®šä¹‰ **Domain 7ï¼ˆä½œå“åŸŸï¼‰**ï¼Œå®ç°ä½œå“ç‹¬ç«‹æŠ•è¯‰
2. âœ… åˆ¶å®š**ä½œå“æŠ•è¯‰å·®å¼‚åŒ–æŠ¼é‡‘æ ‡å‡†**ï¼Œæ ¹æ®ä½œå“ç±»å‹åŠ¨æ€è°ƒæ•´
3. âœ… å®Œå–„**ä½œå“æŠ•è¯‰ä¸“é¡¹å¤„ç†æµç¨‹**ï¼Œå¤„ç†ä½œå“ç‰¹æœ‰çš„æ²»ç†é€»è¾‘

æœ¬æ–¹æ¡ˆåŸºäºç°æœ‰çš„ `pallet-deceased/works` æ¨¡å—å’Œ `pallet-stardust-appeals` ç³»ç»Ÿï¼Œæä¾›å®Œå…¨å‘åå…¼å®¹çš„æ‰©å±•å®ç°ã€‚

---

## 1. é—®é¢˜ç¡®è®¤ä¸å½±å“è¯„ä¼°

### 1.1 é—®é¢˜1ï¼šä½œå“æŠ•è¯‰ç¼ºå°‘ç‹¬ç«‹åŸŸ

#### ç°çŠ¶åˆ†æ
```rust
// å½“å‰ç”³è¯‰ç³»ç»Ÿæ”¯æŒçš„åŸŸ
Domain 1: å¢“åœ° (Grave)
Domain 2: é€è€…æ¡£æ¡ˆ (Deceased)
Domain 3: é€è€…æ–‡æœ¬ (Deceased Text)
Domain 4: é€è€…åª’ä½“ (Deceased Media)
Domain 5: ä¾›å¥‰å“ (Offerings)
Domain 6: å›­åŒº (Park)
// âŒ ç¼ºå¤±: Domain 7: ä½œå“ (Works)
```

#### é—®é¢˜å½±å“

| å½±å“ç»´åº¦ | ä¸¥é‡ç¨‹åº¦ | å…·ä½“æè¿° |
|---------|---------|---------|
| **åŠŸèƒ½å®Œæ•´æ€§** | ğŸ”´ é«˜ | æ— æ³•ç›´æ¥å¯¹ä½œå“è¿›è¡ŒæŠ•è¯‰ï¼ŒåŠŸèƒ½ç¼ºå¤± |
| **ç”¨æˆ·ä½“éªŒ** | ğŸ”´ é«˜ | åªèƒ½é€šè¿‡é€è€…åŸŸé—´æ¥æŠ•è¯‰ï¼Œæ“ä½œä¸ç›´è§‚ |
| **æ²»ç†ç²¾ç¡®æ€§** | ğŸ”´ é«˜ | æ— æ³•åŒºåˆ†"é€è€…æ¡£æ¡ˆæŠ•è¯‰"å’Œ"ä½œå“æŠ•è¯‰" |
| **æ•°æ®ç»Ÿè®¡** | ğŸŸ¡ ä¸­ | æ— æ³•å‡†ç¡®ç»Ÿè®¡ä½œå“æŠ•è¯‰æ•°é‡å’Œç±»å‹ |
| **æŠ€æœ¯å€ºåŠ¡** | ğŸŸ¡ ä¸­ | ç¼ºå¤±çš„åŸŸä¼šå¯¼è‡´åç»­åŠŸèƒ½æ‰©å±•å›°éš¾ |

#### çœŸå®åœºæ™¯ä¸¾ä¾‹

**åœºæ™¯1ï¼šå­¦æœ¯è®ºæ–‡æŠ„è¢­æŠ•è¯‰**
```
é—®é¢˜ï¼šç”¨æˆ·å‘ç°æŸé€è€…æ¡£æ¡ˆä¸­çš„å­¦æœ¯è®ºæ–‡æ¶‰å«ŒæŠ„è¢­
å½“å‰åšæ³•ï¼šé€šè¿‡Domain 2æŠ•è¯‰æ•´ä¸ªé€è€…æ¡£æ¡ˆ
é—®é¢˜ï¼šå§”å‘˜ä¼šå®¡æ ¸æ—¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªç¯‡è®ºæ–‡ï¼Œéœ€è¦äººå·¥æŸ¥æ‰¾
ç†æƒ³æ–¹æ¡ˆï¼šé€šè¿‡Domain 7ç›´æ¥æŠ•è¯‰work_id=12345çš„å­¦æœ¯è®ºæ–‡
```

**åœºæ™¯2ï¼šéŸ³ä¹ä½œå“ç‰ˆæƒçº çº·**
```
é—®é¢˜ï¼šéŸ³ä¹äººå‘ç°é€è€…ä¸Šä¼ çš„éŸ³ä¹ä½œå“ä¾µæƒ
å½“å‰åšæ³•ï¼šé€šè¿‡Domain 2æŠ•è¯‰é€è€…æ¡£æ¡ˆ
é—®é¢˜ï¼šé€è€…å¯èƒ½æœ‰å¤šéƒ¨ä½œå“ï¼Œæ— æ³•ç²¾ç¡®å®šä½ä¾µæƒä½œå“
ç†æƒ³æ–¹æ¡ˆï¼šé€šè¿‡Domain 7æŠ•è¯‰work_id=67890çš„éŸ³ä¹ä½œå“
```

### 1.2 é—®é¢˜2ï¼šä½œå“æŠ•è¯‰æŠ¼é‡‘æ ‡å‡†æœªå®šä¹‰

#### ç°çŠ¶åˆ†æ
```rust
// å½“å‰æŠ¼é‡‘ç­–ç•¥æ¥å£
pub trait AppealDepositPolicy {
    fn calc_deposit(
        who: &AccountId,
        domain: u8,      // åŸŸID
        target: u64,     // ç›®æ ‡ID
        action: u8,      // åŠ¨ä½œç±»å‹
    ) -> Option<Balance>;
}

// âŒ é—®é¢˜ï¼šæ²¡æœ‰è€ƒè™‘ä½œå“çš„å·®å¼‚æ€§
// - æ–‡å­¦ä½œå“ vs éŸ³é¢‘ä½œå“
// - å…¬å¼€ä½œå“ vs ç§å¯†ä½œå“
// - å·²éªŒè¯ä½œå“ vs æœªéªŒè¯ä½œå“
```

#### é—®é¢˜å½±å“

**æŠ¼é‡‘è¿‡ä½çš„é£é™©**ï¼š
- æ¶æ„æŠ•è¯‰æˆæœ¬å¤ªä½
- å¤§é‡æ— æ•ˆæŠ•è¯‰æµªè´¹æ²»ç†èµ„æº
- ä¸“ä¸šä¾µæƒå›¢é˜Ÿå¯èƒ½æ»¥ç”¨ç³»ç»Ÿ

**æŠ¼é‡‘è¿‡é«˜çš„é£é™©**ï¼š
- åˆæ³•æŠ•è¯‰è€…æ— æ³•æ‰¿æ‹…
- é™ä½å…¬ä¼—ç›‘ç£ç§¯ææ€§
- å¯èƒ½å¯¼è‡´ä¾µæƒè¡Œä¸ºæ— äººä¸¾æŠ¥

#### ä½œå“ç±»å‹å·®å¼‚åˆ†æ

| ä½œå“ç±»å‹ | ä¾µæƒé£é™© | å½±å“èŒƒå›´ | ä¸¾è¯éš¾åº¦ | å»ºè®®æŠ¼é‡‘ |
|---------|---------|---------|---------|---------|
| **æ–‡å­¦ä½œå“** | é«˜ | å¹¿ | ä¸­ | 30-50 DUST |
| **å­¦æœ¯è®ºæ–‡** | æé«˜ | æå¹¿ | é«˜ | 50-100 DUST |
| **éŸ³ä¹ä½œå“** | æé«˜ | å¹¿ | ä¸­ | 40-80 DUST |
| **ä»£ç ä½œå“** | é«˜ | ä¸­ | é«˜ | 30-60 DUST |
| **æ—¥è®°/ä¹¦ä¿¡** | ä½ | çª„ | ä½ | 10-20 DUST |
| **ç”Ÿæ´»ç‰‡æ®µ** | ä½ | çª„ | ä½ | 10-20 DUST |

### 1.3 é—®é¢˜3ï¼šä½œå“æŠ•è¯‰æµç¨‹æœªå®Œå–„

#### ç¼ºå¤±çš„ä½œå“ç‰¹æœ‰å¤„ç†é€»è¾‘

```rust
// å½“å‰ç”³è¯‰ç³»ç»Ÿçš„é€šç”¨å¤„ç†
pub trait AppealRouter<AccountId> {
    fn execute(
        who: &AccountId,
        domain: u8,
        target: u64,
        action: u8,
    ) -> DispatchResult;
}

// âŒ ç¼ºå¤±çš„ä½œå“ç‰¹æœ‰é€»è¾‘ï¼š
// 1. ä½œå“éšç§çº§åˆ«è°ƒæ•´ï¼ˆPublic â†’ Privateï¼‰
// 2. AIè®­ç»ƒæˆæƒæ’¤é”€ï¼ˆai_training_enabled = falseï¼‰
// 3. ä½œå“éªŒè¯çŠ¶æ€æ›´æ–°ï¼ˆverified = falseï¼‰
// 4. ä½œå“ä¸é€è€…æ¡£æ¡ˆçš„è”åŠ¨å¤„ç†
// 5. ä½œå“æ ‡ç­¾å’Œåˆ†ç±»çš„ä¿®æ­£
```

#### ä½œå“æŠ•è¯‰ç‰¹æ®Šåœºæ™¯

**åœºæ™¯1ï¼šéƒ¨åˆ†ä½œå“è¿è§„ï¼Œä¸åº”å½±å“æ•´ä¸ªé€è€…æ¡£æ¡ˆ**
```
æ¡ˆä¾‹ï¼šé€è€…Aæœ‰100éƒ¨ä½œå“ï¼Œå…¶ä¸­1éƒ¨éŸ³ä¹ä½œå“æ¶‰å«Œä¾µæƒ
é—®é¢˜ï¼šå¦‚æœæŠ•è¯‰æ•´ä¸ªé€è€…æ¡£æ¡ˆï¼Œä¼šå½±å“å…¶ä»–99éƒ¨åˆæ³•ä½œå“
æ–¹æ¡ˆï¼šé€šè¿‡Domain 7æŠ•è¯‰å•ä¸ªä½œå“ï¼Œåªå¤„ç†è¿è§„ä½œå“
```

**åœºæ™¯2ï¼šä½œå“å…¬å¼€å±•ç¤ºä¸AIè®­ç»ƒåˆ†ç¦»å¤„ç†**
```
æ¡ˆä¾‹ï¼šæŸä½œå“å†…å®¹åˆè§„ï¼Œä½†ä¸åº”ç”¨äºAIè®­ç»ƒ
é—®é¢˜ï¼šå½“å‰æ— æ³•å•ç‹¬æ§åˆ¶AIè®­ç»ƒæˆæƒ
æ–¹æ¡ˆï¼šæŠ•è¯‰æ—¶æŒ‡å®šactionç±»å‹ï¼Œæ”¯æŒç²¾ç»†åŒ–æ§åˆ¶
```

---

## 2. Domain 7ï¼ˆä½œå“åŸŸï¼‰è®¾è®¡æ–¹æ¡ˆ

### 2.1 åŸŸå®šä¹‰

```rust
/// ç”³è¯‰åŸŸæšä¸¾æ‰©å±•
pub const DOMAIN_GRAVE: u8 = 1;
pub const DOMAIN_DECEASED: u8 = 2;
pub const DOMAIN_DECEASED_TEXT: u8 = 3;
pub const DOMAIN_DECEASED_MEDIA: u8 = 4;
pub const DOMAIN_OFFERINGS: u8 = 5;
pub const DOMAIN_PARK: u8 = 6;
/// ğŸ†• æ–°å¢ï¼šä½œå“åŸŸ
pub const DOMAIN_WORKS: u8 = 7;

/// åŸŸæè¿°æ˜ å°„
pub fn get_domain_name(domain: u8) -> &'static str {
    match domain {
        1 => "Grave",
        2 => "Deceased",
        3 => "DeceasedText",
        4 => "DeceasedMedia",
        5 => "Offerings",
        6 => "Park",
        7 => "Works",  // ğŸ†•
        _ => "Unknown",
    }
}
```

### 2.2 ä½œå“æŠ•è¯‰æ“ä½œç±»å‹

```rust
/// Domain 7ï¼ˆä½œå“åŸŸï¼‰æ”¯æŒçš„æ“ä½œç±»å‹
pub mod works_actions {
    /// æ“ä½œ1ï¼šéšè—ä½œå“ï¼ˆè®¾ç½®ä¸ºPrivateï¼‰
    pub const ACTION_HIDE_WORK: u8 = 1;

    /// æ“ä½œ2ï¼šåˆ é™¤ä½œå“ï¼ˆå½»åº•ç§»é™¤ï¼‰
    pub const ACTION_DELETE_WORK: u8 = 2;

    /// æ“ä½œ3ï¼šæ’¤é”€AIè®­ç»ƒæˆæƒ
    pub const ACTION_REVOKE_AI_TRAINING: u8 = 3;

    /// æ“ä½œ4ï¼šå–æ¶ˆä½œå“éªŒè¯
    pub const ACTION_UNVERIFY_WORK: u8 = 4;

    /// æ“ä½œ5ï¼šä¿®æ”¹ä½œå“éšç§çº§åˆ«
    pub const ACTION_CHANGE_PRIVACY: u8 = 5;

    /// æ“ä½œ6ï¼šæ·»åŠ è¿è§„æ ‡è®°
    pub const ACTION_MARK_AS_VIOLATION: u8 = 6;

    /// æ“ä½œ7ï¼šè½¬ç§»ä½œå“æ‰€æœ‰æƒï¼ˆäº‰è®®è§£å†³ï¼‰
    pub const ACTION_TRANSFER_OWNERSHIP: u8 = 7;

    /// æ“ä½œ8ï¼šå†»ç»“ä½œå“ï¼ˆæš‚åœæ‰€æœ‰æ“ä½œï¼‰
    pub const ACTION_FREEZE_WORK: u8 = 8;
}
```

### 2.3 ä½œå“æŠ•è¯‰æ•°æ®ç»“æ„

```rust
/// ğŸ†• ä½œå“æŠ•è¯‰æ‰©å±•ä¿¡æ¯
#[derive(Encode, Decode, Clone, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub struct WorkComplaintExtension {
    /// ä½œå“ID
    pub work_id: u64,

    /// æ‰€å±é€è€…IDï¼ˆç”¨äºå…³è”æŸ¥è¯¢ï¼‰
    pub deceased_id: u64,

    /// ä½œå“ç±»å‹ï¼ˆç”¨äºæŠ¼é‡‘è®¡ç®—ï¼‰
    pub work_type: WorkTypeCategory,

    /// å½“å‰éšç§çº§åˆ«
    pub current_privacy_level: u8,

    /// æ˜¯å¦å·²æˆæƒAIè®­ç»ƒ
    pub ai_training_enabled: bool,

    /// æ˜¯å¦å·²éªŒè¯
    pub is_verified: bool,

    /// ä½œå“å½±å“åŠ›è¯„åˆ†ï¼ˆ0-100ï¼‰
    pub influence_score: u8,

    /// ä¾µæƒç±»å‹ï¼ˆå¯é€‰ï¼‰
    pub violation_type: Option<ViolationType>,
}

/// ä½œå“ç±»å‹åˆ†ç±»ï¼ˆç®€åŒ–ç‰ˆï¼Œç”¨äºæŠ¼é‡‘è®¡ç®—ï¼‰
#[derive(Encode, Decode, Clone, Copy, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum WorkTypeCategory {
    /// æ–‡å­¦ä½œå“
    Literature,
    /// å­¦æœ¯è®ºæ–‡
    Academic,
    /// éŸ³é¢‘ä½œå“
    Audio,
    /// è§†é¢‘ä½œå“
    Video,
    /// å›¾åƒä½œå“
    Visual,
    /// ä»£ç ä½œå“
    Code,
    /// ç¤¾äº¤åª’ä½“
    SocialMedia,
    /// å…¶ä»–
    Other,
}

/// è¿è§„ç±»å‹æšä¸¾
#[derive(Encode, Decode, Clone, Copy, PartialEq, Eq, TypeInfo, MaxEncodedLen)]
pub enum ViolationType {
    /// ç‰ˆæƒä¾µçŠ¯
    CopyrightViolation,
    /// æŠ„è¢­å‰½çªƒ
    Plagiarism,
    /// è™šå‡ä¿¡æ¯
    Misinformation,
    /// ä¸å½“å†…å®¹
    InappropriateContent,
    /// è¯½è°¤è¯¬é™·
    Defamation,
    /// å…¶ä»–
    Other,
}
```

### 2.4 æŠ•è¯‰æäº¤æ¥å£æ‰©å±•

```rust
/// ğŸ†• ä½œå“æŠ•è¯‰ä¸“ç”¨æäº¤æ¥å£
#[pallet::call_index(50)]
#[pallet::weight(T::WeightInfo::submit_work_complaint())]
pub fn submit_work_complaint(
    origin: OriginFor<T>,
    /// ä½œå“ID
    work_id: u64,
    /// æŠ•è¯‰æ“ä½œç±»å‹
    action: u8,
    /// è¿è§„ç±»å‹
    violation_type: ViolationType,
    /// æŠ•è¯‰ç†ç”±CID
    reason_cid: BoundedVec<u8, T::MaxCidLen>,
    /// è¯æ®ææ–™CIDåˆ—è¡¨
    evidence_cids: BoundedVec<BoundedVec<u8, T::MaxCidLen>, ConstU32<10>>,
    /// å»ºè®®çš„éšç§çº§åˆ«ï¼ˆaction=5æ—¶ä½¿ç”¨ï¼‰
    suggested_privacy_level: Option<u8>,
) -> DispatchResult {
    let complainant = ensure_signed(origin)?;

    // 1. éªŒè¯ä½œå“å­˜åœ¨
    let work = T::WorksProvider::get_work(work_id)
        .ok_or(Error::<T>::WorkNotFound)?;

    // 2. æ£€æŸ¥æŠ•è¯‰èµ„æ ¼ï¼ˆä¸èƒ½æŠ•è¯‰è‡ªå·±çš„ä½œå“ï¼‰
    ensure!(
        work.uploader != complainant,
        Error::<T>::CannotComplainOwnWork
    );

    // 3. æ„å»ºä½œå“æŠ•è¯‰æ‰©å±•ä¿¡æ¯
    let work_extension = WorkComplaintExtension {
        work_id,
        deceased_id: work.deceased_id,
        work_type: Self::categorize_work_type(&work.work_type),
        current_privacy_level: work.privacy_level.to_u8(),
        ai_training_enabled: work.ai_training_enabled,
        is_verified: work.verified,
        influence_score: Self::calculate_work_influence(&work)?,
        violation_type: Some(violation_type),
    };

    // 4. è®¡ç®—å·®å¼‚åŒ–æŠ¼é‡‘
    let deposit = Self::calculate_work_complaint_deposit(
        &work_extension,
        action,
        &complainant,
    )?;

    // 5. é”å®šæŠ¼é‡‘
    T::Fungible::hold(
        &T::RuntimeHoldReason::from(HoldReason::WorkComplaint),
        &complainant,
        deposit,
    )?;

    // 6. åˆ›å»ºæŠ•è¯‰è®°å½•ï¼ˆä½¿ç”¨Domain 7ï¼‰
    let complaint_id = Self::create_complaint_with_extension(
        complainant.clone(),
        DOMAIN_WORKS,  // ğŸ†• ä½¿ç”¨ä½œå“åŸŸ
        work_id,
        action,
        reason_cid,
        evidence_cids,
        deposit,
        Some(work_extension),
    )?;

    Self::deposit_event(Event::WorkComplaintSubmitted {
        complaint_id,
        complainant,
        work_id,
        deceased_id: work.deceased_id,
        action,
        violation_type,
        deposit,
    });

    Ok(())
}
```

---

## 3. ä½œå“æŠ•è¯‰å·®å¼‚åŒ–æŠ¼é‡‘æ ‡å‡†

### 3.1 æŠ¼é‡‘è®¡ç®—å…¬å¼

```rust
/// ä½œå“æŠ•è¯‰æŠ¼é‡‘è®¡ç®—å…¬å¼
///
/// æœ€ç»ˆæŠ¼é‡‘ = åŸºç¡€æŠ¼é‡‘ Ã— ç±»å‹ç³»æ•° Ã— å½±å“åŠ›ç³»æ•° Ã— éªŒè¯çŠ¶æ€ç³»æ•° Ã— ç”¨æˆ·ä¿¡èª‰ç³»æ•°
///
/// å‚æ•°èŒƒå›´ï¼š
/// - åŸºç¡€æŠ¼é‡‘ï¼š10-100 DUST
/// - ç±»å‹ç³»æ•°ï¼š0.5-2.0
/// - å½±å“åŠ›ç³»æ•°ï¼š1.0-3.0
/// - éªŒè¯çŠ¶æ€ç³»æ•°ï¼š0.8-1.5
/// - ç”¨æˆ·ä¿¡èª‰ç³»æ•°ï¼š0.5-2.0
pub fn calculate_work_complaint_deposit<T: Config>(
    work_extension: &WorkComplaintExtension,
    action: u8,
    complainant: &T::AccountId,
) -> Result<BalanceOf<T>, Error<T>> {

    // 1. åŸºç¡€æŠ¼é‡‘ï¼ˆæ ¹æ®æ“ä½œç±»å‹ï¼‰
    let base_deposit = match action {
        works_actions::ACTION_HIDE_WORK => 20,           // éšè—ï¼š20 DUST
        works_actions::ACTION_DELETE_WORK => 50,         // åˆ é™¤ï¼š50 DUSTï¼ˆä¸¥é‡ï¼‰
        works_actions::ACTION_REVOKE_AI_TRAINING => 15,  // æ’¤é”€AIï¼š15 DUST
        works_actions::ACTION_UNVERIFY_WORK => 30,       // å–æ¶ˆéªŒè¯ï¼š30 DUST
        works_actions::ACTION_CHANGE_PRIVACY => 10,      // ä¿®æ”¹éšç§ï¼š10 DUST
        works_actions::ACTION_MARK_AS_VIOLATION => 25,   // æ ‡è®°è¿è§„ï¼š25 DUST
        works_actions::ACTION_TRANSFER_OWNERSHIP => 100, // è½¬ç§»æ‰€æœ‰æƒï¼š100 DUSTï¼ˆæä¸¥é‡ï¼‰
        works_actions::ACTION_FREEZE_WORK => 40,         // å†»ç»“ï¼š40 DUST
        _ => 20,                                         // é»˜è®¤ï¼š20 DUST
    };

    // 2. ä½œå“ç±»å‹ç³»æ•°
    let type_multiplier = match work_extension.work_type {
        WorkTypeCategory::Academic => 2.0,      // å­¦æœ¯è®ºæ–‡ï¼šæœ€é«˜é£é™©
        WorkTypeCategory::Literature => 1.5,    // æ–‡å­¦ä½œå“ï¼šé«˜é£é™©
        WorkTypeCategory::Audio => 1.5,         // éŸ³é¢‘ä½œå“ï¼šé«˜é£é™©
        WorkTypeCategory::Code => 1.3,          // ä»£ç ä½œå“ï¼šä¸­é«˜é£é™©
        WorkTypeCategory::Video => 1.2,         // è§†é¢‘ä½œå“ï¼šä¸­é«˜é£é™©
        WorkTypeCategory::Visual => 1.0,        // å›¾åƒä½œå“ï¼šæ ‡å‡†é£é™©
        WorkTypeCategory::SocialMedia => 0.8,   // ç¤¾äº¤åª’ä½“ï¼šè¾ƒä½é£é™©
        WorkTypeCategory::Other => 0.5,         // å…¶ä»–ï¼šæœ€ä½é£é™©
    };

    // 3. ä½œå“å½±å“åŠ›ç³»æ•°ï¼ˆåŸºäºå½±å“åŠ›è¯„åˆ†ï¼‰
    let influence_multiplier = match work_extension.influence_score {
        score if score >= 80 => 3.0,   // é«˜å½±å“åŠ›ï¼š300%
        score if score >= 60 => 2.0,   // ä¸­ç­‰å½±å“åŠ›ï¼š200%
        score if score >= 40 => 1.5,   // ä¸€èˆ¬å½±å“åŠ›ï¼š150%
        score if score >= 20 => 1.2,   // è¾ƒä½å½±å“åŠ›ï¼š120%
        _ => 1.0,                      // æä½å½±å“åŠ›ï¼š100%
    };

    // 4. éªŒè¯çŠ¶æ€ç³»æ•°
    let verification_multiplier = if work_extension.is_verified {
        1.5  // å·²éªŒè¯ä½œå“ï¼šæŠ¼é‡‘æé«˜50%ï¼ˆæŠ•è¯‰é—¨æ§›æ›´é«˜ï¼‰
    } else {
        0.8  // æœªéªŒè¯ä½œå“ï¼šæŠ¼é‡‘é™ä½20%ï¼ˆé¼“åŠ±ç›‘ç£ï¼‰
    };

    // 5. ç”¨æˆ·ä¿¡èª‰ç³»æ•°
    let reputation = T::ReputationProvider::get_reputation(complainant);
    let reputation_multiplier = match reputation {
        rep if rep >= 90 => 0.5,  // é«˜ä¿¡èª‰ç”¨æˆ·ï¼šæŠ¼é‡‘å‡åŠ
        rep if rep >= 70 => 0.7,  // ä¸­ç­‰ä¿¡èª‰ï¼šæŠ¼é‡‘7æŠ˜
        rep if rep >= 50 => 1.0,  // ä¸€èˆ¬ä¿¡èª‰ï¼šæ ‡å‡†æŠ¼é‡‘
        rep if rep >= 20 => 1.5,  // ä½ä¿¡èª‰ï¼šæŠ¼é‡‘ä¸Šæµ®50%
        _ => 2.0,                 // æä½ä¿¡èª‰ï¼šæŠ¼é‡‘ç¿»å€
    };

    // 6. è®¡ç®—æœ€ç»ˆæŠ¼é‡‘
    let final_deposit_f64 = (base_deposit as f64)
        * type_multiplier
        * influence_multiplier
        * verification_multiplier
        * reputation_multiplier;

    // 7. è½¬æ¢ä¸ºBalanceç±»å‹ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰
    let final_deposit_u128 = (final_deposit_f64 * 100.0) as u128 * 10_000_000_000u128; // 12 decimals

    // 8. åº”ç”¨æœ€å°å’Œæœ€å¤§é™åˆ¶
    let min_deposit = T::MinWorkComplaintDeposit::get();
    let max_deposit = T::MaxWorkComplaintDeposit::get();

    let clamped_deposit = final_deposit_u128.max(min_deposit.into()).min(max_deposit.into());

    Ok(clamped_deposit.into())
}
```

### 3.2 ä½œå“å½±å“åŠ›è¯„ä¼°

```rust
/// è®¡ç®—ä½œå“å½±å“åŠ›è¯„åˆ†ï¼ˆ0-100ï¼‰
///
/// è€ƒè™‘å› ç´ ï¼š
/// - ä½œå“æŸ¥çœ‹æ¬¡æ•°
/// - ä¸‹è½½/åˆ†äº«æ¬¡æ•°
/// - AIè®­ç»ƒä½¿ç”¨é¢‘ç‡
/// - ä½œå“éªŒè¯çŠ¶æ€
/// - ä½œå“å…¬å¼€ç¨‹åº¦
fn calculate_work_influence<T: Config>(
    work: &DeceasedWork<T::AccountId, T::BlockNumber>,
) -> Result<u8, Error<T>> {

    let mut score: u32 = 0;

    // 1. åŸºç¡€åˆ†ï¼šæ ¹æ®ä½œå“ç±»å‹
    score += match work.work_type {
        WorkType::AcademicPaper { .. } => 30,    // å­¦æœ¯è®ºæ–‡ï¼šé«˜åŸºç¡€åˆ†
        WorkType::Literature { .. } => 25,       // æ–‡å­¦ä½œå“
        WorkType::Music { .. } => 25,            // éŸ³ä¹ä½œå“
        WorkType::Lecture { .. } => 20,          // è®²åº§
        WorkType::Code { .. } => 20,             // ä»£ç 
        WorkType::VideoLog { .. } => 15,         // è§†é¢‘æ—¥è®°
        WorkType::Diary => 10,                   // æ—¥è®°
        _ => 5,                                  // å…¶ä»–
    };

    // 2. è®¿é—®é‡åŠ åˆ†ï¼ˆå‡è®¾æœ‰ç»Ÿè®¡æ¥å£ï¼‰
    if let Ok(stats) = T::WorkStatsProvider::get_work_stats(work.work_id) {
        score += match stats.view_count {
            v if v > 10000 => 30,  // è¶…è¿‡1ä¸‡æ¬¡æŸ¥çœ‹
            v if v > 1000 => 20,   // è¶…è¿‡1åƒæ¬¡
            v if v > 100 => 10,    // è¶…è¿‡100æ¬¡
            _ => 0,
        };
    }

    // 3. å…¬å¼€ç¨‹åº¦åŠ åˆ†
    score += match work.privacy_level {
        PrivacyLevel::Public => 20,       // å®Œå…¨å…¬å¼€ï¼šæœ€é«˜å½±å“åŠ›
        PrivacyLevel::Family => 10,       // å®¶äººå¯è§ï¼šä¸­ç­‰å½±å“åŠ›
        PrivacyLevel::Descendants => 5,   // åä»£å¯è§ï¼šè¾ƒä½å½±å“åŠ›
        PrivacyLevel::Private => 0,       // ç§å¯†ï¼šæ— å…¬å¼€å½±å“åŠ›
    };

    // 4. éªŒè¯çŠ¶æ€åŠ åˆ†
    if work.verified {
        score += 15;  // å·²éªŒè¯ï¼šå¢åŠ å¯ä¿¡åº¦
    }

    // 5. AIè®­ç»ƒæˆæƒåŠ åˆ†
    if work.ai_training_enabled {
        score += 10;  // ç”¨äºAIè®­ç»ƒï¼šå¢åŠ ä»·å€¼
    }

    // 6. æ ‡ç­¾ä¸°å¯Œåº¦åŠ åˆ†
    score += (work.tags.len() as u32).min(10);  // æœ€å¤šåŠ 10åˆ†

    // 7. å½’ä¸€åŒ–åˆ°0-100èŒƒå›´
    let final_score = score.min(100) as u8;

    Ok(final_score)
}
```

### 3.3 æŠ¼é‡‘æ ‡å‡†é…ç½®è¡¨

| åœºæ™¯ | åŸºç¡€æŠ¼é‡‘ | ç±»å‹ç³»æ•° | å½±å“åŠ›ç³»æ•° | éªŒè¯ç³»æ•° | ä¿¡èª‰ç³»æ•° | **æœ€ç»ˆæŠ¼é‡‘èŒƒå›´** |
|------|---------|---------|-----------|---------|---------|----------------|
| **é«˜å½±å“å­¦æœ¯è®ºæ–‡åˆ é™¤** | 50 | 2.0 | 3.0 | 1.5 | 0.5-2.0 | **225-900 DUST** |
| **å·²éªŒè¯æ–‡å­¦ä½œå“éšè—** | 20 | 1.5 | 2.0 | 1.5 | 0.5-2.0 | **45-180 DUST** |
| **æœªéªŒè¯éŸ³é¢‘ä½œå“æ’¤é”€AI** | 15 | 1.5 | 1.0 | 0.8 | 0.5-2.0 | **9-36 DUST** |
| **ä½å½±å“æ—¥è®°éšè—** | 20 | 0.5 | 1.0 | 0.8 | 0.5-2.0 | **4-16 DUST** |
| **ä»£ç ä½œå“æ ‡è®°è¿è§„** | 25 | 1.3 | 1.5 | 1.5 | 0.5-2.0 | **37-147 DUST** |

### 3.4 åŠ¨æ€è°ƒæ•´æœºåˆ¶

```rust
/// ç³»ç»Ÿæ ¹æ®è¿è¥æ•°æ®åŠ¨æ€è°ƒæ•´æŠ¼é‡‘æ ‡å‡†
///
/// è°ƒæ•´å› ç´ ï¼š
/// - æŠ•è¯‰æˆåŠŸç‡ï¼šæˆåŠŸç‡ä½â†’æŠ¼é‡‘æé«˜
/// - æ¶æ„æŠ•è¯‰ç‡ï¼šæ¶æ„æŠ•è¯‰å¤šâ†’æŠ¼é‡‘æé«˜
/// - å›½åº“ä½™é¢ï¼šä½™é¢ä¸è¶³â†’å¥–åŠ±é™ä½ã€æŠ¼é‡‘æé«˜
/// - æŠ•è¯‰é‡ï¼šæŠ•è¯‰è¿‡å¤šâ†’æŠ¼é‡‘æé«˜ï¼ˆé™æµï¼‰
pub fn adjust_deposit_multipliers<T: Config>() -> DispatchResult {
    let system_stats = T::SystemStatsProvider::get_complaint_stats();

    // 1. æ ¹æ®æŠ•è¯‰æˆåŠŸç‡è°ƒæ•´
    let success_rate_adjustment = match system_stats.success_rate_percent {
        rate if rate < 30 => 1.5,   // æˆåŠŸç‡è¿‡ä½ï¼Œæé«˜æŠ¼é‡‘
        rate if rate < 50 => 1.2,   // æˆåŠŸç‡åä½ï¼Œé€‚åº¦æé«˜
        rate if rate > 80 => 0.9,   // æˆåŠŸç‡å¾ˆé«˜ï¼Œé€‚åº¦é™ä½
        _ => 1.0,                   // æ ‡å‡†
    };

    // 2. æ ¹æ®æ¶æ„æŠ•è¯‰ç‡è°ƒæ•´
    let malicious_rate_adjustment = match system_stats.malicious_rate_percent {
        rate if rate > 20 => 2.0,   // æ¶æ„æŠ•è¯‰ä¸¥é‡ï¼Œå¤§å¹…æé«˜
        rate if rate > 10 => 1.5,   // æ¶æ„æŠ•è¯‰è¾ƒå¤šï¼Œæé«˜æŠ¼é‡‘
        rate if rate > 5 => 1.2,    // æ¶æ„æŠ•è¯‰ä¸€èˆ¬ï¼Œé€‚åº¦æé«˜
        _ => 1.0,                   // æ­£å¸¸
    };

    // 3. æ ¹æ®æŠ•è¯‰é‡è°ƒæ•´ï¼ˆé™æµæœºåˆ¶ï¼‰
    let volume_adjustment = match system_stats.daily_complaint_volume {
        vol if vol > 1000 => 1.5,   // æŠ•è¯‰é‡è¿‡å¤§ï¼Œæé«˜é—¨æ§›
        vol if vol > 500 => 1.2,    // æŠ•è¯‰é‡è¾ƒå¤§ï¼Œé€‚åº¦æé«˜
        vol if vol < 50 => 0.8,     // æŠ•è¯‰é‡è¿‡ä½ï¼Œé¼“åŠ±ä¸¾æŠ¥
        _ => 1.0,                   // æ­£å¸¸
    };

    // 4. åº”ç”¨è°ƒæ•´ï¼ˆæ›´æ–°å…¨å±€å‚æ•°ï¼‰
    let global_multiplier = success_rate_adjustment
        * malicious_rate_adjustment
        * volume_adjustment;

    GlobalDepositMultiplier::<T>::put(global_multiplier);

    Self::deposit_event(Event::DepositMultiplierAdjusted {
        new_multiplier: global_multiplier,
        success_rate: system_stats.success_rate_percent,
        malicious_rate: system_stats.malicious_rate_percent,
        daily_volume: system_stats.daily_complaint_volume,
    });

    Ok(())
}
```

---

## 4. ä½œå“æŠ•è¯‰ä¸“é¡¹å¤„ç†æµç¨‹

### 4.1 ä½œå“æŠ•è¯‰å¤„ç†åŠ¨ä½œæ˜ å°„

```rust
/// ä½œå“æŠ•è¯‰è·¯ç”±å®ç°
impl<T: Config> AppealRouter<T::AccountId> for Pallet<T> {
    fn execute(
        who: &T::AccountId,
        domain: u8,
        target: u64,  // work_id
        action: u8,
    ) -> DispatchResult {
        // åªå¤„ç†Domain 7ï¼ˆä½œå“åŸŸï¼‰
        if domain != DOMAIN_WORKS {
            return Err(Error::<T>::UnsupportedDomain.into());
        }

        match action {
            works_actions::ACTION_HIDE_WORK => {
                Self::execute_hide_work(target)
            },

            works_actions::ACTION_DELETE_WORK => {
                Self::execute_delete_work(target)
            },

            works_actions::ACTION_REVOKE_AI_TRAINING => {
                Self::execute_revoke_ai_training(target)
            },

            works_actions::ACTION_UNVERIFY_WORK => {
                Self::execute_unverify_work(target)
            },

            works_actions::ACTION_CHANGE_PRIVACY => {
                // éœ€è¦ä»æŠ•è¯‰è®°å½•ä¸­è·å–suggested_privacy_level
                Self::execute_change_privacy(target)
            },

            works_actions::ACTION_MARK_AS_VIOLATION => {
                Self::execute_mark_violation(target)
            },

            works_actions::ACTION_TRANSFER_OWNERSHIP => {
                // éœ€è¦ä»æŠ•è¯‰è®°å½•ä¸­è·å–new_owner
                Self::execute_transfer_ownership(target)
            },

            works_actions::ACTION_FREEZE_WORK => {
                Self::execute_freeze_work(target)
            },

            _ => Err(Error::<T>::InvalidAction.into()),
        }
    }
}
```

### 4.2 å…·ä½“å¤„ç†å‡½æ•°å®ç°

#### 4.2.1 éšè—ä½œå“

```rust
/// æ‰§è¡Œéšè—ä½œå“æ“ä½œ
///
/// æ•ˆæœï¼š
/// - å°†ä½œå“éšç§çº§åˆ«è®¾ç½®ä¸ºPrivate
/// - ä¿ç•™ä½œå“æ•°æ®ï¼ˆå¯ç”³è¯‰æ¢å¤ï¼‰
/// - è®°å½•æ“ä½œæ—¥å¿—
fn execute_hide_work(work_id: u64) -> DispatchResult {
    Works::<T>::try_mutate(work_id, |maybe_work| -> DispatchResult {
        let work = maybe_work.as_mut().ok_or(Error::<T>::WorkNotFound)?;

        // å¤‡ä»½åŸéšç§çº§åˆ«ï¼ˆç”¨äºç”³è¯‰æ¢å¤ï¼‰
        let original_privacy = work.privacy_level;

        // è®¾ç½®ä¸ºç§å¯†
        work.privacy_level = PrivacyLevel::Private;

        // è®°å½•æ“ä½œå†å²
        WorkOperationHistory::<T>::insert(
            work_id,
            WorkOperation {
                operation_type: OperationType::Hidden,
                performed_at: <frame_system::Pallet<T>>::block_number(),
                performed_by: Self::get_system_account(),
                previous_state: Some(original_privacy.to_u8()),
            },
        );

        Self::deposit_event(Event::WorkHidden {
            work_id,
            deceased_id: work.deceased_id,
            original_privacy_level: original_privacy.to_u8(),
        });

        Ok(())
    })
}
```

#### 4.2.2 åˆ é™¤ä½œå“

```rust
/// æ‰§è¡Œåˆ é™¤ä½œå“æ“ä½œ
///
/// æ•ˆæœï¼š
/// - ä»å­˜å‚¨ä¸­ç§»é™¤ä½œå“è®°å½•
/// - å¤‡ä»½æ•°æ®ï¼ˆç”¨äºç”³è¯‰æ¢å¤ï¼Œä¿ç•™30å¤©ï¼‰
/// - é€šçŸ¥IPFSæœåŠ¡å–æ¶ˆpin
fn execute_delete_work(work_id: u64) -> DispatchResult {
    let work = Works::<T>::get(work_id).ok_or(Error::<T>::WorkNotFound)?;

    // 1. å¤‡ä»½ä½œå“æ•°æ®ï¼ˆç”¨äºç”³è¯‰ï¼‰
    let backup = WorkBackup {
        work: work.clone(),
        deleted_at: <frame_system::Pallet<T>>::block_number(),
        restore_deadline: <frame_system::Pallet<T>>::block_number() + T::WorkBackupPeriod::get(),
    };

    WorkBackups::<T>::insert(work_id, backup);

    // 2. ä»ä¸»å­˜å‚¨ç§»é™¤
    Works::<T>::remove(work_id);

    // 3. é€šçŸ¥IPFSæœåŠ¡å–æ¶ˆpinï¼ˆå¯é€‰ï¼‰
    if let Err(e) = T::IpfsPinner::unpin_cid(work.ipfs_cid.clone()) {
        log::warn!(
            target: "works-governance",
            "Failed to unpin IPFS CID for deleted work {}: {:?}",
            work_id,
            e
        );
    }

    // 4. æ›´æ–°é€è€…ä½œå“ç»Ÿè®¡
    DeceasedWorkStats::<T>::mutate(work.deceased_id, |stats| {
        stats.total_works = stats.total_works.saturating_sub(1);
        stats.deleted_works = stats.deleted_works.saturating_add(1);
    });

    Self::deposit_event(Event::WorkDeleted {
        work_id,
        deceased_id: work.deceased_id,
        ipfs_cid: work.ipfs_cid,
        restore_deadline: backup.restore_deadline,
    });

    Ok(())
}
```

#### 4.2.3 æ’¤é”€AIè®­ç»ƒæˆæƒ

```rust
/// æ‰§è¡Œæ’¤é”€AIè®­ç»ƒæˆæƒæ“ä½œ
///
/// æ•ˆæœï¼š
/// - ç¦æ­¢ä½œå“ç”¨äºAIè®­ç»ƒ
/// - é€šçŸ¥AIè®­ç»ƒæœåŠ¡ç§»é™¤è¯¥ä½œå“æ•°æ®
/// - ä¸å½±å“ä½œå“çš„å…¬å¼€å±•ç¤º
fn execute_revoke_ai_training(work_id: u64) -> DispatchResult {
    Works::<T>::try_mutate(work_id, |maybe_work| -> DispatchResult {
        let work = maybe_work.as_mut().ok_or(Error::<T>::WorkNotFound)?;

        // å¤‡ä»½åŸçŠ¶æ€
        let was_enabled = work.ai_training_enabled;

        // ç¦ç”¨AIè®­ç»ƒ
        work.ai_training_enabled = false;

        // é€šçŸ¥AIè®­ç»ƒæœåŠ¡ï¼ˆé€šè¿‡äº‹ä»¶ï¼‰
        Self::deposit_event(Event::AITrainingRevoked {
            work_id,
            deceased_id: work.deceased_id,
            work_type: work.work_type.as_str().into(),
            was_enabled,
        });

        // è®°å½•æ“ä½œå†å²
        WorkOperationHistory::<T>::insert(
            work_id,
            WorkOperation {
                operation_type: OperationType::AITrainingRevoked,
                performed_at: <frame_system::Pallet<T>>::block_number(),
                performed_by: Self::get_system_account(),
                previous_state: Some(if was_enabled { 1 } else { 0 }),
            },
        );

        Ok(())
    })
}
```

#### 4.2.4 å–æ¶ˆä½œå“éªŒè¯

```rust
/// æ‰§è¡Œå–æ¶ˆä½œå“éªŒè¯æ“ä½œ
///
/// æ•ˆæœï¼š
/// - å°†verifiedæ ‡å¿—è®¾ä¸ºfalse
/// - æ¸…é™¤verifierä¿¡æ¯
/// - é™ä½ä½œå“ä¿¡ä»»åº¦
fn execute_unverify_work(work_id: u64) -> DispatchResult {
    Works::<T>::try_mutate(work_id, |maybe_work| -> DispatchResult {
        let work = maybe_work.as_mut().ok_or(Error::<T>::WorkNotFound)?;

        let previous_verifier = work.verifier.clone();

        // å–æ¶ˆéªŒè¯
        work.verified = false;
        work.verifier = None;

        Self::deposit_event(Event::WorkUnverified {
            work_id,
            deceased_id: work.deceased_id,
            previous_verifier,
        });

        Ok(())
    })
}
```

### 4.3 ä½œå“æŠ•è¯‰ä¸é€è€…æ¡£æ¡ˆçš„è”åŠ¨å¤„ç†

```rust
/// ä½œå“æŠ•è¯‰å¯¹é€è€…æ¡£æ¡ˆçš„å½±å“
///
/// åœºæ™¯ï¼š
/// - å•ä¸ªä½œå“è¿è§„ â‰  æ•´ä¸ªé€è€…æ¡£æ¡ˆè¿è§„
/// - ä½†å¤šä¸ªä½œå“è¿è§„å¯èƒ½å¯¼è‡´é€è€…æ¡£æ¡ˆå®¡æŸ¥
impl<T: Config> Pallet<T> {
    /// æ£€æŸ¥ä½œå“è¿è§„æ˜¯å¦è§¦å‘é€è€…æ¡£æ¡ˆå®¡æŸ¥
    fn check_deceased_profile_alert(deceased_id: u64) -> DispatchResult {
        let stats = DeceasedWorkStats::<T>::get(deceased_id);

        // è®¡ç®—è¿è§„ç‡
        let violation_rate = if stats.total_works > 0 {
            (stats.violated_works * 100) / stats.total_works
        } else {
            0
        };

        // è¿è§„ä½œå“æ•°é‡é˜ˆå€¼
        let violation_count_threshold = T::DeceasedViolationCountThreshold::get();

        // è¿è§„ç‡é˜ˆå€¼
        let violation_rate_threshold = T::DeceasedViolationRateThreshold::get();

        // è§¦å‘æ¡ä»¶ï¼š
        // 1. è¿è§„ä½œå“æ•° >= 3
        // 2. è¿è§„ç‡ >= 30%
        if stats.violated_works >= violation_count_threshold
            || violation_rate >= violation_rate_threshold
        {
            // å‘å‡ºè­¦å‘Šäº‹ä»¶
            Self::deposit_event(Event::DeceasedProfileAlert {
                deceased_id,
                violated_works: stats.violated_works,
                total_works: stats.total_works,
                violation_rate,
            });

            // å¯é€‰ï¼šè‡ªåŠ¨è§¦å‘é€è€…æ¡£æ¡ˆå®¡æŸ¥
            // Self::initiate_deceased_profile_review(deceased_id)?;
        }

        Ok(())
    }

    /// ä½œå“åˆ é™¤åæ›´æ–°é€è€…æ¡£æ¡ˆç»Ÿè®¡
    fn update_deceased_stats_after_work_deletion(
        deceased_id: u64,
        work_id: u64,
    ) -> DispatchResult {
        DeceasedWorkStats::<T>::mutate(deceased_id, |stats| {
            stats.total_works = stats.total_works.saturating_sub(1);
            stats.deleted_works = stats.deleted_works.saturating_add(1);

            // å¦‚æœæ‰€æœ‰ä½œå“éƒ½è¢«åˆ é™¤ï¼Œå¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†
            if stats.total_works == 0 {
                Self::deposit_event(Event::AllWorksDeleted { deceased_id });
            }
        });

        Ok(())
    }
}
```

---

## 5. æŠ¼é‡‘å…¬ç¤ºæœŸé›†æˆæ–¹æ¡ˆ

### 5.1 ä¸æŠ¼é‡‘å…¬ç¤ºæœŸçš„å…³ç³»

æ ¹æ® [æŠ¼é‡‘å…¬ç¤ºæœŸæ²»ç†æœºåˆ¶æ–¹æ¡ˆ](./æŠ¼é‡‘å…¬ç¤ºæœŸæ²»ç†æœºåˆ¶æ–¹æ¡ˆ.md)ï¼Œä½œå“æŠ•è¯‰éœ€è¦ä¸æŠ¼é‡‘å…¬ç¤ºæœŸæœºåˆ¶é›†æˆï¼š

```rust
/// ä½œå“æŠ•è¯‰çš„æŠ¼é‡‘å…¬ç¤ºæœŸæµç¨‹
///
/// é˜¶æ®µ1ï¼šä½œå“ä¸Šä¼  + æŠ¼é‡‘é”å®š
/// é˜¶æ®µ2ï¼šå…¬ç¤ºæœŸï¼ˆ7å¤©ï¼‰
/// é˜¶æ®µ3ï¼šæ— æŠ•è¯‰ â†’ æŠ¼é‡‘è‡ªåŠ¨é€€å›
///        æœ‰æŠ•è¯‰ â†’ è¿›å…¥ç”³è¯‰æµç¨‹
pub fn integrate_with_deposit_notice_period<T: Config>(
    work_id: u64,
    upload_deposit: BalanceOf<T>,
) -> DispatchResult {

    // 1. è®¡ç®—å…¬ç¤ºæœŸç»“æŸæ—¶é—´
    let current_block = <frame_system::Pallet<T>>::block_number();
    let notice_period_blocks = T::WorkNoticePeriodBlocks::get(); // 7å¤© = 50400å—
    let notice_end_block = current_block + notice_period_blocks;

    // 2. åˆ›å»ºæŠ¼é‡‘å…¬ç¤ºè®°å½•
    let notice_record = DepositNoticeRecord {
        work_id,
        uploader: who.clone(),
        deposit_amount: upload_deposit,
        notice_start: current_block,
        notice_end: notice_end_block,
        complaint_count: 0,
        status: NoticeStatus::Active,
    };

    WorkDepositNotices::<T>::insert(work_id, notice_record);

    // 3. è°ƒåº¦è‡ªåŠ¨é€€å›ä»»åŠ¡
    T::Scheduler::schedule(
        notice_end_block,
        Some((work_id, ScheduledTaskType::RefundWorkDeposit)),
        DispatchTime::At(notice_end_block),
        || Self::try_refund_work_deposit(work_id),
    )?;

    Self::deposit_event(Event::WorkDepositNoticePeriodStarted {
        work_id,
        notice_end_block,
        deposit_amount: upload_deposit,
    });

    Ok(())
}

/// å…¬ç¤ºæœŸå†…æ¥æ”¶æŠ•è¯‰
fn on_complaint_during_notice_period(
    work_id: u64,
    complaint_id: u64,
) -> DispatchResult {

    WorkDepositNotices::<T>::try_mutate(work_id, |maybe_notice| -> DispatchResult {
        let notice = maybe_notice.as_mut().ok_or(Error::<T>::NoticeNotFound)?;

        // æ£€æŸ¥æ˜¯å¦åœ¨å…¬ç¤ºæœŸå†…
        let current_block = <frame_system::Pallet<T>>::block_number();
        ensure!(
            current_block <= notice.notice_end,
            Error::<T>::NoticePeriodExpired
        );

        // è®°å½•æŠ•è¯‰
        notice.complaint_count += 1;
        notice.status = NoticeStatus::UnderComplaint;

        // å–æ¶ˆè‡ªåŠ¨é€€å›ä»»åŠ¡
        T::Scheduler::cancel((work_id, ScheduledTaskType::RefundWorkDeposit))?;

        Self::deposit_event(Event::ComplaintReceivedDuringNoticePeriod {
            work_id,
            complaint_id,
            remaining_complaints: notice.complaint_count,
        });

        Ok(())
    })
}

/// å…¬ç¤ºæœŸç»“æŸè‡ªåŠ¨é€€å›æŠ¼é‡‘
fn try_refund_work_deposit(work_id: u64) -> DispatchResult {
    let notice = WorkDepositNotices::<T>::get(work_id)
        .ok_or(Error::<T>::NoticeNotFound)?;

    // åªæœ‰çŠ¶æ€ä¸ºActiveï¼ˆæ— æŠ•è¯‰ï¼‰æ‰é€€å›
    if notice.status == NoticeStatus::Active {
        // é‡Šæ”¾æŠ¼é‡‘
        T::Fungible::release(
            &T::RuntimeHoldReason::from(HoldReason::WorkUpload),
            &notice.uploader,
            notice.deposit_amount,
            Precision::Exact,
        )?;

        Self::deposit_event(Event::WorkDepositRefunded {
            work_id,
            uploader: notice.uploader,
            amount: notice.deposit_amount,
        });

        // æ¸…ç†å…¬ç¤ºè®°å½•
        WorkDepositNotices::<T>::remove(work_id);
    }

    Ok(())
}
```

### 5.2 å…¬ç¤ºæœŸå†…æŠ•è¯‰å¤„ç†ä¼˜å…ˆçº§

```rust
/// å…¬ç¤ºæœŸå†…çš„æŠ•è¯‰äº«æœ‰ä¼˜å…ˆå¤„ç†
///
/// ç†ç”±ï¼š
/// - æ—¶æ•ˆæ€§è¦æ±‚é«˜ï¼ˆ7å¤©å†…éœ€å®Œæˆå®¡æŸ¥ï¼‰
/// - å‡å°‘ä¸Šä¼ è€…çš„èµ„é‡‘å ç”¨æ—¶é—´
/// - å¿«é€Ÿå‘ç°å’Œå¤„ç†è¿è§„ä½œå“
impl<T: Config> Pallet<T> {
    /// æ£€æŸ¥æŠ•è¯‰æ˜¯å¦åœ¨å…¬ç¤ºæœŸå†…
    fn is_complaint_during_notice_period(work_id: u64) -> bool {
        if let Some(notice) = WorkDepositNotices::<T>::get(work_id) {
            let current_block = <frame_system::Pallet<T>>::block_number();
            current_block <= notice.notice_end && notice.status == NoticeStatus::Active
        } else {
            false
        }
    }

    /// ä¸ºå…¬ç¤ºæœŸæŠ•è¯‰åˆ†é…æ›´é«˜ä¼˜å…ˆçº§
    fn assign_priority_for_notice_complaint(
        complaint_id: u64,
        work_id: u64,
    ) -> DispatchResult {
        if Self::is_complaint_during_notice_period(work_id) {
            // è®¾ç½®ä¸ºé«˜ä¼˜å…ˆçº§
            ComplaintPriority::<T>::insert(complaint_id, PriorityLevel::High);

            // ç¼©çŸ­å®¡æ ¸æœŸé™ï¼ˆä»72å°æ—¶ç¼©çŸ­åˆ°24å°æ—¶ï¼‰
            let review_deadline = <frame_system::Pallet<T>>::block_number()
                + T::NoticePeriodComplaintReviewBlocks::get(); // 24å°æ—¶

            ComplaintReviewDeadline::<T>::insert(complaint_id, review_deadline);

            Self::deposit_event(Event::HighPriorityComplaintAssigned {
                complaint_id,
                work_id,
                reason: "NoticePeriodComplaint".into(),
                review_deadline,
            });
        }

        Ok(())
    }
}
```

---

## 6. å®æ–½è®¡åˆ’

### 6.1 æŠ€æœ¯å®æ–½è·¯çº¿å›¾

#### ç¬¬ä¸€é˜¶æ®µï¼šDomain 7åŸºç¡€å®ç°ï¼ˆ2å‘¨ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®šä¹‰Domain 7ç›¸å…³å¸¸é‡å’Œæšä¸¾
- [ ] å®ç°`submit_work_complaint()`æ¥å£
- [ ] æ‰©å±•`AppealRouter`æ”¯æŒDomain 7
- [ ] æ·»åŠ ä½œå“æŠ•è¯‰ç›¸å…³å­˜å‚¨
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**äº¤ä»˜ç‰©**ï¼š
- `pallet-works-governance` åˆå§‹ç‰ˆæœ¬
- Domain 7é›†æˆåˆ°`pallet-stardust-appeals`
- åŸºç¡€æµ‹è¯•ç”¨ä¾‹

#### ç¬¬äºŒé˜¶æ®µï¼šå·®å¼‚åŒ–æŠ¼é‡‘æœºåˆ¶ï¼ˆ2å‘¨ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°æŠ¼é‡‘è®¡ç®—å…¬å¼
- [ ] å®ç°ä½œå“å½±å“åŠ›è¯„ä¼°
- [ ] å®ç°åŠ¨æ€è°ƒæ•´æœºåˆ¶
- [ ] é…ç½®æŠ¼é‡‘å‚æ•°è¡¨
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

**äº¤ä»˜ç‰©**ï¼š
- æŠ¼é‡‘è®¡ç®—æ¨¡å—å®Œæ•´å®ç°
- å½±å“åŠ›è¯„ä¼°ç®—æ³•
- åŠ¨æ€è°ƒæ•´æœºåˆ¶
- å‚æ•°é…ç½®æ–‡æ¡£

#### ç¬¬ä¸‰é˜¶æ®µï¼šä¸“é¡¹å¤„ç†æµç¨‹ï¼ˆ3å‘¨ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°8ç§ä½œå“æ“ä½œçš„æ‰§è¡Œå‡½æ•°
- [ ] å®ç°ä½œå“å¤‡ä»½å’Œæ¢å¤æœºåˆ¶
- [ ] å®ç°é€è€…æ¡£æ¡ˆè”åŠ¨å¤„ç†
- [ ] å®ç°æ“ä½œå†å²è®°å½•
- [ ] é›†æˆæµ‹è¯•

**äº¤ä»˜ç‰©**ï¼š
- å®Œæ•´çš„ä½œå“æŠ•è¯‰å¤„ç†æµç¨‹
- å¤‡ä»½æ¢å¤æœºåˆ¶
- è”åŠ¨å¤„ç†é€»è¾‘
- æ“ä½œå®¡è®¡æ—¥å¿—

#### ç¬¬å››é˜¶æ®µï¼šæŠ¼é‡‘å…¬ç¤ºæœŸé›†æˆï¼ˆ2å‘¨ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°å…¬ç¤ºæœŸç®¡ç†
- [ ] å®ç°è‡ªåŠ¨é€€å›æœºåˆ¶
- [ ] å®ç°ä¼˜å…ˆçº§è°ƒåº¦
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ–‡æ¡£å®Œå–„

**äº¤ä»˜ç‰©**ï¼š
- æŠ¼é‡‘å…¬ç¤ºæœŸå®Œæ•´é›†æˆ
- è‡ªåŠ¨åŒ–ä»»åŠ¡è°ƒåº¦
- å®Œæ•´çš„ç”¨æˆ·æŒ‡å—
- å®‰å…¨å®¡è®¡æŠ¥å‘Š

### 6.2 Runtimeé…ç½®

```rust
/// Runtimeé…ç½®ç¤ºä¾‹
impl pallet_works_governance::Config for Runtime {
    type RuntimeEvent = RuntimeEvent;
    type Fungible = Balances;
    type RuntimeHoldReason = RuntimeHoldReason;

    // ä½œå“æŠ•è¯‰æŠ¼é‡‘é…ç½®
    type MinWorkComplaintDeposit = ConstU128<{ 5 * DUST }>;        // æœ€å°5 DUST
    type MaxWorkComplaintDeposit = ConstU128<{ 1000 * DUST }>;     // æœ€å¤§1000 DUST
    type BaseWorkComplaintDeposit = ConstU128<{ 20 * DUST }>;      // åŸºç¡€20 DUST

    // å…¬ç¤ºæœŸé…ç½®
    type WorkNoticePeriodBlocks = ConstU32<50400>;                 // 7å¤©ï¼ˆ6ç§’/å—ï¼‰
    type NoticePeriodComplaintReviewBlocks = ConstU32<14400>;      // 24å°æ—¶åŠ é€Ÿå®¡æ ¸

    // å¤‡ä»½å’Œæ¢å¤é…ç½®
    type WorkBackupPeriod = ConstU32<432000>;                      // 30å¤©å¤‡ä»½æœŸ

    // é€è€…æ¡£æ¡ˆè”åŠ¨é˜ˆå€¼
    type DeceasedViolationCountThreshold = ConstU32<3>;            // 3ä¸ªä½œå“è¿è§„è§¦å‘
    type DeceasedViolationRateThreshold = ConstU32<30>;            // 30%è¿è§„ç‡è§¦å‘

    // æœåŠ¡æä¾›è€…
    type WorksProvider = DeceasedPallet;                           // ä½œå“æ•°æ®æä¾›è€…
    type WorkStatsProvider = WorksStatsPallet;                     // ä½œå“ç»Ÿè®¡æä¾›è€…
    type ReputationProvider = ReputationPallet;                    // ç”¨æˆ·ä¿¡èª‰æä¾›è€…
    type IpfsPinner = IpfsPallet;                                  // IPFSæœåŠ¡

    // æ²»ç†ç›¸å…³
    type GovernanceOrigin = EnsureRootOrHalfCouncil;
    type CommitteeManager = CouncilPallet;
    type Scheduler = Scheduler;

    // æƒé‡
    type WeightInfo = pallet_works_governance::weights::WeightInfo;
}
```

### 6.3 å‰ç«¯é›†æˆæŒ‡å—

#### 6.3.1 ä½œå“æŠ•è¯‰æäº¤ç•Œé¢

```typescript
// å‰ç«¯ç¤ºä¾‹ä»£ç 
interface WorkComplaintFormData {
  workId: number;
  action: WorkAction;
  violationType: ViolationType;
  reasonCid: string;
  evidenceCids: string[];
  suggestedPrivacyLevel?: number;
}

enum WorkAction {
  HIDE_WORK = 1,
  DELETE_WORK = 2,
  REVOKE_AI_TRAINING = 3,
  UNVERIFY_WORK = 4,
  CHANGE_PRIVACY = 5,
  MARK_AS_VIOLATION = 6,
  TRANSFER_OWNERSHIP = 7,
  FREEZE_WORK = 8,
}

enum ViolationType {
  COPYRIGHT_VIOLATION = 1,
  PLAGIARISM = 2,
  MISINFORMATION = 3,
  INAPPROPRIATE_CONTENT = 4,
  DEFAMATION = 5,
  OTHER = 6,
}

// æäº¤ä½œå“æŠ•è¯‰
async function submitWorkComplaint(data: WorkComplaintFormData) {
  const api = await getApi();

  // 1. æŸ¥è¯¢ä½œå“ä¿¡æ¯
  const work = await api.query.deceased.works(data.workId);
  if (!work.isSome) {
    throw new Error('Work not found');
  }

  // 2. ä¼°ç®—æŠ¼é‡‘
  const estimatedDeposit = await estimateWorkComplaintDeposit(
    data.workId,
    data.action
  );

  // 3. æç¤ºç”¨æˆ·æŠ¼é‡‘é‡‘é¢
  const userConfirmed = await showDepositConfirmation(estimatedDeposit);
  if (!userConfirmed) {
    return;
  }

  // 4. æäº¤æŠ•è¯‰äº¤æ˜“
  const tx = api.tx.worksGovernance.submitWorkComplaint(
    data.workId,
    data.action,
    data.violationType,
    data.reasonCid,
    data.evidenceCids,
    data.suggestedPrivacyLevel || null
  );

  const hash = await tx.signAndSend(currentAccount);

  return hash;
}

// ä¼°ç®—æŠ¼é‡‘
async function estimateWorkComplaintDeposit(
  workId: number,
  action: WorkAction
): Promise<string> {
  const api = await getApi();

  // è°ƒç”¨runtime APIè·å–æŠ¼é‡‘ä¼°ç®—
  const deposit = await api.rpc.worksGovernance.estimateComplaintDeposit(
    workId,
    action
  );

  return formatBalance(deposit);
}
```

#### 6.3.2 ä½œå“æŠ•è¯‰æŸ¥è¯¢ç•Œé¢

```typescript
// æŸ¥è¯¢ä½œå“çš„æŠ•è¯‰å†å²
async function getWorkComplaintHistory(workId: number) {
  const api = await getApi();

  // æŸ¥è¯¢æ‰€æœ‰é’ˆå¯¹è¯¥ä½œå“çš„æŠ•è¯‰
  const complaints = await api.query.appeals.complaintsByTarget.entries([
    DOMAIN_WORKS,
    workId,
  ]);

  return complaints.map(([key, value]) => {
    const complaintId = key.args[1].toNumber();
    return {
      complaintId,
      status: value.status,
      submittedAt: value.submitted_at,
      action: value.action,
      // ... å…¶ä»–å­—æ®µ
    };
  });
}

// æŸ¥è¯¢å…¬ç¤ºæœŸçŠ¶æ€
async function getWorkNoticePeriodStatus(workId: number) {
  const api = await getApi();

  const notice = await api.query.worksGovernance.workDepositNotices(workId);

  if (!notice.isSome) {
    return null;
  }

  const noticeData = notice.unwrap();
  const currentBlock = await api.query.system.number();

  return {
    isActive: noticeData.status.isActive,
    remainingBlocks: noticeData.notice_end.toNumber() - currentBlock.toNumber(),
    complaintCount: noticeData.complaint_count.toNumber(),
    depositAmount: formatBalance(noticeData.deposit_amount),
  };
}
```

---

## 7. æµ‹è¯•æ–¹æ¡ˆ

### 7.1 å•å…ƒæµ‹è¯•ç”¨ä¾‹

```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_submit_work_complaint_with_correct_deposit() {
        new_test_ext().execute_with(|| {
            // å‡†å¤‡æµ‹è¯•æ•°æ®
            let work_id = 1;
            let complainant = account(1);
            let action = works_actions::ACTION_HIDE_WORK;

            // åˆ›å»ºæµ‹è¯•ä½œå“
            create_test_work(work_id, WorkTypeCategory::Literature);

            // æäº¤æŠ•è¯‰
            assert_ok!(WorksGovernance::submit_work_complaint(
                Origin::signed(complainant.clone()),
                work_id,
                action,
                ViolationType::CopyrightViolation,
                b"reason_cid".to_vec().try_into().unwrap(),
                vec![b"evidence1".to_vec().try_into().unwrap()],
                None,
            ));

            // éªŒè¯æŠ¼é‡‘å·²é”å®š
            assert!(has_held_balance(&complainant, HoldReason::WorkComplaint));

            // éªŒè¯æŠ•è¯‰è®°å½•å·²åˆ›å»º
            assert!(ComplaintsByTarget::<Test>::contains_key((DOMAIN_WORKS, work_id)));
        });
    }

    #[test]
    fn test_work_complaint_deposit_calculation() {
        new_test_ext().execute_with(|| {
            // æµ‹è¯•ä¸åŒåœºæ™¯çš„æŠ¼é‡‘è®¡ç®—

            // åœºæ™¯1ï¼šé«˜å½±å“åŠ›å­¦æœ¯è®ºæ–‡åˆ é™¤
            let work1 = create_work_with_influence(
                WorkTypeCategory::Academic,
                90, // é«˜å½±å“åŠ›
                true, // å·²éªŒè¯
            );
            let deposit1 = calculate_work_complaint_deposit(
                &work1,
                works_actions::ACTION_DELETE_WORK,
                &account(1),
            );
            assert!(deposit1 >= 225 * DUST && deposit1 <= 900 * DUST);

            // åœºæ™¯2ï¼šä½å½±å“åŠ›æ—¥è®°éšè—
            let work2 = create_work_with_influence(
                WorkTypeCategory::Other,
                10, // ä½å½±å“åŠ›
                false, // æœªéªŒè¯
            );
            let deposit2 = calculate_work_complaint_deposit(
                &work2,
                works_actions::ACTION_HIDE_WORK,
                &account(1),
            );
            assert!(deposit2 >= 4 * DUST && deposit2 <= 16 * DUST);
        });
    }

    #[test]
    fn test_execute_hide_work() {
        new_test_ext().execute_with(|| {
            let work_id = 1;
            create_test_work(work_id, WorkTypeCategory::Literature);

            // æ‰§è¡Œéšè—æ“ä½œ
            assert_ok!(WorksGovernance::execute_hide_work(work_id));

            // éªŒè¯éšç§çº§åˆ«å·²æ›´æ”¹
            let work = Works::<Test>::get(work_id).unwrap();
            assert_eq!(work.privacy_level, PrivacyLevel::Private);

            // éªŒè¯æ“ä½œå†å²å·²è®°å½•
            assert!(WorkOperationHistory::<Test>::contains_key(work_id));
        });
    }

    #[test]
    fn test_notice_period_complaint_priority() {
        new_test_ext().execute_with(|| {
            let work_id = 1;
            let complaint_id = 1;

            // åˆ›å»ºå…¬ç¤ºæœŸè®°å½•
            create_work_notice_period(work_id);

            // æäº¤æŠ•è¯‰
            submit_work_complaint_during_notice(work_id, complaint_id);

            // éªŒè¯ä¼˜å…ˆçº§å·²æå‡
            let priority = ComplaintPriority::<Test>::get(complaint_id);
            assert_eq!(priority, PriorityLevel::High);
        });
    }
}
```

### 7.2 é›†æˆæµ‹è¯•åœºæ™¯

```rust
#[test]
fn test_end_to_end_work_complaint_flow() {
    new_test_ext().execute_with(|| {
        // 1. ä¸Šä¼ ä½œå“å¹¶é”å®šæŠ¼é‡‘
        let uploader = account(1);
        let work_id = upload_work_with_deposit(uploader.clone(), 10 * DUST);

        // 2. å…¬ç¤ºæœŸå†…æäº¤æŠ•è¯‰
        let complainant = account(2);
        let complaint_id = submit_work_complaint(
            complainant.clone(),
            work_id,
            works_actions::ACTION_HIDE_WORK,
        );

        // 3. å§”å‘˜ä¼šå®¡æ ¸å¹¶æ‰¹å‡†
        committee_approve_complaint(complaint_id);

        // 4. å…¬ç¤ºæœŸåæ‰§è¡Œå¤„ç½š
        run_to_block(notice_end_block());
        execute_approved_complaints();

        // 5. éªŒè¯ä½œå“å·²éšè—
        let work = Works::<Test>::get(work_id).unwrap();
        assert_eq!(work.privacy_level, PrivacyLevel::Private);

        // 6. éªŒè¯æŠ•è¯‰è€…è·å¾—å¥–åŠ±
        assert!(complainant_received_reward(&complainant));

        // 7. éªŒè¯ä¸Šä¼ è€…æŠ¼é‡‘è¢«ç½šæ²¡
        assert!(uploader_deposit_slashed(&uploader));
    });
}
```

---

## 8. ç›‘æ§å’Œè¯„ä¼°

### 8.1 å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | ç›‘æ§é¢‘ç‡ |
|---------|---------|-------|---------|
| **æŠ•è¯‰è´¨é‡** | ä½œå“æŠ•è¯‰æˆåŠŸç‡ | 60-80% | æ¯æ—¥ |
| **ç³»ç»Ÿæ€§èƒ½** | æŠ¼é‡‘è®¡ç®—å“åº”æ—¶é—´ | < 1ç§’ | å®æ—¶ |
| **æ²»ç†æ•ˆç‡** | å¹³å‡å¤„ç†æ—¶é—´ | < 48å°æ—¶ | æ¯æ—¥ |
| **ç”¨æˆ·æ»¡æ„åº¦** | æŠ•è¯‰è€…æ»¡æ„åº¦ | > 75% | æ¯å‘¨ |
| **å®‰å…¨æŒ‡æ ‡** | æ¶æ„æŠ•è¯‰æ£€å‡ºç‡ | > 90% | å®æ—¶ |
| **è´¢åŠ¡æŒ‡æ ‡** | æŠ¼é‡‘å‡†ç¡®ç‡ | > 95% | æ¯æ—¥ |

### 8.2 å‘Šè­¦è§„åˆ™

```rust
/// ä½œå“æŠ•è¯‰æ²»ç†å‘Šè­¦ç³»ç»Ÿ
pub fn check_works_governance_health() -> Vec<Alert> {
    let mut alerts = Vec::new();

    // 1. æŠ¼é‡‘è®¡ç®—å¼‚å¸¸å‘Šè­¦
    let deposit_variance = calculate_deposit_variance();
    if deposit_variance > 50.0 {
        alerts.push(Alert::DepositCalculationAnomaly {
            variance: deposit_variance,
            threshold: 50.0,
        });
    }

    // 2. ä½œå“æŠ•è¯‰ç§¯å‹å‘Šè­¦
    let pending_complaints = count_pending_work_complaints();
    if pending_complaints > 100 {
        alerts.push(Alert::ComplaintBacklog {
            count: pending_complaints,
            threshold: 100,
        });
    }

    // 3. å…¬ç¤ºæœŸæŠ•è¯‰æœªåŠæ—¶å¤„ç†å‘Šè­¦
    let overdue_notice_complaints = count_overdue_notice_period_complaints();
    if overdue_notice_complaints > 0 {
        alerts.push(Alert::NoticePeriodComplaintOverdue {
            count: overdue_notice_complaints,
        });
    }

    // 4. é€è€…æ¡£æ¡ˆè”åŠ¨è§¦å‘å‘Šè­¦
    let deceased_alerts = check_deceased_violation_alerts();
    alerts.extend(deceased_alerts);

    alerts
}
```

---

## 9. å®‰å…¨è€ƒè™‘

### 9.1 é˜²æŠ¤æœºåˆ¶æ¸…å•

| æ”»å‡»å‘é‡ | é˜²æŠ¤æªæ–½ | å®æ–½çŠ¶æ€ |
|---------|---------|---------|
| **è‡ªå¯¼è‡ªæ¼”æ”»å‡»** | ç¦æ­¢æŠ•è¯‰è‡ªå·±çš„ä½œå“ | âœ… å·²å®æ–½ |
| **å…³è”è´¦æˆ·æ”»å‡»** | èº«ä»½å…³è”æ£€æµ‹ | ğŸŸ¡ å¾…å®æ–½ |
| **æŠ¼é‡‘ç»•è¿‡æ”»å‡»** | å¼ºåˆ¶æŠ¼é‡‘é”å®šéªŒè¯ | âœ… å·²å®æ–½ |
| **æ—¶é—´çª—å£æ”»å‡»** | å…¬ç¤ºæœŸä¼˜å…ˆçº§ä¿æŠ¤ | âœ… å·²å®æ–½ |
| **æ‰¹é‡æ¶æ„æŠ•è¯‰** | é™é¢‘ + ä¿¡èª‰è¯„åˆ† | ğŸŸ¡ å¾…å®æ–½ |
| **æŠ¼é‡‘è®¡ç®—æ“çºµ** | å¤šå› å­åŠ¨æ€è®¡ç®— | âœ… å·²å®æ–½ |
| **ç”³è¯‰æ»¥ç”¨** | ç”³è¯‰æ¬¡æ•°é™åˆ¶ | ğŸŸ¡ å¾…å®æ–½ |

### 9.2 å®¡è®¡æ£€æŸ¥ç‚¹

- [ ] æŠ¼é‡‘è®¡ç®—å…¬å¼æ˜¯å¦å­˜åœ¨æº¢å‡ºé£é™©
- [ ] ä½œå“åˆ é™¤æ“ä½œæ˜¯å¦æœ‰å¤‡ä»½æœºåˆ¶
- [ ] å…¬ç¤ºæœŸè‡ªåŠ¨é€€å›æ˜¯å¦æœ‰æ¼æ´
- [ ] æŠ•è¯‰å¤„ç†æƒé™æ˜¯å¦æ­£ç¡®é…ç½®
- [ ] äº‹ä»¶è§¦å‘æ˜¯å¦æœ‰é—æ¼
- [ ] å­˜å‚¨æ¸…ç†æ˜¯å¦ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±

---

## 10. æ€»ç»“

### 10.1 è§£å†³æ–¹æ¡ˆæ¦‚è¿°

æœ¬æ–¹æ¡ˆæˆåŠŸè§£å†³äº†ä½œå“æŠ•è¯‰æ²»ç†çš„ä¸‰å¤§æ ¸å¿ƒé—®é¢˜ï¼š

1. âœ… **Domain 7å®šä¹‰å®Œæ•´**ï¼šæä¾›ä½œå“ç‹¬ç«‹æŠ•è¯‰èƒ½åŠ›
2. âœ… **å·®å¼‚åŒ–æŠ¼é‡‘æœºåˆ¶**ï¼šæ ¹æ®ä½œå“ç±»å‹ã€å½±å“åŠ›åŠ¨æ€è°ƒæ•´
3. âœ… **ä¸“é¡¹å¤„ç†æµç¨‹**ï¼šæ¶µç›–8ç§ä½œå“æ“ä½œå’Œé€è€…æ¡£æ¡ˆè”åŠ¨

### 10.2 å…³é”®ä¼˜åŠ¿

**ç²¾ç¡®æ²»ç†**ï¼š
- ç²¾ç¡®å®šä½åˆ°å•ä¸ªä½œå“ï¼Œä¸å½±å“å…¶ä»–åˆæ³•å†…å®¹
- åŒºåˆ†ä½œå“æŠ•è¯‰å’Œé€è€…æ¡£æ¡ˆæŠ•è¯‰

**å…¬å¹³åˆç†**ï¼š
- å·®å¼‚åŒ–æŠ¼é‡‘æ ‡å‡†å¹³è¡¡æ¿€åŠ±å’Œé˜²æŠ¤
- è€ƒè™‘ä½œå“ç±»å‹ã€å½±å“åŠ›ã€éªŒè¯çŠ¶æ€ç­‰å¤šç»´å› ç´ 

**æµç¨‹å®Œå–„**ï¼š
- 8ç§å¤„ç†åŠ¨ä½œè¦†ç›–æ‰€æœ‰åœºæ™¯
- ä¸æŠ¼é‡‘å…¬ç¤ºæœŸæ— ç¼é›†æˆ
- é€è€…æ¡£æ¡ˆè”åŠ¨å¤„ç†

**æŠ€æœ¯å¯è¡Œ**ï¼š
- åŸºäºç°æœ‰æ¶æ„æ‰©å±•
- å‘åå…¼å®¹
- æ€§èƒ½ä¼˜åŒ–å……åˆ†

### 10.3 å®æ–½å»ºè®®

**ä¼˜å…ˆçº§æ’åº**ï¼š
1. ğŸ”´ **é«˜ä¼˜å…ˆçº§**ï¼šDomain 7åŸºç¡€å®ç°ï¼ˆå¿…é¡»ï¼‰
2. ğŸŸ¡ **ä¸­ä¼˜å…ˆçº§**ï¼šå·®å¼‚åŒ–æŠ¼é‡‘æœºåˆ¶ï¼ˆå»ºè®®ï¼‰
3. ğŸŸ¢ **ä½ä¼˜å…ˆçº§**ï¼šé«˜çº§ä¼˜åŒ–åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

**é£é™©æ§åˆ¶**ï¼š
- åˆ†é˜¶æ®µéƒ¨ç½²ï¼Œå…ˆæµ‹è¯•ç½‘åä¸»ç½‘
- ä¿å®ˆè®¾ç½®åˆå§‹å‚æ•°
- å»ºç«‹å¿«é€Ÿå›æ»šæœºåˆ¶

**æŒç»­ä¼˜åŒ–**ï¼š
- æ ¹æ®è¿è¥æ•°æ®åŠ¨æ€è°ƒæ•´
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- å®šæœŸå®‰å…¨å®¡è®¡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-14
**ä½œè€…**: Claude Code Analysis
**çŠ¶æ€**: å¾…å®¡æ ¸å®æ–½
**ç›¸å…³æ–‡æ¡£**:
- [å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ](./å…¬ä¼—æŠ•è¯‰æ²»ç†æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ.md)
- [æŠ¼é‡‘å…¬ç¤ºæœŸæ²»ç†æœºåˆ¶æ–¹æ¡ˆ](./æŠ¼é‡‘å…¬ç¤ºæœŸæ²»ç†æœºåˆ¶æ–¹æ¡ˆ.md)