# åšå¸‚å•†æ‰¹å‡†åä»æ˜¾ç¤ºå¾…å®¡æ ¸ - é”™è¯¯é€»è¾‘å®Œæ•´åˆ†æ

## ğŸ”´ æ ¸å¿ƒé”™è¯¯é€»è¾‘

### é”™è¯¯é€»è¾‘ 1ï¼šå›ºå®šå»¶è¿Ÿåˆ·æ–°ï¼ˆå·²ä¿®å¤ï¼‰

#### **é—®é¢˜ä»£ç ï¼ˆæ—§ç‰ˆï¼‰**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šä½¿ç”¨å›ºå®š 2 ç§’å»¶è¿Ÿ
setTimeout(() => loadPendingApplications(), 2000)
```

#### **é—®é¢˜åˆ†æ**ï¼š

```
æ—¶é—´è½´ï¼š
T0 ------ T2s ------- T6s -------- T8s
â”‚          â”‚           â”‚            â”‚
æ‰¹å‡†       åˆ·æ–°         åŒºå—ç¡®è®¤     ç”¨æˆ·çœ‹åˆ°ç»“æœ
â”‚          â”‚           â”‚
â”‚          â””â”€æŸ¥è¯¢â”€â”€â”€â”€â–º çŠ¶æ€=Pendingï¼ˆæœªæ›´æ–°ï¼‰
â”‚                      â”‚
â”‚                      â””â”€æ˜¾ç¤ºåœ¨å¾…å®¡åˆ—è¡¨ âŒ
```

**é”™è¯¯é€»è¾‘**ï¼š
1. Substrate åŒºå—æ—¶é—´ï¼š6 ç§’
2. åˆ·æ–°åœ¨ 2 ç§’æ—¶å‘ç”Ÿ
3. æ­¤æ—¶é“¾ä¸ŠçŠ¶æ€å°šæœªæœ€ç»ˆç¡®è®¤
4. æŸ¥è¯¢ç»“æœä»ä¸º `PendingReview`
5. è¯¥ç”³è¯·è¢«é‡æ–°åŠ å…¥å¾…å®¡åˆ—è¡¨

#### **ä¿®å¤æ–¹æ¡ˆï¼ˆæ–°ç‰ˆï¼‰**ï¼š

```typescript
// âœ… æ–¹æ¡ˆ Aï¼šå¢åŠ å»¶è¿Ÿï¼ˆç®€å•ä½†ä¸å®Œç¾ï¼‰
setTimeout(() => loadPendingApplications(), 8000)  // 8 ç§’

// âœ… æ–¹æ¡ˆ Bï¼šè½®è¯¢æ£€æŸ¥ï¼ˆæ¨èï¼Œå·²å®ç°ï¼‰
const checkAndRefresh = async () => {
  const app = await api.query.marketMaker.applications(mmId)
  const status = app.unwrap().toJSON().status
  
  if (isActive(status)) {
    // çŠ¶æ€å·²æ›´æ–° âœ“
    loadPendingApplications()
    loadApprovedApplications()
  } else if (attempts < maxAttempts) {
    // çŠ¶æ€æœªæ›´æ–°ï¼Œç»§ç»­ç­‰å¾…
    setTimeout(checkAndRefresh, 3000)
  }
}

setTimeout(checkAndRefresh, 6000)  // é¦–æ¬¡æ£€æŸ¥å»¶è¿Ÿ 6 ç§’
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä¸»åŠ¨ç­‰å¾…çŠ¶æ€å˜æ›´
- âœ… æœ€å¤šè½®è¯¢ 5 æ¬¡ï¼ˆ6s + 3sÃ—4 = 18sï¼‰
- âœ… çŠ¶æ€ç¡®è®¤åç«‹å³åˆ·æ–°
- âœ… è¶…æ—¶æœ‰æ˜ç¡®æç¤º

---

### é”™è¯¯é€»è¾‘ 2ï¼šæœªæ¸…é™¤ selectedApp ç¼“å­˜ï¼ˆå·²ä¿®å¤ï¼‰

#### **é—®é¢˜ä»£ç ï¼ˆæ—§ç‰ˆï¼‰**ï¼š
```typescript
const handleApprove = async (mmId: number) => {
  await approve(mmId)
  
  // âŒ é”™è¯¯ï¼šæœªæ¸…é™¤ selectedApp
  // selectedApp ä»æŒ‡å‘è¢«æ‰¹å‡†çš„ç”³è¯·
  
  setTimeout(() => {
    loadPendingApplications()  // åˆ·æ–°åˆ—è¡¨
    // ä½† selectedApp ä»æ˜¾ç¤ºæ—§æ•°æ®ï¼
  }, 8000)
}
```

#### **é—®é¢˜åˆ†æ**ï¼š

```
çŠ¶æ€ï¼š
æ‰¹å‡†å‰ï¼š
  - pendingList: [ç”³è¯·#0]
  - selectedApp: ç”³è¯·#0ï¼ˆstatus: PendingReviewï¼‰

æ‰¹å‡†åï¼ˆ8ç§’ï¼‰ï¼š
  - pendingList: []  â† å·²åˆ·æ–°ï¼Œä¸åŒ…å«ç”³è¯·#0
  - selectedApp: ç”³è¯·#0ï¼ˆstatus: PendingReviewï¼‰â† âŒ æœªæ¸…é™¤ï¼

ç”¨æˆ·çœ‹åˆ°ï¼š
  - å·¦ä¾§ï¼šåˆ—è¡¨ä¸ºç©º âœ“
  - å³ä¾§ï¼šä»æ˜¾ç¤º"å¾…å®¡æ ¸" âŒ
```

**é”™è¯¯é€»è¾‘**ï¼š
1. æ‰¹å‡†ååˆ—è¡¨ä¼šåˆ·æ–°
2. åˆ—è¡¨ä¸å†åŒ…å«å·²æ‰¹å‡†çš„ç”³è¯·
3. ä½† `selectedApp` çŠ¶æ€æœªæ¸…é™¤
4. å³ä¾§è¯¦æƒ…åŒºåŸŸä»æ˜¾ç¤ºæ—§æ•°æ®
5. ç”¨æˆ·çœ‹åˆ°çš„æ˜¯ç¼“å­˜çš„"å¾…å®¡æ ¸"çŠ¶æ€

#### **ä¿®å¤æ–¹æ¡ˆï¼ˆæ–°ç‰ˆï¼‰**ï¼š

```typescript
const handleApprove = async (mmId: number) => {
  await approve(mmId)
  
  // âœ… ç«‹å³æ¸…é™¤é€‰ä¸­çŠ¶æ€
  setSelectedApp(null)
  
  // âœ… ä¹è§‚æ›´æ–°ï¼šç«‹å³ä»åˆ—è¡¨ç§»é™¤
  setPendingList(prev => prev.filter(item => item.mm_id !== mmId))
  
  // å»¶è¿Ÿåˆ·æ–°ç¡®è®¤
  setTimeout(checkAndRefresh, 6000)
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… ç”¨æˆ·ç«‹å³çœ‹åˆ°åé¦ˆï¼ˆè¯¦æƒ…åŒºæ¸…ç©ºï¼‰
- âœ… åˆ—è¡¨ç«‹å³æ›´æ–°ï¼ˆä¹è§‚æ›´æ–°ï¼‰
- âœ… è½®è¯¢ç¡®è®¤åå†åˆ·æ–°ï¼ˆåŒé‡ä¿é™©ï¼‰

---

### é”™è¯¯é€»è¾‘ 3ï¼šçŠ¶æ€ç­›é€‰ä¸å®Œæ•´ï¼ˆå·²ä¿®å¤ï¼‰

#### **é—®é¢˜ä»£ç ï¼ˆæ—§ç‰ˆï¼‰**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šä»…åˆ¤æ–­ä¸¤ç§æ ¼å¼
if (appData.status === 'PendingReview' || 
    appData.status?.pendingReview !== undefined) {
  pending.push(appData)
}
```

#### **é—®é¢˜åˆ†æ**ï¼š

Substrate æšä¸¾çš„ JSON åºåˆ—åŒ–æ ¼å¼å¯èƒ½æ˜¯ï¼š

| æ ¼å¼ | ç¤ºä¾‹ | æ—§åˆ¤æ–­ | æ–°åˆ¤æ–­ |
|------|------|--------|--------|
| å­—ç¬¦ä¸²ï¼ˆå¤§é©¼å³°ï¼‰ | `"PendingReview"` | âœ… åŒ¹é… | âœ… åŒ¹é… |
| å­—ç¬¦ä¸²ï¼ˆå°é©¼å³°ï¼‰ | `"pendingReview"` | âŒ é—æ¼ | âœ… åŒ¹é… |
| å¯¹è±¡ï¼ˆå¤§é©¼å³°é”®ï¼‰ | `{"PendingReview":null}` | âŒ é—æ¼ | âœ… åŒ¹é… |
| å¯¹è±¡ï¼ˆå°é©¼å³°é”®ï¼‰ | `{"pendingReview":null}` | âœ… åŒ¹é… | âœ… åŒ¹é… |
| æ•°å­—ï¼ˆæšä¸¾ç´¢å¼•ï¼‰ | `1` | âŒ é—æ¼ | âœ… åŒ¹é… |

**é”™è¯¯é€»è¾‘**ï¼š
- é“¾ä¸Šè¿”å› `"Active"` æˆ– `2`
- æ—§åˆ¤æ–­é€»è¾‘æ— æ³•è¯†åˆ«æ‰€æœ‰æ ¼å¼
- é”™è¯¯åœ°å°†å·²æ‰¹å‡†çš„ç”³è¯·åˆ¤æ–­ä¸ºå¾…å®¡æ ¸

#### **ä¿®å¤æ–¹æ¡ˆï¼ˆæ–°ç‰ˆï¼‰**ï¼š

```typescript
const isPendingReview = (status: any): boolean => {
  // 1. å­—ç¬¦ä¸²å½¢å¼ï¼ˆå¤§é©¼å³°ï¼‰
  if (status === 'PendingReview') return true
  
  // 2. å­—ç¬¦ä¸²å½¢å¼ï¼ˆå°é©¼å³°ï¼‰
  if (status === 'pendingReview') return true
  
  // 3. å¯¹è±¡å½¢å¼ï¼ˆå¤§é©¼å³°é”®ï¼‰
  if (typeof status === 'object' && status !== null) {
    if ('PendingReview' in status) return true
    if ('pendingReview' in status) return true
  }
  
  // 4. æ•°å­—å½¢å¼ï¼ˆæšä¸¾ç´¢å¼•ï¼šPendingReview = 1ï¼‰
  if (status === 1) return true
  
  return false
}

const isActive = (status: any): boolean => {
  if (status === 'Active') return true
  if (status === 'active') return true
  if (typeof status === 'object' && status !== null) {
    if ('Active' in status) return true
    if ('active' in status) return true
  }
  if (status === 2) return true  // Active çš„æšä¸¾ç´¢å¼•
  return false
}
```

---

## ğŸ“‹ é”™è¯¯é€»è¾‘æµç¨‹å›¾

### æ—§ç‰ˆé€»è¾‘ï¼ˆæœ‰Bugï¼‰

```
ç”¨æˆ·ç‚¹å‡»æ‰¹å‡†
    â”‚
    â”œâ”€ signAndSend('approve', [mmId])
    â”‚  â””â”€ é“¾ä¸Šï¼šstatus = Active âœ“
    â”‚
    â”œâ”€ ç­‰å¾… 2 ç§’ âŒï¼ˆå¤ªçŸ­ï¼‰
    â”‚
    â”œâ”€ loadPendingApplications()
    â”‚  â”œâ”€ æŸ¥è¯¢ applications(mmId)
    â”‚  â”‚  â””â”€ status = PendingReview âŒï¼ˆåŒºå—æœªç¡®è®¤ï¼‰
    â”‚  â”‚
    â”‚  â”œâ”€ åˆ¤æ–­ï¼šstatus === 'PendingReview'
    â”‚  â”‚  â””â”€ true âŒï¼ˆé”™è¯¯åˆ¤æ–­ï¼‰
    â”‚  â”‚
    â”‚  â””â”€ åŠ å…¥ pendingList âŒ
    â”‚
    â””â”€ ç”¨æˆ·çœ‹åˆ°ï¼šä»åœ¨å¾…å®¡åˆ—è¡¨ âŒ
```

### æ–°ç‰ˆé€»è¾‘ï¼ˆå·²ä¿®å¤ï¼‰

```
ç”¨æˆ·ç‚¹å‡»æ‰¹å‡†
    â”‚
    â”œâ”€ signAndSend('approve', [mmId])
    â”‚  â””â”€ é“¾ä¸Šï¼šstatus = Active âœ“
    â”‚
    â”œâ”€ ç«‹å³ä¹è§‚æ›´æ–°
    â”‚  â”œâ”€ setSelectedApp(null) âœ“
    â”‚  â””â”€ setPendingList(è¿‡æ»¤æ‰ mmId) âœ“
    â”‚
    â”œâ”€ ç”¨æˆ·çœ‹åˆ°ï¼š
    â”‚  â”œâ”€ è¯¦æƒ…åŒºåŸŸæ¸…ç©º âœ“
    â”‚  â””â”€ åˆ—è¡¨ç§»é™¤è¯¥é¡¹ âœ“
    â”‚
    â”œâ”€ ç­‰å¾… 6 ç§’ï¼ˆè‡³å°‘ä¸€ä¸ªåŒºå—ï¼‰
    â”‚
    â”œâ”€ ç¬¬ 1 æ¬¡æ£€æŸ¥çŠ¶æ€
    â”‚  â”œâ”€ æŸ¥è¯¢ applications(mmId)
    â”‚  â”œâ”€ status = Active âœ“
    â”‚  â”œâ”€ isActive(status) = true âœ“
    â”‚  â””â”€ åˆ·æ–°ä¸¤ä¸ªåˆ—è¡¨ âœ“
    â”‚
    â””â”€ ç”¨æˆ·çœ‹åˆ°ï¼š
       â”œâ”€ å¾…å®¡åˆ—è¡¨ï¼šä¸åŒ…å«è¯¥ç”³è¯· âœ“
       â””â”€ å·²å®¡æ ¸åˆ—è¡¨ï¼šåŒ…å«è¯¥ç”³è¯· âœ“
```

---

## ğŸ”¬ æ·±åº¦é”™è¯¯åˆ†æ

### é—®é¢˜åœºæ™¯é‡ç°

#### åœºæ™¯ 1ï¼šå¿«é€Ÿåˆ·æ–°å¯¼è‡´çš„çŠ¶æ€ä¸ä¸€è‡´

```
T0: æ‰¹å‡†æäº¤
T2: è‡ªåŠ¨åˆ·æ–°ï¼ˆæ—§ç‰ˆï¼‰
    â”œâ”€ åŒºå—é“¾ï¼šçŠ¶æ€æ­£åœ¨å˜æ›´ä¸­...
    â””â”€ æŸ¥è¯¢ç»“æœï¼šPendingReview âŒ

T6: åŒºå—ç¡®è®¤
    â””â”€ åŒºå—é“¾ï¼šçŠ¶æ€å·²å˜æ›´ä¸º Active âœ“

T10: ç”¨æˆ·æ‰‹åŠ¨åˆ·æ–°
     â””â”€ æŸ¥è¯¢ç»“æœï¼šActive âœ“
```

**ç»“è®º**ï¼šæ—¶æœºé—®é¢˜ï¼Œ2 ç§’å¤ªæ—©

#### åœºæ™¯ 2ï¼šReact çŠ¶æ€æ›´æ–°æ—¶åºé—®é¢˜

```typescript
// æ‰¹å‡†æˆåŠŸ
handleApprove(0)
  â”œâ”€ setTimeout(() => loadPendingApplications(), 8000)
  â”‚  
  â”œâ”€ ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢ Tab æˆ–åˆ·æ–°é¡µé¢
  â”‚  â””â”€ setTimeout è¢«æ¸…é™¤ âŒ
  â”‚
  â””â”€ åˆ·æ–°æœªæ‰§è¡Œ âŒ
```

**ç»“è®º**ï¼šsetTimeout å¯èƒ½è¢«æ¸…é™¤

#### åœºæ™¯ 3ï¼šç¼“å­˜å¯¼è‡´çš„æ˜¾ç¤ºé”™è¯¯

```typescript
// æ‰¹å‡†å
selectedApp = { mm_id: 0, status: 'PendingReview' }  // æ—§æ•°æ®

// åˆ—è¡¨åˆ·æ–°
pendingList = []  // ä¸åŒ…å« mmId=0

// ä½†ç”¨æˆ·ä»èƒ½çœ‹åˆ°
<Descriptions>
  <Item label="çŠ¶æ€">
    <Tag>{selectedApp.status}</Tag>  â† æ˜¾ç¤º PendingReview âŒ
  </Item>
</Descriptions>
```

**ç»“è®º**ï¼šselectedApp æœªæ¸…é™¤

---

## âœ… æ–°ç‰ˆä¿®å¤é€»è¾‘

### ä¿®å¤ 1ï¼šæ™ºèƒ½è½®è¯¢æœºåˆ¶

```typescript
// ä¸»åŠ¨ç­‰å¾…çŠ¶æ€å˜æ›´ï¼ˆæœ€å¤š 5 æ¬¡ï¼Œæ¯æ¬¡ 3 ç§’ï¼‰
ç¬¬ 1 æ¬¡ï¼ˆT6sï¼‰ï¼šæŸ¥è¯¢ â†’ PendingReview â†’ ç»§ç»­ç­‰å¾…
ç¬¬ 2 æ¬¡ï¼ˆT9sï¼‰ï¼šæŸ¥è¯¢ â†’ Active â†’ âœ… åˆ·æ–°åˆ—è¡¨
```

**å¥½å¤„**ï¼š
- âœ… é€‚åº”ä¸åŒçš„åŒºå—æ—¶é—´
- âœ… æœ€å¤šç­‰å¾… 18 ç§’ï¼ˆ6s + 3sÃ—4ï¼‰
- âœ… çŠ¶æ€ç¡®è®¤åç«‹å³å“åº”
- âœ… è¶…æ—¶æœ‰æ˜ç¡®æç¤º

### ä¿®å¤ 2ï¼šä¹è§‚æ›´æ–°ï¼ˆOptimistic Updateï¼‰

```typescript
// æ‰¹å‡†æˆåŠŸåç«‹å³æ›´æ–° UI
setSelectedApp(null)  // æ¸…ç©ºè¯¦æƒ…
setPendingList(prev => prev.filter(item => item.mm_id !== mmId))  // ç§»é™¤åˆ—è¡¨é¡¹
```

**å¥½å¤„**ï¼š
- âœ… ç”¨æˆ·ç«‹å³çœ‹åˆ°åé¦ˆ
- âœ… ä¸éœ€è¦ç­‰å¾…åŒºå—ç¡®è®¤
- âœ… å³ä½¿æŸ¥è¯¢å¤±è´¥ä¹Ÿèƒ½æ›´æ–° UI

### ä¿®å¤ 3ï¼šåŒåˆ—è¡¨åˆ·æ–°

```typescript
// åŒæ—¶åˆ·æ–°ä¸¤ä¸ªåˆ—è¡¨
await loadPendingApplications()  // å¾…å®¡åˆ—è¡¨
await loadApprovedApplications()  // å·²æ‰¹å‡†åˆ—è¡¨
```

**å¥½å¤„**ï¼š
- âœ… ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- âœ… ç”¨æˆ·å¯ä»¥ç«‹å³åœ¨"å·²å®¡æ ¸" Tab çœ‹åˆ°ç»“æœ
- âœ… é¿å…æ•°æ®ä¸åŒæ­¥

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯• 1ï¼šæ­£å¸¸æ‰¹å‡†æµç¨‹

```
æ­¥éª¤ï¼š
1. è®¿é—® #/gov/mm-review
2. ç‚¹å‡»ç”³è¯· #0
3. ç‚¹å‡»"æ‰¹å‡†"
4. è¾“å…¥å¯†ç ç­¾å
5. è§‚å¯Ÿæ§åˆ¶å°å’Œé¡µé¢

é¢„æœŸè¾“å‡ºï¼ˆæ§åˆ¶å°ï¼‰ï¼š
[æ‰¹å‡†] äº¤æ˜“å“ˆå¸Œ: 0x088fce8b...
[æ‰¹å‡†] mmId: 0
â³ ç­‰å¾… 6 ç§’...
[æ‰¹å‡†] ç¬¬ 1/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: Active
âœ… çŠ¶æ€å·²å˜æ›´ä¸º Activeï¼Œåˆ·æ–°åˆ—è¡¨
[å®¡æ ¸é¡µ] å¼€å§‹æŸ¥è¯¢ï¼ŒNextId: 1
[å®¡æ ¸é¡µ] ID=0, status= Active ç±»å‹: string
[å®¡æ ¸é¡µ] âœ— ID=0 éå¾…å®¡çŠ¶æ€ï¼Œè·³è¿‡
[å®¡æ ¸é¡µ] æŸ¥è¯¢å®Œæˆï¼Œæ‰¾åˆ° 0 ä¸ªå¾…å®¡ç”³è¯·
âœ… æ‰¹å‡†å·²ç”Ÿæ•ˆï¼åˆ—è¡¨å·²åˆ·æ–°

é¢„æœŸé¡µé¢è¡¨ç°ï¼š
T0: ç‚¹å‡»æ‰¹å‡†
T0+0.5s: è¯¦æƒ…åŒºåŸŸæ¸…ç©º âœ“
T0+0.5s: ç”³è¯·ä»åˆ—è¡¨ç§»é™¤ âœ“
T0+6s: ç¬¬ 1 æ¬¡çŠ¶æ€æ£€æŸ¥
T0+6s: çŠ¶æ€å·²å˜æ›´ï¼Œåˆ·æ–°åˆ—è¡¨ âœ“
T0+6s: æç¤º"æ‰¹å‡†å·²ç”Ÿæ•ˆ" âœ“
```

### æµ‹è¯• 2ï¼šçŠ¶æ€æ›´æ–°å»¶è¿Ÿ

```
æ­¥éª¤ï¼š
1. æ‰¹å‡†ç”³è¯·
2. è§‚å¯Ÿè½®è¯¢è¿‡ç¨‹

é¢„æœŸè¾“å‡ºï¼ˆæ§åˆ¶å°ï¼‰ï¼š
[æ‰¹å‡†] ç¬¬ 1/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: PendingReview  â† ä»æœªæ›´æ–°
â³ ç­‰å¾… 3 ç§’...
[æ‰¹å‡†] ç¬¬ 2/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: PendingReview  â† ä»æœªæ›´æ–°
â³ ç­‰å¾… 3 ç§’...
[æ‰¹å‡†] ç¬¬ 3/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: Active  â† å·²æ›´æ–° âœ“
âœ… çŠ¶æ€å·²å˜æ›´ä¸º Activeï¼Œåˆ·æ–°åˆ—è¡¨
```

### æµ‹è¯• 3ï¼šçŠ¶æ€å§‹ç»ˆä¸æ›´æ–°ï¼ˆé“¾ç«¯é—®é¢˜ï¼‰

```
é¢„æœŸè¾“å‡ºï¼ˆæ§åˆ¶å°ï¼‰ï¼š
[æ‰¹å‡†] ç¬¬ 1/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: PendingReview
...ï¼ˆè½®è¯¢ 5 æ¬¡ï¼‰
[æ‰¹å‡†] ç¬¬ 5/5 æ¬¡æ£€æŸ¥çŠ¶æ€...
[æ‰¹å‡†] é“¾ä¸ŠçŠ¶æ€: PendingReview  â† ä»æœªæ›´æ–°
âš ï¸ è¾¾åˆ°æœ€å¤§å°è¯•æ¬¡æ•°ï¼ŒçŠ¶æ€å¯èƒ½æœªæ›´æ–°
âš ï¸ æ‰¹å‡†æˆåŠŸä½†çŠ¶æ€æ›´æ–°å»¶è¿Ÿï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°æŒ‰é’®

è¯Šæ–­ï¼šé“¾ç«¯é—®é¢˜
åŸå› ï¼šapprove äº¤æ˜“å¯èƒ½å¤±è´¥ï¼ˆæƒé™/çŠ¶æ€/æ—¶é—´ï¼‰
```

---

## ğŸ¯ è¯Šæ–­å†³ç­–æ ‘

```
æ‰¹å‡†åä»æ˜¾ç¤ºå¾…å®¡æ ¸
    â”‚
    â”œâ”€ æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ [æ‰¹å‡†] æ—¥å¿—ï¼Ÿ
    â”‚   â”‚
    â”‚   â”œâ”€ æ—  â†’ æ–°ç‰ˆå‰ç«¯æœªéƒ¨ç½²
    â”‚   â”‚      â””â”€ æ¸…é™¤ç¼“å­˜ï¼ˆCtrl+Shift+Rï¼‰
    â”‚   â”‚
    â”‚   â””â”€ æœ‰ â†’ ç»§ç»­
    â”‚
    â”œâ”€ æ˜¯å¦æœ‰è½®è¯¢æ£€æŸ¥æ—¥å¿—ï¼Ÿ
    â”‚   â”‚
    â”‚   â”œâ”€ æ—  â†’ setTimeout å¯èƒ½è¢«æ¸…é™¤
    â”‚   â”‚      â””â”€ æ‰‹åŠ¨ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
    â”‚   â”‚
    â”‚   â””â”€ æœ‰ â†’ æŸ¥çœ‹é“¾ä¸ŠçŠ¶æ€
    â”‚       â”‚
    â”‚       â”œâ”€ Active â†’ å‰ç«¯åˆ·æ–°é€»è¾‘é—®é¢˜
    â”‚       â”‚          â””â”€ F5 åˆ·æ–°é¡µé¢
    â”‚       â”‚
    â”‚       â””â”€ PendingReview â†’ é“¾ç«¯é—®é¢˜
    â”‚                        â””â”€ æ£€æŸ¥äº¤æ˜“äº‹ä»¶
    â”‚                            â”‚
    â”‚                            â”œâ”€ ExtrinsicSuccess â†’ æœªçŸ¥é—®é¢˜
    â”‚                            â”‚
    â”‚                            â””â”€ ExtrinsicFailed â†’ æƒé™/çŠ¶æ€/æ—¶é—´é—®é¢˜
```

---

## ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”

| é¡¹ç›® | æ—§ç‰ˆ | æ–°ç‰ˆ |
|------|------|------|
| **åˆ·æ–°æ–¹å¼** | å›ºå®šå»¶è¿Ÿ 2s | è½®è¯¢æ£€æŸ¥ 6-18s |
| **çŠ¶æ€éªŒè¯** | âŒ æ—  | âœ… ä¸»åŠ¨éªŒè¯ |
| **ä¹è§‚æ›´æ–°** | âŒ æ—  | âœ… ç«‹å³ç§»é™¤ |
| **selectedApp** | âŒ ä¸æ¸…é™¤ | âœ… ç«‹å³æ¸…é™¤ |
| **åŒåˆ—è¡¨åˆ·æ–°** | âŒ ä»…å•åˆ—è¡¨ | âœ… åŒåˆ—è¡¨ |
| **è¶…æ—¶å¤„ç†** | âŒ æ— æç¤º | âœ… æ˜ç¡®æç¤º |
| **è°ƒè¯•æ—¥å¿—** | âš ï¸ ç®€å• | âœ… è¯¦ç»†å®Œæ•´ |

---

## ğŸš€ æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºå‘½ä»¤

```bash
cd /home/xiaodong/æ–‡æ¡£/memopark/memopark-dapp
npm run build
```

### éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æ„å»ºæ–‡ä»¶æ—¶é—´
ls -lh dist/assets/index-*.js

# åº”è¯¥æ˜¯æœ€æ–°æ—¶é—´ï¼ˆä»Šå¤©ï¼‰
```

### æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

```
Chrome: Ctrl+Shift+Rï¼ˆç¡¬åˆ·æ–°ï¼‰
æˆ–ï¼šF12 > Network > Disable cache
```

---

## ğŸ’¡ æœ€ç»ˆå»ºè®®

### ç«‹å³æ‰§è¡Œï¼ˆ3 æ­¥ï¼‰

#### æ­¥éª¤ 1ï¼šéªŒè¯é“¾ä¸ŠçŠ¶æ€

**æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ**ï¼š
```javascript
const api = window.polkadotApi
const app = await api.query.marketMaker.applications(0)  // æ›¿æ¢ä¸ºå®é™… mmId
const data = app.unwrap().toJSON()
console.log('é“¾ä¸ŠçŠ¶æ€:', data.status)
```

#### æ­¥éª¤ 2ï¼šæ¸…é™¤ç¼“å­˜å¹¶é‡æ–°åŠ è½½

```
Ctrl+Shift+R
```

#### æ­¥éª¤ 3ï¼šé‡æ–°æµ‹è¯•

```
1. è®¿é—® #/gov/mm-review
2. ç‚¹å‡»"åˆ·æ–°å¾…å®¡åˆ—è¡¨"
3. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—
4. æ‰¹å‡†ä¸€ä¸ªç”³è¯·
5. ç­‰å¾…è½®è¯¢å®Œæˆï¼ˆæœ€å¤š 18 ç§’ï¼‰
6. æŸ¥çœ‹åˆ—è¡¨æ˜¯å¦æ›´æ–°
```

---

## ğŸ“ å¦‚æœé—®é¢˜ä»å­˜åœ¨

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. âœ… æµè§ˆå™¨æ§åˆ¶å°æˆªå›¾ï¼ˆåŒ…å«æ‰€æœ‰ `[æ‰¹å‡†]` å’Œ `[å®¡æ ¸é¡µ]` æ—¥å¿—ï¼‰
2. âœ… é“¾ä¸ŠçŠ¶æ€æŸ¥è¯¢ç»“æœï¼ˆ`data.status` çš„å€¼ï¼‰
3. âœ… å‰ç«¯ç‰ˆæœ¬ç¡®è®¤ï¼ˆ`dist/assets/index-*.js` çš„æ—¶é—´æˆ³ï¼‰
4. âœ… æ˜¯å¦æ¸…é™¤äº†ç¼“å­˜

æˆ‘å°†æ ¹æ®å…·ä½“æƒ…å†µæä¾›è¿›ä¸€æ­¥çš„ä¿®å¤æ–¹æ¡ˆã€‚

---

**æ‰€æœ‰é”™è¯¯é€»è¾‘å·²åˆ†æå¹¶ä¿®å¤ï¼è½®è¯¢æ£€æŸ¥æœºåˆ¶å·²å®ç°ã€‚** ğŸ‰
