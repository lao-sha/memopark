# CreateMarketMakerPage 结构化注释添加指南

**日期**: 2025-10-29  
**目的**: 为未来的完整拆分标记代码结构

---

## 📋 建议添加的注释位置

### 1. 文件顶部（已有import之后）

```typescript
// ═══════════════════════════════════════════════════════════════════════════
// 📦 做市商申请页面 - 主组件
// ═══════════════════════════════════════════════════════════════════════════
//
// 文件状态: 🟡 待拆分 (2185行)
//
// TODO (Phase 2 - 完整拆分):
// - 提取质押阶段组件 (DepositStep.tsx)
// - 提取资料提交阶段组件 (SubmissionStep.tsx)
// - 提取审核状态组件 (ReviewStep.tsx)
// - 提取自定义Hooks (useMarketMakerApplication.ts)
// - 简化主容器到 ~200行
//
// 参考文档: docs/CreateMarketMakerPage-拆分设计.md
//
// ═══════════════════════════════════════════════════════════════════════════
```

### 2. 类型定义处

```typescript
// ───────────────────────────────────────────────────────────────────────────
// 📝 类型定义
// ───────────────────────────────────────────────────────────────────────────
//
// ⚠️ 注意: 这些类型已被提取到独立文件
// 新代码应使用: import { ApplicationDetails, MarketMakerConfig } from './types/marketMaker.types'
//
// TODO (Phase 2): 删除这里的类型定义，全部使用导入的类型
//
// ───────────────────────────────────────────────────────────────────────────

interface ApplicationDetails {
  // ... (保持现有代码)
}
```

### 3. 主组件开始处

```typescript
// ═══════════════════════════════════════════════════════════════════════════
// 🎯 主组件: CreateMarketMakerPage
// ═══════════════════════════════════════════════════════════════════════════

export default function CreateMarketMakerPage() {
  
  // ───────────────────────────────────────────────────────────────────────────
  // 🔧 状态管理
  // ───────────────────────────────────────────────────────────────────────────
  //
  // TODO (Phase 2): 提取到 useMarketMakerApplication hook
  //
  // ───────────────────────────────────────────────────────────────────────────
  
  const [form1] = Form.useForm()
  const [form2] = Form.useForm()
  // ... 其他状态
```

### 4. useEffect部分

```typescript
  // ───────────────────────────────────────────────────────────────────────────
  // 🔄 副作用 - 缓存验证
  // ───────────────────────────────────────────────────────────────────────────
  //
  // TODO (Phase 2): 提取到 useApplicationCache hook
  //
  // ───────────────────────────────────────────────────────────────────────────
  
  React.useEffect(() => {
    if (!api) return
    const autoValidateCache = async () => {
      // ... 缓存验证逻辑
    }
  }, [api])
```

### 5. Step 0 - 质押阶段

```typescript
  // ═══════════════════════════════════════════════════════════════════════════
  // 📋 Step 0: 质押阶段 UI
  // ═══════════════════════════════════════════════════════════════════════════
  //
  // TODO (Phase 2): 提取为独立组件
  //   - 组件名: <DepositStep />
  //   - 文件路径: components/maker-application/deposit/DepositStep.tsx
  //   - 预计行数: ~250行
  //
  // 包含功能:
  //   - 质押金额输入表单
  //   - 链上参数查询显示
  //   - 质押交易提交逻辑
  //   - 进度状态显示
  //
  // ═══════════════════════════════════════════════════════════════════════════
  
  if (current === 0) {
    return (
      <Card>
        {/* 质押阶段内容 */}
      </Card>
    )
  }
```

### 6. Step 1 - 资料提交阶段

```typescript
  // ═══════════════════════════════════════════════════════════════════════════
  // 📋 Step 1: 资料提交阶段 UI
  // ═══════════════════════════════════════════════════════════════════════════
  //
  // TODO (Phase 2): 拆分为多个子组件
  //   主组件: <SubmissionStep />
  //   子组件:
  //     - <BasicInfoForm />      (基本信息表单)
  //     - <FeeConfigForm />      (费率配置表单)
  //     - <DocumentUploadSection /> (文档上传)
  //     - <PaymentMethodsConfig />  (收款方式配置)
  //
  // 文件路径: components/maker-application/submission/
  // 预计总行数: ~850行 (拆分为4个组件后每个~200行)
  //
  // ═══════════════════════════════════════════════════════════════════════════
  
  if (current === 1) {
    return (
      <Card>
        {/* 资料提交内容 */}
      </Card>
    )
  }
```

### 7. Step 2 - 审核状态

```typescript
  // ═══════════════════════════════════════════════════════════════════════════
  // 📊 Step 2: 审核状态显示
  // ═══════════════════════════════════════════════════════════════════════════
  //
  // TODO (Phase 2): 提取为独立组件
  //   - 组件名: <ReviewStep />
  //   - 文件路径: components/maker-application/review/ReviewStep.tsx
  //   - 预计行数: ~200行
  //
  // 包含功能:
  //   - 申请详情展示
  //   - 审核进度显示
  //   - 状态刷新功能
  //
  // ═══════════════════════════════════════════════════════════════════================================================================
  
  if (current === 2) {
    return (
      <Card>
        {/* 审核状态内容 */}
      </Card>
    )
  }
```

---

## ✅ 实施方式

由于CreateMarketMakerPage.tsx文件过大(2185行)，手动添加注释风险较低但工作量较大。

### 建议方案:

1. ✅ **已完成**: 创建独立的类型文件
2. ✅ **已完成**: 创建ApplicationSteps组件
3. ✅ **已完成**: 创建详细的拆分设计文档
4. ✅ **当前**: 创建这个注释指南文档
5. ⏭️ **可选**: 在未来执行Phase 2时，按照本指南添加注释

### Phase 2执行时的步骤:

1. 在文件顶部添加总体说明注释
2. 在每个主要功能块添加分隔注释
3. 标记TODO和未来提取点
4. 添加组件拆分规划注释

---

## 📊 预期效果

添加注释后：
- ✅ 代码结构清晰
- ✅ 未来拆分方向明确
- ✅ 团队成员容易理解
- ✅ 降低拆分风险

---

## 🎯 总结

**Phase 1 (简化版) 完成内容**:
- ✅ 类型定义文件 (marketMaker.types.ts)
- ✅ ApplicationSteps组件
- ✅ 拆分设计文档
- ✅ 注释添加指南 (本文档)

**未来工作 (Phase 2)**:
- 按照本指南添加代码注释
- 执行完整的组件拆分
- 提取自定义Hooks
- 简化主容器组件

---

**📅 文档创建时间**: 2025-10-29  
**🎯 用途**: Phase 2执行时的参考指南

