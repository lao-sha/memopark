# Phase 1 立即行动计划

## 🎯 Phase 1 目标

**时间**：Week 1-2（10个工作日）
**目标**：完成 `pallet-deposits` 通用押金管理模块
**负责人**：后端开发团队

---

## 📅 今日任务（Day 1）

### 上午任务（4小时）

#### 任务1：创建模块基础结构（2小时）

**负责人**：开发者A

**步骤**：
1. ✅ 创建pallet目录结构
2. ✅ 配置Cargo.toml
3. ✅ 创建lib.rs骨架
4. ✅ 配置Runtime集成

**检查点**：
- [ ] 目录结构完整
- [ ] 编译通过：`cargo check -p pallet-deposits`

#### 任务2：定义数据结构（2小时）

**负责人**：开发者A

**步骤**：
1. ✅ 定义DepositPurpose枚举
2. ✅ 定义DepositStatus枚举
3. ✅ 定义DepositRecord结构体
4. ✅ 定义存储结构

**检查点**：
- [ ] 所有数据结构定义完成
- [ ] 编译通过

### 下午任务（4小时）

#### 任务3：实现reserve_deposit（2小时）

**负责人**：开发者A

**步骤**：
1. ✅ 实现基本逻辑
2. ✅ 添加错误处理
3. ✅ 添加事件发送
4. ✅ 编写文档注释

**检查点**：
- [ ] 功能实现完成
- [ ] 编译通过
- [ ] 文档注释完整

#### 任务4：编写首批单元测试（2小时）

**负责人**：开发者A

**步骤**：
1. ✅ 创建tests.rs
2. ✅ 创建mock.rs
3. ✅ 编写reserve_deposit测试
4. ✅ 测试通过

**检查点**：
- [ ] 至少3个测试用例
- [ ] 测试全部通过：`cargo test -p pallet-deposits`

---

## 📋 Week 1 详细任务分解

### Day 1-2: 核心结构（已规划，见上）

**目标**：完成基础架构和reserve_deposit

**交付物**：
- ✅ pallet-deposits基础结构
- ✅ reserve_deposit实现
- ✅ 基础测试通过

### Day 3: release_deposit + slash_deposit

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 实现release_deposit | 开发者A | 编译通过 |
| 下午前2h | 实现slash_deposit | 开发者A | 编译通过 |
| 下午后2h | 编写测试用例 | 开发者A | 测试通过 |

**交付物**：
- ✅ release_deposit完整实现
- ✅ slash_deposit完整实现
- ✅ 单元测试覆盖率>80%

### Day 4: 查询接口 + DepositManager Trait

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 实现查询接口 | 开发者A | 功能完成 |
| 下午前2h | 定义DepositManager trait | 开发者A | trait完成 |
| 下午后2h | 实现trait + 测试 | 开发者A | 测试通过 |

**交付物**：
- ✅ 查询接口完成
- ✅ DepositManager trait定义
- ✅ trait实现和测试

### Day 5: 代码审查 + 优化

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 代码自查 | 开发者A | 清理完成 |
| 下午前2h | 代码审查会议 | 全员 | 问题列表 |
| 下午后2h | 修复审查问题 | 开发者A | 修复完成 |

**交付物**：
- ✅ 代码审查通过
- ✅ 所有问题修复
- ✅ 测试覆盖率>85%

---

## 📋 Week 2 详细任务分解

### Day 6-7: 动态定价策略

**Day 6 任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 定义DepositPolicy trait | 开发者A | trait完成 |
| 下午前2h | 实现USD锚定策略 | 开发者A | 基础实现 |
| 下午后2h | 集成pallet-pricing | 开发者A | 集成完成 |

**Day 7 任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 实现倍数计算表 | 开发者A | 倍数表完成 |
| 下午前2h | 编写动态定价测试 | 开发者A | 测试完成 |
| 下午后2h | 边界测试 + mock | 开发者A | 测试通过 |

**交付物**：
- ✅ DepositPolicy trait完成
- ✅ USD锚定策略实现
- ✅ pricing集成完成
- ✅ 动态定价测试通过

### Day 8: Runtime集成

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 配置runtime/Cargo.toml | 开发者A | 依赖配置 |
| 下午前2h | 实现Config | 开发者A | Config完成 |
| 下午后2h | construct_runtime集成 | 开发者A | 编译通过 |

**交付物**：
- ✅ Runtime配置完成
- ✅ 编译通过
- ✅ 无警告

### Day 9: 本地测试链验证

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 启动测试链 | 开发者A | 节点运行 |
| 下午前2h | 手动功能测试 | 开发者A | 功能验证 |
| 下午后2h | 编写测试脚本 | 开发者A | 脚本完成 |

**交付物**：
- ✅ 测试链正常运行
- ✅ 所有功能验证通过
- ✅ 测试脚本完成

### Day 10: 文档 + 总结

**任务**：

| 时间 | 任务 | 负责人 | 检查点 |
|-----|------|--------|--------|
| 上午 | 编写README | 开发者A | 文档完成 |
| 下午前2h | 编写API文档 | 开发者A | 文档完成 |
| 下午后2h | Phase 1总结会 | 全员 | 报告完成 |

**交付物**：
- ✅ README.md完成
- ✅ API文档完成
- ✅ Phase 1总结报告

---

## 🏗️ 今日立即开始：创建pallet-deposits

### Step 1: 创建目录结构（10分钟）

```bash
cd /home/xiaodong/文档/stardust
mkdir -p pallets/deposits/src
cd pallets/deposits
```

### Step 2: 创建Cargo.toml（已准备好）

基础配置已准备，待创建。

### Step 3: 创建lib.rs骨架（已准备好）

核心代码结构已准备，待创建。

### Step 4: 创建测试文件（已准备好）

mock.rs和tests.rs已准备，待创建。

---

## ✅ 今日成功标准

### 必须完成（P0）

- [ ] pallet-deposits目录结构创建
- [ ] Cargo.toml配置完成
- [ ] lib.rs骨架编译通过
- [ ] 数据结构定义完成
- [ ] reserve_deposit基础实现
- [ ] 至少1个单元测试通过

### 建议完成（P1）

- [ ] reserve_deposit完整实现（含错误处理）
- [ ] 3个以上单元测试
- [ ] 文档注释完整

### 可选完成（P2）

- [ ] 开始release_deposit实现
- [ ] 性能优化考虑

---

## 📊 进度追踪

### 实时进度看板

| 任务 | 状态 | 负责人 | 开始时间 | 完成时间 |
|-----|------|--------|---------|---------|
| 创建目录结构 | ⏳ 进行中 | 开发者A | - | - |
| 配置Cargo.toml | 🔲 待开始 | 开发者A | - | - |
| 定义数据结构 | 🔲 待开始 | 开发者A | - | - |
| reserve_deposit | 🔲 待开始 | 开发者A | - | - |
| 单元测试 | 🔲 待开始 | 开发者A | - | - |

### 每日站会（15分钟）

**时间**：每天上午10:00

**议程**：
1. 昨天完成了什么？
2. 今天计划做什么？
3. 遇到什么阻碍？

---

## 🚨 风险与应对

### 当前识别的风险

| 风险 | 影响 | 概率 | 应对措施 | 负责人 |
|-----|------|------|---------|--------|
| trait设计不合理 | 高 | 中 | 提前设计评审 | 架构师 |
| pricing集成复杂 | 中 | 中 | Week 2再集成 | 开发者A |
| 测试不充分 | 高 | 低 | 每天写测试 | 开发者A |
| 进度延期 | 中 | 中 | 每日追踪 | PM |

---

## 📞 沟通渠道

### 紧急联系

- **技术问题**：架构师（Slack/企业微信）
- **进度问题**：项目经理
- **资源问题**：团队Leader

### 日常协作

- **代码评审**：GitHub PR
- **问题跟踪**：GitHub Issues
- **文档协作**：项目Wiki

---

## 📚 参考资料

### 必读文档

1. [完整设计方案](./押金与申诉治理系统-完整设计方案.md) - pallet-deposits详细设计
2. [实施路线图](./押金与申诉治理系统-实施路线图.md) - Week 1-2计划
3. [测试方案](./押金与申诉治理系统-测试方案.md) - 单元测试要求

### Substrate官方文档

- [Pallet Development](https://docs.substrate.io/build/custom-pallets/)
- [Storage](https://docs.substrate.io/build/runtime-storage/)
- [Currency Trait](https://docs.substrate.io/build/origins/)

---

## 🎉 里程碑庆祝

### Week 1里程碑

- 🎯 完成pallet-deposits核心功能
- 🧪 单元测试覆盖率>85%
- 📝 基础文档完成

**庆祝方式**：团队下午茶 ☕

### Week 2里程碑

- 🎯 完成动态定价集成
- 🎯 Runtime集成完成
- 🎯 测试链验证通过

**庆祝方式**：团队聚餐 🍕

---

**现在开始创建pallet-deposits！** 🚀

下一步：立即执行Step 1-4，创建基础代码结构。

