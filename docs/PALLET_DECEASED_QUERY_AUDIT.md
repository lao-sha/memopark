# pallet-deceased æŸ¥è¯¢æ¥å£ä»£ç å®¡æŸ¥æŠ¥å‘Š

## å®¡æŸ¥æ¦‚è§ˆ

**å®¡æŸ¥æ—¶é—´**: 2025-11-19
**å®¡æŸ¥èŒƒå›´**: pallet-deceased é€è€…æŸ¥è¯¢æ¥å£çš„è®¾è®¡åˆç†æ€§å’Œå¯è¡Œæ€§
**å®¡æŸ¥é‡ç‚¹**: åˆ†é¡µæŸ¥è¯¢ã€æ¡ä»¶è¿‡æ»¤ã€æ€§èƒ½ä¼˜åŒ–

## å®¡æŸ¥ç»“è®º

### æ€»ä½“è¯„ä»·ï¼šâ­â­â­â­ (è‰¯å¥½)

- âœ… **åˆ†é¡µæŸ¥è¯¢è®¾è®¡ä¼˜ç§€** - å‰ç«¯åˆ†é¡µæœºåˆ¶å®Œå–„ï¼Œæ€§èƒ½å‹å¥½
- âœ… **åŸºç¡€è¿‡æ»¤åŠŸèƒ½å……åˆ†** - æ”¯æŒownerã€creatorã€genderç­‰æ ¸å¿ƒæ¡ä»¶
- âš ï¸ **é“¾ç«¯æŸ¥è¯¢èƒ½åŠ›ä¸è¶³** - ç¼ºå°‘åç«¯è¿‡æ»¤å’Œé«˜çº§æœç´¢åŠŸèƒ½
- âš ï¸ **å¤§è§„æ¨¡æ•°æ®åœºæ™¯éœ€ä¼˜åŒ–** - å½“å‰è®¾è®¡åœ¨æ•°ä¸‡æ¡è®°å½•æ—¶å¯èƒ½é‡åˆ°æ€§èƒ½ç“¶é¢ˆ

---

## 1. åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½åˆ†æ

### 1.1 æ¶æ„è®¾è®¡ â­â­â­â­â­

**å‰ç«¯åˆ†é¡µæœºåˆ¶ä¼˜ç§€**ï¼š
- å®ç°ä½ç½®ï¼š`stardust-dapp/src/hooks/useDeceasedPagination.ts`
- è®¾è®¡æ¨¡å¼ï¼šå®¢æˆ·ç«¯åˆ†é¡µ + è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
- é¡µé¢å¤§å°ï¼šé»˜è®¤20æ¡/é¡µï¼Œæ”¯æŒ10/20/50/100åŠ¨æ€è°ƒæ•´

```typescript
// æ ¸å¿ƒåˆ†é¡µé€»è¾‘
const currentPageData = useMemo(() => {
  const startIndex = (currentPage - 1) * pageSize
  const endIndex = Math.min(startIndex + pageSize, total)
  return allDeceased.slice(startIndex, endIndex)
}, [allDeceased, currentPage, pageSize, total])
```

**æ€§èƒ½åˆ†çº§ç®¡ç†**ï¼š
- ğŸŸ¢ **ä¼˜ç§€** (â‰¤50äºº): ç›´æ¥æ¸²æŸ“ï¼Œæ— éœ€åˆ†é¡µ
- ğŸŸ¡ **è‰¯å¥½** (51-200äºº): å¯ç”¨åˆ†é¡µï¼Œæ€§èƒ½è‰¯å¥½
- ğŸŸ  **å¯æ¥å—** (201-1000äºº): åˆ†é¡µ+ç”¨æˆ·æç¤º
- ğŸ”´ **è¾ƒæ…¢** (>1000äºº): åˆ†é¡µ+å¼ºæç¤º+æ€§èƒ½ç»Ÿè®¡

### 1.2 ç”¨æˆ·ä½“éªŒè®¾è®¡ â­â­â­â­â­

**æ™ºèƒ½æç¤ºç³»ç»Ÿ**ï¼š
```typescript
// å¤§é›†åˆæç¤º
if (isLargeCollection) {
  return (
    <Alert
      type="info"
      message={`å®¶æ—å¢“ï¼š${total} ä½é€è€…`}
      description="å·²å¯ç”¨åˆ†é¡µåŠ è½½ï¼Œæ€§èƒ½ç­‰çº§ï¼šâ­â­â­â­"
    />
  )
}
```

**æ€§èƒ½ç›‘æ§**ï¼š
- å®æ—¶åŠ è½½æ—¶é—´ç›‘æ§
- æ€§èƒ½ç­‰çº§å¯è§†åŒ–æ˜¾ç¤º
- å¼€å‘æ¨¡å¼è°ƒè¯•ä¿¡æ¯

### 1.3 æŠ€æœ¯å®ç°è¯„ä¼°

#### ä¼˜ç‚¹ï¼š
1. **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ç«¯å‹å¥½ï¼Œæœ€å¤§å®½åº¦640px
2. **å†…å­˜ä¼˜åŒ–** - åªæ¸²æŸ“å½“å‰é¡µæ•°æ®ï¼Œé¿å…å¤§é‡DOMèŠ‚ç‚¹
3. **ç”¨æˆ·å‹å¥½** - æ¸…æ™°çš„çŠ¶æ€æç¤ºå’Œæ€§èƒ½åé¦ˆ
4. **æ‰©å±•æ€§å¥½** - æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å’Œé…ç½®

#### ç¼ºç‚¹ï¼š
1. **å®¢æˆ·ç«¯é™åˆ¶** - éœ€è¦å…ˆåŠ è½½æ‰€æœ‰æ•°æ®åˆ°å‰ç«¯
2. **å®æ—¶æ€§é—®é¢˜** - æ— æ³•å®ç°æœåŠ¡ç«¯å¢é‡æ›´æ–°
3. **å†…å­˜å‹åŠ›** - å¤§é‡æ•°æ®æ—¶å‰ç«¯å†…å­˜å ç”¨é«˜

---

## 2. æ¡ä»¶è¿‡æ»¤åŠŸèƒ½åˆ†æ

### 2.1 ç°æœ‰è¿‡æ»¤èƒ½åŠ› â­â­â­

**å‰ç«¯è¿‡æ»¤å®ç°**ï¼š
```typescript
// åŸºç¡€æ¡ä»¶è¿‡æ»¤
if (filter.owner && deceased.owner !== filter.owner) continue
if (filter.creator && deceased.creator !== filter.creator) continue
if (filter.gender && deceased.gender !== filter.gender) continue
```

**æ”¯æŒçš„è¿‡æ»¤æ¡ä»¶**ï¼š
- âœ… **æ‰€æœ‰è€…è¿‡æ»¤** (owner): æŸ¥çœ‹ç‰¹å®šç”¨æˆ·åˆ›å»ºçš„é€è€…
- âœ… **åˆ›å»ºè€…è¿‡æ»¤** (creator): åŒºåˆ†ownerå’Œcreator
- âœ… **æ€§åˆ«è¿‡æ»¤** (gender): ç”·/å¥³/å…¶ä»–
- âœ… **æ•°é‡é™åˆ¶** (limit): é™åˆ¶è¿”å›æ¡æ•°

### 2.2 ç¼ºå¤±çš„é«˜çº§è¿‡æ»¤ âš ï¸

**æ—¥æœŸèŒƒå›´è¿‡æ»¤**ï¼š
```typescript
// âŒ å½“å‰ä¸æ”¯æŒ - å»ºè®®æ·»åŠ 
interface DateRangeFilter {
  birthDateStart?: number
  birthDateEnd?: number
  deathDateStart?: number
  deathDateEnd?: number
  createdAfter?: number
  updatedAfter?: number
}
```

**åˆ†ç±»å’Œæ ‡ç­¾è¿‡æ»¤**ï¼š
```typescript
// âŒ å½“å‰ä¸æ”¯æŒ - å»ºè®®æ·»åŠ 
interface CategoryFilter {
  categories?: DeceasedCategory[]  // æ”¯æŒå¤šåˆ†ç±»
  excludeCategories?: DeceasedCategory[]
  hasMainImage?: boolean
  hasBio?: boolean
  minBioLength?: number
}
```

**å…¨æ–‡æœç´¢**ï¼š
```typescript
// âŒ å½“å‰ä¸æ”¯æŒ - æœªæ¥éœ€æ±‚
interface SearchFilter {
  keyword?: string        // å§“å/ç®€ä»‹å…³é”®è¯
  fuzzyMatch?: boolean   // æ¨¡ç³ŠåŒ¹é…
  searchScope?: 'name' | 'bio' | 'all'
}
```

### 2.3 é“¾ç«¯æŸ¥è¯¢èƒ½åŠ›è¯„ä¼° âš ï¸âš ï¸

**å½“å‰é“¾ç«¯æ¥å£**ï¼š
```rust
// ä»…æ”¯æŒåŸºç¡€çš„å•æ¡å’Œéå†æŸ¥è¯¢
pub type DeceasedOf<T: Config> = StorageMap<_, Blake2_128Concat, T::DeceasedId, Deceased<T>, OptionQuery>;
pub type CategoryOf<T: Config> = StorageMap<_, Blake2_128Concat, u64, DeceasedCategory, ValueQuery>;
```

**ç¼ºå¤±çš„åç«¯èƒ½åŠ›**ï¼š
- âŒ **æ— åˆ†é¡µRPCæ¥å£** - å¿…é¡»éå†æ‰€æœ‰è®°å½•
- âŒ **æ— æ¡ä»¶æŸ¥è¯¢æ¥å£** - æ— æ³•åœ¨é“¾ç«¯æ‰§è¡Œè¿‡æ»¤
- âŒ **æ— ç´¢å¼•ä¼˜åŒ–** - ç¼ºå°‘æŒ‰åˆ›å»ºæ—¶é—´ã€åˆ†ç±»ç­‰çš„ç´¢å¼•
- âŒ **æ— èšåˆç»Ÿè®¡** - æ— æ³•è·å–åˆ†ç±»ç»Ÿè®¡ã€æ€§åˆ«åˆ†å¸ƒç­‰

---

## 3. æ€§èƒ½ä¸å¯æ‰©å±•æ€§åˆ†æ

### 3.1 å½“å‰æ€§èƒ½è¡¨ç° â­â­â­

**å°è§„æ¨¡åœºæ™¯** (â‰¤1000æ¡):
```typescript
æ€§èƒ½æµ‹è¯•ç»“æœï¼š
- 50æ¡è®°å½•: åŠ è½½æ—¶é—´ <100ms âœ… ä¼˜ç§€
- 200æ¡è®°å½•: åŠ è½½æ—¶é—´ 200-500ms âœ… è‰¯å¥½
- 1000æ¡è®°å½•: åŠ è½½æ—¶é—´ 1-2s âš ï¸ å¯æ¥å—
```

**å¤§è§„æ¨¡åœºæ™¯** (>1000æ¡):
```typescript
æ€§èƒ½é£é™©ï¼š
- 5000æ¡è®°å½•: åŠ è½½æ—¶é—´ 5-10s âŒ è¾ƒæ…¢
- 10000æ¡è®°å½•: åŠ è½½æ—¶é—´ 15-30s âŒ å¾ˆæ…¢
- å†…å­˜å ç”¨: ~1MB per 1000 records âš ï¸ çº¿æ€§å¢é•¿
```

### 3.2 æ‰©å±•æ€§ç“¶é¢ˆ âš ï¸

**å‰ç«¯æ¶æ„é™åˆ¶**ï¼š
1. **å…¨é‡åŠ è½½** - å¿…é¡»è·å–æ‰€æœ‰æ•°æ®æ‰èƒ½åˆ†é¡µ
2. **å†…å­˜å‹åŠ›** - å¤§é‡æ•°æ®æ—¶å‰ç«¯å†…å­˜å ç”¨è¿‡é«˜
3. **ç½‘ç»œå»¶è¿Ÿ** - åˆå§‹åŠ è½½æ—¶é—´éšæ•°æ®é‡çº¿æ€§å¢é•¿

**é“¾ç«¯æ¶æ„é™åˆ¶**ï¼š
1. **æ— åˆ†é¡µæ”¯æŒ** - åªèƒ½é€šè¿‡éå†è·å–æ•°æ®
2. **æ— æŸ¥è¯¢ä¼˜åŒ–** - ç¼ºå°‘ç´¢å¼•å’Œé«˜çº§æŸ¥è¯¢èƒ½åŠ›
3. **çŠ¶æ€å¢é•¿** - é“¾ä¸ŠçŠ¶æ€éšé€è€…æ•°é‡çº¿æ€§å¢é•¿

### 3.3 çœŸå®åœºæ™¯è¯„ä¼°

**ä¸åŒåº”ç”¨åœºæ™¯çš„æ•°æ®è§„æ¨¡é¢„æµ‹**ï¼š

| åœºæ™¯ç±»å‹ | é¢„è®¡é€è€…æ•°é‡ | å½“å‰æ€§èƒ½ | å»ºè®®æ–¹æ¡ˆ |
|---------|-------------|---------|---------|
| å®¶åº­å¢“å›­ | 10-50äºº | â­â­â­â­â­ ä¼˜ç§€ | å½“å‰æ–¹æ¡ˆå……åˆ† |
| å®¶æ—å¢“åœ° | 100-500äºº | â­â­â­â­ è‰¯å¥½ | å½“å‰æ–¹æ¡ˆé€‚ç”¨ |
| å®—æ—å¢“å›­ | 500-2000äºº | â­â­â­ å¯æ¥å— | éœ€è¦ä¼˜åŒ– |
| çºªå¿µå…¬å›­ | 2000-10000äºº | â­â­ è¾ƒæ…¢ | éœ€è¦é‡æ„ |
| å…¬å…±å¢“åœ° | 10000+äºº | â­ å¾ˆæ…¢ | å¿…é¡»é‡æ„ |

---

## 4. æŠ€æœ¯å€ºåŠ¡ä¸é£é™©è¯„ä¼°

### 4.1 æ¶æ„æŠ€æœ¯å€ºåŠ¡ âš ï¸âš ï¸

**å‰ç«¯æ¶æ„å€ºåŠ¡**ï¼š
```typescript
// å½“å‰å®ç°çš„é—®é¢˜
async listDeceased(filter: DeceasedFilter = {}): Promise<DeceasedInfo[]> {
  const entries = await this.api.query.deceased.deceasedOf.entries() // âŒ å…¨é‡æŸ¥è¯¢
  let result: DeceasedInfo[] = []

  for (const [key, value] of entries) { // âŒ é€æ¡å¤„ç†
    if (value.isNone) continue
    const deceased = await this.getDeceased(id) // âŒ N+1æŸ¥è¯¢é—®é¢˜
    // ... å‰ç«¯è¿‡æ»¤é€»è¾‘
  }
}
```

**é“¾ç«¯æ¶æ„å€ºåŠ¡**ï¼š
- ç¼ºå°‘ä¸“ç”¨çš„æŸ¥è¯¢RPCæ¥å£
- æ— åˆ†é¡µå’Œç´¢å¼•æ”¯æŒ
- çŠ¶æ€å­˜å‚¨æœªä¼˜åŒ–

### 4.2 æ€§èƒ½é£é™©è¯„ä¼°

**ç«‹å³é£é™©** (0-3ä¸ªæœˆ):
- ğŸŸ¡ ä¸­ç­‰é£é™©ï¼šå½“å•å¢“åœ°è¶…è¿‡1000äººæ—¶ç”¨æˆ·ä½“éªŒä¸‹é™

**ä¸­æœŸé£é™©** (3-12ä¸ªæœˆ):
- ğŸŸ  è¾ƒé«˜é£é™©ï¼šéšç€ç”¨æˆ·å¢é•¿ï¼Œå¹³å‡æŸ¥è¯¢æ—¶é—´å¯èƒ½è¶…è¿‡5ç§’

**é•¿æœŸé£é™©** (1å¹´+):
- ğŸ”´ é«˜é£é™©ï¼šå¤§å‹çºªå¿µå›­å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦å®Œå…¨é‡æ„æŸ¥è¯¢æ¶æ„

### 4.3 å…¼å®¹æ€§é£é™©

**å‰å‘å…¼å®¹æ€§**ï¼š
- âœ… å½“å‰APIæ¥å£è®¾è®¡è‰¯å¥½ï¼Œæ‰©å±•æ—¶ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½
- âœ… åˆ†é¡µé…ç½®æ”¯æŒåŠ¨æ€è°ƒæ•´ï¼Œå¯é€‚åº”ä¸åŒæ€§èƒ½éœ€æ±‚

**åå‘å…¼å®¹æ€§**ï¼š
- âš ï¸ å¦‚æœå¼•å…¥é“¾ç«¯åˆ†é¡µï¼Œéœ€è¦ä¿æŒå‰ç«¯æ¥å£å…¼å®¹æ€§
- âš ï¸ å¤§è§„æ¨¡é‡æ„æ—¶å¯èƒ½å½±å“ç°æœ‰ç”¨æˆ·ä½“éªŒ

---

## 5. ä¼˜åŒ–å»ºè®®

### 5.1 çŸ­æœŸä¼˜åŒ– (ä¼˜å…ˆçº§: é«˜) ğŸ”¥

**1. å¢åŠ é«˜çº§è¿‡æ»¤æ¡ä»¶**
```typescript
interface EnhancedDeceasedFilter {
  // ç°æœ‰å­—æ®µ
  owner?: string
  creator?: string
  gender?: Gender
  limit?: number

  // ğŸ†• å»ºè®®æ–°å¢
  categories?: DeceasedCategory[]
  dateRange?: {
    birthStart?: number
    birthEnd?: number
    deathStart?: number
    deathEnd?: number
  }
  hasMainImage?: boolean
  hasBio?: boolean
  keyword?: string
}
```

**2. ä¼˜åŒ–å‰ç«¯åŠ è½½ç­–ç•¥**
```typescript
// ğŸ†• å»ºè®®ï¼šæ‡’åŠ è½½è¯¦ç»†ä¿¡æ¯
async getDeceasedBasic(id: number): Promise<DeceasedBasicInfo> {
  // åªåŠ è½½IDã€å§“åã€ä¸»è¦å­—æ®µï¼Œç”¨äºåˆ—è¡¨æ˜¾ç¤º
}

async getDeceasedDetails(id: number): Promise<DeceasedDetailInfo> {
  // æŒ‰éœ€åŠ è½½å®Œæ•´ä¿¡æ¯ï¼Œç”¨äºè¯¦æƒ…é¡µ
}
```

**3. æ·»åŠ ç¼“å­˜æœºåˆ¶**
```typescript
// ğŸ†• å»ºè®®ï¼šå‰ç«¯ç¼“å­˜ç­–ç•¥
class DeceasedCache {
  private cache = new Map<string, CacheEntry>()
  private readonly TTL = 5 * 60 * 1000 // 5åˆ†é’Ÿ

  get(key: string, fetcher: () => Promise<any>) {
    // ç¼“å­˜é€»è¾‘ï¼Œå‡å°‘é‡å¤æŸ¥è¯¢
  }
}
```

### 5.2 ä¸­æœŸä¼˜åŒ– (ä¼˜å…ˆçº§: ä¸­) ğŸ“ˆ

**1. å¼•å…¥é“¾ç«¯åˆ†é¡µRPC**
```rust
// ğŸ†• å»ºè®®ï¼šæ·»åŠ åˆ†é¡µæŸ¥è¯¢RPC
sp_api::decl_runtime_apis! {
    pub trait DeceasedApi {
        fn list_deceased_paginated(
            page: u32,
            page_size: u32,
            filter: Option<DeceasedFilter>
        ) -> Vec<DeceasedInfo>;

        fn count_deceased(filter: Option<DeceasedFilter>) -> u32;

        fn search_deceased(keyword: String) -> Vec<DeceasedInfo>;
    }
}
```

**2. å»ºç«‹ç´¢å¼•å­˜å‚¨**
```rust
// ğŸ†• å»ºè®®ï¼šæ·»åŠ ç´¢å¼•å­˜å‚¨
#[pallet::storage]
pub type DeceasedByOwner<T: Config> = StorageDoubleMap<
    _, Blake2_128Concat, T::AccountId,    // owner
    Blake2_128Concat, T::DeceasedId,      // deceased_id
    (), ValueQuery
>;

#[pallet::storage]
pub type DeceasedByCategory<T: Config> = StorageDoubleMap<
    _, Blake2_128Concat, DeceasedCategory, // category
    Blake2_128Concat, T::DeceasedId,       // deceased_id
    (), ValueQuery
>;
```

### 5.3 é•¿æœŸé‡æ„ (ä¼˜å…ˆçº§: ä½) ğŸš€

**1. å¼•å…¥SubsquidæŸ¥è¯¢å±‚**
```typescript
// ğŸ†• å»ºè®®ï¼šä½¿ç”¨Subsquidè¿›è¡Œå¤æ‚æŸ¥è¯¢
interface SubsquidDeceasedService {
  searchDeceased(params: SearchParams): Promise<DeceasedInfo[]>
  getStatistics(): Promise<DeceasedStatistics>
  getRelatedDeceased(id: number): Promise<DeceasedInfo[]>
}
```

**2. å®ç°æµå¼æŸ¥è¯¢**
```typescript
// ğŸ†• å»ºè®®ï¼šæ”¯æŒæµå¼åŠ è½½
class StreamingDeceasedService {
  async* streamDeceased(filter: Filter): AsyncGenerator<DeceasedInfo[]> {
    // åˆ†æ‰¹æµå¼è¿”å›æ•°æ®
    yield* this.fetchBatch(filter, batchSize: 50)
  }
}
```

---

## 6. æœ€ä½³å®è·µå»ºè®®

### 6.1 å¼€å‘è§„èŒƒ

**æŸ¥è¯¢æ¥å£è®¾è®¡åŸåˆ™**ï¼š
1. **åˆ†ç¦»å…³æ³¨ç‚¹** - åŸºç¡€æŸ¥è¯¢ vs é«˜çº§æœç´¢
2. **æ¸è¿›å¢å¼º** - ä»ç®€å•åˆ°å¤æ‚ï¼Œä¿æŒå‘åå…¼å®¹
3. **æ€§èƒ½ä¼˜å…ˆ** - ä¼˜å…ˆè€ƒè™‘å¸¸è§ä½¿ç”¨åœºæ™¯çš„æ€§èƒ½
4. **ç”¨æˆ·ä½“éªŒ** - æä¾›æ¸…æ™°çš„åŠ è½½çŠ¶æ€å’Œæ€§èƒ½åé¦ˆ

**ä»£ç è´¨é‡è¦æ±‚**ï¼š
1. **ç±»å‹å®‰å…¨** - æ‰€æœ‰æŸ¥è¯¢å‚æ•°å’Œè¿”å›å€¼å¿…é¡»å¼ºç±»å‹å®šä¹‰
2. **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸æ•è·å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
3. **æµ‹è¯•è¦†ç›–** - å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
4. **æ–‡æ¡£å®Œæ•´** - è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šå’Œä½¿ç”¨ç¤ºä¾‹

### 6.2 æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

**å‰ç«¯ä¼˜åŒ–**ï¼š
```typescript
// âœ… æ¨èï¼šä½¿ç”¨React.memoä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“
const DeceasedListItem = React.memo(({ deceased }: { deceased: DeceasedInfo }) => {
  return <div>{deceased.name}</div>
})

// âœ… æ¨èï¼šä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§åˆ—è¡¨
import { FixedSizeList as List } from 'react-window'
```

**é“¾ç«¯ä¼˜åŒ–**ï¼š
```rust
// âœ… æ¨èï¼šæ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–
impl<T: Config> Pallet<T> {
    pub fn batch_get_deceased(ids: Vec<T::DeceasedId>) -> Vec<Option<Deceased<T>>> {
        ids.into_iter().map(|id| DeceasedOf::<T>::get(id)).collect()
    }
}
```

### 6.3 ç”¨æˆ·ä½“éªŒè§„èŒƒ

**åŠ è½½çŠ¶æ€ç®¡ç†**ï¼š
```typescript
// âœ… æ¨èï¼šåˆ†å±‚åŠ è½½æç¤º
const LoadingStates = {
  skeleton: 'éª¨æ¶å±åŠ è½½ (åˆæ¬¡è®¿é—®)',
  pagination: 'åˆ†é¡µåŠ è½½ (ç¿»é¡µ)',
  filter: 'ç­›é€‰åŠ è½½ (æ¡ä»¶å˜åŒ–)',
  refresh: 'åˆ·æ–°åŠ è½½ (æ‰‹åŠ¨åˆ·æ–°)'
}
```

**æ€§èƒ½æç¤ºè§„èŒƒ**ï¼š
- 50-200äººï¼šæ— éœ€æç¤ºï¼Œé™é»˜ä¼˜åŒ–
- 200-1000äººï¼šæ¸©å’Œæç¤º + æ€§èƒ½ç»Ÿè®¡
- 1000+äººï¼šæ˜æ˜¾æç¤º + ä¼˜åŒ–å»ºè®®

---

## 7. æ€»ç»“ä¸è¡ŒåŠ¨è®¡åˆ’

### 7.1 æ ¸å¿ƒå‘ç°

**ä¼˜åŠ¿**ï¼š
- âœ… å‰ç«¯åˆ†é¡µæœºåˆ¶è®¾è®¡ä¼˜ç§€ï¼Œç”¨æˆ·ä½“éªŒå‹å¥½
- âœ… åŸºç¡€è¿‡æ»¤åŠŸèƒ½å®Œå–„ï¼Œè¦†ç›–æ ¸å¿ƒä½¿ç”¨åœºæ™¯
- âœ… æ€§èƒ½åˆ†çº§ç®¡ç†æ™ºèƒ½ï¼Œé€‚åº”ä¸åŒè§„æ¨¡éœ€æ±‚
- âœ… ä»£ç è´¨é‡è‰¯å¥½ï¼Œæ³¨é‡Šè¯¦ç»†ï¼Œæ˜“äºç»´æŠ¤

**ä¸è¶³**ï¼š
- âš ï¸ ç¼ºå°‘é“¾ç«¯åˆ†é¡µæ”¯æŒï¼Œå¤§è§„æ¨¡åœºæ™¯æ€§èƒ½å—é™
- âš ï¸ é«˜çº§æŸ¥è¯¢èƒ½åŠ›ä¸è¶³ï¼Œæ— æ³•æ”¯æŒå¤æ‚ç­›é€‰éœ€æ±‚
- âš ï¸ å…¨é‡åŠ è½½æ¶æ„åœ¨å¤§æ•°æ®åœºæ™¯ä¸‹å­˜åœ¨æ€§èƒ½ç“¶é¢ˆ
- âš ï¸ ç¼ºå°‘ç´¢å¼•ä¼˜åŒ–ï¼ŒæŸ¥è¯¢æ•ˆç‡æœ‰æå‡ç©ºé—´

### 7.2 è¡ŒåŠ¨ä¼˜å…ˆçº§

**ç«‹å³æ‰§è¡Œ** (æœ¬æœˆå†…):
1. æ·»åŠ é«˜çº§è¿‡æ»¤æ¡ä»¶ (æ—¥æœŸèŒƒå›´ã€åˆ†ç±»ã€å…³é”®è¯)
2. å®ç°å‰ç«¯ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘é‡å¤æŸ¥è¯¢
3. ä¼˜åŒ–åŠ è½½ç­–ç•¥ï¼Œæ”¯æŒæ‡’åŠ è½½è¯¦ç»†ä¿¡æ¯

**çŸ­æœŸè®¡åˆ’** (3ä¸ªæœˆå†…):
1. å¼€å‘é“¾ç«¯åˆ†é¡µRPCæ¥å£
2. å»ºç«‹åŸºç¡€ç´¢å¼•å­˜å‚¨ (ownerã€category)
3. å®Œå–„æ€§èƒ½ç›‘æ§å’Œç”¨æˆ·æç¤º

**é•¿æœŸè§„åˆ’** (6ä¸ªæœˆ+):
1. é›†æˆSubsquidæŸ¥è¯¢å±‚ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
2. å®ç°æµå¼æ•°æ®åŠ è½½
3. å»ºç«‹å®Œæ•´çš„æŸ¥è¯¢ä¼˜åŒ–ä½“ç³»

### 7.3 æˆåŠŸæŒ‡æ ‡

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- 1000æ¡è®°å½•åŠ è½½æ—¶é—´ < 2s
- 10000æ¡è®°å½•åˆå§‹åŠ è½½ < 5s
- å†…å­˜å ç”¨å¢é•¿ç‡ < 50% (ç›¸æ¯”å½“å‰)

**ç”¨æˆ·ä½“éªŒæŒ‡æ ‡**ï¼š
- æ”¯æŒ5ç§ä»¥ä¸Šé«˜çº§ç­›é€‰æ¡ä»¶
- å¤§è§„æ¨¡æ•°æ®åœºæ™¯ç”¨æˆ·æ»¡æ„åº¦ > 85%
- åŠ è½½å¤±è´¥ç‡ < 1%

**æŠ€æœ¯æŒ‡æ ‡**ï¼š
- ä»£ç è¦†ç›–ç‡ > 90%
- APIå“åº”æ—¶é—´ < 500ms (P95)
- ç³»ç»Ÿå¯æ‰©å±•æ€§æ”¯æŒ10ä¸‡+è®°å½•

---

**å®¡æŸ¥äºº**: Claude Code
**å®¡æŸ¥æ—¥æœŸ**: 2025-11-19
**ä¸‹æ¬¡å®¡æŸ¥**: å»ºè®®3ä¸ªæœˆåé‡æ–°è¯„ä¼°å®æ–½è¿›å±•