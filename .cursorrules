# Stardust 项目 Cursor AI 规则配置

> 本文件会在每次 Cursor AI 对话时自动加载  
> **项目**: Stardust 区块链数字纪念平台  
> **更新日期**: 2025-11-06  
> **版本**: 1.0.0

---

## 🎯 项目概述

**Stardust** 是基于区块链技术的去中心化数字纪念平台，为逝者提供永久的数字纪念馆服务。

### 核心功能
- 🏛️ 数字纪念馆：创建和管理逝者的数字纪念空间
- 🎁 虚拟供奉：在线供奉虚拟物品，表达哀思
- 💾 永久存储：基于 IPFS 的去中心化存储
- 🔐 区块链认证：基于 Substrate 的链上数据验证
- 👥 亲友共建：多人协作完善逝者生平信息

### 技术架构
- **链端**: Substrate 框架 + 自研 Pallets
- **前端**: React 18 + TypeScript + Ant Design 5
- **存储**: IPFS 去中心化存储
- **索引**: 暂时忽略 Subsquid，全局链上直连

---

## 📋 完整开发规范（26 条）

### 代码规范 (1-4)

1. **中文注释**: 所有修改、增加的源代码都用函数级详细中文注释
2. **低耦合设计**: 设计 pallet 之间要做到低耦合
3. **文档同步**: 修改 pallet 源代码后，相应的也要修改对应 pallet 的 readme.md
4. **中文沟通**: chat 对话用中文回复，不用英文

### Pallet 开发规范 (5-9, 21-22)

5. **优先官方 Pallet**: 如果有功能可以通过官方的 pallet 实现，优先选择官方的 pallet，以免重复开发
6. **CID 加密检查**: 上传到 IPFS 内容回填 CID，必须检查 CID 是否加密。除证据类数据及特殊要求不加密的数据外，其他的数据 CID 必须加密
7. **资金安全**: 必须检查并保证主网代币 DUST 的资金安全
8. **代码优化**: 必须检查是否有冗余源代码，并提出修改方案
9. **零迁移策略**: 主网没有上线，现在零迁移，无需迁移逻辑，允许破坏式调整
21. **禁止修改官方 Pallet**: 仅修改自研 pallet
22. **详细错误信息**: 链端要给前端返回详细的错误信息

### 前端开发规范 (10-14, 16, 18-20, 25-26)

10. **前端路径**: 前端设计源代码全部放在项目的 `stardust-dapp` 目录
11. **技术栈**: React 18 + TypeScript + Ant Design 5；移动端、网页端、桌面端自适应
12. **组件化设计**: 前端设计尽量用组件化设计
13. **前后端同步**: 设计修改 pallet 源代码时，必须同时优化设计前端页面，保持前端后端同步，前端写清楚使用说明
14. **用户体验**: 检查修改前端用户操作的合理性、便利性
16. **钱包集成**: 构建钱包相关功能时，全局不用浏览器扩展
18. **接口完整性**: 前端页面编码前，先查看链上对应 pallet 的可调用接口名称，保证前端页面组件功能的完整性
19. **保护旧项目**: 禁止 cursor 修改 memopark-front-end 文件夹所有内容
20. **组件化要求**: 前端设计，要求组件化
25. **统一 UI 风格**: 全局 UI 颜色方案要和欢迎、创建钱包、恢复钱包的风格一致
26. **页面类型**: 前端 memopark-governance 使用网页端页面，不是移动端

### 其他规范 (15, 17, 23-24)

15. **Subsquid**: Subsquid 相关源代码放到 memopark-squid 文件夹
17. **游戏扩展**: 编码时，保留后续可扩展，用于开发宠物养成类游戏的相关代码，及时提出分析方案
23. **文档管理**: 项目根目录下的新创建的 .md 文件，放到项目根目录下的 docs 文件夹
24. **全局链上直连**: 全局链上直连，暂时忽略 Subsquid

---

## 🎨 色彩方案（纪念主题）

**重要**: 所有前端设计必须遵循以下配色方案

| 颜色类型 | 色值 | 含义 | 使用场景 |
|---------|------|------|---------|
| **主色** | `#B8860B` | 庄重、永恒 | 主要按钮、标题、品牌元素 |
| **辅色** | `#2F4F4F` | 生命、希望 | 次要按钮、导航、辅助信息 |
| **强调色** | `#DC143C` | 祭品、献花 | 重要操作、供奉元素、警示 |
| **背景色** | `#F5F5DC` | 温暖、怀念 | 页面背景、卡片背景 |

### 渐变配色

```css
/* 主色渐变 */
linear-gradient(135deg, #B8860B 0%, #D4AF37 100%)

/* 辅色渐变 */
linear-gradient(135deg, #2F4F4F 0%, #4A7A7A 100%)

/* Hero 区域渐变 */
linear-gradient(135deg, #B8860B 0%, #2F4F4F 50%, #B8860B 100%)
```

### 设计规范

- **圆角**: 8px（普通）、12px（卡片）、16px（大卡片）
- **阴影**:
  - Small: `0 2px 8px rgba(0, 0, 0, 0.1)`
  - Medium: `0 4px 16px rgba(0, 0, 0, 0.15)`
  - Large: `0 8px 24px rgba(0, 0, 0, 0.2)`
- **间距**: 8px 基准，使用 8 的倍数（16/24/32/40/48）
- **字体大小**: 12/14/16/18/20/24/30/36/48px

### 响应式断点

- **移动端**: < 576px
- **平板端**: 576px - 768px
- **桌面端**: > 768px
- **大屏**: > 1200px

---

## 💻 技术栈详解

### 链端技术

- **框架**: Substrate（Polkadot 生态）
- **语言**: Rust
- **共识**: PoA（权威证明）
- **存储**: IPFS + 链上索引
- **自研 Pallets**:
  - `pallet-memo-grave`: 纪念馆管理
  - `pallet-deceased`: 逝者信息管理
  - `pallet-offering`: 供奉功能
  - `pallet-credit`: 信用体系
  - 其他业务 pallets

### 前端技术

- **框架**: React 18.x
- **语言**: TypeScript 5.x
- **UI 库**: Ant Design 5.x
- **状态管理**: React Hooks + Context API
- **路由**: React Router v6
- **区块链交互**: Polkadot.js API
- **样式**: CSS Modules + CSS Variables
- **构建工具**: Vite 或 Create React App

### 前端约束

- ✅ 移动端、网页端、桌面端自适应
- ✅ 组件化设计
- ✅ 不使用浏览器扩展钱包
- ✅ 全局链上直连
- ✅ 保持与钱包页面风格一致

### 存储技术

- **IPFS**: 去中心化文件存储
- **链上索引**: CID 记录在区块链
- **加密策略**: 除证据类数据外，其他数据 CID 需加密

---

## 📁 项目结构与路径

### 项目根目录
```
/home/xiaodong/文档/stardust/
```

### 前端目录结构
```
stardust-dapp/
├── src/
│   ├── features/          # 功能模块
│   │   ├── home/         # 首页（ModernHomePage）
│   │   ├── grave/        # 纪念馆
│   │   ├── deceased/     # 逝者信息
│   │   ├── offerings/    # 供奉
│   │   ├── auth/         # 认证
│   │   └── ...
│   ├── components/        # 通用组件
│   ├── services/          # API 服务
│   ├── utils/            # 工具函数
│   └── routes.tsx        # 路由配置
├── docs/                 # 文档目录
│   ├── 新版首页设计说明.md
│   ├── 首页使用指南.md
│   └── ...
└── public/               # 静态资源
```

### 链端目录结构
```
runtime/
├── src/
│   └── lib.rs           # Runtime 配置
pallets/
├── memo-grave/          # 纪念馆 pallet
├── deceased/            # 逝者 pallet
├── offering/            # 供奉 pallet
├── credit/              # 信用 pallet
└── ...
```

### 文档目录
```
docs/                    # 项目根目录下的文档
├── 项目索引.md
└── ...
```

---

## 🏠 前端首页设计要点

### 页面结构（ModernHomePage）

1. **Hero 横幅区域**（460px）
   - 轮播图展示或默认欢迎界面
   - 三色渐变背景：墨绿 → 深金 → 朱红
   - 支持点击跳转（纪念馆/逝者/分类）

2. **统计数据卡片**（4 个核心指标）
   - 📍 纪念馆总数
   - 🎁 供奉次数
   - 👤 活跃用户
   - ❤️ 珍贵记忆
   - 向上偏移 30px 与 Hero 重叠

3. **快捷操作区域**（4 个入口）
   - 🏛️ 创建纪念馆 → `#/grave/create`（需登录）
   - 🎁 我要供奉 → `#/offerings/timeline`（公开）
   - 🔍 探索纪念馆 → `#/deceased/list`（公开）
   - 💼 我的纪念馆 → `#/grave/my`（需登录）

4. **平台特色展示**（4 大优势）
   - 🔥 永久存储（IPFS）
   - 🏆 区块链认证（Substrate）
   - 👥 亲友共建（多人协作）
   - ❤️ 虚拟供奉（在线表达）

5. **探索与发现**
   - 热门纪念馆（左侧，复用 HotGravesList）
   - 最近供奉（右侧，复用 RecentOfferingsTimeline）

6. **底部信息区域**
   - 关于我们、快速链接、技术支持、钱包连接状态

### 动画效果

- **淡入动画**: 从下方 30px 淡入 + 缩放（0.95 → 1）
- **悬停效果**: 上浮 8-10px + 缩放 1.02-1.03 + 阴影增强
- **脉冲动画**: Hero 区按钮 2s 循环
- **缓动函数**: cubic-bezier(0.4, 0, 0.2, 1)

### 文件位置
```
stardust-dapp/src/features/home/
├── ModernHomePage.tsx      # 新版首页主组件
├── ModernHomePage.css      # 新版首页样式
└── HomePage.tsx            # 旧版首页（保留）
```

### 路由配置
- **新版首页**: `#/home` 或 `#/`
- **旧版首页**: `#/home-old`

---

## ⚠️ 关键约束与安全

### 必须遵守

1. ❌ **禁止修改** `memopark-front-end` 文件夹内容
2. ❌ **禁止修改**官方 pallet，仅修改自研 pallet
3. ✅ **必须检查** DUST 代币资金安全
4. ✅ **必须加密** 非证据类数据的 CID
5. ✅ **必须同步**前后端功能和文档

### 最佳实践

1. 所有代码使用**函数级中文注释**
2. Pallet 之间保持**低耦合**
3. 修改代码后**同步更新文档**
4. 前端设计遵循**组件化原则**
5. 保持**统一的 UI 风格**

---

## 📚 重要文档索引

### 前端首页相关


### 做市商与 OTC 相关


### SDK 与 API 相关


### 项目索引
- `项目索引.md` - 项目完整信息汇总

---

## 🚀 快速命令

### 前端开发
```bash
# 进入前端目录
cd /home/xiaodong/文档/stardust/stardust-dapp

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

### 链端开发
```bash
# 构建链
cargo build --release

# 运行开发链
./target/release/node-template --dev

# 清理状态
./target/release/node-template purge-chain --dev
```

---

## 💡 AI 助手使用提示

### 与 AI 对话时的默认行为

1. **中文回复**: 所有对话必须用中文
2. **函数级注释**: 所有生成的代码必须包含详细的中文注释
3. **组件化优先**: 前端设计优先考虑组件复用
4. **低耦合设计**: 链端 pallet 设计保持独立性
5. **文档同步**: 修改代码后主动提醒更新对应文档

### 常见任务处理方式

**修改 Pallet 时**:
- ✅ 检查资金安全
- ✅ 检查 CID 加密
- ✅ 更新 pallet readme.md
- ✅ 提供前端调用示例
- ✅ 返回详细错误信息

**设计前端页面时**:
- ✅ 遵循色彩方案
- ✅ 组件化设计
- ✅ 响应式适配
- ✅ 查看链上可调用接口
- ✅ 编写使用说明

**创建文档时**:
- ✅ 保存到 `docs/` 目录
- ✅ 使用 markdown 格式
- ✅ 包含完整的目录结构
- ✅ 添加示例代码

---

## 📞 联系信息

- **项目路径**: `/home/xiaodong/文档/stardust/`
- **前端项目**: `stardust-dapp/`
- **文档中心**: `stardust-dapp/docs/` 和 `docs/`
- **规则配置**: `.cursorrules`（本文件）

---

**维护者**: Stardust 开发团队  
**配置版本**: 1.0.0  
**最后更新**: 2025-11-06

---

🌟 **此文件会在每次 Cursor AI 对话时自动加载，无需手动 @**

